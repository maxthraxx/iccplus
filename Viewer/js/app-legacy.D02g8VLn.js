!function(){var e=["onError","onSuccess"];function t(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],o=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}}}throw new TypeError(d(e)+" is not iterable")}function o(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,b(i.key),i)}}function i(e,t,o){return t=c(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,o||[],c(e).constructor):t.apply(e,o))}function n(e){var t="function"==typeof Map?new Map:void 0;return n=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return function(e,t,o){if(r())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var n=new(e.bind.apply(e,i));return o&&a(n,o.prototype),n}(e,arguments,c(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),a(o,e)},n(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r=function(){return!!e})()}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",n=o.toStringTag||"@@toStringTag";function r(o,i,n,r){var l=i&&i.prototype instanceof c?i:c,d=Object.create(l.prototype);return s(d,"_invoke",function(o,i,n){var r,c,l,s=0,d=n||[],u=!1,v={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,o){return r=t,c=0,l=e,v.n=o,a}};function f(o,i){for(c=o,l=i,t=0;!u&&s&&!n&&t<d.length;t++){var n,r=d[t],f=v.p,g=r[2];o>3?(n=g===i)&&(l=r[(c=r[4])?5:(c=3,3)],r[4]=r[5]=e):r[0]<=f&&((n=o<2&&f<r[1])?(c=0,v.v=i,v.n=r[1]):f<g&&(n=o<3||r[0]>i||i>g)&&(r[4]=o,r[5]=i,v.n=g,c=0))}if(n||o>1)return a;throw u=!0,i}return function(n,d,g){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&f(d,g),c=d,l=g;(t=c<2?e:l)||!u;){r||(c?c<3?(c>1&&(v.n=-1),f(c,l)):v.n=l:v.v=l);try{if(s=2,r){if(c||(n="next"),t=r[n]){if(!(t=t.call(r,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=r.return)&&t.call(r),c<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),c=1);r=e}else if((t=(u=v.n<0)?l:o.call(i,v))!==a)break}catch(t){r=e,c=1,l=t}finally{s=1}}return{value:t,done:u}}}(o,n,r),!0),d}var a={};function c(){}function d(){}function u(){}t=Object.getPrototypeOf;var v=[][i]?t(t([][i]())):(s(t={},i,function(){return this}),t),f=u.prototype=c.prototype=Object.create(v);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,s(e,n,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=u,s(f,"constructor",u),s(u,"constructor",d),d.displayName="GeneratorFunction",s(u,n,"GeneratorFunction"),s(f),s(f,n,"Generator"),s(f,i,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),(l=function(){return{w:r,m:g}})()}function s(e,t,o,i){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}s=function(e,t,o,i){if(t)n?n(e,t,{value:o,enumerable:!i,configurable:!i,writable:!i}):e[t]=o;else{var r=function(t,o){s(e,t,function(e){return this._invoke(t,o,e)})};r("next",0),r("throw",1),r("return",2)}},s(e,t,o,i)}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e,t,o,i,n,r,a){try{var c=e[r](a),l=c.value}catch(e){return void o(e)}c.done?t(l):Promise.resolve(l).then(i,n)}function v(e){return function(){var t=this,o=arguments;return new Promise(function(i,n){var r=e.apply(t,o);function a(e){u(r,i,n,a,c,"next",e)}function c(e){u(r,i,n,a,c,"throw",e)}a(void 0)})}}function f(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i,n,r,a,c=[],l=!0,s=!1;try{if(r=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;l=!1}else for(;!(l=(i=r.call(o)).done)&&(c.push(i.value),c.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{if(!l&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(s)throw n}}return c}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(Object(o),!0).forEach(function(t){h(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function h(e,t,o){return(t=b(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function b(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function w(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=T(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(c)throw r}}}}function T(e,t){if(e){if("string"==typeof e)return I(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=Array(t);o<t;o++)i[o]=e[o];return i}System.register(["./chunk-vendors-legacy.kA-pJvie.js"],function(r,c){"use strict";var s,u,m,b,T,I,y,x,S,C,B,O,A,k,M,F,R,j,D,P,$,q,V,L,N,W,E,U,z,G,_,H,Y,J,Z,X,K,Q,ee,te,oe,ie,ne,re,ae,ce,le,se,de,ue,ve,fe,ge,me,pe,he,be,we,Te,Ie,ye,xe,Se,Ce,Be,Oe,Ae,ke,Me,Fe,Re,je,De,Pe,$e,qe,Ve,Le,Ne,We,Ee,Ue,ze,Ge,_e,He,Ye,Je,Ze,Xe,Ke,Qe,et,tt,ot,it,nt,rt,at,ct,lt,st,dt,ut,vt,ft;return{setters:[function(e){s=e.p,u=e.a,m=e.u,b=e.o,T=e.f,I=e.h,y=e.b,x=e.c,S=e.d,C=e.g,B=e.s,O=e.e,A=e.i,k=e.j,M=e.k,F=e.l,R=e.m,j=e.n,D=e.t,P=e.q,$=e.S,q=e.r,V=e.v,L=e.w,N=e.x,W=e.y,E=e.z,U=e.A,z=e.B,G=e.C,_=e.D,H=e.E,Y=e.F,J=e.G,Z=e.H,X=e.I,K=e.J,Q=e.K,ee=e.L,te=e.M,oe=e.N,ie=e.O,ne=e.P,re=e.Q,ae=e.R,ce=e.T,le=e.U,se=e.V,de=e.W,ue=e.X,ve=e.Y,fe=e.Z,ge=e._,me=e.$,pe=e.a0,he=e.a1,be=e.a2,we=e.a3,Te=e.a4,Ie=e.a5,ye=e.a6,xe=e.a7,Se=e.a8,Ce=e.a9,Be=e.aa,Oe=e.ab,Ae=e.ac,ke=e.ad,Me=e.ae,Fe=e.af,Re=e.ag,je=e.ah,De=e.ai,Pe=e.aj,$e=e.ak,qe=e.al,Ve=e.am,Le=e.an,Ne=e.ao,We=e.ap,Ee=e.aq,Ue=e.ar,ze=e.as,Ge=e.at,_e=e.au,He=e.av,Ye=e.aw,Je=e.ax,Ze=e.ay,Xe=e.az,Ke=e.aA,Qe=e.aB,et=e.aC,tt=e.aD,ot=e.aE,it=e.aF,nt=e.aG,rt=e.aH,at=e.aI,ct=e.aJ,lt=e.aK,st=e.aL,dt=e.aM,ut=e.aN,vt=e.aO,ft=e.aP}],execute:function(){var r=document.createElement("style");r.textContent="html,body,#app,#lm{height:100%}#backpackDialog{max-height:calc(90vh - 100px)}img{padding-right:0!important;padding-left:0!important;width:100%}.fadeOverlay{position:fixed;top:0;left:0;width:100%;height:100%;opacity:0;pointer-events:none;z-index:10000}.ab-0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100%;max-width:100%;position:relative;background-position:center;background-attachment:fixed}.s-main{height:100%}.m-half{margin:.125rem!important}.mt-half{margin-top:.125rem!important}.ml-half{margin-left:.125rem!important}.mr-half{margin-right:.125rem!important}.mb-half{margin-bottom:.125rem!important}.m-n1{margin:-.25rem!important}.m-n2{margin:-.5rem!important}.m-n3{margin:-1rem!important}.m-n4{margin:-1.5rem!important}.m-n5{margin:-3rem!important}.mt-n1{margin-top:-.25rem!important}.mt-n2{margin-top:-.5rem!important}.mt-n3{margin-top:-1rem!important}.mt-n4{margin-top:-1.5rem!important}.mt-n5{margin-top:-3rem!important}.ml-n1{margin-left:-.25rem!important}.ml-n2{margin-left:-.5rem!important}.ml-n3{margin-left:-1rem!important}.ml-n4{margin-left:-1.5rem!important}.ml-n5{margin-left:-3rem!important}.mr-n1{margin-right:-.25rem!important}.mr-n2{margin-right:-.5rem!important}.mr-n3{margin-right:-1rem!important}.mr-n4{margin-right:-1.5rem!important}.mr-n5{margin-right:-3rem!important}.mb-n1{margin-bottom:-.25rem!important}.mb-n2{margin-bottom:-.5rem!important}.mb-n3{margin-bottom:-1rem!important}.mb-n4{margin-bottom:-1.5rem!important}.mb-n5{margin-bottom:-3rem!important}.h-100{height:100%!important}.w-auto{width:auto!important}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.align-center{align-items:center}.list-text{font-size:.8125rem;font-weight:500;line-height:1rem}.dialog-title{font-size:1.5rem}.d-column{display:flex;flex-direction:column;flex-wrap:wrap}.d-row{display:flex;flex-direction:row}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-space-around{justify-content:space-around}.justify-space-between{justify-content:space-between}.dialog-actions--btn{color:#43a047}.mdc-dialog__title:focus{outline:none}.mdc-text-field,.mdc-button{width:100%}.mdc-floating-label{font-size:.9125rem}.mdc-select{width:100%}.mdc-snackbar{top:0;bottom:auto}.no-shadow{box-shadow:none}.mdc-form-field{font-size:1rem}.mdc-form-field>label{cursor:pointer}.mdc-tooltip{pointer-events:none}.smui-autocomplete__menu{max-width:100%}.toolbar{width:100%;font-size:24px;display:flex;flex-direction:row;align-items:center;overflow:auto}.toolbar__title{font-family:Roboto,sans-serif;font-size:1.25rem;line-height:1.5}.toolbar__dialog{font-size:.875rem}.point-slot{border-radius:4px}.disabled{pointer-events:none;opacity:.5}.hidden{display:none!important}.transparent{pointer-events:none;opacity:0}.preview-image{cursor:pointer}.mdc-deprecated-list-divider{border-bottom-color:currentColor}.btn--image-background{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:none;font:inherit;color:inherit;width:100%}.btn--image{width:100%;height:auto;object-fit:contain;object-position:center}.pointBar{height:56px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px rgba(0,0,0,.14),0 1px 10px rgba(0,0,0,.12)}.mdc-drawer--mini{position:fixed;width:56px;transition:width .2s}.mdc-drawer--mini:hover{width:256px}.navigation-drawer{display:flex;flex-direction:column;justify-content:space-between}.pointbar-icons{font-size:32px;padding:0}.pointbar-center--viewer{flex:1 0 auto!important;max-width:calc(90vw - 96px);overflow-x:auto;overflow-y:hidden;white-space:nowrap;padding:0;justify-content:space-around}.counter-icons{width:36px;height:36px;font-size:.875rem;overflow:hidden}.button-icons{font-size:24px!important}.mdc-chip--small{font-size:12px;border-radius:12px;height:24px}.mdi--small{font-size:12px!important}.mdi--normal{font-size:18px!important}.mdi--big{font-size:24px!important}.smui-chip-input__container{padding-top:20px!important;padding-left:12px!important;padding-right:12px!important}.mdi{font-family:Material Design Icons;line-height:1}.mdc-deprecated-list-item__graphic{font-size:24px}.switch-scale{--mdc-ripple-fg-scale: 1.45 !important;margin:8px}.check-scale{--mdc-checkbox-touch-target-size: 32px}.b-line{border-bottom:1px solid #e9ecef}.floating-button-container{position:relative;width:100%}.floating-button{position:absolute;z-index:1;top:50%;right:5px;transform:translateY(-50%)}.spacer{margin-left:auto}.hide-file-ui input[type=file]::file-selector-button{display:none}.hide-file-ui input[type=file]:not(.mdc-text-field--label-floating){color:transparent}.line-default{line-height:1}.row-cm{margin:0 1% 25px}.fullHeight{display:flex;height:100%;align-content:start}.w-20{-webkit-box-flex:0;-ms-flex:0 0 20%!important;flex:0 0 20%!important;max-width:20%}.w-14{-webkit-box-flex:0;-ms-flex:0 0 14.28%!important;flex:0 0 14.28%!important;max-width:14.28%}.w-12{-webkit-box-flex:0;-ms-flex:0 0 12.5%!important;flex:0 0 12.5%!important;max-width:12.5%}.w-11{-webkit-box-flex:0;-ms-flex:0 0 11%!important;flex:0 0 11%!important;max-width:11%}.w-10{-webkit-box-flex:0;-ms-flex:0 0 10%!important;flex:0 0 10%!important;max-width:10%}.w-9{-webkit-box-flex:0;-ms-flex:0 0 9.09%!important;flex:0 0 9.09%!important;max-width:9.09%}.bordered-panel{border-top-width:1px!important;margin:0!important}.mdc-form-field>label{width:100%}.bg-overlay{background-blend-mode:overlay}.on-top{z-index:99999!important}.create-box{display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;color:gray;border:2px grey dashed;border-radius:10px;height:100%}.save-slot{border:1px grey solid}.textbox-mini{height:40px}.textbox-mini:before{height:24px}.panel--active,.mdc-tab--active .mdc-tab__text-label{color:#1976d2}.mdc-tab-indicator--active .mdc-tab-indicator__content--underline{border-color:#1976d2}.slider{max-width:104px;width:100%;height:32px}.mdc-slider,.mdc-slider .mdc-slider__thumb{height:32px}.mdc-slider .mdc-slider__thumb-knob{border:none;width:12px;height:12px}.mdc-slider .mdc-slider__track,.mdc-slider .mdc-slider__track--inactive{height:2px}.mdc-slider .mdc-slider__track--active{top:0;height:2px}.music-player{top:0;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px rgba(0,0,0,.14),0 1px 10px rgba(0,0,0,.12);font-family:Roboto,sans-serif}.music-player--row{height:32px}.music-player--button{font-size:24px!important}.scrolling-text{display:inline-block;white-space:nowrap;min-width:150px;animation:scrollText 10s linear infinite}.viewer-menu{height:48px}@keyframes scrollText{0%{transform:translate(150px)}to{transform:translate(-100%)}}.picture-input.svelte-k98dno{width:100%;margin:0 auto;text-align:center}.preview-container.svelte-k98dno{width:100%;box-sizing:border-box;margin:0 auto;cursor:pointer;overflow:hidden;transform:translateZ(0)}.picture-preview.svelte-k98dno{width:100%;height:100%;position:relative;z-index:10001;box-sizing:border-box;background-color:rgba(200,200,200,.25)}.picture-preview.dragging-over.svelte-k98dno{filter:brightness(.5)}.picture-inner.svelte-k98dno{position:relative;z-index:10002;pointer-events:none;box-sizing:border-box;margin:1em auto;padding:.5em;border:.3em dashed rgba(66,66,66,.15);border-radius:8px;width:calc(100% - 2.5em);height:calc(100% - 2.5em);display:table}.picture-inner.svelte-k98dno .picture-inner-text:where(.svelte-k98dno){display:table-cell;vertical-align:middle;text-align:center;font-size:2em;line-height:1.5}input[type=file].svelte-k98dno{display:none}img.svelte-1br61l5{display:block;width:100%}\n/*$vite$:1*/",document.head.appendChild(r);var c=s({anchor:null,text:"",isVisible:!0}),gt=T('<div class="mdc-tooltip" role="tooltip" style="z-index: 9999;"><div class="mdc-tooltip__surface"><!></div></div>');var mt=T("<div><!></div>");var pt=function(e,t){u(t,!0);var o,i=M(t,"text",3,""),n=M(t,"innerClass",3,"");function r(){c.anchor=o,c.text=i(),c.isVisible=!0}function a(){c.isVisible=!1}F(function(){return o.addEventListener("mouseenter",r),o.addEventListener("mouseleave",a),o.addEventListener("focusin",r),o.addEventListener("focusout",a),function(){o.removeEventListener("mouseenter",r),o.removeEventListener("mouseleave",a),o.removeEventListener("focusin",r),o.removeEventListener("focusout",a)}});var l=mt(),s=k(l);R(s,function(){var e;return null!==(e=t.children)&&void 0!==e?e:j}),y(l,function(e){return o=e},function(){return o}),D(function(){var e;return P(l,1,"p-0 m-0 ".concat(null!==(e=n())&&void 0!==e?e:""))}),x(e,l),S()};
/*!
			 * canvas-size
			 * v2.0.0
			 * https://github.com/jhildenbiddle/canvas-size
			 * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
			 * MIT license
			 */function ht(e){var t,o,i=e.sizes.shift(),n=Math.max(Math.ceil(i[0]),1),r=Math.max(Math.ceil(i[1]),1),a=[n-1,r-1,1,1],c=performance.now(),l="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;l?(t=new OffscreenCanvas(1,1),o=new OffscreenCanvas(n,r)):((t=document.createElement("canvas")).width=1,t.height=1,(o=document.createElement("canvas")).width=n,o.height=r);var s=t.getContext("2d"),d=o.getContext("2d");d&&(d.fillRect.apply(d,a),s.drawImage(o,n-1,r-1,1,1,0,0,1,1));var u=s&&0!==s.getImageData(0,0,1,1).data[3],v=parseInt(performance.now()-c);return[t,o].forEach(function(e){e.height=0,e.width=0}),l?(postMessage({width:n,height:r,testTime:v,isTestPass:u}),!u&&e.sizes.length&&setTimeout(function(){ht(e)},0)):u?e.onSuccess({width:n,height:r,testTime:v}):(e.onError({width:n,height:r,testTime:v}),e.sizes.length&&setTimeout(function(){ht(e)},0)),u}var bt=[16384,14188,11402,11180,10836,8192,4096,1],wt={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},Tt={};function It(e){var t=e.width===e.height,o=1===e.height,i=1===e.width,n=[];if(e.width&&e.height)for(var r=e.min||wt.min,a=e.step||wt.step,c=Math.max(e.width,e.height);c>=r;){var l=t||o?c:1,s=t||i?c:1;n.push([l,s]),c-=a}else e.sizes.forEach(function(e){var r=t||o?e:1,a=t||i?e:1;n.push([r,a])});return n}function yt(t){var o="undefined"!=typeof window,i=o&&"Promise"in window,n=o&&"HTMLCanvasElement"in window,r=o&&"OffscreenCanvas"in window,a=URL.createObjectURL(new Blob([])).slice(-36),c=performance.now(),l=t.onError,s=t.onSuccess,d=function(e,t){if(null==e)return{};var o,i,n=function(e,t){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;o[i]=e[i]}return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)o=r[i],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}(t,e),u=function(){return parseInt(performance.now()-c)},v=null;if(!n)return!1;if(t.useWorker&&r){var f="\n            var canvasTest = ".concat(ht.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),m=new Blob([f],{type:"application/javascript"}),h=URL.createObjectURL(m);v=new Worker(h),URL.revokeObjectURL(h),v.onmessage=function(e){var t=e.data,o=t.width,i=t.height,n=t.testTime,r=t.isTestPass,c={width:o,height:i,testTime:n,totalTime:u()};r?(Tt[a].onSuccess(c),delete Tt[a]):Tt[a].onError(c)}}return i?new Promise(function(e){var o=p(p({},t),{},{onError:function(o){var i,n=o.width,r=o.height,a={width:n,height:r,testTime:o.testTime,totalTime:u()};if(0===t.sizes.length)i=!0;else{var c=g(t.sizes.slice(-1),1),s=g(c[0],2),d=s[0],v=s[1];i=n===d&&r===v}l(a),i&&e(p(p({},a),{},{success:!1}))},onSuccess:function(t){var o={width:t.width,height:t.height,testTime:t.testTime,totalTime:u()};s(o),e(p(p({},o),{},{success:!0}))}});if(v){var i=o.onError,n=o.onSuccess;Tt[a]={onError:i,onSuccess:n},v.postMessage(d)}else ht(o)}):v?(Tt[a]={onError:l,onSuccess:s},void v.postMessage(d)):ht(t)}var xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=It({width:e.max,height:e.max,min:e.min,step:e.step,sizes:f(bt)});return yt(p(p(p({},wt),e),{},{sizes:t}))},St="2.1.0",Ct={selFilterBlurIsOn:!1,selFilterBlur:0,selFilterBrightIsOn:!1,selFilterBright:100,selFilterContIsOn:!1,selFilterCont:100,selFilterGrayIsOn:!1,selFilterGray:0,selFilterHueIsOn:!1,selFilterHue:0,selFilterInvertIsOn:!1,selFilterInvert:0,selFilterOpacIsOn:!1,selFilterOpac:100,selFilterSaturIsOn:!1,selFilterSatur:1,selFilterSepiaIsOn:!1,selFilterSepia:0,selBgColorIsOn:!0,selOverlayOnImage:!1,selFilterBgColor:"#70FF7EFF",selBorderColorIsOn:!1,selFilterBorderColor:"#000000FF",selCTitleColorIsOn:!1,selFilterCTitleColor:"#000000FF",selCTextColorIsOn:!1,selFilterCTextColor:"#000000FF",selATitleColorIsOn:!1,selFilterATitleColor:"#000000FF",selATextColorIsOn:!1,selFilterATextColor:"#000000FF",selScoreTextColorIsOn:!1,selFilterSTextColor:"#000000FF",reqFilterBlurIsOn:!1,reqFilterBlur:0,reqFilterBrightIsOn:!1,reqFilterBright:100,reqFilterContIsOn:!1,reqFilterCont:100,reqFilterGrayIsOn:!1,reqFilterGray:0,reqFilterHueIsOn:!1,reqFilterHue:0,reqFilterInvertIsOn:!1,reqFilterInvert:0,reqFilterOpacIsOn:!0,reqFilterOpac:50,reqFilterSaturIsOn:!1,reqFilterSatur:1,reqFilterSepiaIsOn:!1,reqFilterSepia:0,reqBgColorIsOn:!1,reqOverlayOnImage:!1,reqFilterBgColor:"#FFFFFFFF",reqBorderColorIsOn:!1,reqFilterBorderColor:"#000000FF",reqCTitleColorIsOn:!1,reqFilterCTitleColor:"#000000FF",reqCTextColorIsOn:!1,reqFilterCTextColor:"#000000FF",reqATitleColorIsOn:!1,reqFilterATitleColor:"#000000FF",reqATextColorIsOn:!1,reqFilterATextColor:"#000000FF",reqScoreTextColorIsOn:!1,reqFilterSTextColor:"#000000FF",reqFilterVisibleIsOn:!1,unselFilterBlurIsOn:!1,unselFilterBlur:0,unselFilterBrightIsOn:!1,unselFilterBright:100,unselFilterContIsOn:!1,unselFilterCont:100,unselFilterGrayIsOn:!1,unselFilterGray:0,unselFilterHueIsOn:!1,unselFilterHue:0,unselFilterInvertIsOn:!1,unselFilterInvert:0,unselFilterOpacIsOn:!1,unselFilterOpac:100,unselFilterSaturIsOn:!1,unselFilterSatur:1,unselFilterSepiaIsOn:!1,unselFilterSepia:0},Bt={customRowTitle:!1,rowTitle:"Times New Roman",customRowText:!1,rowText:"Times New Roman",customObjectTitle:!1,objectTitle:"Times New Roman",customObjectText:!1,objectText:"Times New Roman",customAddonTitle:!1,addonTitle:"Times New Roman",customAddonText:!1,addonText:"Times New Roman",customScoreText:!1,scoreText:"Times New Roman",rowTitleTextSize:200,rowTextTextSize:100,objectTitleTextSize:200,objectTextTextSize:100,addonTitleTextSize:200,addonTextTextSize:100,scoreTextSize:75,rowTitleColor:"#000000",rowTextColor:"#000000",objectTitleColor:"#000000",objectTextColor:"#000000",addonTitleColor:"#000000",addonTextColor:"#000000",scoreTextColor:"#000000",rowTitleAlign:"center",rowTextAlign:"center",objectTitleAlign:"center",objectTextAlign:"center",addonTitleAlign:"center",addonTextAlign:"center",scoreTextAlign:"center"},Ot={objectImgBorderStyle:"solid",objectImgBorderWidth:2,objectImageWidth:100,objectImageMarginTop:0,objectImageMarginBottom:0,objectImgBorderRadiusTopLeft:0,objectImgBorderRadiusTopRight:0,objectImgBorderRadiusBottomRight:0,objectImgBorderRadiusBottomLeft:0,objectImgBorderRadiusIsPixels:!0,objectImgBorderIsOn:!1,objectImgOverflowIsOn:!1,objectImgBorderColor:"red",objectImgObjectFillStyle:"",objectImgObjectFillIsOn:!1,objectImageBoxWidth:50},At={rowImgBorderStyle:"solid",rowImgBorderWidth:2,rowImageWidth:100,rowImageMarginTop:0,rowImageMarginBottom:0,rowImgBorderRadiusTopLeft:0,rowImgBorderRadiusTopRight:0,rowImgBorderRadiusBottomRight:0,rowImgBorderRadiusBottomLeft:0,rowImgBorderRadiusIsPixels:!0,rowImgBorderIsOn:!1,rowImgOverflowIsOn:!1,rowImgBorderColor:"red",rowImageBoxWidth:50},kt={useAddonImage:!1,addonImgBorderStyle:"solid",addonImgBorderWidth:2,addonImageWidth:100,addonImageMarginTop:0,addonImageMarginBottom:0,addonImgBorderRadiusTopLeft:0,addonImgBorderRadiusTopRight:0,addonImgBorderRadiusBottomRight:0,addonImgBorderRadiusBottomLeft:0,addonImgBorderRadiusIsPixels:!0,addonImgBorderIsOn:!1,addonImgOverflowIsOn:!1,addonImgBorderColor:"red",addonImgObjectFillStyle:"",addonImgObjectFillIsOn:!1,addonImageBoxWidth:50},Mt={bgColorIsOn:!1,backgroundColor:"#FFFFFFFF",rowBgColorIsOn:!1,rowBgColor:"#FFFFFFFF",objectBgColorIsOn:!1,objectBgColor:"#FFFFFFFF",isBackgroundRepeat:!1,isBackgroundFitIn:!1,backgroundImage:"",isRowBackgroundRepeat:!1,isRowBackgroundFitIn:!1,rowBackgroundImage:"",isObjectBackgroundRepeat:!1,isObjectBackgroundFitIn:!1,objectBackgroundImage:""},Ft={objectHeight:!0,objectDesignIsAdvanced:!1,objectMargin:10,objectTextPadding:10,objectBorderStyle:"solid",objectBorderWidth:2,objectBorderIsOn:!1,objectDropShadowH:0,objectDropShadowV:0,objectDropShadowBlur:0,objectDropShadowSpread:0,objectDropShadowIsOn:!1,objectUseBoxShadowIsOn:!1,objectBorderRadiusTopLeft:0,objectBorderRadiusTopRight:0,objectBorderRadiusBottomRight:0,objectBorderRadiusBottomLeft:0,objectBorderRadiusIsPixels:!0,objectOverflowIsOn:!0,objectDropShadowColor:"grey",objectGradientIsOn:!1,objectGradient:"",objectGradientOnSelect:"",objectGradientOnReq:"",objectBorderColor:"red",objectBorderImage:"",objectBorderImageRepeat:"stretch",objectBorderImageWidth:5,objectBorderImageSliceTop:5,objectBorderImageSliceBottom:5,objectBorderImageSliceLeft:5,objectBorderImageSliceRight:5,removeSpaceAddonIsOn:!1,titlePaddingIsOn:!1},Rt={rowDesignIsAdvanced:!1,rowMargin:10,rowBodyMarginSides:1,rowBodyMarginTop:25,rowBodyMarginBottom:25,rowTextPaddingY:5,rowTextPaddingX:10,rowOverflowIsOn:!0,rowDropShadowH:0,rowDropShadowV:0,rowDropShadowBlur:0,rowDropShadowSpread:0,rowDropShadowColor:"grey",rowButtonXPadding:0,rowButtonYPadding:0,rowDropShadowIsOn:!1,rowUseBoxShadowIsOn:!1,rowBorderRadiusTopLeft:0,rowBorderRadiusTopRight:0,rowBorderRadiusBottomRight:0,rowBorderRadiusBottomLeft:0,rowBorderRadiusIsPixels:!0,rowBorderStyle:"solid",rowBorderWidth:2,rowBorderIsOn:!1,rowBorderColor:"red",rowGradientIsOn:!1,rowGradient:"",rowBorderImage:"",rowBorderImageRepeat:"stretch",rowBorderImageWidth:5,rowBorderImageSliceTop:5,rowBorderImageSliceBottom:5,rowBorderImageSliceLeft:5,rowBorderImageSliceRight:5},jt={useAddonDesign:!1,addonDesignIsAdvanced:!1,addonMargin:10,addonTextPadding:10,addonBorderStyle:"solid",addonBorderWidth:2,addonBorderIsOn:!1,addonDropShadowH:0,addonDropShadowV:0,addonDropShadowBlur:0,addonDropShadowSpread:0,addonDropShadowIsOn:!1,addonUseBoxShadowIsOn:!1,addonBorderRadiusTopLeft:0,addonBorderRadiusTopRight:0,addonBorderRadiusBottomRight:0,addonBorderRadiusBottomLeft:0,addonBorderRadiusIsPixels:!0,addonOverflowIsOn:!0,addonDropShadowColor:"grey",addonGradientIsOn:!1,addonGradient:"",addonGradientOnSelect:"",addonGradientOnReq:"",addonBorderColor:"red",addonBorderImage:"",addonBorderImageRepeat:"stretch",addonBorderImageWidth:5,addonBorderImageSliceTop:5,addonBorderImageSliceBottom:5,addonBorderImageSliceLeft:5,addonBorderImageSliceRight:5,useAddonBackgroundImage:!1,addonBackgroundImage:"",isAddonBackgroundFitIn:!1,isAddonBackgroundRepeat:!1,addonBgColorIsOn:!1,addonBgColor:"#FFFFFFFF",addonTitlePaddingIsOn:!1},Dt={customMultiTextFont:!1,multiChoiceCounterPosition:0,multiChoiceCounterSize:170,multiChoiceTextFont:"Times New Roman",multiChoiceTextSize:100},Pt={barTextPadding:17,barTextMargin:0,customBarTextFont:!1,barTextFont:"Times New Roman",barPadding:0,barMargin:0,barTextSize:15,barTextColor:"#000000",barPointPos:"#FF0000FF",barPointNeg:"#FF0000FF",barIconColor:"#0000008A",barBackgroundColor:"#FFFFFFFF"},$t={useBackpackDesign:!1,backpackBgColor:"#FFFFFF",isBackpackBgRepeat:!1,isBackpackBgFitIn:!1,backpackBgImage:"",backPackWidth:1200},app=s(

/*! Delete and replace this part with your project if you're pasting it in, leave it here if you have placed your project.json file under index.html. */
{version:St,isEditModeOnAll:!0,isStyleOpen:!1,isPointsOpen:!1,isChoicesOpen:!1,isDesignOpen:!1,isFadingOut:!1,isPointerCursor:!1,importedChoicesIsOpen:!0,curBgmTime:0,curBgmLength:0,curVolume:100,isSeeking:!1,isMute:!1,lastFadeTime:0,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRequired:[],rowIdLength:4,objectIdLength:4,words:[],wordChangeComplete:!1,groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,checkDeleteRow:!0,checkDeleteObject:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:p(p(p(p(p(p(p(p(p(p(p(p({},Ct),Bt),Ot),At),kt),Mt),Ft),Rt),jt),Dt),Pt),$t)}
/*! End */

),qt={version:St,isEditModeOnAll:!0,isStyleOpen:!1,isPointsOpen:!1,isChoicesOpen:!1,isDesignOpen:!1,isFadingOut:!1,isPointerCursor:!1,importedChoicesIsOpen:!0,curBgmTime:0,curBgmLength:0,curVolume:100,isSeeking:!1,isMute:!1,lastFadeTime:0,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRequired:[],rowIdLength:4,objectIdLength:4,words:[],wordChangeComplete:!1,groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,checkDeleteRow:!0,checkDeleteObject:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:p(p(p(p(p(p(p(p(p(p(p(p({},Ct),Bt),Ot),At),kt),Mt),Ft),Rt),jt),Dt),Pt),$t)},Vt=s(new $),Lt=s(new $),Nt=s(new $),Wt=s(new $),Et=s(new $),Ut=s(new $),zt=s(new $),Gt=s(new $),_t=s(new $),Ht=s(new $),Yt=s(new $),Jt=s(new q),Zt=s([]),Xt=s({value:"light"}),Kt={ALLOWED_TAGS:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","font","iframe","img"],ADD_ATTR:["href","target","style"]},Qt=E(null),eo=s({isBgmInit:!1,bgmIsPlaying:!1,bgmPlayInterval:0,bgmTitleInterval:0,bgmFadeInterval:0,bgmFadeTimer:0,bgmTitle:"No Audio Title",curBgmTime:0,curBgmLength:0,isSeeking:!1,lastFadeTime:0,isFadingOut:!1,bgmObjectId:""}),to=s({currentDialog:"none"}),oo=s({labelText:"",timeoutMs:4e3,isOpen:!1}),io=s({allowDeselect:!1}),no=s({stored:!1,name:"Auto Save",time:"",app:""}),ro=s(Array.from({length:99},function(e,t){return{stored:!1,name:"Slot ".concat(t+1),time:"",app:""}})),ao=s(Array.from({length:99},function(e,t){return{stored:!1,name:"Slot ".concat(t+1),time:"",app:""}}));s({backgroundColor:"",backgroundImage:"",barBgColor:""});var co=new Set,lo={value:!1},so=U(window.innerWidth,function(e){var t=function(){return e(window.innerWidth)};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),uo=null;function vo(){return new Promise(function(e,t){var o=indexedDB.open("cyoaPlusDB");o.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("cyoaStore")||t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore")},o.onsuccess=function(t){var o=t.target.result;e(o)},o.onerror=t})}function fo(){return new Promise(function(e,t){if(uo)return e(uo);var o=indexedDB.open("cyoaDB"),i=!1,n=[],r=[],a=[];o.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore",{keyPath:"title"}),i=!0},o.onsuccess=function(o){var c=o.target.result;if(1===c.version)if(i)vo().then(function(t){e(uo=t)}).catch(t).finally(function(){c.close()});else if(c.objectStoreNames.contains("buildStore")){var l=c.transaction(["buildStore"],"readonly").objectStore("buildStore").getAll();l.onsuccess=function(){for(var o=l.result,i=0;i<o.length;i++){var n=l.result[i];ao[i].stored=!0,ao[i].name=n.title,ao[i].time="Unknown",ao[i].app=Array.isArray(n.value)?n.value.join(","):n.value}vo().then(function(t){e(uo=t)}).catch(t).finally(function(){c.close()})},l.onerror=function(o){console.error(o),vo().then(function(t){e(uo=t)}).catch(t).finally(function(){c.close()})}}else vo().then(function(t){e(uo=t)}).catch(t).finally(function(){c.close()});else{var s=[new Promise(function(e,t){if(c.objectStoreNames.contains("cyoaStore")){var o=c.transaction("cyoaStore","readonly").objectStore("cyoaStore").openCursor();o.onsuccess=function(t){var o=t.target.result;o?(n.push({key:o.key,value:o.value}),o.continue()):e()},o.onerror=t}else e()}),new Promise(function(e,t){if(c.objectStoreNames.contains("buildStore")){var o=c.transaction("buildStore","readonly").objectStore("buildStore").openCursor();o.onsuccess=function(t){var o=t.target.result;o?(r.push({key:o.key,value:o.value}),o.continue()):e()},o.onerror=t}else e()})];Promise.all(s).then(function(){return c.close(),new Promise(function(e,t){var o=indexedDB.deleteDatabase("cyoaDB");o.onsuccess=function(){var o=indexedDB.open("cyoaDB",1);o.onupgradeneeded=function(e){e.target.result.createObjectStore("buildStore",{keyPath:"title"});var t=e.target.transaction;if(t)for(var o=t.objectStore("buildStore"),i=0,n=0;n<r.length;n++){var c=r[n];void 0!==c.value.title?(o.put(c.value),ao[i].stored=!0,ao[i].name=c.title,ao[i].time="Unknown",ao[i].app=Array.isArray(c.value)?c.value.join(","):c.value,i+=1):a.push(c)}},o.onsuccess=function(t){t.target.result.close(),e()},o.onerror=function(e){console.error(e,"L872"),t(e)}},o.onerror=function(e){console.error(e,"L877"),t(e)}})}).catch(function(e){console.error(e),c.close()}).finally(function(){var o=indexedDB.open("cyoaPlusDB");o.onupgradeneeded=function(e){var t=e.target.result;!t.objectStoreNames.contains("cyoaStore")&&n.length>0&&t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore");var o=e.target.transaction;if(o){if(n.length>0)for(var i=o.objectStore("cyoaStore"),r=0;r<n.length;r++){var c=n[r];i.put(c.value,c.key)}if(a.length>0)for(var l=o.objectStore("buildStore"),s=0;s<a.length;s++){var d=a[s];l.put(d.value,d.key)}}},o.onsuccess=function(t){var o=t.target.result;e(uo=o)},o.onerror=function(e){t(e)}})}},o.onerror=function(e){t(e)}})}var go=null;function mo(e,t){return new Promise(function(o,i){var n=setTimeout(function(){return o()},e);t&&t.addEventListener("abort",function(){clearTimeout(n),i(new DOMException("Aborted","AbortError"))})})}function po(){return ho.apply(this,arguments)}function ho(){return(ho=v(l().m(function e(){var o,i,n;return l().w(function(e){for(;;)switch(e.n){case 0:o=new AbortController,go=o,i="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave"),n=l().m(function e(){var t,n,r,a,c,s,d,u,v;return l().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,mo(1e3*app.buildAutoSaveInterval*60,o.signal);case 1:e.n=3;break;case 2:return e.p=2,e.v,e.a(2,0);case 3:if(app.buildAutoSaveIsOn){e.n=4;break}return e.a(2,0);case 4:return e.n=5,fo();case 5:return t=e.v,n=t.transaction("buildStore","readwrite"),r=n.objectStore("buildStore"),a=navigator.language,c=new Date,s=new Intl.DateTimeFormat(a,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=s.format(c),u={stored:!0,name:"Auto Save",time:d,app:Io()},e.p=6,e.n=7,new Promise(function(e,t){var o=r.put(u,i);o.onsuccess=function(){return e()},o.onerror=function(){return t(o.error)}});case 7:no.stored=!0,no.time=d,no.app=u.app,oo.labelText="Auto-save completed successfully.",oo.isOpen=!0,e.n=9;break;case 8:e.p=8,v=e.v,console.error(v);case 9:return e.a(2)}},e,null,[[6,8],[0,2]])});case 1:if(!app.buildAutoSaveIsOn){e.n=4;break}return e.d(t(n()),2);case 2:if(0!==e.v){e.n=3;break}return e.a(3,4);case 3:e.n=1;break;case 4:return e.a(2)}},e)}))).apply(this,arguments)}function bo(){return bo=v(l().m(function e(t,o,i,n,r){var a,c,s,d;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fo();case 1:return a=e.v,c=a.transaction(n,"readwrite"),s=c.objectStore(n),e.p=2,e.n=3,new Promise(function(e,i){var n=s.put(t,o);n.onsuccess=function(){return e()},n.onerror=function(){return i(n.error)}});case 3:r&&(ro[i].stored=!0,ro[i].time=t.time,ro[i].name=t.name,ro[i].app=t.app),e.n=5;break;case 4:e.p=4,d=e.v,console.error(d);case 5:return e.a(2)}},e,null,[[2,4]])})),bo.apply(this,arguments)}function wo(){return wo=v(l().m(function e(t,o,i,n){var r,a,c,s;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fo();case 1:return r=e.v,a=r.transaction(i,"readwrite"),c=a.objectStore(i),e.p=2,e.n=3,new Promise(function(e,o){var i=c.delete(t);i.onsuccess=function(){return e()},i.onerror=function(){return o(i.error)}});case 3:n&&(ro[o].stored=!1,ro[o].name="Slot ".concat(o+1),ro[o].time="",ro[o].app=""),e.n=5;break;case 4:e.p=4,s=e.v,console.error(s);case 5:return e.a(2)}},e,null,[[2,4]])})),wo.apply(this,arguments)}function To(){return To=v(l().m(function e(){var t,o,i,n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fo();case 1:return t=e.v,o=t.transaction("buildStore","readonly"),i=o.objectStore("buildStore"),n=location.pathname.replace(/\/index\.html$/,"/"),e.n=2,new Promise(function(e,t){var o=i.openCursor();o.onsuccess=function(t){var o=t.target.result;if(o){var i=o.key,r=o.value;if("string"==typeof i&&i.startsWith(n)){var a=i.slice(n.length);if("autoSave"===a)no.stored=!0,no.time=r.time,no.app=r.app;else{var c=a.match(/^slot-(\d+)$/),l=Number(null==c?void 0:c[1]);ro[l].stored=!0,ro[l].name=void 0!==r.name?r.name:"Slot ".concat(l+1),ro[l].time=r.time,ro[l].app=r.app}}o.continue()}else e()},o.onerror=t});case 2:return e.a(2)}},e)})),To.apply(this,arguments)}function Io(){var e=[];return Array.from(Vt.entries()).forEach(function(t){var o=g(t,2),i=o[0],n=o[1],r=Et.get(i);if(void 0!==r){var a=r.choice,c=i;0===n.multiple?(a.isActivateRandom&&a.activatedRandom&&(c+="/RND#".concat(a.activatedRandom.join("/AND#").replace(/\/ON#/g,"/RON#"))),a.textfieldIsOn&&a.customTextfieldIsOn&&void 0!==a.wordChangeSelect&&(c+="/WORD#".concat(a.wordChangeSelect.replace(/,/g,"/CHAR#"))),a.isImageUpload&&a.image!==a.defaultImage&&(c+="/IMG#".concat(a.image.replace(/,/g,"/CHAR#"))),e.push(c)):(c+="/ON#".concat(n.multiple),a.isActivateRandom&&a.activatedRandomMul&&(c+="/RND#".concat(a.activatedRandomMul.flat(2).join("/AND#").replace(/\/ON#/g,"/RON#"))),e.push(c))}}),e.join(",")}function yo(){var e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(o,"-").concat(i,"_").concat(n,"-").concat(r,"-").concat(a)}function xo(e){if(e.customTextIsOn)return void 0!==e.customText?e.customText:"";switch(e.type){case"id":var t=e.reqId.split("/ON#"),o=Et.get(t[0]);if(void 0!==o){var i=o.choice;return"".concat(e.beforeText," ").concat(t.length>1?"".concat(t[1]," "):""," ").concat(i.title," ").concat(e.afterText)}break;case"point":var n=Nt.get(e.reqId);if(void 0!==n)return"".concat(e.beforeText," ").concat(e.reqPoints," ").concat(n.name," ").concat(e.afterText);break;case"or":for(var r=[],a=0;a<e.orRequired.length;a++){var c=e.orRequired[a].req;if(void 0!==c){var l=c.split("/ON#"),s=Et.get(l[0]),d="";if(void 0!==s){var u=s.choice;d=l.length>1?"".concat(l[1]," "):"",r.push("".concat(d).concat(u.title))}}}return"1"===app.orderOrReqText?"".concat(e.beforeText," ").concat(r.join(", ")," ").concat(void 0!==e.orNum?"".concat(app.defaultOrReq," ").concat(e.orNum):"".concat(app.defaultOrReq," 1")," ").concat(e.afterText):"".concat(e.beforeText," ").concat(void 0!==e.orNum?"".concat(e.orNum," ").concat(app.defaultOrReq):"1 ".concat(app.defaultOrReq)," ").concat(r.join(", ")," ").concat(e.afterText);case"selFromGroups":if(void 0!==e.selGroups){for(var v=[],f=0;f<e.selGroups.length;f++){var g=e.selGroups[f],m=Ut.get(g);void 0!==m&&v.push(m.name)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(v.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(v.join(", ")," ").concat(e.afterText)}case"selFromRows":if(void 0!==e.selRows){for(var p=[],h=0;h<e.selRows.length;h++){var b=e.selRows[h],w=Wt.get(b);void 0!==w&&p.push(w.title)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(p.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(p.join(", ")," ").concat(e.afterText)}case"selFromWhole":return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(e.afterText)}return"".concat(e.beforeText," ").concat(e.afterText)}function So(e){return Wt.has(e)||Et.has(e)||Gt.has(e)||Nt.has(e)||Ht.has(e)||Yt.has(e)||Ut.has(e)||_t.has(e)}function Co(e,t){for(var o=app.addPrefix?"row-":"",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return So(o)?e>2?Co(0,++t):Co(++e,t):o}function Bo(e,t){for(var o=app.addPrefix?"word-":"",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return So(o)?e>2?Bo(0,++t):Bo(++e,t):o}function Oo(e,t){for(var o=app.addPrefix?"choice-":"",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return So(o)?e>2?Oo(0,++t):Oo(++e,t):o}function Ao(e,t,o){for(var i=app.addPrefix?"design-":"",n="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)i+=n.charAt(Math.floor(36*Math.random()));return So(i)?e>2?Ao(0,++t):Ao(++e,t):i}function ko(e,t){for(var o=app.addPrefix?"group-":"",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return So(o)?e>2?ko(0,++t):ko(++e,t):o}function Mo(e,t){for(var o=app.addPrefix?"point-":"",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return So(o)?e>2?Mo(0,++t):Mo(++e,t):o}function Fo(e,t){for(var o=app.addPrefix?"variable-":"",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return So(o)?e>2?Fo(0,++t):Fo(++e,t):o}function Ro(e,t){for(var o="s-",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return Jt.has(o)?e>2?Ro(0,++t):Ro(++e,t):o}var jo,Do=[];function Po(){return function(){if(Do.length!==app.words.length)return!0;for(var e=0;e<Do.length;e++){if(Do[e].id!==app.words[e].id)return!0;if(Do[e].replaceText!==app.words[e].replaceText)return!0}return!1}()&&(Do=JSON.parse(JSON.stringify(app.words)),jo=new RegExp(app.words.map(function(e){return e.id}).sort(function(e,t){return t.length-e.length}).map(function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}).join("|"),"g")),jo}function $o(e){var t=e;return app.words&&(t=t.replace(Po(),function(e){var t=Nt.get(e);if(void 0!==t)return(t.startingSum%1==0?t.startingSum:parseFloat(t.startingSum.toFixed(void 0!==t.decimalPlaces?t.decimalPlaces:2))).toString();var o=Et.get(e);if(void 0!==o){var i=o.choice;if(i.isSelectableMultiple&&i.isMultipleUseVariable)return i.multipleUseVariable.toString()}else{var n=Gt.get(e);if(void 0!==n)return n.replaceText}return e})),t}function qo(e,t,o){if(void 0!==o){if(void 0!==o.styling&&o.isPrivateStyling&&o[e])return o.styling;if(void 0!==app.objectDesignGroups&&o.objectDesignGroups)for(var i=0;i<o.objectDesignGroups.length;i++){var n=Yt.get(o.objectDesignGroups[i]);if(void 0!==n&&n[e]){var r=n.activatedId,a=zt.get(r);if(""===r||Lo(n.activatedId))return n.styling;if(void 0!==app.globalRequirements&&void 0!==a&&Wo(a.requireds))return n.styling}}}if(void 0!==t){if(void 0!==t.styling&&t.isPrivateStyling&&t[e])return t.styling;if(void 0!==app.rowDesignGroups&&t.rowDesignGroups)for(var c=0;c<t.rowDesignGroups.length;c++){var l=Ht.get(t.rowDesignGroups[c]);if(void 0!==l&&l[e]){var s=l.activatedId,d=zt.get(s);if(""===s||Lo(l.activatedId))return l.styling;if(void 0!==app.globalRequirements&&void 0!==d&&Wo(d.requireds))return l.styling}}}return app.styling}function Vo(e,t){return t.has(e)?Vo("".concat(e,"_dup"),t):e}function Lo(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt,i=g(e.split("/ON#"),2),n=i[0],r=i[1],a=parseInt(void 0===r?"0":r);return a>0?((null===(t=o.get(n))||void 0===t?void 0:t.multiple)||0)>=a:o.has(n)}function No(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt;if(e.required)switch(e.type){case"id":return Lo(e.reqId,t);case"points":var o=Nt.get(e.reqId);if(void 0!==o){if(void 0===e.operator)return o.startingSum>e.reqPoints;switch(e.operator){case"1":return o.startingSum>e.reqPoints;case"2":return o.startingSum>=e.reqPoints;case"3":return o.startingSum==e.reqPoints;case"4":return o.startingSum<=e.reqPoints;case"5":return o.startingSum<e.reqPoints}}return!1;case"or":for(var i=void 0===e.orNum?1:e.orNum,n=0,r=0;r<e.orRequired.length;r++){var a=e.orRequired[r].req;void 0!==a&&Lo(a,t)&&n++}return n>=i;case"pointCompare":var c=Nt.get(e.reqId),l=Nt.get(e.reqId1);if(void 0!==c&&void 0!==l){var s=l.startingSum;if(e.more)for(var d=0;d<e.more.length;d++){var u=0,v=e.more[d].id,f=e.more[d].points;if(void 0!==v){var g=Nt.get(v);void 0!==g&&(u=g.startingSum)}else void 0!==f&&(u=f);switch(e.more[d].operator){case"1":s+=u;break;case"2":s-=u;break;case"3":s*=u;break;case"4":s/=u;break;case"5":s%=u}}switch(e.operator){case"1":return c.startingSum>s;case"2":return c.startingSum>=s;case"3":return c.startingSum==s;case"4":return c.startingSum<=s;case"5":return c.startingSum<s;default:return!1}}return!1;case"selFromGroups":if(e.selGroups){for(var m=0,p=void 0===e.selFromOperators?"1":e.selFromOperators,h=void 0===e.selNum?1:e.selNum,b=0;b<e.selGroups.length;b++){var w=Ut.get(e.selGroups[b]);if(void 0!==w)for(var T=w.elements,I=0;I<T.length;I++)Vt.has(T[I])&&m++}switch(p){case"1":return!(h>m||0===h&&m>0);case"2":return h===m;case"3":return!(h<m||0===h&&m>0);default:return!1}}case"selFromRows":if(e.selRows){for(var y=0,x=void 0===e.selFromOperators?"1":e.selFromOperators,S=void 0===e.selNum?1:e.selNum,C=0;C<e.selRows.length;C++){var B=Wt.get(e.selRows[C]);void 0!==B&&(y+=B.currentChoices)}switch(x){case"1":return!(S>y||0===S&&y>0);case"2":return S===y;case"3":return!(S<y||0===S&&y>0);default:return!1}}case"selFromWhole":for(var O=0,A=void 0===e.selFromOperators?"1":e.selFromOperators,k=void 0===e.selNum?1:e.selNum,M=0;M<app.rows.length;M++)O+=app.rows[M].currentChoices;switch(A){case"1":return!(k>O||0===k&&O>0);case"2":return k===O;case"3":return!(k<O||0===k&&O>0);default:return!1}case"gid":var F=zt.get(e.reqId);return void 0!==F&&void 0!==app.globalRequirements&&Wo(F.requireds,t);case"word":var R=Gt.get(e.reqId);if(void 0!==R){for(var j=0,D=0;D<e.orRequired.length;D++){var P=e.orRequired[D].req;void 0!==P&&R.replaceText===P&&j++}return j>=1}return!1}else switch(e.type){case"id":return!Lo(e.reqId,t);case"or":for(var $=void 0===e.orNum?1:e.orNum,q=0,V=0;V<e.orRequired.length;V++){var L=e.orRequired[V].req;(""===L||void 0!==L&&Lo(L,t))&&q++}return q<e.orRequired.length-$+1;case"gid":var N=zt.get(e.reqId);return void 0!==N&&void 0!==app.globalRequirements&&!Wo(N.requireds,t)}return!1}function Wo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt,o=!0;if(void 0!==e)for(var i=0;i<e.length;i++){var n=e[i],r=!0;if(void 0!==n.requireds)for(var a=0;a<n.requireds.length;a++)r=r&&No(n.requireds[a],t);r&&(o=o&&No(e[i],t))}return o}function Eo(e,t,o,i){function n(){var n=0,r=0,a=0;if(o&&(i.loadVideoById(t),e.bgmNoLoop?i.setLoop(!1):(i.loadPlaylist(t),i.setLoop(!0))),e.bgmFadeIn&&void 0!==e.bgmFadeInSec&&e.bgmFadeInSec>0){var c=e.bgmFadeInSec/20;eo.lastFadeTime=e.bgmFadeInSec,i.setVolume(0),i.playVideo(),0!==eo.bgmFadeInterval&&(window.clearInterval(eo.bgmFadeInterval),eo.bgmFadeInterval=0),0!==eo.bgmPlayInterval&&(window.clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0),eo.isFadingOut&&(eo.isFadingOut=!1),eo.bgmFadeInterval=window.setInterval(function(){1===i.getPlayerState()&&(n<app.curVolume?(n+=5,i.setVolume(n),eo.lastFadeTime=eo.lastFadeTime-c):(i.setVolume(app.curVolume),window.clearInterval(eo.bgmFadeInterval),eo.bgmFadeInterval=0,eo.lastFadeTime=0))},c)}else eo.isFadingOut&&(eo.isFadingOut=!1,window.clearInterval(eo.bgmFadeInterval),eo.bgmFadeInterval=0),i.playVideo(),i.setVolume(app.curVolume);eo.bgmObjectId=e.id,app.showMusicPlayer&&(0!==eo.bgmTitleInterval&&(window.clearInterval(eo.bgmTitleInterval),eo.bgmTitleInterval=0),eo.bgmTitleInterval=window.setInterval(function(){if(void 0!==i.playerInfo.videoData){var e=i.playerInfo.videoData;e.video_id===t&&void 0!==e.title&&""!==e.title&&(eo.bgmTitle=e.title,eo.curBgmLength=i.getDuration(),window.clearInterval(eo.bgmTitleInterval),eo.bgmTitleInterval=0)}},1e3),0!==eo.bgmPlayInterval&&(window.clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0),eo.bgmPlayInterval=window.setInterval(function(){if(void 0!==i.playerInfo.videoData&&!eo.isSeeking&&1===i.getPlayerState()){var e=Math.floor(i.getCurrentTime());e!==eo.curBgmTime?r!==e?eo.curBgmTime=e:(++a>eo.curBgmLength&&(a=1),eo.curBgmTime=a):(r=e,a=e+1,eo.curBgmTime=a)}},1e3))}if(eo.isFadingOut){var r=eo.lastFadeTime;0!==eo.bgmFadeTimer&&(window.clearTimeout(eo.bgmFadeTimer),eo.bgmFadeTimer=0),eo.bgmFadeTimer=window.setTimeout(function(){n()},r)}else n()}function Uo(e,t){var o=app.curVolume/5;if(e.bgmFadeOut&&void 0!==e.bgmFadeOutSec&&e.bgmFadeOutSec>0&&o>0){var i=e.bgmFadeOutSec/o,n=app.curVolume;eo.lastFadeTime=e.bgmFadeOutSec,eo.isFadingOut=!0,0!==eo.bgmFadeInterval&&(window.clearInterval(eo.bgmFadeInterval),eo.bgmFadeInterval=0),eo.bgmFadeInterval=window.setInterval(function(){void 0!==t.setVolume&&(n>0?(n-=5,t.setVolume(n),eo.lastFadeTime-=i):eo.isFadingOut&&(t.pauseVideo(),t.setVolume(app.curVolume),window.clearInterval(eo.bgmFadeInterval),eo.bgmFadeInterval=0,eo.lastFadeTime=0,eo.isFadingOut=!1,0!==eo.bgmTitleInterval&&(window.clearInterval(eo.bgmTitleInterval),eo.bgmTitleInterval=0),0!==eo.bgmPlayInterval&&(window.clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0),eo.bgmTitle="No Audio Title",eo.curBgmTime=0,eo.curBgmLength=0))},i)}else t.pauseVideo(),0!==eo.bgmTitleInterval&&(window.clearInterval(eo.bgmTitleInterval),eo.bgmTitleInterval=0),0!==eo.bgmPlayInterval&&(window.clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0),eo.bgmTitle="No Audio Title",eo.curBgmTime=0,eo.curBgmLength=0}function zo(e,t,o){var i=W(Qt);if(i&&void 0!==i.playerInfo.videoData){var n=eo.bgmIsPlaying,r=i.playerInfo.videoData.video_id,a=i.getPlayerState();r===t?eo.bgmObjectId===e.id?n?(2===a||i.stopVideo(),Eo(e,t,!1,i)):Uo(e,i):n?(i.stopVideo(),Eo(e,t,!1,i)):Uo(e,i):n&&Eo(e,t,!0,i)}else o<10?window.setTimeout(function(){zo(e,t,++o)},200):console.log("Failed to play bgm")}function Go(){return new Promise(function(e){if(window.YT&&window.YT.Player)e(window.YT);else{var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t),window.onYouTubeIframeAPIReady=function(){return e(window.YT)}}})}function _o(e){return Ho.apply(this,arguments)}function Ho(){return(Ho=v(l().m(function e(t){var o,i;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Go();case 1:o=e.v,i=new o.Player("bgm-player",{width:0,height:0,events:{onReady:function(){Qt.set(i),zo(t,t.bgmId||"",0),app.isMute&&!i.isMuted()&&i.mute()}}});case 2:return e.a(2)}},e)}))).apply(this,arguments)}function Yo(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==e){if(t)for(var i=["addonBorderRadiusTopLeft","addonBorderRadiusTopRight","addonBorderRadiusBottomLeft","addonBorderRadiusBottomRight","addonImgBorderRadiusTopLeft","addonImgBorderRadiusTopRight","addonImgBorderRadiusBottomLeft","addonImgBorderRadiusBottomRight","objectBorderRadiusTopLeft","objectBorderRadiusTopRight","objectBorderRadiusBottomLeft","objectBorderRadiusBottomRight","objectImgBorderRadiusTopLeft","objectImgBorderRadiusTopRight","objectImgBorderRadiusBottomLeft","objectImgBorderRadiusBottomRight","rowBorderRadiusTopLeft","rowBorderRadiusTopRight","rowBorderRadiusBottomLeft","rowBorderRadiusBottomRight","rowImgBorderRadiusTopLeft","rowImgBorderRadiusTopRight","rowImgBorderRadiusBottomLeft","rowImgBorderRadiusBottomRight"],n=0;n<i.length;n++){var r=i[n];void 0!==e[r]&&(e[r]=10*e[r])}for(var a=["selFilterBgColor","selFilterBorderColor","selFilterCTitleColor","selFilterCTextColor","selFilterATitleColor","selFilterATextColor","selFilterSTextColor","reqFilterBgColor","reqFilterBorderColor","reqFilterCTitleColor","reqFilterCTextColor","reqFilterATitleColor","reqFilterATextColor","reqFilterSTextColor","rowTitleColor","rowTextColor","objectTitleColor","objectTextColor","addonTitleColor","addonTextColor","scoreTextColor","objectImgBorderColor","rowImgBorderColor","addonImgBorderColor","backgroundColor","rowBgColor","objectBgColor","objectDropShadowColor","objectBorderColor","rowDropShadowColor","rowBorderColor","addonDropShadowColor","addonBorderColor","addonBgColor","barTextColor","barIconColor","barBackgroundColor","backpackBgColor","barPointNeg","barPointPos"],c=0;c<a.length;c++){var l=a[c];"object"===d(e[l])&&(e[l]=e[l].hexa)}o&&(void 0===e.customMultiTextFont&&(e.customMultiTextFont=!1),void 0===e.multiChoiceCounterPosition&&(e.multiChoiceCounterPosition=0),void 0===e.multiChoiceCounterSize&&(e.multiChoiceCounterSize=170),void 0===e.multiChoiceTextFont&&(e.multiChoiceTextFont="Times New Roman"),void 0===e.multiChoiceTextSize&&(e.multiChoiceTextSize=100))}}function Jo(e,t,o){switch(t){case"1":return e-o;case"2":return e+o;case"3":return e*o;case"4":return e/o;default:return e}}function Zo(e){delete e.tmpDiscount,delete e.discountTextA,delete e.discountTextB,delete e.dupTextA,delete e.dupTextB,delete e.discountedFrom,delete e.discountIsOn,delete e.discountScore,delete e.discountScoreCal,delete e.notStackableDiscount}function Xo(e,t){var o=Nt.get(t.id);if(void 0!==o&&void 0!==e.discountOperator&&void 0!==e.discountValue){var i=o.allowFloat?t.value:Math.floor(t.value),n=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value;n=o.allowFloat?n:Math.floor(n);var r=0,a=0,c=[],l=!1,s=0;if(e.stackableDiscount){if(t.notStackableDiscount){if(void 0!==t.tmpDiscount){for(var d=0;d<t.tmpDiscount.length;d++)t.tmpDiscount[d].isStackable&&(c=t.tmpDiscount[d].discountedFrom,i=t.tmpDiscount[d].discountedValue,s=d);t.tmpDiscount.splice(s,1)}}else if(void 0!==t.discountedFrom){var u=t.discountedFrom.indexOf(e.id);if(t.discountedFrom.splice(u,1),void 0!==t.discountedFrom&&t.discountedFrom.length>0){r=i;for(var v=0;v<t.discountedFrom.length;v++){var f=Et.get(t.discountedFrom[v]);if(void 0!==f){var g=f.choice;void 0!==g.discountOperator&&void 0!==g.discountValue&&(r=Jo(r,g.discountOperator,g.discountValue),a=r=o.allowFloat?r:Math.floor(r),g.discountLowLimitIsOn&&void 0!==g.discountLowLimit&&(r=Math.max(r,g.discountLowLimit)))}}if(e.discountShow){var m=void 0!==e.discountAfterText&&void 0!==t.discountTextA?t.discountTextA.indexOf(e.discountAfterText):-1,p=void 0!==e.discountBeforeText&&void 0!==t.discountTextB?t.discountTextB.indexOf(e.discountBeforeText):-1;if(e.discountTextDuplicated){var h,b;if(-1!==m&&void 0!==t.dupTextA&&void 0!==e.discountAfterText)if(t.dupTextA[e.discountAfterText]-=1,0===t.dupTextA[e.discountAfterText])null===(h=t.discountTextA)||void 0===h||h.splice(m,1),delete t.dupTextA[e.discountAfterText];if(-1!==p&&void 0!==t.dupTextB&&void 0!==e.discountBeforeText)if(t.dupTextB[e.discountBeforeText]-=1,0===t.dupTextB[e.discountBeforeText])null===(b=t.discountTextB)||void 0===b||b.splice(m,1),delete t.dupTextB[e.discountBeforeText]}else-1!==m&&void 0!==t.discountTextA&&(t.discountTextA.splice(m,1),t.discountAfterText=t.discountTextA.join("")),-1!==p&&void 0!==t.discountTextB&&(t.discountTextB.splice(p,1),t.discountBeforeText=t.discountTextB.join(""))}t.discountScore=r,t.discountScoreCal=a}else{if(void 0!==t.tmpDiscount)for(var w=0;w<t.tmpDiscount.length;w++)t.tmpDiscount[w].isStackable||r>t.tmpDiscount[w].discountedValue&&(c=t.tmpDiscount[w].discountedFrom,a=t.tmpDiscount[w].calcValue,r=t.tmpDiscount[w].discountedValue,s=w,l=!0);l&&void 0!==t.tmpDiscount?0===c.length?t.tmpDiscount.splice(s,1):(t.discountedFrom=c,t.tmpDiscount[s].showDiscount&&(t.discountBeforeText=t.tmpDiscount[s].beforeText,t.discountAfterText=t.tmpDiscount[s].afterText),t.tmpDiscount.splice(s,1),t.notStackableDiscount=!0):Zo(t)}}}else if(t.notStackableDiscount)if(void 0!==t.discountedFrom&&t.discountedFrom.length>0&&void 0!==t.tmpDiscount){if(-1!==t.discountedFrom.indexOf(e.id)){if(t.tmpDiscount.length>0){i=t.tmpDiscount[0].discountedValue,l=!0;for(var T=1;T<t.tmpDiscount.length;T++)i>t.tmpDiscount[T].discountedValue&&(i=t.tmpDiscount[T].discountedValue,s=T)}if(l){var I,y;if(t.discountScore=i,t.discountScoreCal=t.tmpDiscount[s].calcValue,t.discountedFrom=t.tmpDiscount[s].discountedFrom,t.notStackableDiscount=!t.tmpDiscount[s].isStackable,t.discountShow=t.tmpDiscount[s].showDiscount,t.tmpDiscount[s].isStackable&&t.tmpDiscount[s].showDiscount)t.discountBeforeText=null===(I=t.discountTextB)||void 0===I?void 0:I.join(""),t.discountAfterText=null===(y=t.discountTextA)||void 0===y?void 0:y.join("");else t.tmpDiscount[s].showDiscount?(t.discountBeforeText=t.tmpDiscount[s].beforeText,t.discountAfterText=t.tmpDiscount[s].afterText):(t.discountBeforeText="",t.discountAfterText="");t.tmpDiscount.splice(s,1)}else Zo(t)}else for(var x=0;x<t.tmpDiscount.length;x++)if(-1!==t.tmpDiscount[x].discountedFrom.indexOf(e.id)){t.tmpDiscount.splice(x,1);break}}else Zo(t);else if(void 0!==t.tmpDiscount){if(t.tmpDiscount=t.tmpDiscount.filter(function(t){return-1!==t.discountedFrom.indexOf(e.id)}),t.tmpDiscount.length>0){i=t.tmpDiscount[0].discountedValue,l=!0;for(var S=1;S<t.tmpDiscount.length;S++)i>t.tmpDiscount[S].discountedValue&&(i=t.tmpDiscount[S].discountedValue,s=S)}if(l){var C,B;if(t.discountScore=i,t.discountScoreCal=t.tmpDiscount[s].calcValue,t.discountedFrom=t.tmpDiscount[s].discountedFrom,t.notStackableDiscount=!t.tmpDiscount[s].isStackable,t.notStackableDiscount)t.tmpDiscount[s].showDiscount?(t.discountBeforeText=t.tmpDiscount[s].beforeText,t.discountAfterText=t.tmpDiscount[s].afterText):(t.discountBeforeText="",t.discountAfterText="");else t.discountBeforeText=null===(C=t.discountTextB)||void 0===C?void 0:C.join(""),t.discountAfterText=null===(B=t.discountTextA)||void 0===B?void 0:B.join("");t.tmpDiscount.splice(s,1)}else Zo(t)}else Zo(t);var O=void 0!==t.discountScore?t.discountScore:t.value;(O=o.allowFloat?O:Math.floor(O))!==n?(t.tmpDisScore=n-O,t.isChangeDiscount=!0):delete t.isChangeDiscount}}function Ko(e,t){var o=Nt.get(t.id);if(void 0!==o&&void 0!==e.discountOperator&&void 0!==e.discountValue){var i,n=o.allowFloat?t.value:Math.floor(t.value),r=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:n,a=0,c=0,l=[],s=!1,d=0;if(void 0===t.discountedFrom&&(t.discountedFrom=[]),e.stackableDiscount)if(t.notStackableDiscount){if(void 0!==t.tmpDiscount){for(var u=0;u<t.tmpDiscount.length;u++)t.tmpDiscount[u].isStackable&&((l=t.tmpDiscount[u].discountedFrom).push(e.id),n=t.tmpDiscount[u].discountedValue,s=!0,d=u);var v;if(a=Jo(n,e.discountOperator,e.discountValue),c=a=o.allowFloat?a:Math.floor(a),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(a=Math.max(a,e.discountLowLimit)),void 0!==t.discountScore&&t.discountScore>a)t.tmpDisScore=t.discountScore-a,t.isChangeDiscount=!0,i={isStackable:!1,discountedFrom:t.discountedFrom,calcValue:void 0!==t.discountScoreCal?t.discountScoreCal:t.discountScore,discountedValue:t.discountScore,showDiscount:!1},t.discountShow&&(i.showDiscount=!0,i.beforeText=e.discountBeforeText,i.afterText=e.discountAfterText),t.discountScore=a,t.discountScoreCal=c,e.discountShow&&(t.discountShow=!0,Qo(e,t)),void 0!==t.discountTextA&&(t.discountAfterText=t.discountTextA.join("")),void 0!==t.discountTextB&&(t.discountBeforeText=t.discountTextB.join("")),(v=t.discountedFrom).push.apply(v,f(l)),s&&t.tmpDiscount.splice(d,1),t.tmpDiscount.push(i),t.notStackableDiscount=!1;else t.isChangeDiscount=!1,l.push(e.id),e.discountShow&&Qo(e,t),s?(t.tmpDiscount[d].discountedFrom=l,t.tmpDiscount[d].calcValue=c,t.tmpDiscount[d].discountedValue=a):(i={isStackable:e.stackableDiscount||!1,discountedFrom:l,calcValue:c,discountedValue:a,showDiscount:e.discountShow||!1},t.tmpDiscount.push(i))}}else n=t.discountIsOn&&void 0!==t.discountScoreCal?t.discountScoreCal:t.value,n=o.allowFloat?n:Math.floor(n),r=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value,r=o.allowFloat?r:Math.floor(r),a=Jo(n,e.discountOperator,e.discountValue),c=a=o.allowFloat?a:Math.floor(a),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(a=Math.max(a,e.discountLowLimit)),Array.isArray(t.discountedFrom)||(t.discountedFrom=[]),t.discountScore=a,t.discountScoreCal=c,t.discountedFrom.push(e.id),t.discountScore!==r?(t.tmpDisScore=r-t.discountScore,t.isChangeDiscount=!0):t.isChangeDiscount=!1,t.discountIsOn||(t.discountIsOn=!0),e.discountShow&&(t.discountShow=!0,Qo(e,t)),void 0!==t.discountTextA&&(t.discountAfterText=t.discountTextA.join("")),void 0!==t.discountTextB&&(t.discountBeforeText=t.discountTextB.join(""));else void 0===t.tmpDiscount&&(t.tmpDiscount=[]),a=Jo(n,e.discountOperator,e.discountValue),c=a=o.allowFloat?a:Math.floor(a),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(a=Math.max(a,e.discountLowLimit)),t.discountIsOn?void 0!==t.discountScore&&(t.discountScore>a?(i={isStackable:!t.notStackableDiscount,discountedFrom:t.discountedFrom,calcValue:void 0!==t.discountScoreCal?t.discountScoreCal:t.discountScore,discountedValue:t.discountScore,showDiscount:t.discountShow||!1},t.discountShow&&(i.showDiscount=!0,i.beforeText=t.discountBeforeText,i.afterText=t.discountAfterText),t.discountScore=a,t.discountScoreCal=c,t.discountShow=e.discountShow,t.discountBeforeText=e.discountBeforeText,t.discountAfterText=e.discountAfterText,t.discountedFrom=[e.id],t.notStackableDiscount=!0):(i={isStackable:void 0!==e.stackableDiscount&&e.stackableDiscount,discountedFrom:[e.id],calcValue:c,discountedValue:a,showDiscount:void 0!==e.discountShow&&e.discountShow},e.discountShow&&(i.showDiscount=!0,i.beforeText=e.discountBeforeText,i.afterText=e.discountAfterText)),t.tmpDiscount.push(i)):(t.discountScore=a,t.discountScoreCal=c,e.discountShow&&(t.discountShow=e.discountShow,t.discountBeforeText=e.discountBeforeText,t.discountAfterText=e.discountAfterText),Array.isArray(t.discountedFrom)||(t.discountedFrom=[]),t.discountIsOn=!0,t.discountedFrom.push(e.id),t.notStackableDiscount=!0),void 0!==t.discountScore&&t.discountScore!==r?(t.tmpDisScore=r-t.discountScore,t.isChangeDiscount=!0):t.isChangeDiscount=!1}}function Qo(e,t){void 0===t.discountTextA&&(t.discountTextA=[]),void 0===t.discountTextB&&(t.discountTextB=[]),void 0===t.dupTextA&&(t.dupTextA={}),void 0===t.dupTextB&&(t.dupTextB={}),e.discountTextDuplicated?(void 0!==e.discountAfterText&&(-1!==t.discountTextA.indexOf(e.discountAfterText)?t.dupTextA[e.discountAfterText]=(t.dupTextA[e.discountAfterText]||0)+1:(t.dupTextA[e.discountAfterText]=1,t.discountTextA.push(e.discountAfterText))),void 0!==e.discountBeforeText&&(-1!==t.discountTextB.indexOf(e.discountBeforeText)?t.dupTextB[e.discountBeforeText]=(t.dupTextB[e.discountBeforeText]||0)+1:(t.dupTextB[e.discountBeforeText]=1,t.discountTextB.push(e.discountBeforeText)))):(void 0!==e.discountAfterText&&t.discountTextA.push(e.discountAfterText),void 0!==e.discountBeforeText&&t.discountTextB.push(e.discountBeforeText))}function ei(e,t){for(var o=!0,i=new Map,n=0;n<e.scores.length;n++){var r=e.scores[n],a=r.discountIsOn&&void 0!==r.discountScore?r.discountScore:r.value;if(r.multiplyByTimes&&(a*=Math.abs(e.multipleUseVariable)+1),Wo(r.requireds)&&!r.isActive){var c=Nt.get(r.id);if(void 0!==c&&c.belowZeroNotAllowed){var l=i.get(r.id);void 0!==l?(o=o&&(t?l-a>=0:l+a>=0),i.set(r.id,l-r.value)):(o=o&&(t?c.startingSum-a>=0:c.startingSum+a>=0),i.set(r.id,c.startingSum-a))}}}return o}function ti(){var e=new Set;function t(o){if(o.activateOtherChoice&&void 0!==o.activateThisChoice)if(o.activatedRandom){if(o.isSelectableMultiple){for(var i=0;i<o.multipleUseVariable;i++)if(void 0!==o.activatedRandomMul)for(var n=0;n<o.activatedRandomMul[n].length;n++){var r=o.activatedRandomMul[i][n].split("/ON#"),a=Et.get(r[0]);if(void 0!==a){var c=a.choice;if(Vt.has(c.id))o.isAllowDeselect||(e.add(c.id),r.length>1&&c.isSelectableMultiple&&(void 0===c.tempMultipleValue?c.tempMultipleValue=parseInt(r[1]):c.tempMultipleValue+=parseInt(r[1])),t(c));else{var l=Lt.get(c.id);void 0!==l?r.length>1&&(l.multiple+=parseInt(r[1])):Lt.set(c.id,{multiple:r.length>1?parseInt(r[1]):0,isAllowDeselect:c.isAllowDeselect||!1})}}}}else if(void 0!==o.activatedRandom)for(var s=0;s<o.activatedRandom.length;s++){var d=o.activatedRandom[s].split("/ON#"),u=Et.get(d[0]);if(void 0!==u){var v=u.choice;if(Vt.has(v.id))o.isAllowDeselect||(e.add(v.id),d.length>1&&v.isSelectableMultiple&&(void 0===v.tempMultipleValue?v.tempMultipleValue=parseInt(d[1]):v.tempMultipleValue+=parseInt(d[1])),t(v));else{var f=Lt.get(v.id);void 0!==f?d.length>1&&(f.multiple+=parseInt(d[1])):Lt.set(v.id,{multiple:d.length>1?parseInt(d[1]):0,isAllowDeselect:v.isAllowDeselect||!1})}}}}else for(var g=o.activateThisChoice.split(","),m=0;m<g.length;m++){var p=g[m].split("/ON#"),h=Et.get(p[0]);if(void 0!==h){var b=h.choice;if(Vt.has(b.id))o.isAllowDeselect||(e.add(b.id),p.length>1&&b.isSelectableMultiple&&(void 0===b.tempMultipleValue?b.tempMultipleValue=parseInt(p[1]):b.tempMultipleValue+=parseInt(p[1])),t(b));else{var w=Lt.get(b.id);void 0!==w?p.length>1&&(w.multiple+=parseInt(p[1])):Lt.set(b.id,{multiple:p.length>1?parseInt(p[1]):0,isAllowDeselect:b.isAllowDeselect||!1})}}}}Lt.clear(),Array.from(Vt.entries()).forEach(function(o){var i=g(o,1)[0],n=Et.get(i);if(void 0!==n){var r=n.choice;r.notDeselectedByClean&&(e.add(r.id),t(r))}else Vt.delete(i)});for(var o=f(Vt.keys()),i=Array.from(Et.entries()).filter(function(e){var t=g(e,2);t[0];return!0===t[1].choice.isActive}).map(function(e){return g(e,1)[0]}),n=Array.from(new Set([].concat(f(o),f(i)))),r=n.length-1;r>=0;r--){var a=Et.get(n[r]);if(void 0!==a){var c=a.choice;if(!e.has(c.id)){if(delete c.multiplyPointtypeIsOnCheck,delete c.startingSumAtMultiply,delete c.multiplyPointtypeIsOnCheck,delete c.startingSumAtDivide,delete c.activatedRandom,delete c.activatedRandomMul,c.addToAllowChoice&&void 0!==c.idOfAllowChoice&&void 0!==c.numbAddToAllowChoice)for(var l=0;l<c.idOfAllowChoice.length;l++){var s=Wt.get(c.idOfAllowChoice[l]);void 0!==s&&(s.allowedChoices-=c.numbAddToAllowChoice)}if(c.isChangeVariables&&void 0!==c.changedVariables)for(var u=0;u<c.changedVariables.length;u++){var v=_t.get(c.changedVariables[u]);void 0!==v&&("1"===c.changeType?v.isTrue=!0:"2"===c.changeType?v.isTrue=!1:"3"===c.changeType&&(v.isTrue=!v.isTrue))}if(c.textfieldIsOn&&void 0!==c.idOfTheTextfieldWord&&void 0!==c.wordChangeSelect){var m=Gt.get(c.idOfTheTextfieldWord);void 0!==m&&(m.replaceText=void 0===c.wordChangeDeselect?"":c.wordChangeDeselect)}if(c.isImageUpload&&void 0!==c.defaultImage&&(c.image=c.defaultImage),c.setBgmIsOn&&Qt&&c.bgmId){var p=W(Qt);if(p&&void 0!==p.playerInfo.videoData){var h=p.playerInfo.videoData.video_id;c.bgmId===h&&(p.stopVideo(),eo.bgmIsPlaying=!1,0!==eo.bgmFadeInterval&&(window.clearInterval(eo.bgmFadeInterval),eo.bgmFadeInterval=0),0!==eo.bgmTitleInterval&&(window.clearInterval(eo.bgmTitleInterval),eo.bgmTitleInterval=0),0!==eo.bgmPlayInterval&&(window.clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0),eo.lastFadeTime=0,eo.isFadingOut=!1,eo.bgmTitle="No Audio Title",eo.curBgmTime=0,eo.curBgmLength=0)}}if(c.isContentHidden&&void 0!==c.hiddenContentsRow&&void 0!==c.hiddenContentsType)for(var b=0;b<c.hiddenContentsRow.length;b++){var w=Wt.get(c.hiddenContentsRow[b]);if(void 0!==w)for(var T=0;T<c.hiddenContentsType.length;T++)switch(c.hiddenContentsType[T]){case"1":delete w.objectTitleRemoved;break;case"2":delete w.objectImageRemoved;break;case"3":delete w.objectTextRemoved;break;case"4":delete w.objectScoreRemoved;break;case"5":delete w.objectRequirementRemoved;break;case"6":delete w.addonTitleRemoved;break;case"7":delete w.addonImageRemoved;break;case"8":delete w.addonTextRemoved}}c.multipleUseVariable=0,c.isActive=!1,Vt.delete(c.id)}}else Vt.delete(n[r])}for(var I=0;I<app.pointTypes.length;I++){var y=app.pointTypes[I];y.startingSum=y.initValue}for(var x=0;x<app.rows.length;x++){var S=app.rows[x];S.isEditModeOn=!1,S.currentChoices=0,S.index=x;for(var C=0;C<S.objects.length;C++){var B=S.objects[C];B.index=C,void 0!==B.defaultTemplate&&(B.template=B.defaultTemplate),void 0!==B.defaultWidth&&(B.width=B.defaultWidth),delete B.templateStack,delete B.widthStack;for(var O=0;O<B.scores.length;O++){var A=B.scores[O];B.isSelectableMultiple?(delete A.isActiveMul,delete A.isActiveMulMinus):delete A.isActive,Zo(A)}}}for(var k=0;k<app.backpack.length;k++){var M=app.backpack[k];M.isEditModeOn=!1,M.currentChoices=0,M.index=k;for(var F=0;F<M.objects.length;F++){var R=M.objects[F];R.index=F,void 0!==R.defaultTemplate&&(R.template=R.defaultTemplate),void 0!==R.defaultWidth&&(R.width=R.defaultWidth),delete R.templateStack,delete R.widthStack;for(var j=0;j<R.scores.length;j++){var D=R.scores[j];R.isSelectableMultiple?(delete D.isActiveMul,delete D.isActiveMulMinus):delete D.isActive,Zo(D)}}}if(void 0!==app.defaultBgColor&&(app.styling.backgroundColor=app.defaultBgColor,delete app.defaultBgColor),void 0!==app.defaultBgImage&&(app.styling.backgroundImage=app.defaultBgImage,delete app.defaultBgImage),void 0!==app.defaultBarBgColor&&(app.styling.barBackgroundColor=app.defaultBarBgColor,delete app.defaultBarBgColor),void 0!==app.defaultBarIconColor&&(app.styling.barIconColor=app.defaultBarIconColor,delete app.defaultBarIconColor),void 0!==app.defaultBarTextColor&&(app.styling.barTextColor=app.defaultBarTextColor,delete app.defaultBarTextColor),delete app.bgColorStack,delete app.bgImageStack,delete app.barBgColorStack,delete app.barIconColorStack,delete app.barTextColorStack,app.btnBackpackIsOn=0,app.showAllAddons=0,app.isMute=!1,app.curVolume=100,Qt){var P=W(Qt);P&&"function"==typeof P.unMute&&P.unMute()}Zt.splice(0),n=f(Vt.keys());for(var $=0;$<n.length;$++){var q=Et.get(n[$]);if(void 0!==q){var V=q.choice;if(Wo(V.requireds)&&ei(V,!0)){if(V.discountOther&&void 0!==V.discountOperator&&void 0!==V.discountValue)if(V.isDisChoices){if(void 0!==V.discountChoices)for(var L=0;L<V.discountChoices.length;L++){var N=Et.get(V.discountChoices[L]);if(void 0!==N)for(var E=0;E<N.choice.scores.length;E++){var U,z,G=N.choice.scores[E];G.isNotDiscountable||0!==(null===(U=V.discountPointTypes)||void 0===U?void 0:U.length)&&-1===(null===(z=V.discountPointTypes)||void 0===z?void 0:z.indexOf(G.id))||Ko(V,G)}}}else if(void 0!==V.discountGroups)for(var _=0;_<V.discountGroups.length;_++){var H=Ut.get(V.discountGroups[_]);if(void 0!==H)for(var Y=0;Y<H.elements.length;Y++){var J=Et.get(H.elements[Y]);if(void 0!==J)for(var Z=0;Z<J.choice.scores.length;Z++){var X,K,Q=J.choice.scores[Z];Q.isNotDiscountable||0!==(null===(X=V.discountPointTypes)||void 0===X?void 0:X.length)&&-1===(null===(K=V.discountPointTypes)||void 0===K?void 0:K.indexOf(Q.id))||Ko(V,Q)}}}if(V.addToAllowChoice&&void 0!==V.idOfAllowChoice&&void 0!==V.numbAddToAllowChoice)for(var ee=0;ee<V.idOfAllowChoice.length;ee++){var te=Wt.get(V.idOfAllowChoice[ee]);void 0!==te&&(te.allowedChoices+=V.numbAddToAllowChoice)}}}}for(var oe=0;oe<n.length;oe++){var ie=Et.get(n[oe]);if(void 0!==ie){var ne=ie.choice,re=ie.row;if(Wo(ne.requireds)&&ei(ne,!0)){for(var ae=0;ae<ne.scores.length;ae++){var ce=ne.scores[ae],le=Nt.get(ce.id);if(void 0!==le)if(ne.isSelectableMultiple&&ne.isMultipleUseVariableultiple)for(var se=0;se<ne.multipleUseVariable;se++)Wo(ce.requireds)&&(void 0===ce.isActiveMul&&(ce.isActiveMul=[]),ce.isActiveMul[se]||(ce.multiplyByTimes?le.startingSum-=ce.discountIsOn&&void 0!==ce.discountScore?ce.discountScore*(se+1):ce.value*(se+1):le.startingSum-=ce.discountIsOn&&void 0!==ce.discountScore?ce.discountScore:ce.value,ce.isActiveMul[se]=!0));else ne.isSelectableMultiple||Wo(ce.requireds)&&!ce.isActive&&(le.startingSum-=ce.discountIsOn&&void 0!==ce.discountScore?ce.discountScore:ce.value,ce.isActive=!0)}if(ne.multiplyPointtypeIsOn&&void 0!==ne.pointTypeToMultiply&&void 0!==ne.multiplyWithThis){var de=0;ne.multiplyPointtypeIsOnCheck=!0,"object"!==d(ne.startingSumAtMultiply)&&(ne.startingSumAtMultiply=[]);for(var ue=0;ue<ne.pointTypeToMultiply.length;ue++){var ve=Nt.get(ne.pointTypeToMultiply[ue]);if(void 0!==ve)if(ne.multiplyPointtypeIsId&&"string"==typeof ne.multiplyWithThis){var fe=Nt.get(ne.multiplyWithThis);void 0!==fe?(ne.startingSumAtMultiply[ue]={value:ve.startingSum,calcVal:fe.startingSum},ve.startingSum*=fe.startingSum):de++}else"number"==typeof ne.multiplyWithThis&&(ne.startingSumAtMultiply[ue]={value:ve.startingSum,calcVal:ne.multiplyWithThis},ve.startingSum*=ne.multiplyWithThis);else de++}de===ne.pointTypeToMultiply.length&&delete ne.multiplyPointtypeIsOnCheck,ne.multiplyPointtypeIsOnCheck&&Zt.push(ne)}if(ne.dividePointtypeIsOn&&void 0!==ne.pointTypeToDivide&&void 0!==ne.divideWithThis){var ge=0;ne.dividePointtypeIsOnCheck=!0,"object"!==d(ne.startingSumAtDivide)&&(ne.startingSumAtDivide=[]);for(var me=0;me<ne.pointTypeToDivide.length;me++){var pe=Nt.get(ne.pointTypeToDivide[me]);if(void 0!==pe)if(ne.dividePointtypeIsId&&"string"==typeof ne.divideWithThis){var he=Nt.get(ne.divideWithThis);void 0!==he?0===he.startingSum?ge++:(ne.startingSumAtDivide[me]={value:pe.startingSum,calcVal:he.startingSum},pe.startingSum/=he.startingSum):ge++}else"number"==typeof ne.divideWithThis&&(0===ne.dividedWithThis?ge++:(ne.startingSumAtDivide[me]={value:pe.startingSum,calcVal:ne.divideWithThis},pe.startingSum/=ne.divideWithThis));else ge++}ge===ne.pointTypeToDivide.length&&delete ne.dividePointtypeIsOnCheck,!ne.multiplyPointtypeIsOnCheck&&ne.dividePointtypeIsOnCheck&&Zt.push(ne)}if(ne.changeBackground&&(ne.changeBgImage?void 0!==ne.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:ne.id,data:ne.bgImage}),app.styling.backgroundImage=ne.bgImage):void 0!==ne.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:ne.id,data:ne.changedBgColorCode}),app.styling.backgroundColor=ne.changedBgColorCode)),ne.changePointBar&&(ne.changeBarBgColorIsOn&&void 0!==ne.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:ne.id,data:ne.changedBarBgColor}),app.styling.barBackgroundColor=ne.changedBarBgColor),ne.changeBarIconColorIsOn&&void 0!==ne.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:ne.id,data:ne.changedBarIconColor}),app.styling.barIconColor=ne.changedBarIconColor),ne.changeBarTextColorIsOn&&void 0!==ne.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:ne.id,data:ne.changedBarTextColor}),app.styling.barTextColor=ne.changedBarTextColor)),ne.changeTemplates&&ne.changeTemplatesList&&ne.changeToThisTemplate)for(var be=ne.changeTemplatesList.split(","),we=0;we<be.length;we++){var Te=be[we],Ie=Et.get(Te);if(void 0===Ie){var ye=Wt.get(Te);if(void 0===ye){var xe=Ut.get(Te[0]);if(void 0===xe);else{for(var Se=xe.rowElements,Ce=0;Ce<Se.length;Ce++){var Be=Wt.get(Se[Ce]);void 0!==Be&&Ui(Be,ne.id,ne.changeToThisTemplate)}for(var Oe=xe.elements,Ae=0;Ae<Oe.length;Ae++){var ke=Et.get(Oe[Ae]);if(void 0!==ke)Ui(ke.choice,ne.id,ne.changeToThisTemplate)}}}else Ui(ye,ne.id,ne.changeToThisTemplate)}else{var Me=Ie.choice;if(Ui(Me,ne.id,ne.changeToThisTemplate),ne.changeAddonTemplate)for(var Fe=0;Fe<Me.addons.length;Fe++){Ui(Me.addons[Fe],ne.id,ne.changeToThisTemplate)}}}if(ne.changeWidth&&ne.changeWidthList&&ne.changeToThisWidth)for(var Re=ne.changeWidthList.split(","),je=0;je<Re.length;je++){var De=Re[je],Pe=Et.get(De);if(void 0===Pe){var $e=Wt.get(De);if(void 0===$e){var qe=Ut.get(De[0]);if(void 0===qe);else{for(var Ve=qe.rowElements,Le=0;Le<Ve.length;Le++){var Ne=Wt.get(Ve[Le]);void 0!==Ne&&Gi(Ne,ne.id,ne.changeToThisWidth)}for(var We=qe.elements,Ee=0;Ee<We.length;Ee++){var Ue=Et.get(We[Ee]);if(void 0!==Ue)Gi(Ue.choice,ne.id,ne.changeToThisWidth)}}}else Gi($e,ne.id,ne.changeToThisWidth)}else{Gi(Pe.choice,ne.id,ne.changeToThisWidth)}}if(ne.muteBgm&&Qt){var ze=W(Qt);app.isMute=!0,ze&&"function"==typeof ze.mute&&ze.mute()}ne.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),ne.showAllAddons&&(app.showAllAddons+=1),re.currentChoices+=1}else{if(ne.discountOther&&void 0!==ne.discountOperator&&void 0!==ne.discountValue)if(ne.isDisChoices){if(void 0!==ne.discountChoices)for(var Ge=0;Ge<ne.discountChoices.length;Ge++){var _e=Et.get(ne.discountChoices[Ge]);if(void 0!==_e)for(var He=0;He<_e.choice.scores.length;He++){var Ye,Je,Ze=_e.choice.scores[He];Ze.isNotDiscountable||0!==(null===(Ye=ne.discountPointTypes)||void 0===Ye?void 0:Ye.length)&&-1===(null===(Je=ne.discountPointTypes)||void 0===Je?void 0:Je.indexOf(Ze.id))||Xo(ne,Ze)}}}else if(void 0!==ne.discountGroups)for(var Xe=0;Xe<ne.discountGroups.length;Xe++){var Ke=Ut.get(ne.discountGroups[Xe]);if(void 0!==Ke)for(var Qe=0;Qe<Ke.elements.length;Qe++){var et=Et.get(Ke.elements[Qe]);if(void 0!==et)for(var tt=0;tt<et.choice.scores.length;tt++){var ot,it,nt=et.choice.scores[tt];nt.isNotDiscountable||0!==(null===(ot=ne.discountPointTypes)||void 0===ot?void 0:ot.length)&&-1===(null===(it=ne.discountPointTypes)||void 0===it?void 0:it.indexOf(nt.id))||Xo(ne,nt)}}}if(ne.addToAllowChoice&&void 0!==ne.idOfAllowChoice&&void 0!==ne.numbAddToAllowChoice)for(var rt=0;rt<ne.idOfAllowChoice.length;rt++){var at=Wt.get(ne.idOfAllowChoice[rt]);void 0!==at&&(at.allowedChoices-=ne.numbAddToAllowChoice)}Vt.delete(ne.id),ne.forcedActivated&&Lt.set(ne.id,{multiple:ne.multipleUseVariable})}}else Vt.delete(n[oe])}}function oi(e,t,o){Array.from(Vt.entries()).forEach(function(o){var i=g(o,2),n=i[0],r=(i[1],Et.get(n));if(void 0!==r){for(var a=r.row,c=r.choice,l=new $,s=!1,d=0;d<c.scores.length;d++){var u=c.scores[d];if(!u.isNotRecalculatable){var v=Nt.get(u.id);if(void 0!==v){if(e.discountOther&&u.isChangeDiscount&&void 0!==u.tmpDisScore){var m=c.multipleUseVariable;if(c.isSelectableMultiple&&c.isMultipleUseVariable&&void 0!==c.numMultipleTimesMinus){for(var p=m-1;p>=0;p--)c.isActive&&(v.startingSum+=u.tmpDisScore);c.isActive&&(l.set(u.id,u.tmpDisScore),delete u.isChangeDiscount,delete u.tmpDisScore)}else c.isSelectableMultiple||(v.startingSum+=u.tmpDisScore,l.set(u.id,u.tmpDisScore),delete u.isChangeDiscount,delete u.tmpDisScore)}var h=t.get(u.id)||0;if(c.isActive){var b=Wo(u.requireds),w=new $(JSON.parse(JSON.stringify(f(Vt))));w.delete(e.id),a.currentChoices-=1,v.startingSum+=h;var T=Wo(u.requireds,w);if(a.currentChoices+=1,v.startingSum-=h,T!==b){var I=u.discountIsOn&&void 0!==u.discountScore?u.discountScore:u.value;if(T)if(c.isSelectableMultiple&&c.isMultipleUseVariable&&void 0!==c.numMultipleTimesMinus)for(var y=c.multipleUseVariable-1;y>=0;y--)void 0!==u.isActiveMul&&u.isActiveMul[y]&&(v.startingSum+=I,l.set(u.id,I),u.isActiveMul[y]=!1);else c.isSelectableMultiple||u.isActive&&(s=!0,v.startingSum+=I,l.set(u.id,I),delete u.isActive);else u.isActive||(s=!0,v.startingSum-=I,l.set(u.id,I),u.isActive=!0)}}}}}s&&oi(c,l)}})}function ii(e,t){var o=e.split("/IMG#"),i=o.length>1?o[1]:"",n=(o=o[0].split("/WORD#")).length>1?o[1].replace(/\/CHAR#/g,","):"",r=(o=o[0].split("/RND#")).length>1?o[1].split("/AND#"):"",a=o[0],c=Et.get(a);if(void 0!==c){for(var l=c.row,s=c.choice,u=0;u<s.scores.length;u++){var v=s.scores[u],g=Nt.get(v.id);void 0!==g&&v.isRandom&&!v.setValue&&void 0!==v.maxValue&&void 0!==v.minValue&&(v.value=Math.floor(Math.random()*(v.maxValue-v.minValue+1))+v.minValue,v.value=g.allowFloat?v.value:Math.floor(v.value),v.setValue=!0)}var m=new $;if(s.isActive=!0,Vt.set(s.id,{multiple:0}),l.currentChoices+=1,s.discountOther&&void 0!==s.discountOperator&&void 0!==s.discountValue)if(s.isDisChoices){var p=new Set;if(void 0!==s.discountRows)for(var h=0;h<s.discountRows.length;h++){var b=Wt.get(s.discountRows[h]);if(void 0!==b)for(var w=0;w<b.objects.length;w++){for(var T=b.objects[w],I=0;I<T.scores.length;I++){var y,x,S=T.scores[I];S.isNotDiscountable||0!==(null===(y=s.discountPointTypes)||void 0===y?void 0:y.length)&&-1===(null===(x=s.discountPointTypes)||void 0===x?void 0:x.indexOf(S.id))||Ko(s,S)}p.add(T.id)}}if(void 0!==s.discountChoices)for(var C=0;C<s.discountChoices.length;C++)if(!p.has(s.discountChoices[C])){var B=Et.get(s.discountChoices[C]);if(void 0!==B)for(var O=B.choice,A=0;A<O.scores.length;A++){var k,M,F=O.scores[A];F.isNotDiscountable||0!==(null===(k=s.discountPointTypes)||void 0===k?void 0:k.length)&&-1===(null===(M=s.discountPointTypes)||void 0===M?void 0:M.indexOf(F.id))||Ko(s,F)}}}else if(void 0!==s.discountGroups)for(var R=0;R<s.discountGroups.length;R++){var j=Ut.get(s.discountGroups[R]);if(void 0!==j)for(var D=0;D<j.elements.length;D++){var P=Et.get(j.elements[D]);if(void 0!==P)for(var q=0;q<P.choice.scores.length;q++){var V,L,N=P.choice.scores[q];N.isNotDiscountable||0!==(null===(V=s.discountPointTypes)||void 0===V?void 0:V.length)&&-1===(null===(L=s.discountPointTypes)||void 0===L?void 0:L.indexOf(N.id))||Ko(s,N)}}}for(var E=0;E<s.scores.length;E++){var U=s.scores[E];if(Wo(U.requireds)&&!U.isActive){var z=Nt.get(U.id);if(void 0!==z){var G=U.discountIsOn&&void 0!==U.discountScore?U.discountScore:U.value;G=z.allowFloat?G:Math.floor(G),z.startingSum-=G,U.isActive=!0;var _=m.get(U.id);void 0!==_?m.set(U.id,G+_):m.set(U.id,G)}}}if(s.duplicateRow&&void 0!==s.duplicateRowId&&void 0!==s.duplicateRowPlace&&ci(s),s.activateOtherChoice&&void 0!==s.activateThisChoice){var H=new Set(t.map(function(e){return e.split("/ON#")[0]}));if(s.isActivateRandom&&void 0!==s.numActivateRandom)if(""===r){for(var Y=s.activateThisChoice.split(",").filter(function(e){return H.has(e.split("/ON#")[0])}),J=s.numActivateRandom>Y.length?Y.length:s.numActivateRandom,Z=new Set,X=0;X<Y.length;X++){var K=Et.get(Y[X]);if(void 0!==K)if(!Wo(K.choice.requireds)){var Q=Y[X];Y.splice(X,1),Y.push(Q)}}for(var ee=Y.length-1;ee>=0;ee--)Z.add(Y[ee]);Y=f(Z).reverse(),s.activatedRandom=Y.slice(0,J);for(var te=0;te<J;te++){var oe=s.activatedRandom[te].split("/ON#"),ie=Et.get(oe[0]);if(void 0!==ie){var ne=ie.choice;if(!s.isAllowDeselect){if(ne.isSelectableMultiple&&ne.isMultipleUseVariable)for(var re=parseInt(oe[1]),ae=0;ae<Math.abs(re);ae++)re>0&&void 0!==ne.numMultipleTimesMinus?ne.numMultipleTimesMinus++:re<0&&void 0!==ne.numMultipleTimesPluss&&ne.numMultipleTimesPluss--;ne.forcedActivated=!0}}}}else{var ce=r.filter(function(e){return H.has(e.split("/RON#")[0])});s.activatedRandom=ce;for(var le=0;le<ce.length;le++){var se=s.activatedRandom[le].split("/RON#"),de=Et.get(se[0]);if(void 0!==de){var ue=de.choice;if(!s.isAllowDeselect){if(ue.isSelectableMultiple&&ue.isMultipleUseVariable)for(var ve=parseInt(se[1]),fe=0;fe<Math.abs(ve);fe++)ve>0&&void 0!==ue.numMultipleTimesMinus?ue.numMultipleTimesMinus++:ve<0&&void 0!==ue.numMultipleTimesPluss&&ue.numMultipleTimesPluss--;ue.forcedActivated=!0}}}}else for(var ge=s.activateThisChoice.split(",").filter(function(e){return H.has(e.split("/ON#")[0])}),me=0;me<ge.length;me++){var pe=ge[me].split("/ON#"),he=pe.length>1?parseInt(pe[1]):0,be=Et.get(pe[0]);if(void 0!==be){var we=be.choice;if(!s.isAllowDeselect){if(we.isSelectableMultiple&&we.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(var Te=0;Te<Math.abs(s.multipleUseVariable);Te++)for(var Ie=0;Ie<Math.abs(he);Ie++)he>0&&void 0!==we.numMultipleTimesMinus?we.numMultipleTimesMinus++:he<0&&void 0!==we.numMultipleTimesPluss&&we.numMultipleTimesPluss--;else for(var ye=0;ye<Math.abs(he);ye++)he>0&&void 0!==we.numMultipleTimesMinus?we.numMultipleTimesMinus++:he<0&&void 0!==we.numMultipleTimesPluss&&we.numMultipleTimesPluss--;we.forcedActivated=!0}}else{var xe=Ut.get(pe[0]);if(void 0!==xe)for(var Se=xe.elements,Ce=0;Ce<Se.length;Ce++){var Be=Et.get(Se[Ce]);if(void 0!==Be){var Oe=Be.choice;if(!s.isAllowDeselect){if(Oe.isSelectableMultiple&&Oe.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(var Ae=0;Ae<Math.abs(s.multipleUseVariable);Ae++)for(var ke=0;ke<Math.abs(he);ke++)he>0&&void 0!==Oe.numMultipleTimesMinus?Oe.numMultipleTimesMinus++:he<0&&void 0!==Oe.numMultipleTimesPluss&&Oe.numMultipleTimesPluss--;else for(var Me=0;Me<Math.abs(he);Me++)he>0&&void 0!==Oe.numMultipleTimesMinus?Oe.numMultipleTimesMinus++:he<0&&void 0!==Oe.numMultipleTimesPluss&&Oe.numMultipleTimesPluss--;Oe.forcedActivated=!0}}}}}}if(s.multiplyPointtypeIsOn&&void 0!==s.pointTypeToMultiply&&void 0!==s.multiplyWithThis){var Fe=0;s.multiplyPointtypeIsOnCheck=!0,"object"!==d(s.startingSumAtMultiply)&&(s.startingSumAtMultiply=[]);for(var Re=0;Re<s.pointTypeToMultiply.length;Re++){var je=Nt.get(s.pointTypeToMultiply[Re]);if(void 0!==je)if(s.multiplyPointtypeIsId&&"string"==typeof s.multiplyWithThis){var De=Nt.get(s.multiplyWithThis);void 0!==De?(s.startingSumAtMultiply[Re]={value:je.startingSum,calcVal:De.startingSum},je.startingSum*=De.startingSum,je.startingSum=je.allowFloat?je.startingSum:Math.floor(je.startingSum)):Fe++}else"number"==typeof s.multiplyWithThis&&(s.startingSumAtMultiply[Re]={value:je.startingSum,calcVal:s.multiplyWithThis},je.startingSum*=s.multiplyWithThis,je.startingSum=je.allowFloat?je.startingSum:Math.floor(je.startingSum));else Fe++}Fe===s.pointTypeToMultiply.length&&delete s.multiplyPointtypeIsOnCheck,s.multiplyPointtypeIsOnCheck&&Zt.push(s)}if(s.dividePointtypeIsOn&&void 0!==s.pointTypeToDivide&&void 0!==s.divideWithThis){var Pe=0;s.dividePointtypeIsOnCheck=!0,"object"!==d(s.startingSumAtDivide)&&(s.startingSumAtDivide=[]);for(var $e=0;$e<s.pointTypeToDivide.length;$e++){var qe=Nt.get(s.pointTypeToDivide[$e]);if(void 0!==qe)if(s.dividePointtypeIsId&&"string"==typeof s.divideWithThis){var Ve=Nt.get(s.divideWithThis);void 0!==Ve?0===Ve.startingSum?Pe++:(s.startingSumAtDivide[$e]={value:qe.startingSum,calcVal:Ve.startingSum},qe.startingSum/=Ve.startingSum,qe.startingSum=qe.allowFloat?qe.startingSum:Math.floor(qe.startingSum)):Pe++}else"number"==typeof s.divideWithThis&&(0===s.dividedWithThis?Pe++:(s.startingSumAtDivide[$e]={value:qe.startingSum,calcVal:s.divideWithThis},qe.startingSum/=s.divideWithThis,qe.startingSum=qe.allowFloat?qe.startingSum:Math.floor(qe.startingSum)));else Pe++}Pe===s.pointTypeToDivide.length&&delete s.dividePointtypeIsOnCheck,!s.multiplyPointtypeIsOnCheck&&s.dividePointtypeIsOnCheck&&Zt.push(s)}if(s.isChangeVariables&&void 0!==s.changedVariables)for(var Le=0;Le<s.changedVariables.length;Le++){var Ne=_t.get(s.changedVariables[Le]);void 0!==Ne&&("1"===s.changeType?Ne.isTrue=!0:"2"===s.changeType?Ne.isTrue=!1:"3"===s.changeType&&(Ne.isTrue=!Ne.isTrue))}if(s.addToAllowChoice&&void 0!==s.idOfAllowChoice&&void 0!==s.numbAddToAllowChoice)for(var We=0;We<s.idOfAllowChoice.length;We++){var Ee=Wt.get(s.idOfAllowChoice[We]);void 0!==Ee&&(Ee.allowedChoices+=s.numbAddToAllowChoice)}if(s.textfieldIsOn&&void 0!==s.idOfTheTextfieldWord&&void 0!==s.wordChangeSelect){var Ue=Gt.get(s.idOfTheTextfieldWord);void 0!==Ue&&(s.customTextfieldIsOn?Ue.replaceText=n:Ue.replaceText=s.wordChangeSelect)}if(s.isImageUpload&&(s.defaultImage=s.image,s.image=i),s.backpackBtnRequirement&&(void 0===app.btnBackpackIsOn&&(app.btnBackpackIsOn=0),app.btnBackpackIsOn+=1),s.showAllAddons&&(void 0===app.showAllAddons&&(app.showAllAddons=0),app.showAllAddons+=1),s.changeBackground&&(s.changeBgImage?void 0!==s.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:s.id,data:s.bgImage}),app.styling.backgroundImage=s.bgImage):void 0!==s.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:s.id,data:s.bgColor}),app.styling.backgroundColor=s.bgColor)),s.changePointBar&&(s.changeBarBgColorIsOn&&void 0!==s.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:s.id,data:s.changedBarBgColor}),app.styling.barBackgroundColor=s.changedBarBgColor),s.changeBarIconColorIsOn&&void 0!==s.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:s.id,data:s.changedBarIconColor}),app.styling.barIconColor=s.changedBarIconColor),s.changeBarTextColorIsOn&&void 0!==s.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:s.id,data:s.changedBarTextColor}),app.styling.barTextColor=s.changedBarTextColor)),s.changeTemplates&&s.changeTemplatesList&&s.changeToThisTemplate)for(var ze=s.changeTemplatesList.split(","),Ge=0;Ge<ze.length;Ge++){var _e=ze[Ge],He=Et.get(_e);if(void 0===He){var Ye=Wt.get(_e);if(void 0===Ye){var Je=Ut.get(_e[0]);if(void 0===Je);else{for(var Ze=Je.rowElements,Xe=0;Xe<Ze.length;Xe++){var Ke=Wt.get(Ze[Xe]);void 0!==Ke&&Ui(Ke,s.id,s.changeToThisTemplate)}for(var Qe=Je.elements,et=0;et<Qe.length;et++){var tt=Et.get(Qe[et]);if(void 0!==tt)Ui(tt.choice,s.id,s.changeToThisTemplate)}}}else Ui(Ye,s.id,s.changeToThisTemplate)}else{var ot=He.choice;if(Ui(ot,s.id,s.changeToThisTemplate),s.changeAddonTemplate)for(var it=0;it<ot.addons.length;it++){Ui(ot.addons[it],s.id,s.changeToThisTemplate)}}}if(s.changeWidth&&s.changeWidthList&&s.changeToThisWidth)for(var nt=s.changeWidthList.split(","),rt=0;rt<nt.length;rt++){var at=nt[rt],ct=Et.get(at);if(void 0===ct){var lt=Wt.get(at);if(void 0===lt){var st=Ut.get(at[0]);if(void 0===st);else{for(var dt=st.rowElements,ut=0;ut<dt.length;ut++){var vt=Wt.get(dt[ut]);void 0!==vt&&Gi(vt,s.id,s.changeToThisWidth)}for(var ft=st.elements,gt=0;gt<ft.length;gt++){var mt=Et.get(ft[gt]);if(void 0!==mt)Gi(mt.choice,s.id,s.changeToThisWidth)}}}else Gi(lt,s.id,s.changeToThisWidth)}else{Gi(ct.choice,s.id,s.changeToThisWidth)}}if(s.setBgmIsOn&&s.bgmId&&(eo.bgmIsPlaying=!0,eo.isBgmInit?zo(s,s.bgmId,0):(_o(s),eo.isBgmInit=!0)),s.muteBgm&&Qt){var pt=W(Qt);pt&&"function"==typeof pt.mute&&(app.isMute=!0,pt.mute())}if(s.isContentHidden&&void 0!==s.hiddenContentsRow&&void 0!==s.hiddenContentsType)for(var ht=0;ht<s.hiddenContentsRow.length;ht++){var bt=Wt.get(s.hiddenContentsRow[ht]);if(void 0!==bt){bt.textIsRemoved||(bt.textIsRemoved=!0);for(var wt=0;wt<s.hiddenContentsType.length;wt++)switch(s.hiddenContentsType[wt]){case"1":bt.objectTitleRemoved=!0;break;case"2":bt.objectImageRemoved=!0;break;case"3":bt.objectTextRemoved=!0;break;case"4":bt.objectScoreRemoved=!0;break;case"5":bt.objectRequirementRemoved=!0;break;case"6":bt.addonTitleRemoved=!0;break;case"7":bt.addonImageRemoved=!0;break;case"8":bt.addonTextRemoved=!0}}}oi(s,m)}}function ni(e,t){var o=e.length>1?e[1].split("/AND#"):"",i=e[0].split("/ON#"),n=Et.get(i[0]);if(void 0!==n){for(var r=n.choice,a=n.row,c=0;c<r.scores.length;c++){var l=r.scores[c],s=Nt.get(l.id);void 0!==s&&l.isRandom&&!l.setValue&&void 0!==l.maxValue&&void 0!==l.minValue&&(l.value=Math.floor(Math.random()*(l.maxValue-l.minValue+1))+l.minValue,l.value=s.allowFloat?l.value:Math.floor(l.value),l.setValue=!0)}var d=new $,u=r.isActive,v=r.multipleUseVariable>=0,g=Math.abs(r.multipleUseVariable);if(r.isActive||(r.isActive=!0,a.currentChoices+=1),r.multipleUseVariable+=1,Vt.set(r.id,{multiple:r.multipleUseVariable}),v&&r.discountOther&&void 0!==r.discountOperator&&void 0!==r.discountValue)if(r.isDisChoices){var m=new Set;if(void 0!==r.discountRows)for(var p=0;p<r.discountRows.length;p++){var h=Wt.get(r.discountRows[p]);if(void 0!==h)for(var b=0;b<h.objects.length;b++){for(var w=h.objects[b],T=0;T<w.scores.length;T++){var I,y,x=w.scores[T];x.isNotDiscountable||0!==(null===(I=r.discountPointTypes)||void 0===I?void 0:I.length)&&-1===(null===(y=r.discountPointTypes)||void 0===y?void 0:y.indexOf(x.id))||Ko(r,x)}m.add(w.id)}}if(void 0!==r.discountChoices)for(var S=0;S<r.discountChoices.length;S++){var C=Et.get(r.discountChoices[S]);if(void 0!==C){var B=C.choice;if(!m.has(B.id))for(var O=0;O<B.scores.length;O++){var A,k,M=B.scores[O];M.isNotDiscountable||0!==(null===(A=r.discountPointTypes)||void 0===A?void 0:A.length)&&-1===(null===(k=r.discountPointTypes)||void 0===k?void 0:k.indexOf(M.id))||Ko(r,M)}}}}else if(void 0!==r.discountGroups)for(var F=0;F<r.discountGroups.length;F++){var R=Ut.get(r.discountGroups[F]);if(void 0!==R)for(var j=0;j<R.elements.length;j++){var D=Et.get(R.elements[j]);if(void 0!==D)for(var P=0;P<D.choice.scores.length;P++){var q,V,L=D.choice.scores[P];L.isNotDiscountable||0!==(null===(q=r.discountPointTypes)||void 0===q?void 0:q.length)&&-1===(null===(V=r.discountPointTypes)||void 0===V?void 0:V.indexOf(L.id))||Ko(r,L)}}}for(var N=0;N<r.scores.length;N++){var E=r.scores[N];if(void 0===E.isActiveMul&&(E.isActiveMul=[]),Wo(E.requireds)&&!E.isActiveMul[g]){var U=Nt.get(E.id);if(void 0!==U){var z=E.discountIsOn&&void 0!==E.discountScore?E.discountScore:E.value;z=U.allowFloat?z:Math.floor(z),E.multiplyByTimes&&(z*=g+1),U.startingSum-=z,E.isActiveMul[g]=!0;var G=d.get(E.id);void 0!==G?d.set(E.id,z+G):d.set(E.id,z)}}}if(v&&(r.duplicateRow&&void 0!==r.duplicateRowId&&void 0!==r.duplicateRowPlace&&ci(r),r.activateOtherChoice&&void 0!==r.activateThisChoice)){var _=new Set(t.map(function(e){return e.split("/ON#")[0]}));if(r.isActivateRandom&&void 0!==r.numActivateRandom)if(void 0===r.activatedRandomMul&&(r.activatedRandomMul=[]),""===o){if(1===r.multipleUseVariable){var H=r.activateThisChoice.split(",").filter(function(e){return _.has(e.split("/ON#")[0])});r.numActivateRandom>H.length?H.length:r.numActivateRandom;for(var Y=new Set,J=0;J<H.length;J++){var Z=Et.get(H[J]);if(void 0!==Z)if(!Wo(Z.choice.requireds)){var X=H[J];H.splice(J,1),H.push(X)}}for(var K=H.length-1;K>=0;K--)Y.add(H[K]);H=f(Y).reverse();for(var Q=0,ee=[],te=0;te<r.numActivateRandom;te++){ee[te]=H.length/(r.numActivateRandom*(te+1))<1?H.length%(r.numActivateRandom*(te+1)):r.numActivateRandom,r.activatedRandomMul.push(H.slice(Q,ee[te]+Q));for(var oe=0;oe<ee[te]-Q;oe++){var ie=r.activatedRandomMul[te][oe].split("/ON#"),ne=ie.length>1?parseInt(ie[1]):0,re=Et.get(ie[0]);if(void 0!==re){var ae=re.choice;if(!r.isAllowDeselect){if(ae.isSelectableMultiple&&ae.isMultipleUseVariable)for(var ce=0;ce<Math.abs(ne);ce++)ne>0&&void 0!==ae.numMultipleTimesMinus?ae.numMultipleTimesMinus++:ne<0&&void 0!==ae.numMultipleTimesPluss&&ae.numMultipleTimesPluss--;ae.forcedActivated=!0}}}Q+=ee[te]}}}else{var le=(r.multipleUseVariable-1)*r.numActivateRandom,se=o.splice(le,le+r.numActivateRandom);r.activatedRandomMul.push(se);for(var de=0;de<r.activatedRandomMul[r.multipleUseVariable-1].length;de++){var ue=r.activatedRandomMul[r.multipleUseVariable-1][de].split("/RON#"),ve=ue.length>1?parseInt(ue[1]):0,fe=Et.get(ue[0]);if(void 0!==fe){var ge=fe.choice;if(!r.isAllowDeselect&&_.has(ge.id)){if(ge.isSelectableMultiple&&ge.isMultipleUseVariable)for(var me=0;me<Math.abs(ve);me++)ve>0&&void 0!==ge.numMultipleTimesMinus?ge.numMultipleTimesMinus++:ve<0&&void 0!==ge.numMultipleTimesPluss&&ge.numMultipleTimesPluss--;ge.forcedActivated=!0}}}}else for(var pe=r.activateThisChoice.split(",").filter(function(e){return _.has(e.split("/ON#")[0])}),he=0;he<pe.length;he++){var be=pe[he].split("/ON#"),we=be.length>1?parseInt(be[1]):0,Te=Et.get(be[0]);if(void 0!==Te){var Ie=Te.choice;if(!r.isAllowDeselect){if(Ie.isSelectableMultiple&&Ie.isMultipleUseVariable)if(r.isSelectableMultiple&&r.isMultipleUseVariable)for(var ye=0;ye<Math.abs(r.multipleUseVariable);ye++)for(var xe=0;xe<Math.abs(we);xe++)we>0&&void 0!==Ie.numMultipleTimesMinus?Ie.numMultipleTimesMinus++:we<0&&void 0!==Ie.numMultipleTimesPluss&&Ie.numMultipleTimesPluss--;else for(var Se=0;Se<Math.abs(we);Se++)we>0&&void 0!==Ie.numMultipleTimesMinus?Ie.numMultipleTimesMinus++:we<0&&void 0!==Ie.numMultipleTimesPluss&&Ie.numMultipleTimesPluss--;Ie.forcedActivated=!0}}else{var Ce=Ut.get(be[0]);if(void 0!==Ce)for(var Be=Ce.elements,Oe=0;Oe<Be.length;Oe++){var Ae=Et.get(Be[Oe]);if(void 0!==Ae){var ke=Ae.choice;if(!r.isAllowDeselect){if(ke.isSelectableMultiple&&ke.isMultipleUseVariable)if(r.isSelectableMultiple&&r.isMultipleUseVariable)for(var Me=0;Me<Math.abs(r.multipleUseVariable);Me++)for(var Fe=0;Fe<Math.abs(we);Fe++)we>0&&void 0!==ke.numMultipleTimesMinus?ke.numMultipleTimesMinus++:we<0&&void 0!==ke.numMultipleTimesPluss&&ke.numMultipleTimesPluss--;else for(var Re=0;Re<Math.abs(we);Re++)we>0&&void 0!==ke.numMultipleTimesMinus?ke.numMultipleTimesMinus++:we<0&&void 0!==ke.numMultipleTimesPluss&&ke.numMultipleTimesPluss--;ke.forcedActivated=!0}}}}}}if(r.addToAllowChoice&&void 0!==r.idOfAllowChoice&&void 0!==r.numbAddToAllowChoice)for(var je=0;je<r.idOfAllowChoice.length;je++){var De=Wt.get(r.idOfAllowChoice[je]);void 0!==De&&(De.allowedChoices+=r.numbAddToAllowChoice)}if(!u){if(r.isChangeVariables&&void 0!==r.changedVariables)for(var Pe=0;Pe<r.changedVariables.length;Pe++){var $e=_t.get(r.changedVariables[Pe]);void 0!==$e&&("1"===r.changeType?$e.isTrue=!0:"2"===r.changeType?$e.isTrue=!1:"3"===r.changeType&&($e.isTrue=!$e.isTrue))}if(r.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),r.showAllAddons&&(app.showAllAddons+=1),r.changeBackground&&(r.changeBgImage?void 0!==r.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:r.id,data:r.bgImage}),app.styling.backgroundImage=r.bgImage):void 0!==r.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:r.id,data:r.changedBgColorCode}),app.styling.backgroundColor=r.changedBgColorCode)),r.changePointBar&&(r.changeBarBgColorIsOn&&void 0!==r.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:r.id,data:r.changedBarBgColor}),app.styling.barBackgroundColor=r.changedBarBgColor),r.changeBarIconColorIsOn&&void 0!==r.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:r.id,data:r.changedBarIconColor}),app.styling.barIconColor=r.changedBarIconColor),r.changeBarTextColorIsOn&&void 0!==r.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:r.id,data:r.changedBarTextColor}),app.styling.barTextColor=r.changedBarTextColor)),r.changeTemplates&&r.changeTemplatesList&&r.changeToThisTemplate)for(var qe=r.changeTemplatesList.split(","),Ve=0;Ve<qe.length;Ve++){var Le=qe[Ve],Ne=Et.get(Le);if(void 0===Ne){var We=Wt.get(Le);if(void 0===We){var Ee=Ut.get(Le[0]);if(void 0===Ee);else{for(var Ue=Ee.rowElements,ze=0;ze<Ue.length;ze++){var Ge=Wt.get(Ue[ze]);void 0!==Ge&&Ui(Ge,r.id,r.changeToThisTemplate)}for(var _e=Ee.elements,He=0;He<_e.length;He++){var Ye=Et.get(_e[He]);if(void 0!==Ye)Ui(Ye.choice,r.id,r.changeToThisTemplate)}}}else Ui(We,r.id,r.changeToThisTemplate)}else{var Je=Ne.choice;if(Ui(Je,r.id,r.changeToThisTemplate),r.changeAddonTemplate)for(var Ze=0;Ze<Je.addons.length;Ze++){Ui(Je.addons[Ze],r.id,r.changeToThisTemplate)}}}if(r.changeWidth&&r.changeWidthList&&r.changeToThisWidth)for(var Xe=r.changeWidthList.split(","),Ke=0;Ke<Xe.length;Ke++){var Qe=Xe[Ke],et=Et.get(Qe);if(void 0===et){var tt=Wt.get(Qe);if(void 0===tt){var ot=Ut.get(Qe[0]);if(void 0===ot);else{for(var it=ot.rowElements,nt=0;nt<it.length;nt++){var rt=Wt.get(it[nt]);void 0!==rt&&Gi(rt,r.id,r.changeToThisWidth)}for(var at=ot.elements,ct=0;ct<at.length;ct++){var lt=Et.get(at[ct]);if(void 0!==lt)Gi(lt.choice,r.id,r.changeToThisWidth)}}}else Gi(tt,r.id,r.changeToThisWidth)}else{Gi(et.choice,r.id,r.changeToThisWidth)}}if(r.setBgmIsOn&&r.bgmId&&(eo.bgmIsPlaying=!0,eo.isBgmInit?zo(r,r.bgmId,0):(_o(r),eo.isBgmInit=!0)),r.muteBgm&&Qt){var st=W(Qt);st&&"function"==typeof st.mute&&(app.isMute=!0,st.mute())}if(r.isContentHidden&&void 0!==r.hiddenContentsRow&&void 0!==r.hiddenContentsType)for(var dt=0;dt<r.hiddenContentsRow.length;dt++){var ut=Wt.get(r.hiddenContentsRow[dt]);if(void 0!==ut){ut.textIsRemoved||(ut.textIsRemoved=!0);for(var vt=0;vt<r.hiddenContentsType.length;vt++)switch(r.hiddenContentsType[vt]){case"1":ut.objectTitleRemoved=!0;break;case"2":ut.objectImageRemoved=!0;break;case"3":ut.objectTextRemoved=!0;break;case"4":ut.objectScoreRemoved=!0;break;case"5":ut.objectRequirementRemoved=!0;break;case"6":ut.addonTitleRemoved=!0;break;case"7":ut.addonImageRemoved=!0;break;case"8":ut.addonTextRemoved=!0}}}}oi(r,d)}}function ri(e,t){for(var o=new $,i=Math.abs(e.multipleUseVariable-1),n=0;n<e.scores.length;n++){var r=e.scores[n];if(void 0===r.isActiveMulMinus&&(r.isActiveMulMinus=[]),Wo(r.requireds)&&!r.isActiveMulMinus[i]){var a=Nt.get(r.id);if(void 0!==a){var c=r.discountIsOn&&void 0!==r.discountScore?r.discountScore:r.value;c=a.allowFloat?c:Math.floor(c),r.multiplyByTimes&&(c*=Math.abs(i)),a.startingSum+=c;var l=o.get(r.id);void 0!==l?o.set(r.id,-c+l):o.set(r.id,-c),r.isActiveMulMinus[i]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,t.currentChoices-=1,Vt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,t.currentChoices+=1),Vt.set(e.id,{multiple:e.multipleUseVariable})),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var s=0;s<e.idOfAllowChoice.length;s++){var d=Wt.get(e.idOfAllowChoice[s]);void 0!==d&&(d.allowedChoices-=e.numbAddToAllowChoice)}oi(e,o)}function ai(e){ti();for(var t=e.split(","),o=0;o<t.length;o++){var i=t[o].split(/\/(IMG|WORD|RND)#/)[0].split("/ON#"),n=i.length>1?parseInt(i[1]):0,r=Et.get(i[0]);if(void 0!==r){var a=r.choice;if(a.isSelectableMultiple&&a.isMultipleUseVariable)for(var c=0;c<Math.abs(n);c++){var l=t[o].split("/RND#");n>0?ni(l,t):ri(a,r.row)}else ii(t[o],t)}}}function ci(e,t){if(void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace){var o=e.duplicateRowId,i=0;Array.from(Wt.entries()).forEach(function(e){g(e,1)[0].split("/D#")[0]===o.split("/D#")[0]&&i++});var n=Wt.get(e.duplicateRowId),r=Wt.get(e.duplicateRowPlace),a="/D#".concat(i);if(void 0!==n&&void 0!==r){var c=JSON.parse(JSON.stringify(n));if(c.id="".concat(c.id.split("/D#")[0]).concat(a),r.isBackpack){app.backpack.splice(r.index+1,0,c);for(var l=r.index+1;l<app.backpack.length;l++)app.backpack[l].index=l}else{app.rows.splice(r.index+1,0,c);for(var s=r.index+1;s<app.rows.length;s++)app.rows[s].index=s}Wt.set(c.id,c);for(var d=0;d<c.objects.length;d++){var u=c.objects[d];u.id="".concat(u.id.split("/D#")[0]).concat(a),u.isActive=!1,delete u.forcedActivated;for(var v=0;v<u.scores.length;v++){var f=u.scores[v];f.idx=Ro(0,5),Jt.add(f.idx),delete f.isActive,delete f.setValue,delete f.discountIsOn,delete f.discountShow,delete f.discountBeforeText,delete f.discountAfterText,delete f.discountScore,delete f.discountScoreCal,delete f.isChangeDiscount,delete f.tmpDisScore,delete f.tmpDiscount,delete f.discountedFrom,delete f.dupTextA,delete f.dupTextB,delete f.discountTextA,delete f.discountTextB,delete f.notStackableDiscount}for(var m=0;m<u.addons.length;m++){u.addons[m].parentId=u.id}if(!e.dRowAddSufReq){for(var p=0;p<u.requireds.length;p++){var h=u.requireds[p];if("id"===h.type){var b=h.reqId.split("/ON#"),w="".concat(b[0].split("/D#")[0]).concat(a);b.length>1?h.reqId="".concat(w,"/ON#").concat(b[1]):h.reqId=w}else if("or"===h.type)for(var T=0;T<h.orRequired.length;T++){var I=h.orRequired[T];if(void 0!==I.req){var y=I.req.split("/ON#"),x="".concat(y[0].split("/D#")[0]).concat(a);y.length>1?I.req="".concat(x,"/ON#").concat(y[1]):I.req=x}}if(void 0!==h.requireds)for(var S=0;S<h.requireds.length;S++){var C=u.requireds[p];if("id"===C.type){var B=C.reqId.split("/ON#"),O="".concat(B[0].split("/D#")[0]).concat(a);B.length>1?C.reqId="".concat(O,"/ON#").concat(B[1]):C.reqId=O}else if("or"===C.type)for(var A=0;A<C.orRequired.length;A++){var k=C.orRequired[A];if(void 0!==k.req){var M=k.req.split("/ON#"),F="".concat(M[0].split("/D#")[0]).concat(a);M.length>1?k.req="".concat(F,"/ON#").concat(M[1]):k.req=F}}}}for(var R=0;R<u.scores.length;R++){var j=u.scores[R];if(void 0!==j.requireds)for(var D=0;D<j.requireds.length;D++){var P=j.requireds[D];if("id"===P.type){var $=P.reqId.split("/ON#"),q="".concat($[0].split("/D#")[0]).concat(a);$.length>1?P.reqId="".concat(q,"/ON#").concat($[1]):P.reqId=q}else if("or"===P.type)for(var V=0;V<P.orRequired.length;V++){var L=P.orRequired[V];if(void 0!==L.req){var N=L.req.split("/ON#"),W="".concat(N[0].split("/D#")[0]).concat(a);N.length>1?L.req="".concat(W,"/ON#").concat(N[1]):L.req=W}}}}for(var E=0;E<u.addons.length;E++){var U=u.addons[E];if(void 0!==U.requireds)for(var z=0;z<U.requireds.length;z++){var G=U.requireds[z];if("id"===G.type){var _=G.reqId.split("/ON#"),H="".concat(_[0].split("/D#")[0]).concat(a);_.length>1?G.reqId="".concat(H,"/ON#").concat(_[1]):G.reqId=H}else if("or"===G.type)for(var Y=0;Y<G.orRequired.length;Y++){var J=G.orRequired[Y];if(void 0!==J.req){var Z=J.req.split("/ON#"),X="".concat(Z[0].split("/D#")[0]).concat(a);Z.length>1?J.req="".concat(X,"/ON#").concat(Z[1]):J.req=X}}}}}if(!e.dRowAddSufFunc){if(u.activateOtherChoice&&void 0!==u.activateThisChoice){for(var K=u.activateThisChoice.split(","),Q="",ee=0;ee<K.length;ee++){var te=K[ee].split("/ON#"),oe="".concat(te[0].split("/D#")[0]).concat(a);te.length>1?Q+="".concat(oe,"/ON#").concat(te[1],","):Q+="".concat(oe,",")}u.activateThisChoice=Q}if(u.deactivateOtherChoice&&void 0!==u.deactivateThisChoice){for(var ie=u.deactivateThisChoice.split(","),ne="",re=0;re<ie.length;re++){var ae=ie[re].split("/ON#"),ce="".concat(ae[0].split("/D#")[0]).concat(a);ae.length>1?ne+="".concat(ce,"/ON#").concat(ae[1],","):ne+="".concat(ce,",")}u.deactivateThisChoice=ne}if(u.duplicateRow&&void 0!==u.duplicateRowId&&void 0!==u.duplicateRowPlace){var le=u.duplicateRowId,se=u.duplicateRowPlace;u.duplicateRowId="".concat(le.split("/D")[0]).concat(a),u.duplicateRowPlace="".concat(se.split("/D")[0]).concat(a)}}if(u.backpackBtnRequirement&&(void 0!==app.hideBackpackBtn?app.hideBackpackBtn+=1:delete u.backpackBtnRequirement),Et.set(u.id,{choice:u,row:c}),u.groups)for(var de=0;de<u.groups.length;de++){var ue=Ut.get(u.groups[de]);if(void 0!==ue)-1===ue.elements.indexOf(u.id)&&ue.elements.push(u.id)}if(u.objectDesignGroups)for(var ve=0;ve<u.objectDesignGroups.length;ve++){var fe=Yt.get(u.objectDesignGroups[ve]);if(void 0!==fe)-1===fe.elements.indexOf(u.id)&&fe.elements.push(u.id)}}}}}function li(e){return/^data:[a-zA-Z]+\/[a-zA-Z]+;base64,/.test(e)}function si(e){var t=e.match(/^data:(image\/[a-zA-Z0-9.+-]+);base64,/);return!!t&&"image/avif"===t[1].toLowerCase()}var di=V({selFilterBlur:L.number().optional(),selFilterBright:L.number().optional(),selFilterCont:L.number().optional(),selFilterGray:L.number().optional(),selFilterHue:L.number().optional(),selFilterInvert:L.number().optional(),selFilterOpac:L.number().optional(),selFilterSatur:L.number().optional(),selFilterSepia:L.number().optional(),reqFilterBlur:L.number().optional(),reqFilterBright:L.number().optional(),reqFilterCont:L.number().optional(),reqFilterGray:L.number().optional(),reqFilterHue:L.number().optional(),reqFilterInvert:L.number().optional(),reqFilterOpac:L.number().optional(),reqFilterSatur:L.number().optional(),reqFilterSepia:L.number().optional(),unselFilterBlur:L.number().optional(),unselFilterBright:L.number().optional(),unselFilterCont:L.number().optional(),unselFilterGray:L.number().optional(),unselFilterHue:L.number().optional(),unselFilterInvert:L.number().optional(),unselFilterOpac:L.number().optional(),unselFilterSatur:L.number().optional(),unselFilterSepia:L.number().optional()}).passthrough(),ui=V({rowTitleTextSize:L.number().optional(),rowTextTextSize:L.number().optional(),objectTitleTextSize:L.number().optional(),objectTextTextSize:L.number().optional(),addonTitleTextSize:L.number().optional(),addonTextTextSize:L.number().optional(),scoreTextSize:L.number().optional()}).passthrough(),vi=V({objectImgBorderWidth:L.number().optional(),objectImageWidth:L.number().optional(),objectImageMarginTop:L.number().optional(),objectImageMarginBottom:L.number().optional(),objectImgBorderRadiusTopLeft:L.number().optional(),objectImgBorderRadiusTopRight:L.number().optional(),objectImgBorderRadiusBottomRight:L.number().optional(),objectImgBorderRadiusBottomLeft:L.number().optional(),objectImageBoxWidth:L.number().optional()}).passthrough(),fi=V({rowImgBorderWidth:L.number().optional(),rowImageWidth:L.number().optional(),rowImageMarginTop:L.number().optional(),rowImageMarginBottom:L.number().optional(),rowImgBorderRadiusTopLeft:L.number().optional(),rowImgBorderRadiusTopRight:L.number().optional(),rowImgBorderRadiusBottomRight:L.number().optional(),rowImgBorderRadiusBottomLeft:L.number().optional(),rowImageBoxWidth:L.number().optional()}).passthrough(),gi=V({addonImgBorderWidth:L.number().optional(),addonImageWidth:L.number().optional(),addonImageMarginTop:L.number().optional(),addonImageMarginBottom:L.number().optional(),addonImgBorderRadiusTopLeft:L.number().optional(),addonImgBorderRadiusTopRight:L.number().optional(),addonImgBorderRadiusBottomRight:L.number().optional(),addonImgBorderRadiusBottomLeft:L.number().optional(),addonImageBoxWidth:L.number().optional()}).passthrough(),mi=V({objectMargin:L.number().optional(),objectTextPadding:L.number().optional(),objectBorderWidth:L.number().optional(),objectDropShadowH:L.number().optional(),objectDropShadowV:L.number().optional(),objectDropShadowBlur:L.number().optional(),objectDropShadowSpread:L.number().optional(),objectBorderRadiusTopLeft:L.number().optional(),objectBorderRadiusTopRight:L.number().optional(),objectBorderRadiusBottomRight:L.number().optional(),objectBorderRadiusBottomLeft:L.number().optional(),objectBorderImageWidth:L.number().optional(),objectBorderImageSliceTop:L.number().optional(),objectBorderImageSliceBottom:L.number().optional(),objectBorderImageSliceLeft:L.number().optional(),objectBorderImageSliceRight:L.number().optional()}).passthrough(),pi=V({rowMargin:L.number().optional(),rowBodyMarginSides:L.number().optional(),rowBodyMarginTop:L.number().optional(),rowBodyMarginBottom:L.number().optional(),rowTextPaddingY:L.number().optional(),rowTextPaddingX:L.number().optional(),rowDropShadowH:L.number().optional(),rowDropShadowV:L.number().optional(),rowDropShadowBlur:L.number().optional(),rowDropShadowSpread:L.number().optional(),rowButtonXPadding:L.number().optional(),rowButtonYPadding:L.number().optional(),rowBorderRadiusTopLeft:L.number().optional(),rowBorderRadiusTopRight:L.number().optional(),rowBorderRadiusBottomRight:L.number().optional(),rowBorderRadiusBottomLeft:L.number().optional(),rowBorderWidth:L.number().optional(),rowBorderImageWidth:L.number().optional(),rowBorderImageSliceTop:L.number().optional(),rowBorderImageSliceBottom:L.number().optional(),rowBorderImageSliceLeft:L.number().optional(),rowBorderImageSliceRight:L.number().optional()}).passthrough(),hi=V({addonMargin:L.number().optional(),addonTextPadding:L.number().optional(),addonBorderWidth:L.number().optional(),addonDropShadowH:L.number().optional(),addonDropShadowV:L.number().optional(),addonDropShadowBlur:L.number().optional(),addonDropShadowSpread:L.number().optional(),addonBorderRadiusTopLeft:L.number().optional(),addonBorderRadiusTopRight:L.number().optional(),addonBorderRadiusBottomRight:L.number().optional(),addonBorderRadiusBottomLeft:L.number().optional(),addonBorderImageWidth:L.number().optional(),addonBorderImageSliceTop:L.number().optional(),addonBorderImageSliceBottom:L.number().optional(),addonBorderImageSliceLeft:L.number().optional(),addonBorderImageSliceRight:L.number().optional()}).passthrough(),bi=V({multiChoiceCounterPosition:L.number().optional(),multiChoiceCounterSize:L.number().optional(),multiChoiceTextSize:L.number().optional()}).passthrough(),wi=V({barTextPadding:L.number().optional(),barTextMargin:L.number().optional(),barPadding:L.number().optional(),barMargin:L.number().optional(),barTextSize:L.number().optional()}).passthrough(),Ti=V({backPackWidth:L.number().optional()}).passthrough(),Ii=di.merge(ui).merge(vi).merge(fi).merge(gi).merge(mi).merge(pi).merge(hi).merge(bi).merge(wi).merge(Ti).passthrough(),yi=V({template:L.number().optional()}).passthrough(),xi=V({value:L.number().optional(),minValue:L.number().optional(),maxValue:L.number().optional(),discountScore:L.number().optional(),discountScoreCal:L.number().optional(),tmpDisScore:L.number().optional()}).passthrough(),Si=V({index:L.number().optional(),template:L.number().optional(),multipleUseVariable:L.number().optional(),initMultipleTimesMinus:L.number().optional(),selectedThisManyTimesProp:L.number().optional(),defaultAspectWidth:L.number().optional(),defaultAspectHeight:L.number().optional(),addons:N(yi).optional(),scores:N(xi).optional(),styling:Ii.optional().optional(),numMultipleTimesMinus:L.number().optional(),numMultipleTimesPluss:L.number().optional(),numActivateRandom:L.number().optional(),discountLowLimit:L.number().optional(),discountValue:L.number().optional(),numbAddToAllowChoice:L.number().optional(),bgmFadeInSec:L.number().optional(),bgmFadeOutSec:L.number().optional(),fadeTransitionTime:L.number().optional(),divideWithThis:L.number().optional(),activatedFrom:L.number().optional()}).passthrough(),Ci=V({index:L.number().optional(),template:L.number().optional(),buttonRandomNumber:L.number().optional(),defaultAspectWidth:L.number().optional(),defaultAspectHeight:L.number().optional(),allowedChoices:L.number().optional(),currentChoices:L.number().optional(),objects:N(Si).optional(),styling:Ii.optional(),objectImgObjectFillHeight:L.number().optional(),randomMin:L.number().optional(),randomMax:L.number().optional()}).passthrough(),Bi=V({startingSum:L.number().optional(),initValue:L.number().optional(),iconWidth:L.number().optional(),iconHeight:L.number().optional(),negativeIconWidth:L.number().optional(),negativeIconHeight:L.number().optional()}).passthrough(),Oi=V({styling:Ii.optional()}).passthrough(),Ai=V({styling:Ii.optional()}).passthrough(),ki=V({curVolume:L.number().optional(),fadeTransitionTime:L.number().optional(),hideBackpackBtn:L.number().optional(),btnBackpackIsOn:L.number().optional(),rowIdLength:L.number().optional(),objectIdLength:L.number().optional(),rowDesignGroups:N(Oi).optional(),objectDesignGroups:N(Ai).optional(),rows:N(Ci).optional(),pointTypes:N(Bi).optional(),backpack:N(Ci).optional(),styling:Ii.optional()}).passthrough(),Mi=["autoSaveInterval","bgmFadeInterval","bgmFadeTimer","bgmIsPlaying","bgmObjectId","bgmPlayInterval","bgmTitle","bgmTitleInterval","cancelForcedActivated","comp","compG","compODG","compR","compRDG","curBgmTime","curBgmLength","isSeeking","isFadingOut","lastFadeTime","objectMap","pointTypeMap","wordMap"];function Fi(e){if(Array.isArray(e))return e.map(Fi).filter(function(e){return null!==e&&!("object"===d(e)&&0===Object.keys(e).length)});if(e&&"object"===d(e)){for(var t={},o=Object.keys(e),i=0;i<o.length;i++){var n=o[i],r=Fi(e[n]);null!==r&&(t[n]=r)}return Object.keys(t).length>0?t:null}return e}function Ri(e){e.isPrivateStyling&&e.privateFilterIsOn&&void 0!==e.styling&&(void 0===e.styling.unselFilterBlurIsOn&&(e.styling.unselFilterBlurIsOn=!1),void 0===e.styling.unselFilterBlur&&(e.styling.unselFilterBlur=0),void 0===e.styling.unselFilterBrightIsOn&&(e.styling.unselFilterBrightIsOn=!1),void 0===e.styling.unselFilterBright&&(e.styling.unselFilterBright=100),void 0===e.styling.unselFilterCont&&(e.styling.unselFilterCont=100),void 0===e.styling.unselFilterGrayIsOn&&(e.styling.unselFilterGrayIsOn=!1),void 0===e.styling.unselFilterGray&&(e.styling.unselFilterGray=0),void 0===e.styling.unselFilterHueIsOn&&(e.styling.unselFilterHueIsOn=!1),void 0===e.styling.unselFilterHue&&(e.styling.unselFilterHue=0),void 0===e.styling.unselFilterInvertIsOn&&(e.styling.unselFilterInvertIsOn=!1),void 0===e.styling.unselFilterInvert&&(e.styling.unselFilterInvert=0),void 0===e.styling.unselFilterOpacIsOn&&(e.styling.unselFilterOpacIsOn=!1),void 0===e.styling.unselFilterOpac&&(e.styling.unselFilterOpac=100),void 0===e.styling.unselFilterSaturIsOn&&(e.styling.unselFilterSaturIsOn=!1),void 0===e.styling.unselFilterSatur&&(e.styling.unselFilterSatur=0),void 0===e.styling.unselFilterSepiaIsOn&&(e.styling.unselFilterSepiaIsOn=!1),void 0===e.styling.unselFilterSepia&&(e.styling.unselFilterSepia=0))}function ji(e,t){e.isPrivateStyling&&void 0===e.privateFilterIsOn&&void 0!==e.styling&&Object.keys(Ct).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateFilterIsOn=!0:e.privateFilterIsOn=!1}),e.isPrivateStyling&&void 0===e.privateTextIsOn&&void 0!==e.styling&&Object.keys(Bt).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateTextIsOn=!0:e.privateTextIsOn=!1}),e.isPrivateStyling&&void 0===e.privateObjectImageIsOn&&void 0!==e.styling&&Object.keys(Ot).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateObjectImageIsOn=!0:e.privateObjectImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateObjectIsOn&&void 0!==e.styling&&Object.keys(Ft).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateObjectIsOn=!0:e.privateObjectIsOn=!1}),e.isPrivateStyling&&void 0===e.privateAddonImageIsOn&&void 0!==e.styling&&Object.keys(kt).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateAddonImageIsOn=!0:e.privateAddonImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateAddonIsOn&&void 0!==e.styling&&Object.keys(jt).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateAddonIsOn=!0:e.privateAddonIsOn=!1}),e.isPrivateStyling&&void 0===e.privateBackgroundIsOn&&void 0!==e.styling&&Object.keys(Mt).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateBackgroundIsOn=!0:e.privateBackgroundIsOn=!1}),t&&(e.isPrivateStyling&&void 0===e.privateRowImageIsOn&&void 0!==e.styling&&Object.keys(At).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateRowImageIsOn=!0:e.privateRowImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateRowIsOn&&void 0!==e.styling&&Object.keys(Rt).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateRowIsOn=!0:e.privateRowIsOn=!1})),Ri(e),e.isPrivateStyling||void 0===e.styling||(void 0!==e.styling.objectImgObjectFillHeight&&(e.objectImgObjectFillHeight=e.styling.objectImgObjectFillHeight),delete e.styling)}function Di(e){for(var t=Object.keys(e),o=0;o<t.length;o++){var i=t[o];if(-1!==Mi.indexOf(i))delete e[i];else if(Array.isArray(e[i])){if("rows"===i||"backpack"===i)for(var n=0;n<e[i].length;n++){var r=e[i][n];if(r.index=n,"backpack"===i&&(r.isBackpack=!0),ji(r,!0),void 0!==r.styling&&Yo(r.styling,void 0===e.version||"2.0.0-beta"===e.version),void 0!==r.rowDesignGroups)for(var a=0;a<r.rowDesignGroups.length;a++)"object"===d(r.rowDesignGroups[a])&&(r.rowDesignGroups[a]=r.rowDesignGroups[a].id);if(d(r.image)&&(li(r.image)?lo.value||(lo.value=si(r.image)):co.add(r.image)),void 0!==r.objects)for(var c=0;c<r.objects.length;c++){var l=r.objects[c];if(l.index=c,ji(l,!1),void 0!==l.styling&&Yo(l.styling,void 0===e.version||"2.0.0-beta"===e.version),l.multiplyPointtypeIsOn&&("string"==typeof l.pointTypeToMultiply&&(l.pointTypeToMultiply=[l.pointTypeToMultiply]),"number"==typeof l.startingSumAtMultiply&&(l.startingSumAtMultiply=[l.startingSumAtMultiply])),l.dividePointtypeIsOn&&("string"==typeof l.pointTypeToDivide&&(l.pointTypeToDivide=[l.pointTypeToDivide]),"number"==typeof l.startingSumAtDivide&&(l.startingSumAtDivide=[l.startingSumAtDivide])),l.fadeTransitionIsOn&&void 0!==l.fadeTransitionTime&&(l.fadeInTransitionTime=l.fadeTransitionTime,l.fadeOutTransitionTime=l.fadeTransitionTime,delete l.fadeTransitionTime),void 0!==l.groups)for(var s=0;s<l.groups.length;s++)"object"===d(l.groups[s])&&(l.groups[s]=l.groups[s].id);if(void 0!==l.objectDesignGroups)for(var u=0;u<l.objectDesignGroups.length;u++)"object"===d(l.objectDesignGroups[u])&&(l.objectDesignGroups[u]=l.objectDesignGroups[u].id);d(l.image)&&(li(l.image)?lo.value||(lo.value=si(l.image)):co.add(l.image));for(var v=0;v<l.addons.length;v++){var f=l.addons[v];void 0!==f.template&&0!==f.template||(f.template=1),f.parentId=l.id,d(f.image)&&(li(f.image)?lo.value||(lo.value=si(f.image)):co.add(f.image))}}}else if("objectDesignGroups"===i||"rowDesignGroups"===i)for(var g=0;g<e[i].length;g++){var m=e[i][g];void 0===m.activatedId&&(m.activatedId=""),void 0===m.elements&&(m.elements=[]),void 0===m.backpackElements&&(m.backpackElements=[]);for(var p=0;p<m.elements.length;p++)"object"===d(m.elements[p])&&(m.elements[p]=m.elements[p].id);for(var h=0;h<m.backpackElements.length;h++)"object"===d(m.backpackElements[h])&&(m.backpackElements[h]=m.backpackElements[h].id);Ri(m),Yo(m.styling,void 0===e.version||"2.0.0-beta"===e.version)}else if("pointTypes"===i)for(var b=0;b<e[i].length;b++){var w=e[i][b];void 0===w.initValue&&(w.initValue=w.startingSum),"object"===d(w.positiveColor)&&w.positiveColor.hexa&&(w.positiveColor=w.positiveColor.hexa),"object"===d(w.negativeColor)&&w.negativeColor.hexa&&(w.negativeColor=w.negativeColor.hexa),"object"===d(w.privateColor)&&w.privateColor.hexa&&(w.privateColor=w.privateColor.hexa),"object"===d(w.privateNegativeColor)&&w.privateNegativeColor.hexa&&(w.privateNegativeColor=w.privateNegativeColor.hexa)}else if("groups"===i)for(var T=0;T<e[i].length;T++){var I=e[i][T];void 0===I.elements&&(I.elements=[]),void 0===I.rowElements&&(I.rowElements=[]);for(var y=0;y<I.elements.length;y++)"object"===d(I.elements[y])&&(I.elements[y]=I.elements[y].id);for(var x=0;x<I.rowElements.length;x++)"object"===d(I.rowElements[x])&&(I.rowElements[x]=I.rowElements[x].id)}}else"object"===d(e[i])&&"styling"===i&&Yo(e[i],void 0===e.version||"2.0.0-beta"===e.version,!0)}Vt.clear(),Nt.clear(),Wt.clear(),Et.clear(),Ut.clear(),zt.clear(),Gt.clear(),_t.clear(),Ht.clear(),Yt.clear(),Zt.splice(0);for(var S=Object.keys(qt),C=0;C<S.length;C++){var B=S[C];qt.hasOwnProperty(B)?app[B]=qt[B]:delete app[B]}for(var O=Object.keys(e),A=0;A<O.length;A++){var k=O[A];app[k]=e[k]}for(var M=0;M<app.googleFonts.length;M++){var F=app.googleFonts[M].replace(/ /g,"+"),R="https://fonts.googleapis.com/css2?family=".concat(F,"&display=swap"),j=document.createElement("link");j.id=F,j.rel="stylesheet",j.href=R,j.crossOrigin="anonymous",document.head.appendChild(j)}for(var D=0;D<app.customFonts.length;D++){var P=app.customFonts[D],$=document.createElement("link");$.id=P,$.rel="stylesheet",$.href=P,$.crossOrigin="anonymous",document.head.appendChild($)}for(var q=0;q<app.pointTypes.length;q++){var V=app.pointTypes[q];void 0!==V.id&&""!==V.id||(V.id=Mo(0,4)),V.id=Vo(V.id,Nt),void 0===V.initValue&&(V.initValue=V.startingSum),void 0===V.isNotShownObjects&&""!==V.activatedId&&(V.isNotShownObjects=!0),void 0===V.isNotShownPointBar&&""!==V.activatedId&&(V.isNotShownPointBar=!0),Nt.set(V.id,V)}for(var L=0;L<app.rows.length;L++){var N=app.rows[L];void 0!==N.id&&""!==N.id||(N.id=Co(0,4)),N.id=Vo(N.id,Wt),Wt.set(N.id,N);for(var W=0;W<N.objects.length;W++){var E=N.objects[W];void 0!==E.id&&""!==E.id||(E.id=Oo(0,4)),E.id=Vo(E.id,Et),Et.set(E.id,{choice:E,row:N});for(var U=0;U<E.scores.length;U++){var z=E.scores[U];void 0!==z.idx&&""!==z.idx||(z.idx=Ro(0,5)),z.idx=Vo(z.idx,Jt),Jt.add(z.idx)}}}for(var G=0;G<app.backpack.length;G++){var _=app.backpack[G];void 0!==_.id&&""!==_.id||(_.id=Co(0,4)),_.id=Vo(_.id,Wt),Wt.set(_.id,_);for(var H=0;H<_.objects.length;H++){var Y=_.objects[H];void 0!==Y.id&&""!==Y.id||(Y.id=Oo(0,4)),Y.id=Vo(Y.id,Et),Et.set(Y.id,{choice:Y,row:_});for(var J=0;J<Y.scores.length;J++){var Z=Y.scores[J];void 0!==Z.idx&&""!==Z.idx||(Z.idx=Ro(0,5)),Z.idx=Vo(Z.idx,Jt),Jt.add(Z.idx)}}}for(var X=0;X<app.groups.length;X++){var K=app.groups[X];void 0!==K.id&&""!==K.id||(K.id=ko(0,4)),K.id=Vo(K.id,Ut),Ut.set(K.id,app.groups[X])}for(var Q=0;Q<app.words.length;Q++){var ee=app.words[Q];void 0!==ee.id&&""!==ee.id||(ee.id=Bo(0,4)),ee.id=Vo(ee.id,Gt),Gt.set(ee.id,app.words[Q])}for(var te=0;te<app.variables.length;te++){var oe=app.variables[te];void 0!==oe.id&&""!==oe.id||(oe.id=Fo(0,4)),oe.id=Vo(oe.id,_t),_t.set(oe.id,app.variables[te])}if(void 0!==app.rowDesignGroups)for(var ie=0;ie<app.rowDesignGroups.length;ie++){var ne=app.rowDesignGroups[ie];void 0!==ne.id&&""!==ne.id||(ne.id=Ao(0,4)),ne.id=Vo(ne.id,Ht),Ht.set(ne.id,ne)}if(void 0!==app.objectDesignGroups)for(var re=0;re<app.objectDesignGroups.length;re++){var ae=app.objectDesignGroups[re];void 0!==ae.id&&""!==ae.id||(ae.id=Ao(0,4)),ae.id=Vo(ae.id,Yt),Yt.set(app.objectDesignGroups[re].id,app.objectDesignGroups[re])}if(void 0!==app.globalRequirements)for(var ce=0;ce<app.globalRequirements.length;ce++){var le=app.globalRequirements[ce];zt.set(le.id,le)}app.activated.length>0&&ai(app.activated.join(",")),void 0!==app.customCSS&&function(e){var t=document.getElementById("customCSS");t?""===e?(t.remove(),delete app.customCSS):(t.textContent=e,app.customCSS=e):((t=document.createElement("style")).id="customCSS",t.textContent=e,app.customCSS=e,document.head.appendChild(t))}(app.customCSS),app.buildAutoSaveIsOn&&(go&&go.abort(),po()),"boolean"!=typeof app.isMute&&(app.curVolume=100,app.isMute=!1)}function Pi(e){return $i.apply(this,arguments)}function $i(){return($i=v(l().m(function e(t){var o,i;return l().w(function(e){for(;;)if(0===e.n)return o=t.querySelectorAll("img"),i=Array.from(o).map(function(e){return e.complete?Promise.resolve():new Promise(function(t){e.onload=t,e.onerror=t})}),e.a(2,Promise.all(i).then(function(){}))},e)}))).apply(this,arguments)}function qi(e){e.querySelectorAll("img").forEach(function(e){"lazy"===e.loading&&(e.loading="eager")})}function Vi(e,t){!function(e,t){var o,i=window.getComputedStyle(e),n=w(i);try{for(n.s();!(o=n.n()).done;){var r=o.value;try{t.style.setProperty(r,i.getPropertyValue(r),i.getPropertyPriority(r))}catch(a){console.error(a)}}}catch(c){n.e(c)}finally{n.f()}}(e,t);for(var o=e.children,i=t.children,n=0;n<o.length;n++)Vi(o[n],i[n])}function Li(e){return Ni.apply(this,arguments)}function Ni(){return(Ni=v(l().m(function e(t){var o,i,n;return l().w(function(e){for(;;)switch(e.n){case 0:return o=t.querySelectorAll("*"),i=[],o.forEach(function(e){var t=getComputedStyle(e).borderImageSource.match(/url\(["']?(.*?)["']?\)/);t&&t[1]&&i.push(t[1])}),n=i.map(function(e){return new Promise(function(t){var o=new Image;o.src=e,o.onload=t,o.onerror=t})}),e.n=1,Promise.all(n);case 1:return e.a(2)}},e)}))).apply(this,arguments)}function Wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return new Promise(function(t){var o=0;requestAnimationFrame(function i(){if(++o>=e)return t();requestAnimationFrame(i)})})}function Ei(){return(Ei=v(l().m(function e(t){var o,i,n,r,a,c,s,d,u,v,f,g,m,p,h,b,w,T;return l().w(function(e){for(;;)switch(e.n){case 0:if(!t){e.n=20;break}return e.p=1,oo.labelText="Downloading image...",oo.isOpen=!0,qi(t),e.n=2,Pi(t);case 2:return e.n=3,xt({usePromise:!0});case 3:if(o=e.v,i=o.height,n=t.offsetHeight,r=t.offsetWidth,!(n>i)){e.n=14;break}a=0,c=1,s=Math.ceil(n/i);case 4:if(!(a<n)){e.n=13;break}return d=Math.min(i,n-a),u=document.createElement("div"),oo.labelText="Splitting large image...(".concat(c," / ").concat(s,")"),oo.isOpen=!0,u.style.width="".concat(r,"px"),u.style.height="".concat(d,"px"),u.style.overflow="hidden",u.style.position="absolute",u.style.display="block",u.style.top="0",u.style.left="0",u.style.zIndex="-9999",u.style.pointerEvents="none",v=t.cloneNode(!0),Vi(t,v),qi(v),v.style.transform="translateY(-".concat(a,"px)"),v.style.willChange="transform",v.style.backfaceVisibility="hidden",u.appendChild(v),document.body.appendChild(u),e.n=5,Pi(v);case 5:return e.n=6,Li(v);case 6:return e.n=7,Wi(5);case 7:return e.p=7,e.n=8,z(u,{filter:function(e){var t,o;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("mdc-top-app-bar")||null!==(o=e.classList)&&void 0!==o&&o.contains("hidden"))}});case 8:if(f=e.v){e.n=9;break}throw new Error("blob creation failed");case 9:g=URL.createObjectURL(f),(m=document.createElement("a")).href=g,m.download="Build_".concat(yo(),"_part").concat(c++,".png"),m.click(),URL.revokeObjectURL(g),e.n=11;break;case 10:e.p=10,w=e.v,oo.labelText="Download failed: Restricted content detected.",oo.isOpen=!0,console.error(w);case 11:return e.p=11,document.body.removeChild(u),e.f(11);case 12:a+=i,e.n=4;break;case 13:oo.labelText="Image downloads complete.",oo.isOpen=!0,e.n=17;break;case 14:return e.n=15,z(t,{filter:function(e){var t,o;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("mdc-top-app-bar")||null!==(o=e.classList)&&void 0!==o&&o.contains("hidden"))}});case 15:if(p=e.v){e.n=16;break}throw new Error("blob creation failed");case 16:h=URL.createObjectURL(p),(b=document.createElement("a")).href=h,b.download="Build_".concat(yo(),".png"),b.click(),URL.revokeObjectURL(h),oo.labelText="Image download complete.",oo.isOpen=!0;case 17:e.n=19;break;case 18:e.p=18,T=e.v,oo.labelText="Download failed: Restricted content detected.",oo.isOpen=!0,console.error(T);case 19:e.n=21;break;case 20:oo.labelText="Download failed: Restricted content detected.",oo.isOpen=!0;case 21:return e.a(2)}},e,null,[[7,10,11,12],[1,18]])}))).apply(this,arguments)}function Ui(e,t,o){void 0===e.templateStack&&(e.templateStack=[],e.defaultTemplate=void 0!==e.template?e.template:1),e.templateStack.push({id:t,data:o}),e.template=o}function zi(e,t){if(void 0!==e.templateStack){var o=e.templateStack.findIndex(function(e){return e.id===t});-1!==o&&e.templateStack.splice(o,1);var i=e.templateStack.length;i>0?e.template=e.templateStack[i-1].data:(e.template=void 0!==e.defaultTemplate?e.defaultTemplate:1,delete e.templateStack)}}function Gi(e,t,o){void 0===e.widthStack&&(e.widthStack=[],e.defaultWidth=void 0!==e.width?e.width:"col-md-3"),e.widthStack.push({id:t,data:o}),e.width=o}function _i(e,t){if(void 0!==e.widthStack){var o=e.widthStack.findIndex(function(e){return e.id===t});-1!==o&&e.widthStack.splice(o,1);var i=e.widthStack.length;i>0?e.width=e.widthStack[i-1].data:(e.width=void 0!==e.defaultWidth?e.defaultWidth:"col-md-3",delete e.widthStack)}}var Hi=CSS.supports("color","#00000080");function Yi(e){if(void 0===e)return"";if(Hi||!/^#([\da-f]{8})$/i.test(e))return e;var t=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),n=parseInt(e.slice(7,9),16)/255;return"rgba(".concat(t,", ").concat(o,", ").concat(i,", ").concat(n.toFixed(3),")")}var Ji=T("<input/>");function Zi(e,t){u(t,!0);var o,i=M(t,"use",19,function(){return[]}),n=M(t,"class",3,""),r=M(t,"type",3,"text"),a=M(t,"placeholder",3," "),c=M(t,"value",15),l=M(t,"files",15,null),d=M(t,"dirty",15,!1),v=M(t,"invalid",15,!1),f=M(t,"updateInvalid",3,!0),g=M(t,"initialInvalid",3,!1),b=M(t,"emptyValueNull",19,function(){return null===c()}),w=M(t,"emptyValueUndefined",19,function(){return void 0===c()}),T=M(t,"step",3,"any"),I=J(t,["$$slots","$$events","$$legacy","use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","initialInvalid","emptyValueNull","emptyValueUndefined","step"]),C=s({}),B=s({});function O(e){return""===e?Number.NaN:+e}function A(e){if("file"!==r())if(""===e.currentTarget.value&&b())c(null);else if(""===e.currentTarget.value&&w())c(void 0);else switch(r()){case"number":c(O(e.currentTarget.value)),""!==e.currentTarget.value&&"0"!==e.currentTarget.value||("-"===e.data?(c("-0"),e.target.value="-0"):"deleteContentBackward"===e.inputType||"insertFromPaste"!==e.inputType||isNaN(parseInt(e.data))?(c("0"),e.target.value="0"):(c(parseFloat(e.data)),e.target.value=parseFloat(e.data)));break;case"range":c(O(e.currentTarget.value));break;default:c(e.currentTarget.value)}else l(e.currentTarget.files)}function k(){return o}m(function(){"file"===r()?delete B.value:B.value=null==c()?"":c()}),F(function(){f()&&g()&&v(k().matches(":invalid"))});var R=Ji(),j=function(e){var o;"file"!==r()&&A(e),null===(o=t.oninput)||void 0===o||o.call(t,e)},D=function(e){var o;!function(e){"file"!==r()&&"range"!==r()||A(e),d(!0),f()&&v(k().matches(":invalid"))}(e),null===(o=t.onchange)||void 0===o||o.call(t,e)};return Z(R,function(e){return p(p(p(p({class:e,type:r(),placeholder:a()},B),C),{},{step:T()},I),{},{oninput:j,onchange:D})},[function(){return X(h(h({},n(),!0),"mdc-text-field__input",!0))}]),y(R,function(e){return o=e},function(){return o}),K(R,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},i),x(e,R),S({getAttr:function(e){return e in C?void 0!==C[e]?C[e]:null:k().getAttribute(e)},addAttr:function(e,t){C[e]!==t&&(C[e]=t)},removeAttr:function(e){e in C&&null==C[e]||(C[e]=void 0)},focus:function(){k().focus()},blur:function(){k().blur()},getElement:k})}var Xi=T("<textarea></textarea>");function Ki(e,t){u(t,!0);var o,i=M(t,"use",19,function(){return[]}),n=M(t,"class",3,""),r=M(t,"style",3,""),a=M(t,"value",15,""),c=M(t,"dirty",15,!1),l=M(t,"invalid",15,!1),d=M(t,"updateInvalid",3,!0),v=M(t,"initialInvalid",3,!1),f=M(t,"resizable",3,!0),g=J(t,["$$slots","$$events","$$legacy","use","class","style","value","dirty","invalid","updateInvalid","initialInvalid","resizable"]),m=s({});function b(){return o}F(function(){d()&&v()&&l(b().matches(":invalid"))});var w=Xi(),T=function(e){var o;c(!0),d()&&l(b().matches(":invalid")),null===(o=t.onchange)||void 0===o||o.call(t,e)};return Z(w,function(e){return p(p(p({class:e,style:"".concat(f()?"":"resize: none; ").concat(r())},m),g),{},{onchange:T})},[function(){return X(h(h({},n(),!0),"mdc-text-field__input",!0))}]),y(w,function(e){return o=e},function(){return o}),K(w,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},i),ee(function(){return te(w,a)}),x(e,w),S({getAttr:function(e){return e in m?void 0!==m[e]?m[e]:null:b().getAttribute(e)},addAttr:function(e,t){m[e]!==t&&(m[e]=t)},removeAttr:function(e){e in m&&null==m[e]||(m[e]=void 0)},focus:function(){b().focus()},blur:function(){b().blur()},getElement:b})}var Qi=T('<span class="mdc-text-field__ripple"></span>'),en=T("<!> <!>",1),tn=T("<span><!> <!></span>"),on=T("<!> <!> <!>",1),nn=T("<label><!> <!> <!> <!> <!> <!> <!></label>"),rn=T("<div><!> <!> <!> <!> <!></div>"),an=T("<!> <!>",1);function cn(e,t){u(t,!0);var o=ae.applyPassive,i=function(){};function n(e){return e===i}var r=M(t,"use",19,function(){return[]}),a=M(t,"class",3,""),c=M(t,"style",3,""),l=M(t,"ripple",3,!0),d=M(t,"disabled",3,!1),v=M(t,"required",3,!1),f=M(t,"textarea",3,!1),w=M(t,"variant",19,function(){return f()?"outlined":"standard"}),T=M(t,"noLabel",3,!1),I=M(t,"type",3,"text"),O=M(t,"value",15),$=M(t,"files",15,i),q=M(t,"invalid",15,i),V=M(t,"updateInvalid",19,function(){return n(q())}),L=M(t,"initialInvalid",3,!1),N=M(t,"dirty",15,!1),W=M(t,"validateOnValueChange",19,V),E=M(t,"useNativeValidation",19,V),U=M(t,"withLeadingIcon",3,i),z=M(t,"withTrailingIcon",3,i),ee=M(t,"input",7),te=M(t,"floatingLabel",7),ye=M(t,"lineRipple",7),xe=M(t,"notchedOutline",7),Se=M(t,"alwaysFloat",3,!1),Ce=J(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","initialInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","children","leadingIcon","trailingIcon","internalCounter","line","helper","alwaysFloat"]),Be=void 0!==O()||void 0===O()&&t.input$emptyValueUndefined||!n($());n($())&&$(null),n(q())&&q(!1);var Oe,Ae,ke=B(s(document.createElement("div"))),Me=B(void 0),Fe=new re,Re=s({}),je=s({}),De=B(void 0),Pe=B(!1),$e=B(s(L())),qe=oe("SMUI:addLayoutListener"),Ve=new Promise(function(e){return Ae=e}),Le=void 0,Ne=void 0,We=void 0,Ee=void 0,Ue=ve(function(){return ee()&&ee().getElement()});m(function(){(N()||C($e)||!V())&&C(Me)&&C(Me).isValid()!==!q()&&(V()?q(!C(Me).isValid()):C(Me).setValid(!q()))}),m(function(){C(Me)&&C(Me).getValidateOnValueChange()!==W()&&C(Me).setValidateOnValueChange(!n(W())&&W())}),m(function(){C(Me)&&C(Me).setUseNativeValidation(!!n(E())||E())}),m(function(){C(Me)&&C(Me).setDisabled(d())});var ze=O();function Ge(e){return e in Re?void 0!==Re[e]?Re[e]:null:Ze().classList.contains(e)}function _e(e){Re[e]||(Re[e]=!0)}function He(e){e in Re&&!Re[e]||(Re[e]=!1)}function Ye(e,t){je[e]!=t&&(""===t||null==t?delete je[e]:je[e]=t)}function Je(){if(C(Me)){var e=C(Me).shouldFloat;C(Me).notchOutline(e)}}function Ze(){return C(ke)}m(function(){if(C(Me)&&Be&&ze!==O()){ze=O();var e="".concat(null==O()?"":O());C(Me).getValue()!==e&&C(Me).setValue(e)}}),qe&&(Oe=qe(Je)),ie("SMUI:textfield:leading-icon:mount",function(e){Le=e}),ie("SMUI:textfield:leading-icon:unmount",function(){Le=void 0}),ie("SMUI:textfield:trailing-icon:mount",function(e){Ne=e}),ie("SMUI:textfield:trailing-icon:unmount",function(){Ne=void 0}),ie("SMUI:textfield:helper-text:id",function(e){A(De,e,!0)}),ie("SMUI:textfield:helper-text:mount",function(e){We=e}),ie("SMUI:textfield:helper-text:unmount",function(){A(De,void 0),We=void 0}),ie("SMUI:textfield:character-counter:mount",function(e){Ee=e}),ie("SMUI:textfield:character-counter:unmount",function(){Ee=void 0}),F(function(){if(A(Me,new ne({addClass:_e,removeClass:He,hasClass:Ge,registerTextFieldInteractionHandler:function(e,t){return Fe.on(Ze(),e,t)},deregisterTextFieldInteractionHandler:function(e,t){return Fe.off(Ze(),e,t)},registerValidationAttributeChangeHandler:function(e){var t=new MutationObserver(function(t){E()&&e(function(e){return e.map(function(e){return e.attributeName}).filter(function(e){return e})}(t))});return ee()&&t.observe(ee().getElement(),{attributes:!0}),t},deregisterValidationAttributeChangeHandler:function(e){e.disconnect()},getNativeInput:function(){var e;return void 0!==(null===(e=ee())||void 0===e?void 0:e.getElement())?ee().getElement():null},setInputAttr:function(e,t){var o;null===(o=ee())||void 0===o||o.addAttr(e,t)},removeInputAttr:function(e){var t;null===(t=ee())||void 0===t||t.removeAttr(e)},isFocused:function(){var e;return document.activeElement===(null===(e=ee())||void 0===e?void 0:e.getElement())},registerInputInteractionHandler:function(e,t){var i,n=null===(i=ee())||void 0===i?void 0:i.getElement();if(n){var r=o();Fe.on(n,e,t,"boolean"==typeof r?{capture:r}:r)}},deregisterInputInteractionHandler:function(e,t){var o,i=null===(o=ee())||void 0===o?void 0:o.getElement();i&&Fe.off(i,e,t)},floatLabel:function(e){return te()&&te().float(e||Se())},getLabelWidth:function(){return te()?te().getWidth():0},hasLabel:function(){return!!te()},shakeLabel:function(e){return te()&&te().shake(e)},setLabelRequired:function(e){return te()&&te().setRequired(e)},activateLineRipple:function(){return ye()&&ye().activate()},deactivateLineRipple:function(){return ye()&&ye().deactivate()},setLineRippleTransformOrigin:function(e){return ye()&&ye().setRippleCenter(e)},closeOutline:function(){return xe()&&xe().closeNotch()},hasOutline:function(){return!!xe()},notchOutline:function(e){return xe()&&xe().notch(e)}},{get helperText(){return We},get characterCounter(){return Ee},get leadingIcon(){return Le},get trailingIcon(){return Ne}}),!0),Be){var e;if(null==ee())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null===(e=C(Me))||void 0===e||e.init()}else ce().then(function(){var e;if(null==ee())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null===(e=C(Me))||void 0===e||e.init()});return Ae(),function(){var e;null===(e=C(Me))||void 0===e||e.destroy(),Fe.clear()}}),b(function(){Oe&&Oe()});var Xe=an(),Ke=Y(Xe),Qe=function(e){var o=nn();Z(o,function(e,t,o){return p({class:e,style:t,for:void 0},o)},[function(){var e;return X(p((h(h(h(h(h(h(h(h(h(h(e={},a(),!0),"mdc-text-field",!0),"mdc-text-field--disabled",d()),"mdc-text-field--textarea",f()),"mdc-text-field--filled","filled"===w()),"mdc-text-field--outlined","outlined"===w()),"smui-text-field--standard","standard"===w()&&!f()),"mdc-text-field--no-label",T()||null==t.label),"mdc-text-field--label-floating",C(Pe)||null!=O()&&""!==O()),"mdc-text-field--with-leading-icon",n(U())?t.leadingIcon:U()),h(h(h(e,"mdc-text-field--with-trailing-icon",n(z())?t.trailingIcon:z()),"mdc-text-field--with-internal-counter",f()&&t.internalCounter),"mdc-text-field--invalid",q())),Re))},function(){return Object.entries(je).map(function(e){var t=g(e,2),o=t[0],i=t[1];return"".concat(o,": ").concat(i,";")}).concat([c()]).join(" ")},function(){return de(Ce,["input$","label$","ripple$","outline$","helperLine$"])}]);var i=k(o),s=function(e){var o=en(),i=Y(o),n=function(e){var t=Qi();x(e,t)};le(i,function(e){"filled"===w()&&e(n)});var r=se(i,2),a=function(e){var o=ve(function(){return C(Pe)||Se()||null!=O()&&""!==O()&&("number"!=typeof O()||!isNaN(O()))}),i=ve(function(){return ge(Ce,"label$")});y(pe(e,_({get floatAbove(){return C(o)},get required(){return v()},wrapped:!0},function(){return C(i)},{children:function(e,o){var i=H(),n=Y(i),r=function(e){},a=function(e,o){var i=function(e){var o=he();D(function(){return be(o,t.label)}),x(e,o)},n=function(e){var o=H(),i=Y(o);R(i,function(){return t.label}),x(e,o)};le(e,function(e){"string"==typeof t.label?e(i):e(n,!1)},o)};le(n,function(e){null==t.label?e(r):e(a,!1)}),x(e,i)},$$slots:{default:!0}})),function(e){return te(e)},function(){return te()})};le(r,function(e){T()||null==t.label||e(a)}),x(e,o)};le(i,function(e){"outlined"!==w()&&e(s)});var m=se(i,2),b=function(e){var o=ve(function(){return T()||null==t.label}),i=ve(function(){return ge(Ce,"outline$")});y(me(e,_({get noLabel(){return C(o)}},function(){return C(i)},{children:function(e,o){var i=H(),n=Y(i),r=function(e){var o=ve(function(){return C(Pe)||Se()||null!=O()&&""!==O()&&("number"!=typeof O()||!isNaN(O()))}),i=ve(function(){return ge(Ce,"label$")});y(pe(e,_({get floatAbove(){return C(o)},get required(){return v()},wrapped:!0},function(){return C(i)},{children:function(e,o){var i=H(),n=Y(i),r=function(e){},a=function(e,o){var i=function(e){var o=he();D(function(){return be(o,t.label)}),x(e,o)},n=function(e){var o=H(),i=Y(o);R(i,function(){return t.label}),x(e,o)};le(e,function(e){"string"==typeof t.label?e(i):e(n,!1)},o)};le(n,function(e){null==t.label?e(r):e(a,!1)}),x(e,i)},$$slots:{default:!0}})),function(e){return te(e)},function(){return te()})};le(n,function(e){T()||null==t.label||e(r)}),x(e,i)},$$slots:{default:!0}})),function(e){return xe(e)},function(){return xe()})};le(m,function(e){"outlined"===w()&&e(b)});var B=se(m,2);ue(B,{key:"SMUI:textfield:icon:leading",value:!0,children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}});var M=se(B,2);R(M,function(){var e;return null!==(e=t.children)&&void 0!==e?e:j});var F=se(M,2),L=function(e){var o=tn(),i=k(o),n=ve(function(){return ge(Ce,"input$")});y(Ki(i,_({get disabled(){return d()},get required(){return v()},get updateInvalid(){return V()},get initialInvalid(){return C($e)},get"aria-controls"(){return C(De)},get"aria-describedby"(){return C(De)}},function(){return C(n)},{onblur:function(e){var o;A(Pe,!1),A($e,!0),we(Ze(),"blur",e),null===(o=t.input$onblur)||void 0===o||o.call(t,e)},onfocus:function(e){var o;A(Pe,!0),we(Ze(),"focus",e),null===(o=t.input$onfocus)||void 0===o||o.call(t,e)},get value(){return O()},set value(e){O(e)},get dirty(){return N()},set dirty(e){N(e)},get invalid(){return q()},set invalid(e){q(e)}})),function(e){return ee(e)},function(){return ee()});var r=se(i,2);R(r,function(){var e;return null!==(e=t.internalCounter)&&void 0!==e?e:j}),D(function(e){return P(o,1,e)},[function(){return Te(X({"mdc-text-field__resizer":!("input$resizable"in Ce)||t.input$resizable}))}]),x(e,o)},W=function(e){var o=on(),i=Y(o),n=function(e){var o=H(),i=Y(o),n=function(e){!function(e,t){u(t,!0);var o,i=J(t,["$$slots","$$events","$$legacy","children"]);y(G(e,_({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--prefix",tag:"span"},function(){return i},{children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}})),function(e){return o=e},function(){return o}),S({getElement:function(){return o.getElement()}})}(e,{children:function(e,o){var i=he();D(function(){return be(i,t.prefix)}),x(e,i)},$$slots:{default:!0}})},r=function(e){var o=H(),i=Y(o);R(i,function(){var e;return null!==(e=t.prefix)&&void 0!==e?e:j}),x(e,o)};le(i,function(e){"string"==typeof t.prefix?e(n):e(r,!1)}),x(e,o)};le(i,function(e){null!=t.prefix&&e(n)});var r=se(i,2),a=ve(function(){return ge(Ce,"input$")});y(Zi(r,_({get type(){return I()},get disabled(){return d()},get required(){return v()},get updateInvalid(){return V()},get initialInvalid(){return C($e)},get"aria-controls"(){return C(De)},get"aria-describedby"(){return C(De)}},function(){return T()&&null!=t.label&&"string"==typeof t.label?{placeholder:t.label}:{}},function(){return C(a)},{onblur:function(e){var o;A(Pe,!1),A($e,!0),we(Ze(),"blur",e),null===(o=t.input$onblur)||void 0===o||o.call(t,e)},onfocus:function(e){var o;A(Pe,!0),we(Ze(),"focus",e),null===(o=t.input$onfocus)||void 0===o||o.call(t,e)},get value(){return O()},set value(e){O(e)},get files(){return $()},set files(e){$(e)},get dirty(){return N()},set dirty(e){N(e)},get invalid(){return q()},set invalid(e){q(e)}})),function(e){return ee(e)},function(){return ee()});var c=se(r,2),l=function(e){var o=H(),i=Y(o),n=function(e){!function(e,t){u(t,!0);var o,i=J(t,["$$slots","$$events","$$legacy","children"]);y(G(e,_({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--suffix",tag:"span"},function(){return i},{children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}})),function(e){return o=e},function(){return o}),S({getElement:function(){return o.getElement()}})}(e,{children:function(e,o){var i=he();D(function(){return be(i,t.suffix)}),x(e,i)},$$slots:{default:!0}})},r=function(e){var o=H(),i=Y(o);R(i,function(){var e;return null!==(e=t.suffix)&&void 0!==e?e:j}),x(e,o)};le(i,function(e){"string"==typeof t.suffix?e(n):e(r,!1)}),x(e,o)};le(c,function(e){null!=t.suffix&&e(l)}),x(e,o)};le(F,function(e){f()&&"string"==typeof O()?e(L):e(W,!1)});var E=se(F,2);ue(E,{key:"SMUI:textfield:icon:leading",value:!1,children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.trailingIcon)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}});var oe=se(E,2),ie=function(e){var t=ve(function(){return ge(Ce,"ripple$")});y(Ie(e,_(function(){return C(t)})),function(e){return ye(e)},function(){return ye()})};le(oe,function(e){"outlined"!==w()&&l()&&e(ie)}),y(o,function(e){return A(ke,e)},function(){return C(ke)}),K(o,function(e,t){var o;return null===(o=fe)||void 0===o?void 0:o(e,t)},function(){return{ripple:"filled"===w(),unbounded:!1,addClass:_e,removeClass:He,addStyle:Ye,eventTarget:C(Ue),activeTarget:C(Ue),initPromise:Ve}}),K(o,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},r),x(e,o)},et=function(e){var o=rn();Z(o,function(e,t,o){return p({class:e,style:t},o)},[function(){var e;return X(p((h(h(h(h(h(h(h(h(h(h(e={},a(),!0),"mdc-text-field",!0),"mdc-text-field--disabled",d()),"mdc-text-field--textarea",f()),"mdc-text-field--filled","filled"===w()),"mdc-text-field--outlined","outlined"===w()),"smui-text-field--standard","standard"===w()&&!f()),"mdc-text-field--no-label",T()||null==t.label),"mdc-text-field--with-leading-icon",t.leadingIcon),"mdc-text-field--with-trailing-icon",t.trailingIcon),h(e,"mdc-text-field--invalid",q())),Re))},function(){return Object.entries(je).map(function(e){var t=g(e,2),o=t[0],i=t[1];return"".concat(o,": ").concat(i,";")}).concat([c()]).join(" ")},function(){return de(Ce,["input$","label$","ripple$","outline$","helperLine$"])}]);var i=k(o),n=function(e){var o=H(),i=Y(o);R(i,function(){var e;return null!==(e=t.label)&&void 0!==e?e:j}),x(e,o)};le(i,function(e){"string"!=typeof t.label&&e(n)});var s=se(i,2);ue(s,{key:"SMUI:textfield:icon:leading",value:!0,children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}});var u=se(s,2);R(u,function(){var e;return null!==(e=t.children)&&void 0!==e?e:j});var v=se(u,2);ue(v,{key:"SMUI:textfield:icon:leading",value:!1,children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.trailingIcon)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}});var m=se(v,2);R(m,function(){var e;return null!==(e=t.line)&&void 0!==e?e:j}),y(o,function(e){return A(ke,e)},function(){return C(ke)}),K(o,function(e,t){var o;return null===(o=fe)||void 0===o?void 0:o(e,t)},function(){return{ripple:l(),unbounded:!1,addClass:_e,removeClass:He,addStyle:Ye}}),K(o,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},r),x(e,o)};le(Ke,function(e){Be?e(Qe):e(et,!1)});var tt=se(Ke,2),ot=function(e){var o=ve(function(){return ge(Ce,"helperLine$")});!function(e,t){u(t,!0);var o,i=J(t,["$$slots","$$events","$$legacy","children"]);y(G(e,_({_smuiClass:"mdc-text-field-helper-line",tag:"div"},function(){return i},{children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}})),function(e){return o=e},function(){return o}),S({getElement:function(){return o.getElement()}})}(e,_(function(){return C(o)},{children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.helper)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}}))};return le(tt,function(e){t.helper&&e(ot)}),x(e,Xe),S({focus:function(){var e;null===(e=ee())||void 0===e||e.focus()},blur:function(){var e;null===(e=ee())||void 0===e||e.blur()},layout:Je,getElement:Ze})}var ln=T('<div class="col-12"><!></div>'),sn=T('<div class="row pt-4"><div class="col-12"><!></div> <!></div>'),dn=T('<div class="container-fluid"><div class="row"><div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),un=T("<!> <!> <!>",1);function vn(e,t){u(t,!0);var o=M(t,"open",7),i=B(s(t.isWord&&t.prevText?t.prevText:""));ye(e,{surface$style:"width: 400px; max-width: calc(100vw - 32px);",onSMUIDialogClosed:function(e){t.isWord?t.closeHandler(e,C(i)):t.closeHandler(e),t.onclose()},get open(){return o()},set open(e){o(e)},children:function(e,o){var n=un(),r=Y(n);xe(r,{class:"px-3 pb-0 toolbar toolbar__dialog",children:function(e,o){var i=H(),n=Y(i);I(n,function(){return t.title}),x(e,i)},$$slots:{default:!0}});var a=se(r,2);Se(a,{children:function(e,o){var n=sn(),r=k(n),a=k(r);I(a,function(){return t.context});var c=se(r,2),l=function(e){var t=ln();cn(k(t),{textarea:!0,label:"",variant:"filled",input$rows:5,get value(){return C(i)},set value(e){A(i,e,!0)}}),x(e,t)};le(c,function(e){t.isWord&&e(l)}),x(e,n)},$$slots:{default:!0}});var c=se(a,2);Ce(c,{children:function(e,t){var o=dn(),i=k(o),n=k(i),r=k(n);Be(r,{action:"close",children:function(e,t){Oe(e,{children:function(e,t){var o=he("Cancel");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=se(n,2),c=k(a);Be(c,{action:"accept",children:function(e,t){Oe(e,{class:"dialog-actions--btn",children:function(e,t){var o=he("OK");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}}),x(e,n)},$$slots:{default:!0}}),S()}var fn=T('<div class="row gy-4"><div class="col-sm-6 col-12"><!></div> <div class="col-sm-6 col-12"><!></div> <div class="col-12"><!> <!></div></div>'),gn=T("<!> <!> <!>",1);var mn=T('<i class="mdi mdi-play"></i>'),pn=T('<i class="mdi mdi-clipboard-outline"></i>'),hn=T('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),bn=T('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-12" style="height: 48px">Empty</div></div>'),wn=T('<i class="mdi mdi-alpha-a-box-outline"></i>'),Tn=T('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12 pt-1"><div> </div> <div> </div></div></div></div>'),In=T('<i class="mdi mdi-play"></i>'),yn=T('<i class="mdi mdi-trash-can"></i>'),xn=T('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),Sn=T('<i class="mdi mdi-content-save"></i>'),Cn=T('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12"><!></div></div></div>'),Bn=T("<!> <!>",1),On=T('<i class="mdi mdi-menu-left"></i>'),An=T('<i class="mdi mdi-menu-right"></i>'),kn=T('<div class="container-fluid pb-2 mb-2" style="border: 1px solid"><!></div> <div class="row gy-2"><div class="col pb-2"><!></div> <div class="col pb-2"><div class="d-row align-items-center justify-end"><!> <span class="list-text px-2"> </span> <!></div></div></div> <div class="row gy-2"><div class="col-12"><!></div></div>',1),Mn=T("<!> <!> <!>",1),Fn=T("<!> <!>",1);function Rn(e,t){u(t,!0);var o=M(t,"open",7),i={action:function(){},title:"Warning",context:""},n=B("none"),r=B(1),a=ve(function(){return 9*(C(r)-1)}),c=ve(function(){return Math.min(C(a)+9-1,99)}),l=ve(function(){return Array.from({length:C(c)-C(a)+1},function(e,t){return ro[C(a)+t]})}),s=ve(function(){return Array.from({length:C(c)-C(a)+1},function(e,t){return ao[C(a)+t]})}),d=B(!1);function v(e){var t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),o=navigator.language,i=new Date,n=new Intl.DateTimeFormat(o,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(i);!function(e,t,o,i,n){bo.apply(this,arguments)}({stored:!0,name:ro[e].name,time:n,app:Io()},t,e,"buildStore",!0)}function f(e){!function(e,t,o,i){wo.apply(this,arguments)}("".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),e,"buildStore",!0)}var g=Fn(),m=Y(g);ye(m,{surface$style:"width: 700px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},id:"dialog",get open(){return o()},set open(e){o(e)},children:function(e,t){var o=Mn(),a=Y(o);xe(a,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:function(e,t){var o=he("Save/Load Project");x(e,o)},$$slots:{default:!0}});var c=se(a,2);Se(c,{class:"pt-3",children:function(e,t){var o=kn(),a=Y(o),c=k(a),u=function(e){var t=H(),o=Y(t);Fe(o,17,function(){return C(s)},Re,function(e,t,o){var r=H(),a=Y(r),c=function(e){var r=hn(),a=k(r),c=k(a);Me(c,{onclick:function(){i.action=function(){return function(e){ai(C(s)[e].app)}(o)},i.context="Are you sure you want to load this project?<br>Any unsaved changes will be lost.",A(n,"dlgCommon")},children:function(e,t){var o=mn();x(e,o)},$$slots:{default:!0}});var l=se(a,2),d=k(l),u=k(d),v=k(u),f=se(u,2),g=k(f),m=se(l,2),p=k(m);Me(p,{onclick:function(){return function(e){var t=C(s)[e].app;navigator.clipboard.writeText(t).then(function(){oo.labelText="Build code copied to clipboard.",oo.isOpen=!0}).catch(function(e){oo.labelText="Failed to copy build code to clipboard.",oo.isOpen=!0,console.error(e)})}(o)},children:function(e,t){var o=pn();x(e,o)},$$slots:{default:!0}}),D(function(){be(v,C(t).name),be(g,C(t).time)}),x(e,r)},l=function(e){var t=bn();x(e,t)};le(a,function(e){C(t).stored?e(c):e(l,!1)}),x(e,r)}),x(e,t)},g=function(e){var t=Bn(),o=Y(t),r=function(e){var t=Tn(),o=k(t),r=k(o);Me(r,{onclick:function(){i.action=function(){ai(no.app)},i.context="Are you sure you want to load this project?<br>Any unsaved changes will be lost.",A(n,"dlgCommon")},children:function(e,t){var o=wn();x(e,o)},$$slots:{default:!0}});var a=se(o,2),c=k(a),l=k(c),s=k(l),d=se(l,2),u=k(d);D(function(){be(s,no.name),be(u,no.time)}),x(e,t)};le(o,function(e){no.stored&&e(r)});var a=se(o,2);Fe(a,17,function(){return C(l)},Re,function(e,t,o){var r=H(),a=Y(r),c=function(e){var r=xn(),a=k(r),c=k(a);Me(c,{onclick:function(){i.action=function(){return function(e){ai(ro[e].app)}(o)},i.context="Are you sure you want to load this project?<br>Any unsaved changes will be lost.",A(n,"dlgCommon")},children:function(e,t){var o=In();x(e,o)},$$slots:{default:!0}});var l=se(a,2),s=k(l),d=k(s),u=k(d),v=se(d,2),g=k(v),m=se(l,2),p=k(m);Me(p,{onclick:function(){i.action=function(){return f(o)},i.context="Are you sure you want to delete this project?<br>This action cannot be undone.",A(n,"dlgCommon")},children:function(e,t){var o=yn();x(e,o)},$$slots:{default:!0}}),D(function(){be(u,C(t).name),be(g,C(t).time)}),x(e,r)},l=function(e){var i=Cn(),n=k(i),r=k(n);Me(r,{onclick:function(){return v(o)},children:function(e,t){var o=Sn();x(e,o)},$$slots:{default:!0}});var a=se(n,2),c=k(a);cn(k(c),{onclick:function(){return C(t).name=""},onblur:function(){""===C(t).name&&(C(t).name="Slot ".concat(o+1))},input$onkeydown:function(e){"Enter"===e.key&&v(o)},class:"textbox-mini",variant:"standard",get value(){return C(t).name},set value(e){C(t).name=e}}),x(e,i)};le(a,function(e){C(t).stored?e(c):e(l,!1)}),x(e,r)}),x(e,t)};le(c,function(e){C(d)?e(u):e(g,!1)});var m=se(a,2),p=k(m),h=k(p);Ae(h,{style:"height: 48px",label:function(e){var t=he("Load from Legacy Version");x(e,t)},children:function(e,t){ke(e,{onSMUISwitchChange:function(){return A(r,1)},color:"secondary",class:"switch-scale",get checked(){return C(d)},set checked(e){A(d,e,!0)}})},$$slots:{label:!0,default:!0}});var b=se(p,2),w=k(b),T=k(w);Me(T,{onclick:function(){return C(r)>1?A(r,C(r)-1):A(r,11)},children:function(e,t){var o=On();x(e,o)},$$slots:{default:!0}});var I=se(T,2),y=k(I),S=se(I,2);Me(S,{onclick:function(){return C(r)<11?A(r,C(r)+1):A(r,1)},children:function(e,t){var o=An();x(e,o)},$$slots:{default:!0}});var B=se(m,2),O=k(B),M=k(O);Be(M,{onclick:function(){return A(n,"appBuildForm")},variant:"raised",children:function(e,t){Oe(e,{children:function(e,t){var o=he("Open Build Form");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),D(function(){var e;return be(y,"Page ".concat(null!==(e=C(r))&&void 0!==e?e:""))}),x(e,o)},$$slots:{default:!0}});var u=se(c,2);Ce(u,{children:function(e,t){Be(e,{action:"close",children:function(e,t){Oe(e,{class:"dialog-actions--btn",children:function(e,t){var o=he("Close");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}});var p=se(m,2),h=function(e){var t=ve(function(){return"dlgCommon"===C(n)});vn(e,{get open(){return C(t)},onclose:function(){return A(n,"none")},get title(){return i.title},get context(){return i.context},closeHandler:function(e){"accept"===e.detail.action&&i.action()}})},b=function(e,t){var o=function(e){var t=ve(function(){return"appBuildForm"===C(n)});!function(e,t){u(t,!0);var o=M(t,"open",7),i=B(void 0),n=B(void 0),r=B("");function a(){var e=[],t=Array.from(Vt.keys());t.sort(function(e,t){var o=Et.get(e),i=Et.get(t);return void 0!==o&&void 0!==i?o.row.index!==i.row.index?o.row.index-i.row.index:o.choice.index-i.choice.index:0});for(var o=0;o<t.length;o++){var i=Et.get(t[o]);void 0!==i&&e.push(i.choice.title)}return e.join(", ")}ye(e,{surface$style:"width: 1920px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:function(e,t){var o=gn(),c=Y(o);xe(c,{class:"px-3 pb-0 toolbar toolbar__dialog",tabindex:0,autofocus:!0,children:function(e,t){var o=he("Build Form");x(e,o)},$$slots:{default:!0}});var l=se(c,2);Se(l,{children:function(e,t){var o=fn(),c=k(o),l=k(c),s=ve(a);y(cn(l,{textarea:!0,get value(){return C(s)},label:"Current Activated Choices Titles",variant:"filled",input$rows:5}),function(e){return A(i,e,!0)},function(){return C(i)});var d=se(c,2),u=k(d),v=ve(Io);y(cn(u,{textarea:!0,get value(){return C(v)},label:"Current Activated Choices ID's",variant:"filled",input$rows:5}),function(e){return A(n,e,!0)},function(){return C(n)});var f=se(d,2),g=k(f);cn(g,{textarea:!0,label:"Area To Import Activated Choices With Lists Of Id's",variant:"filled",input$rows:5,get value(){return C(r)},set value(e){A(r,e,!0)}});var m=se(g,2);Be(m,{onclick:function(){return ai(C(r))},variant:"raised",children:function(e,t){Oe(e,{children:function(e,t){var o=he("Import Choices/Clean if empty");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}});var s=se(l,2);Ce(s,{children:function(e,t){Be(e,{action:"close",children:function(e,t){Oe(e,{class:"dialog-actions--btn",children:function(e,t){var o=he("Cancel");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}}),S()}(e,{get open(){return C(t)},onclose:function(){return A(n,"none")}})};le(e,function(e){"appBuildForm"===C(n)&&e(o)},t)};le(p,function(e){"dlgCommon"===C(n)?e(h):e(b,!1)}),x(e,g),S()}var jn=T('<div class="col"><!></div>'),Dn=T('<div class="col"><!></div>');function Pn(e,t){u(t,!0);var o=ve(function(){var e=zt.get(t.required.reqId);return void 0!==e&&void 0!==app.globalRequirements?e.requireds:[]}),i=ve(function(){return!!t.required.showRequired&&(!t.required.hideRequired||(t.required.requireds.length>0?Wo(t.required.requireds)&&!No(t.required):!No(t.required)))}),n=H(),r=Y(n),a=function(e){var i=H(),n=Y(i),r=function(e){var i=H(),n=Y(i);Fe(n,17,function(){return C(o)},Re,function(e,o){var i=H(),n=Y(i),r=function(e){var i=jn(),n=k(i);I(n,function(){return je.sanitize($o(xo(C(o))),Kt)}),D(function(){return De(i,t.scoreText)}),x(e,i)};le(n,function(e){C(o).showRequired&&e(r)}),x(e,i)}),x(e,i)},a=function(e){var o=Dn(),i=k(o);I(i,function(){return je.sanitize($o(xo(t.required)),Kt)}),D(function(){return De(o,t.scoreText)}),x(e,o)};le(n,function(e){"gid"===t.required.type?e(r):e(a,!1)}),x(e,i)};le(r,function(e){C(i)&&e(a)}),x(e,n),S()}var $n=T('<img alt=""/>'),qn=T('<img alt=""/>'),Vn=T('<h3 class="m-0"><!></h3>'),Ln=T('<img alt=""/>'),Nn=T('<img alt=""/>'),Wn=T('<p class="mb-0"><!></p>'),En=T('<img alt=""/>'),Un=T('<img alt=""/>'),zn=T('<span class="m-0"><!> <!> <!> <!> <!> <!></span>'),Gn=T('<img alt=""/>'),_n=T('<img alt=""/>'),Hn=T('<h2 class="mb-0"><!></h2>'),Yn=T('<p class="mb-0"><!></p>'),Jn=T('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!></div>',1),Zn=T('<h2 class="mb-0"><!></h2>'),Xn=T('<p class="mb-0"><!></p>'),Kn=T('<img alt=""/>'),Qn=T('<img alt=""/>'),er=T('<div class="col p-0 text-center"><!> <!> <!></div> <div class="col p-0 text-center"><!></div>',1),tr=T('<div class="row m-0 p-0 w-100"><!></div>'),or=T('<div class="text-center"><!></div>');function ir(e,t){u(t,!0);var o=M(t,"windowWidth",3,0),i=M(t,"preloadImages",3,!1),n=ve(function(){return qo("privateAddonImageIsOn",t.row,t.choice)}),r=ve(function(){return qo("privateAddonIsOn",t.row,t.choice)}),a=ve(function(){return qo("privateFilterIsOn",t.row,t.choice)}),c=ve(function(){return qo("privateObjectImageIsOn",t.row,t.choice)}),l=ve(function(){return qo("privateObjectIsOn",t.row,t.choice)}),s=ve(function(){return qo("privateTextIsOn",t.row,t.choice)}),d=ve(function(){return Wo(t.addon.requireds)}),v=ve(function(){return void 0!==C(n).addonImageBoxWidth?C(n).addonImageBoxWidth:50}),f=ve(function(){var e=C(r).useAddonDesign,o=(e?C(r).addonBorderRadiusIsPixels:C(l).objectBorderRadiusIsPixels)?"px":"%",i=0,n=0,c=0,s=[];if(e){if(C(r).addonBorderImage&&s.push("border-image: url('".concat(C(r).addonBorderImage,"') ").concat(C(r).addonBorderImageSliceTop," ").concat(C(r).addonBorderImageSliceRight," ").concat(C(r).addonBorderImageSliceBottom," ").concat(C(r).addonBorderImageSliceLeft," / ").concat(C(r).addonBorderImageWidth,"px ").concat(C(r).addonBorderImageRepeat,"; border-style: solid; padding: ").concat(C(r).addonBorderImageWidth,"px;")),C(r).useAddonBackgroundImage&&C(r).addonBackgroundImage&&(s.push("background-image: url('".concat(C(r).addonBackgroundImage,"'); ").concat(C(r).isObjectBackgroundRepeat?"background-repeat: repeat;":C(r).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),i=s.length),C(r).addonBgColorIsOn&&(s.push("background-color: ".concat(Yi(C(r).addonBgColor),";")),n=s.length),s.push("margin: ".concat(C(r).addonMargin,"px;")),s.push("border-radius: ".concat(C(r).addonBorderRadiusTopLeft).concat(o," ").concat(C(r).addonBorderRadiusTopRight).concat(o," ").concat(C(r).addonBorderRadiusBottomRight).concat(o," ").concat(C(r).addonBorderRadiusBottomLeft).concat(o,";")),C(r).addonOverflowIsOn&&s.push("overflow: hidden;"),C(r).addonBorderIsOn||t.isActive&&C(a).selBorderColorIsOn||!t.isEnabled&&C(a).reqBorderColorIsOn){var u=C(r).addonBorderColor;!t.isEnabled&&C(a).reqBorderColorIsOn?u=C(a).reqFilterBorderColor:t.isActive&&C(a).selBorderColorIsOn&&(u=C(a).selFilterBorderColor),s.push("border: ".concat(C(r).addonBorderWidth,"px ").concat(C(r).addonBorderStyle," ").concat(Yi(u),";"))}C(r).addonDropShadowIsOn&&(C(r).addonUseBoxShadowIsOn?s.push("box-shadow: ".concat(C(r).addonDropShadowH,"px ").concat(C(r).addonDropShadowV,"px ").concat(C(r).addonDropShadowBlur,"px ").concat(Yi(C(r).addonDropShadowColor),";")):(c=s.length,s.push("filter: drop-shadow(".concat(C(r).addonDropShadowH,"px ").concat(C(r).addonDropShadowV,"px ").concat(C(r).addonDropShadowBlur,"px ").concat(Yi(C(r).addonDropShadowColor),")")))),0===c&&(s.push("filter:"),c=s.length),t.isEnabled&&C(d)&&(t.isActive?(C(a).selFilterBlurIsOn&&s.push(" blur(".concat(C(a).selFilterBlur,"px)")),C(a).selFilterBrightIsOn&&s.push(" brightness(".concat(C(a).selFilterBright,"%)")),C(a).selFilterContIsOn&&s.push(" contrast(".concat(C(a).selFilterCont,"%)")),C(a).selFilterGrayIsOn&&s.push(" grayscale(".concat(C(a).selFilterGray,"%)")),C(a).selFilterHueIsOn&&s.push(" hue-rotate(".concat(C(a).selFilterHue,"deg)")),C(a).selFilterInvertIsOn&&s.push(" invert(".concat(C(a).selFilterInvert,"%)")),C(a).selFilterOpacIsOn&&s.push(" opacity(".concat(C(a).selFilterOpac,"%)")),C(a).selFilterSaturIsOn&&s.push(" saturate(".concat(C(a).selFilterSatur,")")),C(a).selFilterSepiaIsOn&&s.push(" sepia(".concat(C(a).selFilterGray,"%)"))):(C(a).unselFilterBlurIsOn&&s.push(" blur(".concat(C(a).unselFilterBlur,"px)")),C(a).unselFilterBrightIsOn&&s.push(" brightness(".concat(C(a).unselFilterBright,"%)")),C(a).unselFilterContIsOn&&s.push(" contrast(".concat(C(a).unselFilterCont,"%)")),C(a).unselFilterGrayIsOn&&s.push(" grayscale(".concat(C(a).unselFilterGray,"%)")),C(a).unselFilterHueIsOn&&s.push(" hue-rotate(".concat(C(a).unselFilterHue,"deg)")),C(a).unselFilterInvertIsOn&&s.push(" invert(".concat(C(a).unselFilterInvert,"%)")),C(a).unselFilterOpacIsOn&&s.push(" opacity(".concat(C(a).unselFilterOpac,"%)")),C(a).unselFilterSaturIsOn&&s.push(" saturate(".concat(C(a).unselFilterSatur,")")),C(a).unselFilterSepiaIsOn&&s.push(" sepia(".concat(C(a).unselFilterGray,"%)"))),s.length===c?s.splice(c-1,1):s.push(";")),C(r).addonGradientIsOn&&s.push("background-image: linear-gradient(".concat(C(r).addonGradient,");"))}return(app.showAllAddons>0||t.addon.showAddon)&&t.isEnabled&&!C(d)&&(0===c&&(s.push("filter:"),c=s.length),C(a).reqFilterBlurIsOn&&s.push(" blur(".concat(C(a).reqFilterBlur,"px)")),C(a).reqFilterBrightIsOn&&s.push(" brightness(".concat(C(a).reqFilterBright,"%)")),C(a).reqFilterContIsOn&&s.push(" contrast(".concat(C(a).reqFilterCont,"%)")),C(a).reqFilterGrayIsOn&&s.push(" grayscale(".concat(C(a).reqFilterGray,"%)")),C(a).reqFilterHueIsOn&&s.push(" hue-rotate(".concat(C(a).reqFilterHue,"deg)")),C(a).reqFilterInvertIsOn&&s.push(" invert(".concat(C(a).reqFilterInvert,"%)")),C(a).reqFilterOpacIsOn&&s.push(" opacity(".concat(C(a).reqFilterOpac,"%)")),C(a).reqFilterSaturIsOn&&s.push(" saturate(".concat(C(a).reqFilterSatur,")")),C(a).reqFilterSepiaIsOn&&s.push(" sepia(".concat(C(a).reqFilterGray,"%)")),s.length===c?s.splice(c-1,1):s.push(";"),C(a).reqBgColorIsOn&&(C(a).reqOverlayOnImage||(0!==n&&s.splice(n-1,1),0!==i&&s.splice(i-1,1)),s.push("background-color: ".concat(Yi(C(a).reqFilterBgColor),";"))),C(r).addonGradientIsOn&&s.push("background-image: linear-gradient(".concat(C(r).addonGradientOnReq,");"))),s.join(" ")}),g=ve(function(){var e=[];return e.push("font-family: ".concat(C(s).addonTitle,";font-size: ").concat(C(s).addonTitleTextSize,"%;text-align: ").concat(C(s).addonTitleAlign,";")),!t.isEnabled&&C(a).reqATitleColorIsOn?e.push("color: ".concat(Yi(C(a).reqFilterATitleColor),";")):t.isActive&&C(a).selATitleColorIsOn?e.push("color: ".concat(Yi(C(a).selFilterATitleColor),";")):e.push("color: ".concat(Yi(C(s).addonTitleColor),";")),C(r).useAddonDesign?C(r).titlePaddingIsOn&&e.push("padding: ".concat(C(r).addonTextPadding,"px;")):C(l).titlePaddingIsOn&&e.push("padding: ".concat(C(l).objectTextPadding,"px;")),e.join(" ")}),m=ve(function(){var e=[];return e.push("font-family: ".concat(C(s).addonText,";text-align: ").concat(C(s).addonTextAlign,";font-size: ").concat(C(s).addonTextTextSize,"%;white-space: pre-line;")),!t.isEnabled&&C(a).reqATextColorIsOn?e.push("color: ".concat(Yi(C(a).reqFilterATextColor),";")):t.isActive&&C(a).selATextColorIsOn?e.push("color: ".concat(Yi(C(a).selFilterATextColor),";")):e.push("color: ".concat(Yi(C(s).addonTextColor),";")),C(r).useAddonDesign?e.push("padding: ".concat(C(r).addonTextPadding,"px;")):e.push("padding: ".concat(C(l).objectTextPadding,"px;")),e.join(" ")}),p=ve(function(){var e=[],o=C(n).useAddonImage,i=(o?C(n).addonImgBorderRadiusIsPixels:C(c).objectImgBorderRadiusIsPixels)?"px":"%";if(o){var r,a;if(e.push("width: ".concat(C(n).addonImageWidth,"%; margin-top: ").concat(C(n).addonImageMarginTop,"%; margin-bottom: ").concat(C(n).addonImageMarginBottom,"%;")),C(n).addonImgObjectFillIsOn&&null!==(r=t.choice)&&void 0!==r&&r.addonImgObjectFillHeight)e.push("object-fit: ".concat(C(n).addonImgObjectFillStyle,"; height: ").concat(null===(a=t.choice)||void 0===a?void 0:a.addonImgObjectFillHeight,"px;"));e.push("border-radius: ".concat(C(n).addonImgBorderRadiusTopLeft).concat(i," ").concat(C(n).addonImgBorderRadiusTopRight).concat(i," ").concat(C(n).addonImgBorderRadiusBottomRight).concat(i," ").concat(C(n).addonImgBorderRadiusBottomLeft).concat(i,";")),C(n).addonImgOverflowIsOn&&e.push("overflow: hidden;"),C(n).addonImgBorderIsOn&&e.push("border: ".concat(C(n).addonImgBorderWidth,"px ").concat(C(n).addonImgBorderStyle," ").concat(Yi(C(n).addonImgBorderColor),";"))}else{var l,s;if(e.push("width: ".concat(C(c).objectImageWidth,"%; margin-top: ").concat(C(c).objectImageMarginTop,"%; margin-bottom: ").concat(C(c).objectImageMarginBottom,"%;")),C(c).objectImgObjectFillIsOn&&null!==(l=t.row)&&void 0!==l&&l.objectImgObjectFillHeight)e.push("object-fit: ".concat(C(c).objectImgObjectFillStyle,"; height: ").concat(null===(s=t.row)||void 0===s?void 0:s.objectImgObjectFillHeight,"px;"));e.push("border-radius: ".concat(C(c).objectImgBorderRadiusTopLeft).concat(i," ").concat(C(c).objectImgBorderRadiusTopRight).concat(i," ").concat(C(c).objectImgBorderRadiusBottomRight).concat(i," ").concat(C(c).objectImgBorderRadiusBottomLeft).concat(i,";")),C(c).objectImgOverflowIsOn&&e.push("overflow: hidden;"),C(c).objectImgBorderIsOn&&e.push("border: ".concat(C(c).objectImgBorderWidth,"px ").concat(C(c).objectImgBorderStyle," ").concat(Yi(C(c).objectImgBorderColor),";"))}return e.join(" ")}),h=ve(function(){return"font-family: ".concat(C(s).scoreText,"; font-size: ").concat(C(s).scoreTextSize,"%; text-align: ").concat(C(s).scoreTextAlign,"; color: ").concat(Yi(C(s).scoreTextColor),";")}),b=H(),w=Y(b),T=function(e){var n=or(),r=k(n),a=function(e){var n=zn(),r=k(n),a=function(e){var o=H(),n=Y(o),r=function(e){pt(e,{get text(){return t.addon.imageSourceTooltip},children:function(e,o){var n=$n();D(function(){Pe(n,"src",t.addon.image),De(n,C(p)),Pe(n,"loading",i()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var o=qn();D(function(){Pe(o,"src",t.addon.image),De(o,C(p)),Pe(o,"loading",i()?"eager":"lazy")}),x(e,o)};le(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),x(e,o)};le(r,function(e){var i;!(1===t.addon.template||o()<=960)||!t.addon.image||null!==(i=t.row)&&void 0!==i&&i.addonImageRemoved||e(a)});var c=se(r,2),l=function(e){var o=Vn(),i=k(o);I(i,function(){return je.sanitize($o(t.addon.title),Kt)}),D(function(){return De(o,C(g))}),x(e,o)};le(c,function(e){var o;""===t.addon.title||null!==(o=t.row)&&void 0!==o&&o.addonTitleRemoved||e(l)});var s=se(c,2),d=function(e){var o=H(),i=Y(o);Fe(i,17,function(){return t.addon.requireds},Re,function(e,t){Pn(e,{get required(){return C(t)},get scoreText(){return C(h)}})}),x(e,o)};le(s,function(e){var o;null!==(o=t.row)&&void 0!==o&&o.objectRequirementRemoved||e(d)});var u=se(s,2),v=function(e){var o=H(),n=Y(o),r=function(e){pt(e,{get text(){return t.addon.imageSourceTooltip},children:function(e,o){var n=Ln();D(function(){Pe(n,"src",t.addon.image),De(n,C(p)),Pe(n,"loading",i()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var o=Nn();D(function(){Pe(o,"src",t.addon.image),De(o,C(p)),Pe(o,"loading",i()?"eager":"lazy")}),x(e,o)};le(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),x(e,o)};le(u,function(e){var o;5!==t.addon.template||!t.addon.image||null!==(o=t.row)&&void 0!==o&&o.addonImageRemoved||e(v)});var f=se(u,2),b=function(e){var o=Wn(),i=k(o);I(i,function(){return je.sanitize($o(t.addon.text),Kt)}),D(function(){return De(o,C(m))}),x(e,o)};le(f,function(e){var o;""===t.addon.text||null!==(o=t.row)&&void 0!==o&&o.addonTextRemoved||e(b)});var w=se(f,2),T=function(e){var o=H(),n=Y(o),r=function(e){pt(e,{get text(){return t.addon.imageSourceTooltip},children:function(e,o){var n=En();D(function(){Pe(n,"src",t.addon.image),De(n,C(p)),Pe(n,"loading",i()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var o=Un();D(function(){Pe(o,"src",t.addon.image),De(o,C(p)),Pe(o,"loading",i()?"eager":"lazy")}),x(e,o)};le(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),x(e,o)};le(w,function(e){var o;4!==t.addon.template||!t.addon.image||null!==(o=t.row)&&void 0!==o&&o.addonImageRemoved||e(T)}),x(e,n)},c=function(e){var o=tr(),n=k(o),r=function(e){var o=Jn(),n=Y(o),r=k(n),a=function(e){var o=H(),n=Y(o),r=function(e){pt(e,{get text(){return t.addon.imageSourceTooltip},children:function(e,o){var n=Gn();D(function(){Pe(n,"src",t.addon.image),De(n,C(p)),Pe(n,"loading",i()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var o=_n();D(function(){Pe(o,"src",t.addon.image),De(o,C(p)),Pe(o,"loading",i()?"eager":"lazy")}),x(e,o)};le(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),x(e,o)};le(r,function(e){var o;!t.addon.image||null!==(o=t.row)&&void 0!==o&&o.addonImageRemoved||e(a)});var c=se(n,2),l=k(c),s=function(e){var o=Hn(),i=k(o);I(i,function(){return je.sanitize($o(t.addon.title),Kt)}),D(function(){return De(o,C(g))}),x(e,o)};le(l,function(e){var o;""===t.addon.title||null!==(o=t.row)&&void 0!==o&&o.addonTitleRemoved||e(s)});var d=se(l,2),u=function(e){var o=H(),i=Y(o);Fe(i,17,function(){return t.addon.requireds},Re,function(e,t){Pn(e,{get required(){return C(t)},get scoreText(){return C(h)}})}),x(e,o)};le(d,function(e){var o;null!==(o=t.row)&&void 0!==o&&o.objectRequirementRemoved||e(u)});var f=se(d,2),b=function(e){var o=Yn(),i=k(o);I(i,function(){return je.sanitize($o(t.addon.text),Kt)}),D(function(){return De(o,C(m))}),x(e,o)};le(f,function(e){var o;""===t.addon.text||null!==(o=t.row)&&void 0!==o&&o.addonTextRemoved||e(b)}),D(function(){var e;De(n,"max-width: ".concat(null!==(e=C(v))&&void 0!==e?e:"","%")),De(c,"max-width: ".concat(100-C(v),"%"))}),x(e,o)},a=function(e,o){var n=function(e){var o=er(),n=Y(o),r=k(n),a=function(e){var o=Zn(),i=k(o);I(i,function(){return je.sanitize($o(t.addon.title),Kt)}),D(function(){return De(o,C(g))}),x(e,o)};le(r,function(e){var o;""===t.addon.title||null!==(o=t.row)&&void 0!==o&&o.addonTitleRemoved||e(a)});var c=se(r,2),l=function(e){var o=H(),i=Y(o);Fe(i,17,function(){return t.addon.requireds},Re,function(e,t){Pn(e,{get required(){return C(t)},get scoreText(){return C(h)}})}),x(e,o)};le(c,function(e){var o;null!==(o=t.row)&&void 0!==o&&o.objectRequirementRemoved||e(l)});var s=se(c,2),d=function(e){var o=Xn(),i=k(o);I(i,function(){return je.sanitize($o(t.addon.text),Kt)}),D(function(){return De(o,C(m))}),x(e,o)};le(s,function(e){var o;""===t.addon.text||null!==(o=t.row)&&void 0!==o&&o.addonTextRemoved||e(d)});var u=se(n,2),f=k(u),b=function(e){var o=H(),n=Y(o),r=function(e){pt(e,{get text(){return t.addon.imageSourceTooltip},children:function(e,o){var n=Kn();D(function(){Pe(n,"src",t.addon.image),De(n,C(p)),Pe(n,"loading",i()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var o=Qn();D(function(){Pe(o,"src",t.addon.image),De(o,C(p)),Pe(o,"loading",i()?"eager":"lazy")}),x(e,o)};le(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),x(e,o)};le(f,function(e){var o;!t.addon.image||null!==(o=t.row)&&void 0!==o&&o.addonImageRemoved||e(b)}),D(function(){var e;De(n,"max-width: ".concat(100-C(v),"%")),De(u,"max-width: ".concat(null!==(e=C(v))&&void 0!==e?e:"","%"))}),x(e,o)};le(e,function(e){3===t.addon.template&&e(n)},o)};le(n,function(e){2===t.addon.template?e(r):e(a,!1)}),x(e,o)};le(r,function(e){t.addon.template>=4||1===t.addon.template||o()<=960?e(a):e(c,!1)}),D(function(){return De(n,C(f))}),x(e,n)};le(w,function(e){(app.showAllAddons>0||t.addon.showAddon||Wo(t.addon.requireds))&&e(T)}),x(e,b),S()}var nr=T('<i class="mdi mdi-minus"></i>'),rr=T('<i class="mdi mdi-plus"></i>'),ar=T('<div class="px-5 w-100"><!></div>'),cr=T('<div class="d-row justify-space-around w-100"><!> <div translate="no"> </div> <!></div> <!>',1);function lr(e,t){u(t,!0);var o=B(0),i=ve(function(){if(t.choice.isMultipleUseVariable)return t.choice.multipleUseVariable;if(void 0!==t.choice.multipleScoreId){var e=Nt.get(t.choice.multipleScoreId);if(void 0!==e)return e.startingSum}return 0});function n(e){e.stopPropagation(),t.selectedOneMore()}function r(e){e.stopPropagation(),t.selectedOneLess()}function a(){for(var e,n=C(o)-C(i),r=0;r<Math.abs(n);r++)n>0?t.selectedOneMore():t.selectedOneLess();null===(e=document.activeElement)||void 0===e||e.blur()}m(function(){t.choice.useSlider&&A(o,C(i),!0)});var c=H(),l=Y(c),s=function(e){var c=cr(),l=Y(c),s=k(l),d=ve(function(){return!t.isEnabled});Me(s,{class:"counter-icons",get disabled(){return C(d)},onclick:r,children:function(e,o){var i=nr();D(function(){return De(i,t.multiChoiceButton)}),x(e,i)},$$slots:{default:!0}});var u=se(s,2),v=k(u),f=se(u,2),g=ve(function(){return!t.isEnabled});Me(f,{class:"counter-icons",get disabled(){return C(g)},onclick:n,children:function(e,o){var i=rr();D(function(){return De(i,t.multiChoiceButton)}),x(e,i)},$$slots:{default:!0}});var m=se(l,2),p=function(e){var i=ar(),n=k(i),r=ve(function(){return!t.isEnabled});$e(n,{get min(){return t.choice.numMultipleTimesMinus},get max(){return t.choice.numMultipleTimesPluss},step:1,class:"mx-2",onpointerup:a,get disabled(){return C(r)},discrete:!0,get value(){return C(o)},set value(e){A(o,e,!0)}}),x(e,i)};le(m,function(e){t.choice.useSlider&&e(p)}),D(function(){De(u,t.multiChoiceText),be(v,C(i))}),x(e,c)};le(l,function(e){t.choice.hideCounterUntilSelect&&0===t.choice.multipleUseVariable||e(s)}),x(e,c),S()}var sr=T('<img class="me-1" alt=""/>'),dr=T('<img class="mx-1" alt=""/>'),ur=T('<img class="mx-1" alt=""/>'),vr=T('<img class="ms-1" alt=""/>'),fr=T("<!> <!> <!> <!> <!> <!> <!>",1),gr=T('<div class="row m-0"><div class="col-12 p-0 m-0 d-flex align-items-center justify-center"><p class="m-0 d-flex align-items-center"><!></p></div></div>');function mr(e,t){u(t,!0);var o=ve(function(){return qo("privateTextIsOn",t.row,t.choice)}),i=ve(function(){return qo("privateFilterIsOn",t.row,t.choice)}),n=ve(function(){return Nt.get(t.score.id)}),r=ve(function(){return Wo(t.choice.requireds)}),a=ve(function(){var e=[];return e.push("".concat(t.score.afterText)),t.score.discountIsOn&&t.score.discountShow&&void 0!==t.score.discountAfterText&&e.push("".concat(t.score.discountAfterText)),e.join(" ")}),c=ve(function(){var e=[];return e.push("".concat(t.score.beforeText)),t.score.discountIsOn&&t.score.discountShow&&void 0!==t.score.discountBeforeText&&e.push("".concat(t.score.discountBeforeText)),e.join(" ")}),l=ve(function(){return t.score.hideValue?"":t.score.isRandom&&!t.score.setValue&&void 0!==t.score.maxValue?t.score.maxValue<0?"".concat(C(d)," ~ ").concat(C(v)):"".concat(C(v)," ~ ").concat(C(d)):"".concat(C(s))}),s=ve(function(){var e,o,i=t.score.discountShow&&void 0!==t.score.discountScore?t.score.discountScore:t.score.value;if(i=Math.abs(i),i=null!==(e=C(n))&&void 0!==e&&e.allowFloat?i%1==0?i:parseFloat(i.toFixed(void 0!==C(n).decimalPlaces?C(n).decimalPlaces:2)):Math.floor(i),null!==(o=C(n))&&void 0!==o&&o.plussOrMinusAdded){var r=C(n).plussOrMinusInverted?C(f)?"-":"+":C(f)?"+":"-";return"".concat(r).concat(i)}return"".concat(i)}),d=ve(function(){if(void 0!==t.score.maxValue){var e,o,i=t.score.maxValue<0,r=Math.abs(t.score.maxValue);if(r=null!==(e=C(n))&&void 0!==e&&e.allowFloat?r%1==0?r:parseFloat(r.toFixed(void 0!==C(n).decimalPlaces?C(n).decimalPlaces:2)):Math.floor(r),null!==(o=C(n))&&void 0!==o&&o.plussOrMinusAdded){var a=C(n).plussOrMinusInverted?i?"-":"+":i?"+":"-";return"".concat(a).concat(r)}return"".concat(r)}return""}),v=ve(function(){if(void 0!==t.score.minValue){var e,o,i=t.score.minValue<0,r=Math.abs(t.score.minValue);if(r=null!==(e=C(n))&&void 0!==e&&e.allowFloat?r%1==0?r:parseFloat(r.toFixed(void 0!==C(n).decimalPlaces?C(n).decimalPlaces:2)):Math.floor(r),null!==(o=C(n))&&void 0!==o&&o.plussOrMinusAdded){var a=C(n).plussOrMinusInverted?i?"-":"+":i?"+":"-";return"".concat(a).concat(r)}return"".concat(r)}return""}),f=ve(function(){return t.score.discountShow?(void 0!==t.score.discountScore?t.score.discountScore:t.score.value)<0:t.score.value<0}),g=ve(function(){var e,a=[];return a.push("font-family: ".concat(C(o).scoreText,"; font-size: ").concat(C(o).scoreTextSize,"%; text-align: ").concat(C(o).scoreTextAlign,";")),null!==(e=C(n))&&void 0!==e&&e.pointColorsIsOn?C(f)?a.push("color: ".concat(Yi(C(n).positiveColor),";")):a.push("color: ".concat(Yi(C(n).negativeColor),";")):a.push("color: ".concat(Yi(C(o).scoreTextColor),";")),C(r)?t.choice.isActive&&C(i).selScoreTextColorIsOn&&a.push("color: ".concat(Yi(C(i).selFilterSTextColor))):C(i).reqScoreTextColorIsOn&&a.push("color: ".concat(Yi(C(i).reqFilterSTextColor))),a.join(" ")}),m=ve(function(){var e;return(null===(e=C(n))||void 0===e?void 0:e.negativeIconIsOn)&&C(f)}),p=ve(function(){var e,t;return C(m)?null===(e=C(n))||void 0===e?void 0:e.negativeImageSidePlacement:null===(t=C(n))||void 0===t?void 0:t.imageSidePlacement}),h=ve(function(){var e,t;return C(m)?null===(e=C(n))||void 0===e?void 0:e.negativeImageOnSide:null===(t=C(n))||void 0===t?void 0:t.imageOnSide}),b=ve(function(){var e,t;return(C(m)?null===(e=C(n))||void 0===e?void 0:e.negativeImage:null===(t=C(n))||void 0===t?void 0:t.image)||""}),w=ve(function(){var e,t;return(C(m)?null===(e=C(n))||void 0===e?void 0:e.negativeIconWidth:null===(t=C(n))||void 0===t?void 0:t.iconWidth)||0}),T=ve(function(){var e,t;return(C(m)?null===(e=C(n))||void 0===e?void 0:e.negativeIconHeight:null===(t=C(n))||void 0===t?void 0:t.iconHeight)||0}),y=ve(function(){return!C(p)&&!C(h)}),B=ve(function(){return!C(p)&&C(h)}),O=ve(function(){return C(p)&&!C(h)}),A=ve(function(){return C(p)&&C(h)});var M=H(),F=Y(M),R=function(e){var t=gr(),o=k(t),i=k(o),r=k(i),s=function(e){var t=fr(),o=Y(t),i=function(e){var t=sr();D(function(){var e,o;Pe(t,"src",C(b)),De(t,"width: ".concat(null!==(e=C(w))&&void 0!==e?e:"","px; height: ").concat(null!==(o=C(T))&&void 0!==o?o:"","px;"))}),x(e,t)};le(o,function(e){C(y)&&e(i)});var n=se(o,2);I(n,function(){return je.sanitize(C(c),Kt)});var r=se(n,2),s=function(e){var t=dr();D(function(){var e,o;Pe(t,"src",C(b)),De(t,"width: ".concat(null!==(e=C(w))&&void 0!==e?e:"","px; height: ").concat(null!==(o=C(T))&&void 0!==o?o:"","px;"))}),x(e,t)};le(r,function(e){C(B)&&e(s)});var d=se(r,2);I(d,function(){return je.sanitize(C(l),Kt)});var u=se(d,2),v=function(e){var t=ur();D(function(){var e,o;Pe(t,"src",C(b)),De(t,"width: ".concat(null!==(e=C(w))&&void 0!==e?e:"","px; height: ").concat(null!==(o=C(T))&&void 0!==o?o:"","px;"))}),x(e,t)};le(u,function(e){C(O)&&e(v)});var f=se(u,2);I(f,function(){return je.sanitize(C(a),Kt)});var g=se(f,2),m=function(e){var t=vr();D(function(){var e,o;Pe(t,"src",C(b)),De(t,"width: ".concat(null!==(e=C(w))&&void 0!==e?e:"","px; height: ").concat(null!==(o=C(T))&&void 0!==o?o:"","px;"))}),x(e,t)};le(g,function(e){C(A)&&e(m)}),x(e,t)},d=function(e){var t=H(),o=Y(t);I(o,function(){return je.sanitize("".concat(C(c)," ").concat(C(l)," ").concat(C(a)),Kt)}),x(e,t)};le(r,function(e){var t;null!==(t=C(n))&&void 0!==t&&t.iconIsOn?e(s):e(d,!1)}),D(function(){return De(o,C(g))}),x(e,t)};le(F,function(e){(function(){if(t.score.showScore){if(void 0!==C(n)&&C(n).isNotShownObjects){if(void 0!==C(n).activatedId&&""!==C(n).activatedId){var e=zt.get(C(n).activatedId),o=_t.get(C(n).activatedId);return void 0!==e?Wo(e.requireds):void 0!==o?o.isTrue:Lo(C(n).activatedId)}return!1}return!0}return!1})()&&Wo(t.score.requireds)&&e(R)}),x(e,M),S()}var pr=T('<div class="col"><!></div>'),hr=T('<img alt=""/>'),br=T('<img alt=""/>'),wr=T('<h3 class="m-0"><!></h3>'),Tr=T('<img alt=""/>'),Ir=T('<img alt=""/>'),yr=T('<p class="mb-0"><!></p>'),xr=T('<img alt=""/>'),Sr=T('<img alt=""/>'),Cr=T('<span class="d-column w-100 p-0 align-items-center"><!> <!> <span class="w-100"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></span> <div></div> <!></span>'),Br=T('<img alt=""/>'),Or=T('<img alt=""/>'),Ar=T('<h2 class="mb-0"><!></h2>'),kr=T('<p class="mb-0"><!></p>'),Mr=T("<div></div> <!>",1),Fr=T('<div class="col-12 text-center"><div></div> <!></div>'),Rr=T('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!>',1),jr=T('<h2 class="mb-0"><!></h2>'),Dr=T('<p class="mb-0"><!></p>'),Pr=T("<div></div> <!>",1),$r=T('<img alt=""/>'),qr=T('<img alt=""/>'),Vr=T('<div class="col-12 text-center"><div></div> <!></div>'),Lr=T('<div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div> <!>',1),Nr=T("<div><span><span><!></span></span></div>"),Wr=T("<!> <!>",1);function Er(e,t){u(t,!0);var o=g(Ve(),2),i=o[0],n=o[1],r=function(){return Le(so,"$winWidth",i)},a=M(t,"preloadImages",3,!1),c=[],l={choice:null,row:null,context:"",prevText:"",isWord:!0},s=ve(function(){return qo("privateBackgroundIsOn",t.row,t.choice)}),v=ve(function(){return qo("privateFilterIsOn",t.row,t.choice)}),m=ve(function(){return qo("privateMultiChoiceIsOn",t.row,t.choice)}),p=ve(function(){return qo("privateObjectImageIsOn",t.row,t.choice)}),h=ve(function(){return qo("privateObjectIsOn",t.row,t.choice)}),b=ve(function(){return qo("privateTextIsOn",t.row,t.choice)}),w=ve(function(){return void 0!==C(p).objectImageBoxWidth?C(p).objectImageBoxWidth:50}),T=B("none"),y=!1,O=ve(function(){return Wo(t.choice.requireds)}),F=ve(function(){return t.choice.isActive}),R=ve(function(){return C(h).objectHeight}),j=ve(function(){if(t.row.isResultRow){var e=Et.get(t.choice.id);if(void 0!==e)return e.row}return t.row}),q=ve(function(){var e=[];return e.push("font-family: ".concat(C(b).objectTitle,";font-size: ").concat(C(b).objectTitleTextSize,"%;text-align: ").concat(C(b).objectTitleAlign,";")),!C(O)&&C(v).reqCTitleColorIsOn?e.push("color: ".concat(Yi(C(v).reqFilterCTitleColor),";")):C(F)&&C(v).selCTitleColorIsOn?e.push("color: ".concat(Yi(C(v).selFilterCTitleColor),";")):e.push("color: ".concat(Yi(C(b).objectTitleColor),";")),C(h).titlePaddingIsOn&&e.push("padding: ".concat(C(h).objectTextPadding,"px;")),e.join(" ")}),V=ve(function(){return"font-family: ".concat(C(m).multiChoiceTextFont,"; color: ").concat(Yi(C(b).scoreTextColor),"; font-size: ").concat(C(m).multiChoiceTextSize,"%; align-content: center;")}),L=ve(function(){return"font-size: ".concat(C(m).multiChoiceCounterSize,"%; color: ").concat(Yi(C(b).scoreTextColor),";")}),N=ve(function(){return!t.choice.hideMultipleCounter||C(O)}),E=ve(function(){var e=[];return e.push("font-family: ".concat(C(b).objectText,";text-align: ").concat(C(b).objectTextAlign,";font-size: ").concat(C(b).objectTextTextSize,"%;white-space: pre-line;")),!C(O)&&C(v).reqCTextColorIsOn?e.push("color: ".concat(Yi(C(v).reqFilterCTextColor),";")):C(F)&&C(v).selCTextColorIsOn?e.push("color: ".concat(Yi(C(v).selFilterCTextColor),";")):e.push("color: ".concat(Yi(C(b).objectTextColor),";")),e.push("padding: ".concat(C(h).objectTextPadding,"px;")),e.join(" ")}),U=ve(function(){var e=C(h).objectBorderRadiusIsPixels?"px":"%",o=0,i=0,n=0,r=[];if(C(h).objectBorderImage&&r.push("border-image: url('".concat(C(h).objectBorderImage,"') ").concat(C(h).objectBorderImageSliceTop," ").concat(C(h).objectBorderImageSliceRight," ").concat(C(h).objectBorderImageSliceBottom," ").concat(C(h).objectBorderImageSliceLeft," / ").concat(C(h).objectBorderImageWidth,"px ").concat(C(h).objectBorderImageRepeat,"; border-style: solid; padding: ").concat(C(h).objectBorderImageWidth,"px;")),C(s).objectBackgroundImage&&(r.push("background-image: url('".concat(C(s).objectBackgroundImage,"'); ").concat(C(s).isObjectBackgroundRepeat?"background-repeat: repeat;":C(s).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),o=r.length),C(s).objectBgColorIsOn&&(r.push("background-color: ".concat(Yi(C(s).objectBgColor),";")),i=r.length),r.push("margin: ".concat(C(h).objectMargin,"px;")),r.push("border-radius: ".concat(C(h).objectBorderRadiusTopLeft).concat(e," ").concat(C(h).objectBorderRadiusTopRight).concat(e," ").concat(C(h).objectBorderRadiusBottomRight).concat(e," ").concat(C(h).objectBorderRadiusBottomLeft).concat(e,";")),C(h).objectOverflowIsOn&&r.push("overflow: hidden;"),C(h).objectBorderIsOn||C(F)&&C(v).selBorderColorIsOn||!C(O)&&C(v).reqBorderColorIsOn){var a=C(h).objectBorderColor;!C(O)&&C(v).reqBorderColorIsOn?a=C(v).reqFilterBorderColor:C(F)&&C(v).selBorderColorIsOn&&(a=C(v).selFilterBorderColor),r.push("border: ".concat(C(h).objectBorderWidth,"px ").concat(C(h).objectBorderStyle," ").concat(Yi(a),";"))}return C(h).objectDropShadowIsOn&&(C(h).objectUseBoxShadowIsOn?r.push("box-shadow: ".concat(C(h).objectDropShadowH,"px ").concat(C(h).objectDropShadowV,"px ").concat(C(h).objectDropShadowBlur,"px ").concat(Yi(C(h).objectDropShadowColor),";")):(n=r.length,r.push("filter: drop-shadow(".concat(C(h).objectDropShadowH,"px ").concat(C(h).objectDropShadowV,"px ").concat(C(h).objectDropShadowBlur,"px ").concat(Yi(C(h).objectDropShadowColor),")")))),0===n&&(r.push("filter:"),n=r.length),C(O)?(C(F)?(C(v).selFilterBlurIsOn&&r.push(" blur(".concat(C(v).selFilterBlur,"px)")),C(v).selFilterBrightIsOn&&r.push(" brightness(".concat(C(v).selFilterBright,"%)")),C(v).selFilterContIsOn&&r.push(" contrast(".concat(C(v).selFilterCont,"%)")),C(v).selFilterGrayIsOn&&r.push(" grayscale(".concat(C(v).selFilterGray,"%)")),C(v).selFilterHueIsOn&&r.push(" hue-rotate(".concat(C(v).selFilterHue,"deg)")),C(v).selFilterInvertIsOn&&r.push(" invert(".concat(C(v).selFilterInvert,"%)")),C(v).selFilterOpacIsOn&&r.push(" opacity(".concat(C(v).selFilterOpac,"%)")),C(v).selFilterSaturIsOn&&r.push(" saturate(".concat(C(v).selFilterSatur,")")),C(v).selFilterSepiaIsOn&&r.push(" sepia(".concat(C(v).selFilterGray,"%)")),r.length===n?r.splice(n-1,1):r.push(";"),C(v).selBgColorIsOn&&(0!==i&&r.splice(i-1,1),C(v).selOverlayOnImage||0!==o&&r.splice(o-1,1),r.push("background-color: ".concat(Yi(C(v).selFilterBgColor),";"))),C(h).objectGradientIsOn&&r.push("background-image: linear-gradient(".concat(C(h).objectGradientOnSelect,");"))):(C(v).unselFilterBlurIsOn&&r.push(" blur(".concat(C(v).unselFilterBlur,"px)")),C(v).unselFilterBrightIsOn&&r.push(" brightness(".concat(C(v).unselFilterBright,"%)")),C(v).unselFilterContIsOn&&r.push(" contrast(".concat(C(v).unselFilterCont,"%)")),C(v).unselFilterGrayIsOn&&r.push(" grayscale(".concat(C(v).unselFilterGray,"%)")),C(v).unselFilterHueIsOn&&r.push(" hue-rotate(".concat(C(v).unselFilterHue,"deg)")),C(v).unselFilterInvertIsOn&&r.push(" invert(".concat(C(v).unselFilterInvert,"%)")),C(v).unselFilterOpacIsOn&&r.push(" opacity(".concat(C(v).unselFilterOpac,"%)")),C(v).unselFilterSaturIsOn&&r.push(" saturate(".concat(C(v).unselFilterSatur,")")),C(v).unselFilterSepiaIsOn&&r.push(" sepia(".concat(C(v).unselFilterGray,"%)")),r.length===n?r.splice(n-1,1):r.push(";"),C(h).objectGradientIsOn&&r.push("background-image: linear-gradient(".concat(C(h).objectGradient,");"))),app.isPointerCursor&&!t.choice.isNotSelectable&&(!t.choice.isSelectableMultiple||t.choice.allowSelectByClick&&0===t.choice.multipleUseVariable)&&r.push("cursor: pointer;")):(C(v).reqFilterBlurIsOn&&r.push(" blur(".concat(C(v).reqFilterBlur,"px)")),C(v).reqFilterBrightIsOn&&r.push(" brightness(".concat(C(v).reqFilterBright,"%)")),C(v).reqFilterContIsOn&&r.push(" contrast(".concat(C(v).reqFilterCont,"%)")),C(v).reqFilterGrayIsOn&&r.push(" grayscale(".concat(C(v).reqFilterGray,"%)")),C(v).reqFilterHueIsOn&&r.push(" hue-rotate(".concat(C(v).reqFilterHue,"deg)")),C(v).reqFilterInvertIsOn&&r.push(" invert(".concat(C(v).reqFilterInvert,"%)")),C(v).reqFilterOpacIsOn&&r.push(" opacity(".concat(C(v).reqFilterOpac,"%)")),C(v).reqFilterSaturIsOn&&r.push(" saturate(".concat(C(v).reqFilterSatur,")")),C(v).reqFilterSepiaIsOn&&r.push(" sepia(".concat(C(v).reqFilterGray,"%)")),r.length===n?r.splice(n-1,1):r.push(";"),C(v).reqBgColorIsOn&&(0!==i&&r.splice(i-1,1),C(v).reqOverlayOnImage||0!==o&&r.splice(o-1,1),r.push("background-color: ".concat(Yi(C(v).reqFilterBgColor),";"))),C(h).objectGradientIsOn&&r.push("background-image: linear-gradient(".concat(C(h).objectGradientOnReq,");"))),r.join(" ")}),z=ve(function(){var e=[],o=C(p).objectImgBorderRadiusIsPixels?"px":"%";return e.push("width: ".concat(C(p).objectImageWidth,"%; margin-top: ").concat(C(p).objectImageMarginTop,"%; margin-bottom: ").concat(C(p).objectImageMarginBottom,"%;")),C(p).objectImgObjectFillIsOn&&e.push("object-fit: ".concat(C(p).objectImgObjectFillStyle,"; height: ").concat(t.row.objectImgObjectFillHeight,"px;")),e.push("border-radius: ".concat(C(p).objectImgBorderRadiusTopLeft).concat(o," ").concat(C(p).objectImgBorderRadiusTopRight).concat(o," ").concat(C(p).objectImgBorderRadiusBottomRight).concat(o," ").concat(C(p).objectImgBorderRadiusBottomLeft).concat(o,";")),C(p).objectImgOverflowIsOn&&e.push("overflow: hidden;"),C(p).objectImgBorderIsOn&&e.push("border: ".concat(C(p).objectImgBorderWidth,"px ").concat(C(p).objectImgBorderStyle," ").concat(Yi(C(p).objectImgBorderColor),";")),e.join(" ")}),G=ve(function(){var e=[];return e.push("font-family: ".concat(C(b).scoreText,"; font-size: ").concat(C(b).scoreTextSize,"%; text-align: ").concat(C(b).scoreTextAlign,";")),e.push("color: ".concat(Yi(C(b).scoreTextColor),";")),C(O)?t.choice.isActive&&C(v).selScoreTextColorIsOn&&e.push("color: ".concat(Yi(C(v).selFilterSTextColor))):C(v).reqScoreTextColorIsOn&&e.push("color: ".concat(Yi(C(v).reqFilterSTextColor))),e.join(" ")}),_=[];function J(e,t,o,i){var n=!1;if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===c.indexOf(e.id)&&t.activateThisChoice.split(",").some(function(t){return t.split("/ON#")[0]===e.id})&&(c.push(e.id),n=!0),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss){var r=t.multipleUseVariable;if(i>0)for(var a=0;a<i;a++)ne(t,o),r++,e.isAllowDeselect||(t.numMultipleTimesMinus+=1);else if(i<0)for(var l=0;l>-1*i;l++)re(t,o),r--,e.isAllowDeselect||(t.numMultipleTimesPluss-=1);if(t.multipleUseVariable!==r){var s=Math.abs(t.numMultipleTimesMinus-t.numMultipleTimesPluss);if(t.numMultipleTimesMinus>t.numMultipleTimePluss){var d=Lt.get(t.id);i>0?(t.numMultipleTimesMinus-=s,void 0!==d?d.multiple+=s:Lt.set(t.id,{multiple:s,isAllowDeselect:e.isAllowDeselect||!1})):i<0&&(void 0!==d?d.multiple-=s:Lt.set(t.id,{multiple:-s,isAllowDeselect:e.isAllowDeselect||!1}))}}}}else t.isActive||te(t,o),e.isAllowDeselect||(t.forcedActivated=!0),void 0===t.activatedFrom&&(t.activatedFrom=0),n||t.activatedFrom++;t.isActive||(delete t.forcedActivated,Lt.set(t.id,{multiple:i,isAllowDeselect:e.isAllowDeselect||!1}))}function Z(e,t,o,i){if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===c.indexOf(e.id)&&t.activateThisChoice.split(",").some(function(t){return t.split("/ON#")[0]===e.id})&&c.push(e.id),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss)if(t.isActive){if(i>0)for(var n=0;n<i;n++)e.isAllowDeselect||(t.numMultipleTimesMinus-=1),e.isNotDeactivate||re(t,o);else if(i<0)for(var r=0;r>-1*i;r++)e.isAllowDeselect||(t.numMultipleTimesPluss+=1),e.isNotDeactivate||ne(t,o)}else{var a=Lt.get(t.id),l=0;void 0!==a?0===(l=a.multiple-i)?Lt.delete(t.id):Lt.set(t.id,{multiple:l,isAllowDeselect:e.isAllowDeselect||!1}):Lt.delete(t.id)}}else void 0!==t.activatedFrom?(t.activatedFrom--,t.activatedFrom<=0&&(t.isActive?(delete t.activatedFrom,delete t.forcedActivated,e.isNotDeactivate||oe(t,o)):Lt.delete(t.id))):(delete t.forcedActivated,!e.isNotDeactivate&&t.isActive&&oe(t,o))}function X(e){if(void 0!==e.activateThisChoice){for(var t=e.activateThisChoice.split(","),o=new Map,i=0;i<t.length;i++){var n=g(t[i].split("/ON#"),2),r=n[0],a=n[1],c=parseInt(void 0===a?"0":a),l=Ut.get(r);if(void 0!==l)for(var s=0;s<l.elements.length;s++)Vt.has(l.elements[s])||o.set(l.elements[s],c);else Vt.has(r)||o.set(r,c)}for(var d=f(o.keys()),u=Math.min(d.length,e.numActivateRandom||0),v=u,m=d.length-1;m>0;m--){var p=Math.floor(Math.random()*(m+1)),h=[d[p],d[m]];d[m]=h[0],d[p]=h[1]}for(var b=[],w=0;w<u;){var T=d[w],I=Et.get(T);if(void 0!==I){var y=I.row,x=I.choice;if(J(e,x,y,o.get(T)||0),!x.isActive){if(b.length<u&&d.length>v){d[w]=d[v++],void 0!==x.activatedFrom&&(x.activatedFrom--,0===x.activatedFrom&&Lt.delete(x.id));continue}break}b.push(T)}w++}e.isSelectableMultiple?(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),e.activatedRandomMul[e.multipleUseVariable-1]=[].concat(b)):e.activatedRandom=[].concat(b)}}function K(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;Array.from(Vt.entries()).forEach(function(n){var r=g(n,1)[0],a=Et.get(r);if(void 0!==a){for(var c=a.row,l=a.choice,s=new $,d=!1,u=0;u<l.scores.length;u++){var v=l.scores[u];if(!v.isNotRecalculatable){var m=Nt.get(v.id);if(void 0!==m){if(e.discountOther&&v.isChangeDiscount&&void 0!==v.tmpDisScore){var p=l.multipleUseVariable;if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){for(var h=p-1;h>=0;h--)l.isActive&&(m.belowZeroNotAllowed&&m.startingSum+v.tmpDisScore<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,c),l.forcedActivated=!0):re(l,c):m.startingSum+=v.tmpDisScore);l.isActive&&(s.set(v.id,v.tmpDisScore),delete v.isChangeDiscount,delete v.tmpDisScore)}else if(!l.isSelectableMultiple)if(m.belowZeroNotAllowed&&m.startingSum+v.tmpDisScore<0)if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||Lt.set(l.id,{multiple:l.multipleUseVariable})),l.isSelectableMultiple&&l.isMultipleUseVariable)for(var b=0;b<l.multipleUseVariable;b++)l.isActive&&re(l,c);else l.isActive&&oe(l,c);else m.startingSum+=v.tmpDisScore,s.set(v.id,v.tmpDisScore),delete v.isChangeDiscount,delete v.tmpDisScore;0===_.length?_.push("Scores Updated On: ".concat(l.title)):_.push(", ".concat(l.title)),d=e.id!==l.id}if(!i.has(v.idx)){var w=t.get(v.id)||0;if(l.isActive){var T=Wo(v.requireds),I=new $(JSON.parse(JSON.stringify(f(Vt))));I.set(e.id,{multiple:e.multipleUseVariable}),c.currentChoices+=1,m.startingSum-=w;var y=Wo(v.requireds,I);if(c.currentChoices-=1,m.startingSum+=w,y!==T){var x=v.discountIsOn&&void 0!==v.discountScore?v.discountScore:v.value;if(x=m.allowFloat?x:Math.floor(x),y)if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus)for(var S=l.multipleUseVariable-1;S>=0;S--)void 0!==v.isActiveMul&&v.isActiveMul[S]&&(m.belowZeroNotAllowed&&m.startingSum+x<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,c),l.forcedActivated=!0):re(l,c):(m.startingSum+=x,s.set(v.id,x),v.isActiveMul[S]=!1));else l.isSelectableMultiple||v.isActive&&(m.belowZeroNotAllowed&&m.startingSum+x<0?(l.forcedActivated&&delete l.forcedActivated,oe(l,c)):(m.startingSum+=x,s.set(v.id,x),delete v.isActive));else v.isActive||(m.belowZeroNotAllowed&&m.startingSum-x<0?(l.forcedActivated&&delete l.forcedActivated,oe(l,c)):(m.startingSum-=x,s.set(v.id,x),v.isActive=!0));0===_.length?_.push("Scores Updated On: ".concat(l.title)):_.push(", ".concat(l.title)),d=e.id!==l.id}}}}}}d&&K(l,s,++o,i)}}),_.length>0&&!app.hideScoresUpdated&&(oo.labelText=_.join(""),oo.isOpen=!0),_.splice(0)}function Q(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;Array.from(Vt.entries()).forEach(function(n){var r=g(n,1)[0],a=Et.get(r);if(void 0!==a){for(var c=a.row,l=a.choice,s=new $,d=!1,u=0;u<l.scores.length;u++){var v=l.scores[u];if(!v.isNotRecalculatable){var m=Nt.get(v.id);if(void 0!==m){if(e.discountOther&&v.isChangeDiscount&&void 0!==v.tmpDisScore&&l.id!==e.id){var p=l.multipleUseVariable;if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){for(var h=p-1;h>=0;h--)l.isActive&&(m.belowZeroNotAllowed&&m.startingSum+v.tmpDisScore<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,c),l.forcedActivated=!0):re(l,c):m.startingSum+=v.tmpDisScore);l.isActive&&(s.set(v.id,v.tmpDisScore),delete v.isChangeDiscount,delete v.tmpDisScore)}else l.isSelectableMultiple||(m.belowZeroNotAllowed&&m.startingSum+v.tmpDisScore<0?(l.forcedActivated&&delete l.forcedActivated,oe(l,c)):(m.startingSum+=v.tmpDisScore,s.set(v.id,v.tmpDisScore),delete v.isChangeDiscount,delete v.tmpDisScore));0===_.length?_.push("Scores Updated On: ".concat(l.title)):_.push(", ".concat(l.title)),d=!0}if(!i.has(v.idx)){var b=t.get(v.id)||0;if(l.isActive&&!v.isChanged){var w=Wo(v.requireds),T=new $(JSON.parse(JSON.stringify(f(Vt))));T.delete(e.id),c.currentChoices-=1,m.startingSum+=b;var I=Wo(v.requireds,T);if(c.currentChoices+=1,m.startingSum-=b,I!==w){var y=v.discountIsOn&&void 0!==v.discountScore?v.discountScore:v.value;if(y=m.allowFloat?y:Math.floor(y),I)if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus)for(var x=l.multipleUseVariable-1;x>=0;x--)void 0!==v.isActiveMul&&v.isActiveMul[x]&&(m.belowZeroNotAllowed&&m.startingSum+y<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,c),l.forcedActivated=!0):re(l,c):(m.startingSum+=y,s.set(v.id,y),v.isActiveMul[x]=!1));else l.isSelectableMultiple||v.isActive&&(m.belowZeroNotAllowed&&m.startingSum+y<0?(l.forcedActivated&&delete l.forcedActivated,oe(l,c)):(m.startingSum+=y,s.set(v.id,y),delete v.isActive));else v.isActive||(m.belowZeroNotAllowed&&m.startingSum-y<0?(l.forcedActivated&&delete l.forcedActivated,oe(l,c)):(m.startingSum-=y,s.set(v.id,y),v.isActive=!0));0===_.length?_.push("Scores Updated On: ".concat(l.title)):_.push(", ".concat(l.title)),d=!0,i.add(v.idx)}}}}}}d&&Q(l,s,++o,i)}}),_.length>0&&!app.hideScoresUpdated&&(oo.labelText=_.join(""),oo.isOpen=!0),_.splice(0)}function ee(){var e=!1;Array.from(Lt.entries()).forEach(function(t){var o=g(t,2),i=o[0],n=o[1],r=Et.get(i);if(void 0!==r){var a=r.row,c=r.choice;c.isActive||(te(c,a),c.isActive&&(Lt.delete(i),e=!0,n.isAllowDeselect||(c.forcedActivated=!0)))}}),e&&ee()}function te(e,o){var i=o;if(o.isResultRow){var n=Et.get(e.id);void 0!==n&&(i=n.row)}e.isSelectableMultiple?e.id===t.choice.id&&e.allowSelectByClick&&0===e.multipleUseVariable&&ne(e,i):!Wo(e.requireds)||o.isInfoRow||e.isNotSelectable||e.forcedActivated||(e.isActive?e.selectOnce||oe(e,i):ie(e,i))}function oe(e,t){if(ei(e,!1)){var o=function(){for(var o=new $,i=0;i<e.scores.length;i++){var n=e.scores[i];if(Wo(n.requireds)&&n.isActive||n.isActive){var r=Nt.get(n.id);if(void 0!==r){var a=n.discountIsOn&&void 0!==n.discountScore?n.discountScore:n.value;a=r.allowFloat?a:Math.floor(a),r.startingSum+=a;var c=o.get(n.id);void 0!==c?o.set(n.id,-a+c):o.set(n.id,-a),delete n.isActive,delete n.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandom){for(var l=0;l<e.activatedRandom.length;l++){var s=Et.get(e.activatedRandom[l]);if(void 0!==s){var d=s.row,u=s.choice;Z(e,u,d,0)}}delete e.activatedRandom}else for(var v=e.activateThisChoice.split(","),f=0;f<v.length;f++){var m=v[f].split("/ON#"),p=m.length>1?parseInt(m[1]):0,h=Et.get(m[0]);if(void 0!==h){var b=h.row,w=h.choice;Z(e,w,b,p)}else{var T=Ut.get(m[0]);if(void 0!==T)for(var I=T.elements,y=0;y<I.length;y++){var x=Et.get(I[y]);if(void 0!==x){var S=x.row,C=x.choice;Z(e,C,S,p)}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){var B=new Set;if(void 0!==e.discountRows)for(var O=0;O<e.discountRows.length;O++){var A=Wt.get(e.discountRows[O]);if(void 0!==A)for(var k=0;k<A.objects.length;k++){for(var M=A.objects[k],F=0;F<M.scores.length;F++){var R=M.scores[F];R.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(R.id)||Xo(e,R)}B.add(M.id)}}if(void 0!==e.discountChoices)for(var j=0;j<e.discountChoices.length;j++)if(!B.has(e.discountChoices[j])){var D=Et.get(e.discountChoices[j]);if(void 0!==D)for(var P=D.choice,q=0;q<P.scores.length;q++){var V=D.choice.scores[q];V.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(V.id)||B.has(V.idx)||Xo(e,V)}}}else if(void 0!==e.discountGroups)for(var L=0;L<e.discountGroups.length;L++){var N=Ut.get(e.discountGroups[L]);if(void 0!==N)for(var E=0;E<N.elements.length;E++){var U=Et.get(N.elements[E]);if(void 0!==U)for(var z=0;z<U.choice.scores.length;z++){var G=U.choice.scores[z];G.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(G.id)||Xo(e,G)}}}if(e.isActive=!1,t.currentChoices-=1,Vt.delete(e.id),Array.from(Vt.entries()).forEach(function(t){var o=g(t,2),i=o[0],n=o[1],r=Et.get(i);if(void 0!==r){var a=r.row,c=r.choice;if(c.id!==e.id&&!Wo(c.requireds))if(c.forcedActivated&&(delete c.forcedActivated,c.isAllowDeselect||Lt.set(c.id,{multiple:n.multiple})),0===n.multiple)c.isActive&&oe(c,a);else if(n.multiple>0)for(var l=0;l<n.multiple;l++)c.isActive&&re(c,a)}}),e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply){for(var _=0,H=0;H<e.pointTypeToMultiply.length;H++){var Y=Nt.get(e.pointTypeToMultiply[H]);if(void 0!==Y){for(var J=Zt.length-1;J>=0;J--){var X=Zt[J];if(X.multiplyPointtypeIsOnCheck&&void 0!==X.startingSumAtMultiply){var Q=X.startingSumAtMultiply[H].value*X.startingSumAtMultiply[H].calcVal;Q=Y.allowFloat?Q:Math.floor(Q),Y.startingSum-=Q,Y.startingSum+=X.startingSumAtMultiply[H].value}if(X.dividePointtypeIsOnCheck&&void 0!==X.startingSumAtDivide){var te=X.startingSumAtDivide[H].value/X.startingSumAtDivide[H].calcVal;te=Y.allowFloat?te:Math.floor(te),Y.startingSum-=te,Y.startingSum+=X.startingSumAtDivide[H].value}if(X.id===e.id){_=J;break}}for(var ie=_+1;ie<Zt.length;ie++){var ne=Zt[ie];ne.multiplyPointtypeIsOnCheck&&void 0!==ne.startingSumAtMultiply&&(ne.startingSumAtMultiply[H].value=Y.startingSum,Y.startingSum*=ne.startingSumAtMultiply[H].calcVal,Y.startingSum=Y.allowFloat?Y.startingSum:Math.floor(Y.startingSum)),ne.dividePointtypeIsOnCheck&&void 0!==ne.startingSumAtDivide&&(ne.startingSumAtDivide[H].value=Y.startingSum,Y.startingSum/=ne.startingSumAtDivide[H].calcVal,Y.startingSum=Y.allowFloat?Y.startingSum:Math.floor(Y.startingSum))}}}delete e.multiplyPointtypeIsOnCheck,delete e.startingSumAtMultiply,e.dividePointtypeIsOnCheck||Zt.splice(_,1)}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide){for(var ae=0,ce=0;ce<e.pointTypeToDivide.length;ce++){var le=Nt.get(e.pointTypeToDivide[ce]);if(void 0!==le){for(var se=Zt.length-1;se>=0;se--){var de=Zt[se];if(de.multiplyPointtypeIsOnCheck&&void 0!==de.startingSumAtMultiply){var ue=de.startingSumAtMultiply[ce].value*de.startingSumAtMultiply[ce].calcVal;ue=le.allowFloat?ue:Math.floor(ue),le.startingSum-=ue,le.startingSum+=de.startingSumAtMultiply[ce].value}if(de.dividePointtypeIsOnCheck&&void 0!==de.startingSumAtDivide){var ve=de.startingSumAtDivide[ce].value/de.startingSumAtDivide[ce].calcVal;ve=le.allowFloat?ve:Math.floor(ve),le.startingSum-=ve,le.startingSum+=de.startingSumAtDivide[ce].value}if(de.id===e.id){ae=se;break}}for(var fe=ae+1;fe<Zt.length;fe++){var ge=Zt[fe];ge.multiplyPointtypeIsOnCheck&&void 0!==ge.startingSumAtMultiply&&(ge.startingSumAtMultiply[ce].value=le.startingSum,le.startingSum*=ge.startingSumAtMultiply[ce].calcVal,le.startingSum=le.allowFloat?le.startingSum:Math.floor(le.startingSum)),ge.dividePointtypeIsOnCheck&&void 0!==ge.startingSumAtDivide&&(ge.startingSumAtDivide[ce].value=le.startingSum,le.startingSum/=ge.startingSumAtDivide[ce].calcVal,le.startingSum=le.allowFloat?le.startingSum:Math.floor(le.startingSum))}}}delete e.dividePointtypeIsOnCheck,delete e.startingSumAtDivide,Zt.splice(ae,1)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(var me=0;me<e.changedVariables.length;me++){var pe=_t.get(e.changedVariables[me]);void 0!==pe&&("1"===e.changeType?pe.isTrue=!1:"2"===e.changeType?pe.isTrue=!0:"3"===e.changeType&&(pe.isTrue=!pe.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var he=0;he<e.idOfAllowChoice.length;he++){var be=Wt.get(e.idOfAllowChoice[he]);if(void 0!==be&&(be.allowedChoices-=e.numbAddToAllowChoice,be.allowedChoices>0&&be.currentChoices>=be.allowedChoices))for(var we=0;we<be.objects.length;we++){var Te=be.objects[we];if(Te.isActive&&!Te.forcedActivated)if(Te.isSelectableMultiple)for(var Ie=Te.multipleUseVariable,ye=0;ye<Ie;ye++)re(Te,be);else oe(Te,be);if(be.allowedChoices>=be.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var xe=Gt.get(e.idOfTheTextfieldWord);void 0!==xe&&(xe.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){var Se=app.bgImageStack.findIndex(function(t){return t.id===e.id});-1!==Se&&app.bgImageStack.splice(Se,1);var Ce=app.bgImageStack.length;Ce>0?app.styling.backgroundImage=app.bgImageStack[Ce-1].data:(app.styling.backgroundImage=void 0!==app.defaultBgImage?app.defaultBgImage:"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){var Be=app.bgColorStack.findIndex(function(t){return t.id===e.id});-1!==Be&&app.bgColorStack.splice(Be,1);var Oe=app.bgColorStack.length;Oe>0?app.styling.backgroundColor=app.bgColorStack[Oe-1].data:(app.styling.backgroundColor=void 0!==app.defaultBgColor?app.defaultBgColor:"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){var Ae=app.barBgColorStack.findIndex(function(t){return t.id===e.id});-1!==Ae&&app.barBgColorStack.splice(Ae,1);var ke=app.barBgColorStack.length;ke>0?app.styling.barBackgroundColor=app.barBgColorStack[ke-1].data:(app.styling.barBackgroundColor=void 0!==app.defaultBarBgColor?app.defaultBarBgColor:"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){var Me=app.barIconColorStack.findIndex(function(t){return t.id===e.id});-1!==Me&&app.barIconColorStack.splice(Me,1);var Fe=app.barIconColorStack.length;Fe>0?app.styling.barIconColor=app.barIconColorStack[Fe-1].data:(app.styling.barIconColor=void 0!==app.defaultBarIconColor?app.defaultBarIconColor:"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){var Re=app.barTextColorStack.findIndex(function(t){return t.id===e.id});-1!==Re&&app.barTextColorStack.splice(Re,1);var je=app.barTextColorStack.length;je>0?app.styling.barTextColor=app.barTextColorStack[je-1].data:(app.styling.barTextColor=void 0!==app.defaultBarIconColor?app.defaultBarIconColor:"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var De=e.changeTemplatesList.split(","),Pe=0;Pe<De.length;Pe++){var $e=De[Pe],qe=Et.get($e);if(void 0===qe){var Ve=Wt.get($e);if(void 0===Ve){var Le=Ut.get($e[0]);if(void 0===Le);else{for(var Ne=Le.rowElements,We=0;We<Ne.length;We++){var Ee=Wt.get(Ne[We]);void 0!==Ee&&zi(Ee,e.id)}for(var Ue=Le.elements,ze=0;ze<Ue.length;ze++){var Ge=Et.get(Ue[ze]);if(void 0!==Ge)zi(Ge.choice,e.id)}}}else zi(Ve,e.id)}else{var _e=qe.choice;if(zi(_e,e.id),e.changeAddonTemplate)for(var He=0;He<_e.addons.length;He++){zi(_e.addons[He],e.id)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Ye=e.changeWidthList.split(","),Je=0;Je<Ye.length;Je++){var Ze=Ye[Je],Xe=Et.get(Ze);if(void 0===Xe){var Ke=Wt.get(Ze);if(void 0===Ke){var Qe=Ut.get(Ze[0]);if(void 0===Qe);else{for(var et=Qe.rowElements,tt=0;tt<et.length;tt++){var ot=Wt.get(et[tt]);void 0!==ot&&_i(ot,e.id)}for(var it=Qe.elements,nt=0;nt<it.length;nt++){var rt=Et.get(it[nt]);if(void 0!==rt)_i(rt.choice,e.id)}}}else _i(Ke,e.id)}else{_i(Xe.choice,e.id)}}if(e.setBgmIsOn&&Qt&&e.bgmId&&(eo.bgmIsPlaying=!1,zo(e,e.bgmId,0)),e.muteBgm&&Qt){var at=W(Qt);app.isMute=!1,at&&"function"==typeof at.unMute&&at.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var ct=0;ct<e.hiddenContentsRow.length;ct++){var lt=Wt.get(e.hiddenContentsRow[ct]);if(void 0!==lt)for(var st=0;st<e.hiddenContentsType.length;st++)switch(e.hiddenContentsType[st]){case"1":delete lt.objectTitleRemoved;break;case"2":delete lt.objectImageRemoved;break;case"3":delete lt.objectTextRemoved;break;case"4":delete lt.objectScoreRemoved;break;case"5":delete lt.objectRequirementRemoved;break;case"6":delete lt.addonTitleRemoved;break;case"7":delete lt.addonImageRemoved;break;case"8":delete lt.addonTextRemoved}}delete e.tempSlots,K(e,o,0),ee()};-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,o()},1e3*app.fadeTransitionTime)):o()),0===c.indexOf(e.id)&&c.splice(0)}}function ie(e,o){var i=!0;if(o.allowedChoices>0&&o.currentChoices>=o.allowedChoices){for(var n=0,r=0;r<o.objects.length;r++){var a=o.objects[r];if(a.isActive){if(!a.forcedActivated){if(a.isSelectableMultiple)for(var s=a.multipleUseVariable,u=0;u<s;u++)te(a,o);else te(a,o);break}n++}}n>=o.allowedChoices&&(i=!1)}if(i){for(var v=0;v<e.scores.length;v++){var f=e.scores[v],m=Nt.get(f.id);void 0!==m&&f.isRandom&&!f.setValue&&void 0!==f.maxValue&&void 0!==f.minValue&&(f.value=Math.floor(Math.random()*(f.maxValue-f.minValue+1))+f.minValue,f.value=m.allowFloat?f.value:Math.floor(f.value),f.setValue=!0)}if(ei(e,!0)){var p=function(){var i=new $;if(e.isActive=!0,Vt.set(e.id,{multiple:0}),o.currentChoices+=1,e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){var n=new Set;if(void 0!==e.discountRows)for(var r=0;r<e.discountRows.length;r++){var a=Wt.get(e.discountRows[r]);if(void 0!==a)for(var c=0;c<a.objects.length;c++){for(var l=a.objects[c],s=0;s<l.scores.length;s++){var u,v,f=l.scores[s];f.isNotDiscountable||0!==(null===(u=e.discountPointTypes)||void 0===u?void 0:u.length)&&-1===(null===(v=e.discountPointTypes)||void 0===v?void 0:v.indexOf(f.id))||Ko(e,f)}n.add(l.id)}}if(void 0!==e.discountChoices)for(var m=0;m<e.discountChoices.length;m++)if(!n.has(e.discountChoices[m])){var p=Et.get(e.discountChoices[m]);if(void 0!==p)for(var h=p.choice,b=0;b<h.scores.length;b++){var w,T,I=h.scores[b];I.isNotDiscountable||0!==(null===(w=e.discountPointTypes)||void 0===w?void 0:w.length)&&-1===(null===(T=e.discountPointTypes)||void 0===T?void 0:T.indexOf(I.id))||Ko(e,I)}}}else if(void 0!==e.discountGroups)for(var y=0;y<e.discountGroups.length;y++){var x=Ut.get(e.discountGroups[y]);if(void 0!==x)for(var S=0;S<x.elements.length;S++){var C=Et.get(x.elements[S]);if(void 0!==C)for(var B=0;B<C.choice.scores.length;B++){var O,A,k=C.choice.scores[B];k.isNotDiscountable||0!==(null===(O=e.discountPointTypes)||void 0===O?void 0:O.length)&&-1===(null===(A=e.discountPointTypes)||void 0===A?void 0:A.indexOf(k.id))||Ko(e,k)}}}for(var M=0;M<e.scores.length;M++){var F=e.scores[M];if(Wo(F.requireds)&&!F.isActive){var R=Nt.get(F.id);if(void 0!==R){var j=F.discountIsOn&&void 0!==F.discountScore?F.discountScore:F.value;j=R.allowFloat?j:Math.floor(j),R.startingSum-=j,F.isActive=!0;var D=i.get(F.id);void 0!==D?i.set(F.id,j+D):i.set(F.id,j)}}}if(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&ci(e),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom)X(e);else for(var P=e.activateThisChoice.split(","),q=0;q<P.length;q++){var V=P[q].split("/ON#"),L=V.length>1?parseInt(V[1]):0,N=Et.get(V[0]);if(void 0!==N){var E=N.row,U=N.choice;J(e,U,E,L)}else{var z=Ut.get(V[0]);if(void 0!==z)for(var G=z.elements,_=0;_<G.length;_++){var H=Et.get(G[_]);if(void 0!==H){var Y=H.row,Z=H.choice;J(e,Z,Y,L)}}}}if(e.deactivateOtherChoice&&void 0!==e.deactivateThisChoice)for(var K=e.deactivateThisChoice.split(","),te=0;te<K.length;te++){var ie=K[te].split("/ON#"),ne=ie.length>1?parseInt(ie[1]):0,ae=Et.get(ie[0]);if(void 0!==ae){var le=ae.row,se=ae.choice;if(se.isActive)if(se.isSelectableMultiple&&se.isMultipleUseVariable)for(var de=0;de<ne;de++)re(se,le);else oe(se,le)}else{var ue=Ut.get(ie[0]);if(void 0!==ue)for(var ve=ue.elements,fe=0;fe<ve.length;fe++){var ge=Et.get(ve[fe]);if(void 0!==ge){var me=ge.row,pe=ge.choice;if(pe.isActive)if(pe.isSelectableMultiple&&pe.isMultipleUseVariable)for(var he=0;he<ne;he++)re(pe,me);else oe(pe,me)}}}}if(Array.from(Vt.entries()).forEach(function(t){var o=g(t,2),i=o[0],n=o[1],r=Et.get(i);if(void 0!==r){var a=r.row,c=r.choice;if(c.id!==e.id&&!Wo(c.requireds))if(c.forcedActivated&&(delete c.forcedActivated,c.isAllowDeselect||Lt.set(c.id,{multiple:n.multiple})),0===n.multiple)c.isActive&&oe(c,a);else if(n.multiple>0)for(var l=0;l<n.multiple;l++)c.isActive&&re(c,a)}}),e.multiplyPointtypeIsOn&&void 0!==e.pointTypeToMultiply&&void 0!==e.multiplyWithThis){var be=0;e.multiplyPointtypeIsOnCheck=!0,"object"!==d(e.startingSumAtMultiply)&&(e.startingSumAtMultiply=[]);for(var we=0;we<e.pointTypeToMultiply.length;we++){var Te=Nt.get(e.pointTypeToMultiply[we]);if(void 0!==Te)if(e.multiplyPointtypeIsId&&"string"==typeof e.multiplyWithThis){var Ie=Nt.get(e.multiplyWithThis);void 0!==Ie?(e.startingSumAtMultiply[we]={value:Te.startingSum,calcVal:Ie.startingSum},Te.startingSum*=Ie.startingSum,Te.startingSum=Te.allowFloat?Te.startingSum:Math.floor(Te.startingSum)):be++}else"number"==typeof e.multiplyWithThis&&(e.startingSumAtMultiply[we]={value:Te.startingSum,calcVal:e.multiplyWithThis},Te.startingSum*=e.multiplyWithThis,Te.startingSum=Te.allowFloat?Te.startingSum:Math.floor(Te.startingSum));else be++}be===e.pointTypeToMultiply.length&&delete e.multiplyPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck&&Zt.push(e)}if(e.dividePointtypeIsOn&&void 0!==e.pointTypeToDivide&&void 0!==e.divideWithThis){var ye=0;e.dividePointtypeIsOnCheck=!0,"object"!==d(e.startingSumAtDivide)&&(e.startingSumAtDivide=[]);for(var xe=0;xe<e.pointTypeToDivide.length;xe++){var Se=Nt.get(e.pointTypeToDivide[xe]);if(void 0!==Se)if(e.dividePointtypeIsId&&"string"==typeof e.divideWithThis){var Ce=Nt.get(e.divideWithThis);void 0!==Ce?0===Ce.startingSum?ye++:(e.startingSumAtDivide[xe]={value:Se.startingSum,calcVal:Ce.startingSum},Se.startingSum/=Ce.startingSum,Se.startingSum=Se.allowFloat?Se.startingSum:Math.floor(Se.startingSum)):ye++}else"number"==typeof e.divideWithThis&&(0===e.dividedWithThis?ye++:(e.startingSumAtDivide[xe]={value:Se.startingSum,calcVal:e.divideWithThis},Se.startingSum/=e.divideWithThis,Se.startingSum=Se.allowFloat?Se.startingSum:Math.floor(Se.startingSum)));else ye++}ye===e.pointTypeToDivide.length&&delete e.dividePointtypeIsOnCheck,!e.multiplyPointtypeIsOnCheck&&e.dividePointtypeIsOnCheck&&Zt.push(e)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(var Be=0;Be<e.changedVariables.length;Be++){var Oe=_t.get(e.changedVariables[Be]);void 0!==Oe&&("1"===e.changeType?Oe.isTrue=!0:"2"===e.changeType?Oe.isTrue=!1:"3"===e.changeType&&(Oe.isTrue=!Oe.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var Ae=0;Ae<e.idOfAllowChoice.length;Ae++){var ke=Wt.get(e.idOfAllowChoice[Ae]);if(void 0!==ke&&(ke.allowedChoices+=e.numbAddToAllowChoice,ke.allowedChoices>0&&ke.currentChoices>=ke.allowedChoices))for(var Me=0;Me<ke.objects.length;Me++){var Fe=ke.objects[Me];if(Fe.isActive&&!Fe.forcedActivated)if(Fe.isSelectableMultiple)for(var Re=Fe.multipleUseVariable,je=0;je<Re;je++)re(Fe,ke);else oe(Fe,ke);if(ke.allowedChoices>=ke.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var De=Gt.get(e.idOfTheTextfieldWord);void 0!==De&&(De.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,to.currentDialog="appImageUpload",to.data=e,to.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=void 0!==app.styling.backgroundImage?app.styling.backgroundImage:""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=void 0!==app.styling.backgroundColor?app.styling.backgroundColor:""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=void 0!==app.styling.barBackgroundColor?app.styling.barBackgroundColor:"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=void 0!==app.styling.barIconColor?app.styling.barIconColor:"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=void 0!==app.styling.barTextColor?app.styling.barTextColor:"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var Pe=e.changeTemplatesList.split(","),$e=0;$e<Pe.length;$e++){var qe=Pe[$e],Ve=Et.get(qe);if(void 0===Ve){var Le=Wt.get(qe);if(void 0===Le){var Ne=Ut.get(qe[0]);if(void 0===Ne);else{for(var We=Ne.rowElements,Ee=0;Ee<We.length;Ee++){var Ue=Wt.get(We[Ee]);void 0!==Ue&&Ui(Ue,e.id,e.changeToThisTemplate)}for(var ze=Ne.elements,Ge=0;Ge<ze.length;Ge++){var _e=Et.get(ze[Ge]);if(void 0!==_e)Ui(_e.choice,e.id,e.changeToThisTemplate)}}}else Ui(Le,e.id,e.changeToThisTemplate)}else{var He=Ve.choice;if(Ui(He,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var Ye=0;Ye<He.addons.length;Ye++){Ui(He.addons[Ye],e.id,e.changeToThisTemplate)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Je=e.changeWidthList.split(","),Ze=0;Ze<Je.length;Ze++){var Xe=Je[Ze],Ke=Et.get(Xe);if(void 0===Ke){var Qe=Wt.get(Xe);if(void 0===Qe){var et=Ut.get(Xe[0]);if(void 0===et);else{for(var tt=et.rowElements,ot=0;ot<tt.length;ot++){var it=Wt.get(tt[ot]);void 0!==it&&Gi(it,e.id,e.changeToThisWidth)}for(var nt=et.elements,rt=0;rt<nt.length;rt++){var at=Et.get(nt[rt]);if(void 0!==at)Gi(at.choice,e.id,e.changeToThisWidth)}}}else Gi(Qe,e.id,e.changeToThisWidth)}else{Gi(Ke.choice,e.id,e.changeToThisWidth)}}if(e.setBgmIsOn&&e.bgmId&&(eo.bgmIsPlaying=!0,eo.isBgmInit?zo(e,e.bgmId,0):(_o(e),eo.isBgmInit=!0)),e.muteBgm&&Qt){var ct=W(Qt);app.isMute=!0,ct&&"function"==typeof ct.mute&&ct.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var lt=0;lt<e.hiddenContentsRow.length;lt++){var st=Wt.get(e.hiddenContentsRow[lt]);if(void 0!==st){st.textIsRemoved||(st.textIsRemoved=!0);for(var dt=0;dt<e.hiddenContentsType.length;dt++)switch(e.hiddenContentsType[dt]){case"1":st.objectTitleRemoved=!0;break;case"2":st.objectImageRemoved=!0;break;case"3":st.objectTextRemoved=!0;break;case"4":st.objectScoreRemoved=!0;break;case"5":st.objectRequirementRemoved=!0;break;case"6":st.addonTitleRemoved=!0;break;case"7":st.addonImageRemoved=!0;break;case"8":st.addonTextRemoved=!0}}}e.scrollToRow&&ce().then(function(){setTimeout(function(){if(e.scrollToObject){if(e.scrollObjectId){var o=Et.get(e.scrollObjectId);if(void 0!==o){var i,n=o.choice,r=o.row,a=null===(i=t.mainDiv)||void 0===i||null===(i=i.children[r.index])||void 0===i||null===(i=i.children[0])||void 0===i||null===(i=i.children[1])||void 0===i?void 0:i.children;if(void 0!==a)if(t.isBackpack){var c=document.getElementById("backpackDialog");null==c||c.scrollTo({top:a[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:a[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}else if(e.scrollRowId){var l=Wt.get(e.scrollRowId);if(void 0!==l){var s,d=null===(s=t.mainDiv)||void 0===s?void 0:s.children;if(void 0!==d)if(t.isBackpack){var u=document.getElementById("backpackDialog");null==u||u.scrollTo({top:d[l.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:d[l.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}},10)}),e.cleanACtivatedOnSelect&&ti(),Q(e,i,0),ee()};if(e.customTextfieldIsOn&&!y)return l.choice=e,l.row=o,l.context=void 0!==e.wordPromptText?e.wordPromptText:"",l.prevText=void 0!==e.wordChangeSelect?e.wordChangeSelect:"",l.isWord=!0,void A(T,"dlgCommon");if(e.confirmIsOn&&!y)return l.choice=e,l.row=o,l.context=void 0!==e.wordPromptText?e.wordPromptText:"",l.isWord=!1,void A(T,"dlgCommon");-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,p()},1e3*app.fadeTransitionTime)):p()),0===c.indexOf(e.id)&&c.splice(0)}}}function ne(e,o){var i=Wo(e.requireds)&&!o.isInfoRow&&!e.isNotSelectable,n=!0,r=o;if(o.isResultRow){var a=Et.get(e.id);void 0!==a&&(r=a.row)}if(i&&e.isMultipleUseVariable&&r.allowedChoices>0&&r.currentChoices>=r.allowedChoices){for(var l=0,s=0;s<r.objects.length;s++){var d=r.objects[s];if(d.isActive){if(!d.forcedActivated){if(d.isSelectableMultiple)for(var u=d.multipleUseVariable,v=0;v<u;v++)re(d,r);else te(d,r);break}l++}}l>=r.allowedChoices&&(n=!1)}if(n){for(var f=0;f<e.scores.length;f++){var m=e.scores[f],p=Nt.get(m.id);void 0!==p&&m.isRandom&&!m.setValue&&void 0!==m.maxValue&&void 0!==m.minValue&&(m.value=Math.floor(Math.random()*(m.maxValue-m.minValue+1))+m.minValue,m.value=p.allowFloat?m.value:Math.floor(m.value),m.setValue=!0)}if(ei(e,!0)){var h=function(){var o=new $,i=e.isActive,n=e.multipleUseVariable>=0,a=Math.abs(e.multipleUseVariable);if(e.multipleUseVariable+=1,0===e.multipleUseVariable?(Vt.delete(e.id),e.isActive=!1,r.currentChoices-=1):(1===e.multipleUseVariable&&(e.isActive=!0,r.currentChoices+=1),Vt.set(e.id,{multiple:e.multipleUseVariable})),n){if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(e.isDisChoices){var c=new Set;if(void 0!==e.discountRows)for(var l=0;l<e.discountRows.length;l++){var s=Wt.get(e.discountRows[l]);if(void 0!==s)for(var d=0;d<s.objects.length;d++){for(var u=s.objects[d],v=0;v<u.scores.length;v++){var f,m,p=u.scores[v];p.isNotDiscountable||0!==(null===(f=e.discountPointTypes)||void 0===f?void 0:f.length)&&-1===(null===(m=e.discountPointTypes)||void 0===m?void 0:m.indexOf(p.id))||Ko(e,p)}c.add(u.id)}}if(void 0!==e.discountChoices)for(var h=0;h<e.discountChoices.length;h++)if(!c.has(e.discountChoices[h])){var b=Et.get(e.discountChoices[h]);if(void 0!==b)for(var w=b.choice,T=0;T<w.scores.length;T++){var I,y,x=w.scores[T];x.isNotDiscountable||0!==(null===(I=e.discountPointTypes)||void 0===I?void 0:I.length)&&-1===(null===(y=e.discountPointTypes)||void 0===y?void 0:y.indexOf(x.id))||Ko(e,x)}}}else if(void 0!==e.discountGroups)for(var S=0;S<e.discountGroups.length;S++){var C=Ut.get(e.discountGroups[S]);if(void 0!==C)for(var B=0;B<C.elements.length;B++){var O=Et.get(C.elements[B]);if(void 0!==O)for(var A=0;A<O.choice.scores.length;A++){var k,M,F=O.choice.scores[A];F.isNotDiscountable||0!==(null===(k=e.discountPointTypes)||void 0===k?void 0:k.length)&&-1===(null===(M=e.discountPointTypes)||void 0===M?void 0:M.indexOf(F.id))||Ko(e,F)}}}for(var R=0;R<e.scores.length;R++){var j=e.scores[R];if(void 0===j.isActiveMul&&(j.isActiveMul=[]),Wo(j.requireds)&&!j.isActiveMul[a]){var D=Nt.get(j.id);if(void 0!==D){var P=j.discountIsOn&&void 0!==j.discountScore?j.discountScore:j.value;P=D.allowFloat?P:Math.floor(P),j.multiplyByTimes&&(P*=a+1),D.startingSum-=P,j.isActiveMul[a]=!0;var q=o.get(j.id);void 0!==q?o.set(j.id,P+q):o.set(j.id,P)}}}}else for(var V=0;V<e.scores.length;V++){var L=e.scores[V];if(void 0===L.isActiveMulMinus&&(L.isActiveMulMinus=[]),Wo(L.requireds)&&L.isActiveMulMinus[a]||L.isActiveMulMinus[a]){var N=Nt.get(L.id);if(void 0!==N){var E=L.discountIsOn&&void 0!==L.discountScore?L.discountScore:L.value;E=N.allowFloat?E:Math.floor(E),L.multiplyByTimes&&(E*=Math.abs(a)),N.startingSum-=E;var U=o.get(L.id);void 0!==U?o.set(L.id,E+U):o.set(L.id,E),delete L.isActiveMulMinus[a]}}}if(n&&(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&ci(e),e.activateOtherChoice&&void 0!==e.activateThisChoice))if(e.isActivateRandom)X(e);else for(var z=e.activateThisChoice.split(","),G=0;G<z.length;G++){var _=z[G].split("/ON#"),H=_.length>1?parseInt(_[1]):0,Y=Et.get(_[0]);if(void 0!==Y){var Z=Y.row,K=Y.choice;!K.isSelectableMultiple&&i||J(e,K,Z,H)}else{var te=Ut.get(_[0]);if(void 0!==te)for(var ie=te.elements,ne=0;ne<ie.length;ne++){var ae=Et.get(ie[ne]);if(void 0!==ae){var le=ae.row,se=ae.choice;!se.isSelectableMultiple&&i||J(e,se,le,H)}}}}if(Array.from(Vt.entries()).forEach(function(t){var o=g(t,2),i=o[0],n=o[1],r=Et.get(i);if(void 0!==r){var a=r.row,c=r.choice;if(c.id!==e.id&&!Wo(c.requireds))if(c.forcedActivated&&(delete c.forcedActivated,c.isAllowDeselect||Lt.set(c.id,{multiple:n.multiple})),0===n.multiple)c.isActive&&oe(c,a);else if(n.multiple>0)for(var l=0;l<n.multiple;l++)c.isActive&&re(c,a)}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var de=0;de<e.idOfAllowChoice.length;de++){var ue=Wt.get(e.idOfAllowChoice[de]);if(void 0!==ue&&(ue.allowedChoices+=e.numbAddToAllowChoice,ue.allowedChoices>0&&ue.currentChoices>=ue.allowedChoices))for(var ve=0;ve<ue.objects.length;ve++){var fe=ue.objects[ve];if(fe.isActive&&!fe.forcedActivated)if(fe.isSelectableMultiple)for(var ge=fe.multipleUseVariable,me=0;me<ge;me++)re(fe,ue);else fe.isActive&&oe(fe,ue);if(ue.allowedChoices>=ue.currentChoices)break}}if(!i){if(e.isChangeVariables&&void 0!==e.changedVariables)for(var pe=0;pe<e.changedVariables.length;pe++){var he=_t.get(e.changedVariables[pe]);void 0!==he&&("1"===e.changeType?he.isTrue=!0:"2"===e.changeType?he.isTrue=!1:"3"===e.changeType&&(he.isTrue=!he.isTrue))}if(e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=void 0!==app.styling.backgroundImage?app.styling.backgroundImage:""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=void 0!==app.styling.backgroundColor?app.styling.backgroundColor:""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=void 0!==app.styling.barBackgroundColor?app.styling.barBackgroundColor:"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=void 0!==app.styling.barIconColor?app.styling.barIconColor:"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=void 0!==app.styling.barTextColor?app.styling.barTextColor:"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var be=e.changeTemplatesList.split(","),we=0;we<be.length;we++){var Te=be[we],Ie=Et.get(Te);if(void 0===Ie){var ye=Wt.get(Te);if(void 0===ye){var xe=Ut.get(Te[0]);if(void 0===xe);else{for(var Se=xe.rowElements,Ce=0;Ce<Se.length;Ce++){var Be=Wt.get(Se[Ce]);void 0!==Be&&Ui(Be,e.id,e.changeToThisTemplate)}for(var Oe=xe.elements,Ae=0;Ae<Oe.length;Ae++){var ke=Et.get(Oe[Ae]);if(void 0!==ke)Ui(ke.choice,e.id,e.changeToThisTemplate)}}}else Ui(ye,e.id,e.changeToThisTemplate)}else{var Me=Ie.choice;if(Ui(Me,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var Fe=0;Fe<Me.addons.length;Fe++){Ui(Me.addons[Fe],e.id,e.changeToThisTemplate)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Re=e.changeWidthList.split(","),je=0;je<Re.length;je++){var De=Re[je],Pe=Et.get(De);if(void 0===Pe){var $e=Wt.get(De);if(void 0===$e){var qe=Ut.get(De[0]);if(void 0===qe);else{for(var Ve=qe.rowElements,Le=0;Le<Ve.length;Le++){var Ne=Wt.get(Ve[Le]);void 0!==Ne&&Gi(Ne,e.id,e.changeToThisWidth)}for(var We=qe.elements,Ee=0;Ee<We.length;Ee++){var Ue=Et.get(We[Ee]);if(void 0!==Ue)Gi(Ue.choice,e.id,e.changeToThisWidth)}}}else Gi($e,e.id,e.changeToThisWidth)}else{Gi(Pe.choice,e.id,e.changeToThisWidth)}}if(e.setBgmIsOn&&e.bgmId&&(eo.bgmIsPlaying=!0,eo.isBgmInit?zo(e,e.bgmId,0):(_o(e),eo.isBgmInit=!0)),e.muteBgm&&Qt){var ze=W(Qt);app.isMute=!0,ze&&"function"==typeof ze.mute&&ze.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var Ge=0;Ge<e.hiddenContentsRow.length;Ge++){var _e=Wt.get(e.hiddenContentsRow[Ge]);if(void 0!==_e){_e.textIsRemoved||(_e.textIsRemoved=!0);for(var He=0;He<e.hiddenContentsType.length;He++)switch(e.hiddenContentsType[He]){case"1":_e.objectTitleRemoved=!0;break;case"2":_e.objectImageRemoved=!0;break;case"3":_e.objectTextRemoved=!0;break;case"4":_e.objectScoreRemoved=!0;break;case"5":_e.objectRequirementRemoved=!0;break;case"6":_e.addonTitleRemoved=!0;break;case"7":_e.addonImageRemoved=!0;break;case"8":_e.addonTextRemoved=!0}}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var Ye=e.changeTemplatesList.split(","),Je=0;Je<Ye.length;Je++){var Ze=Ye[Je],Xe=Et.get(Ze);if(void 0!==Xe){var Ke=Xe.choice;Ke.defaultTemplate&&(Ke.defaultTemplate=Ke.template),Ke.template=e.changeToThisTemplate,e.changeAddonTemplate}else{var Qe=Wt.get(Ze);if(void 0!==Qe)Qe.defaultTemplate=Qe.template,Qe.template=e.changeToThisTemplate;else{var et=Ut.get(Ze[0]);if(void 0!==et){for(var tt=et.rowElements,ot=0;ot<tt.length;ot++){var it=Wt.get(tt[ot]);void 0!==it&&(it.defaultTemplate=it.template,it.template=e.changeToThisTemplate)}for(var nt=et.elements,rt=0;rt<nt.length;rt++){var at=Et.get(nt[rt]);if(void 0!==at){var ct=at.choice;ct.defaultTemplate=ct.template,ct.template=e.changeToThisTemplate}}}}}}e.scrollToRow&&ce().then(function(){setTimeout(function(){if(e.scrollToObject){if(e.scrollObjectId){var o=Et.get(e.scrollObjectId);if(void 0!==o){var i,n=o.choice,r=o.row,a=null===(i=t.mainDiv)||void 0===i||null===(i=i.children[r.index])||void 0===i||null===(i=i.children[0])||void 0===i||null===(i=i.children[1])||void 0===i?void 0:i.children;if(void 0!==a)if(t.isBackpack){var c=document.getElementById("backpackDialog");null==c||c.scrollTo({top:a[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:a[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}else if(e.scrollRowId){var l=Wt.get(e.scrollRowId);if(void 0!==l){var s,d=null===(s=t.mainDiv)||void 0===s?void 0:s.children;if(void 0!==d)if(t.isBackpack){var u=document.getElementById("backpackDialog");null==u||u.scrollTo({top:d[l.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:d[l.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}},10)})}Q(e,o,0),ee()};if(i)if(e.isMultipleUseVariable)void 0===e.multipleUseVariable&&(e.multipleUseVariable=0),void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>e.multipleUseVariable&&(-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,h()},1e3*app.fadeTransitionTime)):h()),0===c.indexOf(e.id)&&c.splice(0));else if(void 0!==e.multipleScoreId){var b=Nt.get(e.multipleScoreId);void 0!==b&&(void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>b.startingSum&&(b.startingSum+=1))}}}}function re(e,t){var o=ei(e,!1),i=t;if(t.isResultRow){var n=Et.get(e.id);void 0!==n&&(i=n.row)}if(o){var r=function(){var t=new $,o=e.multipleUseVariable>0,n=Math.abs(e.multipleUseVariable-1);if(o){for(var r=0;r<e.scores.length;r++){var a=e.scores[r];if(void 0!==a.isActiveMul&&(Wo(a.requireds)&&a.isActiveMul[n]||a.isActiveMul[n])){var c=Nt.get(a.id);if(void 0!==c){var l=a.discountIsOn&&void 0!==a.discountScore?a.discountScore:a.value;l=c.allowFloat?l:Math.floor(l),a.multiplyByTimes&&(l*=n+1),c.startingSum+=l;var s=t.get(a.id);void 0!==s?t.set(a.id,-l+s):t.set(a.id,-l),delete a.isActiveMul[n],0===n&&delete a.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandomMul&&void 0!==e.activatedRandomMul[n]){for(var d=0;d<e.activatedRandomMul[n].length;d++){var u=Et.get(e.activatedRandomMul[n][d]);if(void 0!==u){var v=u.row,f=u.choice;Z(e,f,v,0)}}e.activatedRandomMul.splice(n,1)}else for(var m=e.activateThisChoice.split(","),p=0;p<m.length;p++){var h=m[p].split("/ON#"),b=h.length>1?parseInt(h[1]):0,w=Et.get(h[0]);if(void 0!==w){var T=w.row,I=w.choice;(0===n||I.isSelectableMultiple)&&Z(e,I,T,b)}else{var y=Ut.get(h[0]);if(void 0!==y)for(var x=y.elements,S=0;S<x.length;S++){var C=Et.get(x[S]);if(void 0!==C){var B=C.row,O=C.choice;(0===n||O.isSelectableMultiple)&&Z(e,O,B,b)}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){var A=new Set;if(void 0!==e.discountRows)for(var k=0;k<e.discountRows.length;k++){var M=Wt.get(e.discountRows[k]);if(void 0!==M)for(var F=0;F<M.objects.length;F++){for(var R=M.objects[F],j=0;j<R.scores.length;j++){var D=R.scores[j];D.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(D.id)||Xo(e,D)}A.add(R.id)}}if(void 0!==e.discountChoices)for(var P=0;P<e.discountChoices.length;P++)if(!A.has(e.discountChoices[P])){var q=Et.get(e.discountChoices[P]);if(void 0!==q)for(var V=q.choice,L=0;L<V.scores.length;L++){var N=q.choice.scores[L];N.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(N.id)||A.has(N.idx)||Xo(e,N)}}}else if(void 0!==e.discountGroups)for(var E=0;E<e.discountGroups.length;E++){var U=Ut.get(e.discountGroups[E]);if(void 0!==U)for(var z=0;z<U.elements.length;z++){var G=Et.get(U.elements[z]);if(void 0!==G)for(var _=0;_<G.choice.scores.length;_++){var H=G.choice.scores[_];H.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(H.id)||Xo(e,H)}}}}else for(var Y=0;Y<e.scores.length;Y++){var J=e.scores[Y];if(void 0===J.isActiveMulMinus&&(J.isActiveMulMinus=[]),Wo(J.requireds)&&!J.isActiveMulMinus[n]){var X=Nt.get(J.id);if(void 0!==X){var Q=J.discountIsOn&&void 0!==J.discountScore?J.discountScore:J.value;Q=X.allowFloat?Q:Math.floor(Q),J.multiplyByTimes&&(Q*=n),X.startingSum+=Q;var te=t.get(J.id);void 0!==te?t.set(J.id,-Q+te):t.set(J.id,-Q),J.isActiveMulMinus[n]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,i.currentChoices-=1,Vt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,i.currentChoices+=1),Vt.set(e.id,{multiple:e.multipleUseVariable})),Array.from(Vt.entries()).forEach(function(t){var o=g(t,2),i=o[0],n=o[1],r=Et.get(i);if(void 0!==r){var a=r.row,c=r.choice;if(c.id!==e.id&&!Wo(c.requireds))if(c.forcedActivated&&(delete c.forcedActivated,c.isAllowDeselect||Lt.set(c.id,{multiple:n.multiple})),0===n.multiple)c.forcedActivated&&delete c.forcedActivated,c.isActive&&oe(c,a);else if(n.multiple>0)for(var l=0;l<n.multiple;l++)c.isActive&&re(c,a)}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var ie=0;ie<e.idOfAllowChoice.length;ie++){var ne=Wt.get(e.idOfAllowChoice[ie]);if(void 0!==ne&&(ne.allowedChoices-=e.numbAddToAllowChoice,ne.allowedChoices>0&&ne.currentChoices>=ne.allowedChoices))for(var ae=0;ae<ne.objects.length;ae++){var ce=ne.objects[ae];if(ce.isActive&&!ce.forcedActivated)if(ce.isSelectableMultiple)for(var le=ce.multipleUseVariable,se=0;se<le;se++)re(ce,ne);else ce.isActive&&oe(ce,ne);if(ne.allowedChoices>=ne.currentChoices)break}}if(0===n){if(e.isChangeVariables&&void 0!==e.changedVariables)for(var de=0;de<e.changedVariables.length;de++){var ue=_t.get(e.changedVariables[de]);void 0!==ue&&("1"===e.changeType?ue.isTrue=!1:"2"===e.changeType?ue.isTrue=!0:"3"===e.changeType&&(ue.isTrue=!ue.isTrue))}if(e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){var ve=app.bgImageStack.findIndex(function(t){return t.id===e.id});-1!==ve&&app.bgImageStack.splice(ve,1);var fe=app.bgImageStack.length;fe>0?app.styling.backgroundImage=app.bgImageStack[fe-1].data:(app.styling.backgroundImage=void 0!==app.defaultBgImage?app.defaultBgImage:"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){var ge=app.bgColorStack.findIndex(function(t){return t.id===e.id});-1!==ge&&app.bgColorStack.splice(ge,1);var me=app.bgColorStack.length;me>0?app.styling.backgroundColor=app.bgColorStack[me-1].data:(app.styling.backgroundColor=void 0!==app.defaultBgColor?app.defaultBgColor:"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){var pe=app.barBgColorStack.findIndex(function(t){return t.id===e.id});-1!==pe&&app.barBgColorStack.splice(pe,1);var he=app.barBgColorStack.length;he>0?app.styling.barBackgroundColor=app.barBgColorStack[he-1].data:(app.styling.barBackgroundColor=void 0!==app.defaultBarBgColor?app.defaultBarBgColor:"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){var be=app.barIconColorStack.findIndex(function(t){return t.id===e.id});-1!==be&&app.barIconColorStack.splice(be,1);var we=app.barIconColorStack.length;we>0?app.styling.barIconColor=app.barIconColorStack[we-1].data:(app.styling.barIconColor=void 0!==app.defaultBarIconColor?app.defaultBarIconColor:"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){var Te=app.barTextColorStack.findIndex(function(t){return t.id===e.id});-1!==Te&&app.barTextColorStack.splice(Te,1);var Ie=app.barTextColorStack.length;Ie>0?app.styling.barTextColor=app.barTextColorStack[Ie-1].data:(app.styling.barTextColor=void 0!==app.defaultBarIconColor?app.defaultBarIconColor:"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var ye=e.changeTemplatesList.split(","),xe=0;xe<ye.length;xe++){var Se=ye[xe],Ce=Et.get(Se);if(void 0===Ce){var Be=Wt.get(Se);if(void 0===Be){var Oe=Ut.get(Se[0]);if(void 0===Oe);else{for(var Ae=Oe.rowElements,ke=0;ke<Ae.length;ke++){var Me=Wt.get(Ae[ke]);void 0!==Me&&zi(Me,e.id)}for(var Fe=Oe.elements,Re=0;Re<Fe.length;Re++){var je=Et.get(Fe[Re]);if(void 0!==je)zi(je.choice,e.id)}}}else zi(Be,e.id)}else{var De=Ce.choice;if(zi(De,e.id),e.changeAddonTemplate)for(var Pe=0;Pe<De.addons.length;Pe++){zi(De.addons[Pe],e.id)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var $e=e.changeWidthList.split(","),qe=0;qe<$e.length;qe++){var Ve=$e[qe],Le=Et.get(Ve);if(void 0===Le){var Ne=Wt.get(Ve);if(void 0===Ne){var We=Ut.get(Ve[0]);if(void 0===We);else{for(var Ee=We.rowElements,Ue=0;Ue<Ee.length;Ue++){var ze=Wt.get(Ee[Ue]);void 0!==ze&&_i(ze,e.id)}for(var Ge=We.elements,_e=0;_e<Ge.length;_e++){var He=Et.get(Ge[_e]);if(void 0!==He)_i(He.choice,e.id)}}}else _i(Ne,e.id)}else{_i(Le.choice,e.id)}}if(e.setBgmIsOn&&Qt&&e.bgmId&&(eo.bgmIsPlaying=!1,zo(e,e.bgmId,0)),e.muteBgm&&Qt){var Ye=W(Qt);app.isMute=!1,Ye&&"function"==typeof Ye.unMute&&Ye.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var Je=0;Je<e.hiddenContentsRow.length;Je++){var Ze=Wt.get(e.hiddenContentsRow[Je]);if(void 0!==Ze)for(var Xe=0;Xe<e.hiddenContentsType.length;Xe++)switch(e.hiddenContentsType[Xe]){case"1":Ze.objectTitleRemoved=!1;break;case"2":Ze.objectImageRemoved=!1;break;case"3":Ze.objectTextRemoved=!1;break;case"4":Ze.objectScoreRemoved=!1;break;case"5":Ze.objectRequirementRemoved=!1;break;case"6":Ze.addonTitleRemoved=!1;break;case"7":Ze.addonImageRemoved=!1;break;case"8":Ze.addonTextRemoved=!1}}}K(e,t,0),ee()};if(!t.isInfoRow&&!e.isNotSelectable&&!e.selectOnce)if(e.isMultipleUseVariable)void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),e.multipleUseVariable>e.numMultipleTimesMinus&&(-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,r()},1e3*app.fadeTransitionTime)):r()),0===c.indexOf(e.id)&&c.splice(0));else if(void 0!==e.multipleScoreId){var a=Nt.get(e.multipleScoreId);void 0!==a&&(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),a.startingSum>e.numMultipleTimesMinus&&(a.startingSum-=1))}}}var ae=Wr(),de=Y(ae),ue=function(e){var o,i=Nr(),n=k(i),c=k(n);c.__click=function(){return te(t.choice,t.row)};var l=k(c),s=function(e){var o=Cr(),i=k(o),n=function(e){var t=pr(),o=k(t);I(o,function(){return je.sanitize($o(C(j).title),Kt)}),D(function(){return De(t,C(G))}),x(e,t)};le(i,function(e){t.row.resultShowRowTitle&&e(n)});var r=se(i,2),c=function(e){var o=H(),i=Y(o),n=function(e){pt(e,{get text(){return t.choice.imageSourceTooltip},children:function(e,o){var i=hr();D(function(){Pe(i,"src",t.choice.image),De(i,C(z)),Pe(i,"loading",a()?"eager":"lazy")}),x(e,i)},$$slots:{default:!0}})},r=function(e){var o=br();D(function(){Pe(o,"src",t.choice.image),De(o,C(z)),Pe(o,"loading",a()?"eager":"lazy")}),x(e,o)};le(i,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),x(e,o)};le(r,function(e){(1===t.choice.template||t.windowWidth<=960||t.row.choicesShareTemplate)&&t.choice.image&&!t.row.objectImageRemoved&&e(c)});var l=se(r,2),s=k(l),d=function(e){var o=wr(),i=k(o);I(i,function(){return je.sanitize($o(t.choice.title),Kt)}),D(function(){return De(o,C(q))}),x(e,o)};le(s,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(d)});var u=se(s,2),v=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(u,function(e){t.choice.isSelectableMultiple&&C(N)&&0===C(m).multiChoiceCounterPosition&&e(v)});var f=se(u,2),g=function(e){var o=H(),i=Y(o);Fe(i,17,function(){return t.choice.scores},Re,function(e,o){mr(e,{get score(){return C(o)},get row(){return t.row},get choice(){return t.choice}})}),x(e,o)};le(f,function(e){t.row.objectScoreRemoved||e(g)});var p=se(f,2),h=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(p,function(e){t.choice.isSelectableMultiple&&C(N)&&1===C(m).multiChoiceCounterPosition&&e(h)});var b=se(p,2),w=function(e){var o=H(),i=Y(o);Fe(i,17,function(){return t.choice.requireds},Re,function(e,t){Pn(e,{get required(){return C(t)},get scoreText(){return C(G)}})}),x(e,o)};le(b,function(e){t.row.objectRequirementRemoved||e(w)});var T=se(b,2),y=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(T,function(e){t.choice.isSelectableMultiple&&C(N)&&2===C(m).multiChoiceCounterPosition&&e(y)});var S=se(T,2),B=function(e){var o=H(),i=Y(o),n=function(e){pt(e,{get text(){return t.choice.imageSourceTooltip},children:function(e,o){var i=Tr();D(function(){Pe(i,"src",t.choice.image),De(i,C(z)),Pe(i,"loading",a()?"eager":"lazy")}),x(e,i)},$$slots:{default:!0}})},r=function(e){var o=Ir();D(function(){Pe(o,"src",t.choice.image),De(o,C(z)),Pe(o,"loading",a()?"eager":"lazy")}),x(e,o)};le(i,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),x(e,o)};le(S,function(e){5===t.choice.template&&t.choice.image&&!t.row.objectImageRemoved&&e(B)});var A=se(S,2),M=function(e){var o=yr(),i=k(o);I(i,function(){return je.sanitize($o(t.choice.text),Kt)}),D(function(){return De(o,C(E))}),x(e,o)};le(A,function(e){""===t.choice.text||t.row.objectTextRemoved||e(M)});var F=se(A,2),R=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(F,function(e){t.choice.isSelectableMultiple&&C(N)&&3===C(m).multiChoiceCounterPosition&&e(R)});var $=se(F,2),W=function(e){var o=H(),i=Y(o),n=function(e){pt(e,{get text(){return t.choice.imageSourceTooltip},children:function(e,o){var i=xr();D(function(){Pe(i,"src",t.choice.image),De(i,C(z)),Pe(i,"loading",a()?"eager":"lazy")}),x(e,i)},$$slots:{default:!0}})},r=function(e){var o=Sr();D(function(){Pe(o,"src",t.choice.image),De(o,C(z)),Pe(o,"loading",a()?"eager":"lazy")}),x(e,o)};le(i,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),x(e,o)};le($,function(e){4===t.choice.template&&t.choice.image&&!t.row.objectImageRemoved&&e(W)});var U=se(l,2);Fe(U,21,function(){return t.choice.addons},Re,function(e,o){ir(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return C(o)},get isEnabled(){return C(O)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()}})});var _=se(U,2),J=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(_,function(e){t.choice.isSelectableMultiple&&C(N)&&4===C(m).multiChoiceCounterPosition&&e(J)}),D(function(){var e;return P(U,1,"d-column pa-0 col justify-content-".concat(null!==(e=t.choice.addonJustify)&&void 0!==e?e:""))}),x(e,o)},d=function(e){var o=H(),i=Y(o),n=function(e){var o=Rr(),i=Y(o),n=k(i),r=function(e){var o=H(),i=Y(o),n=function(e){pt(e,{get text(){return t.choice.imageSourceTooltip},children:function(e,o){var i=Br();D(function(){Pe(i,"src",t.choice.image),De(i,C(z)),Pe(i,"loading",a()?"eager":"lazy")}),x(e,i)},$$slots:{default:!0}})},r=function(e){var o=Or();D(function(){Pe(o,"src",t.choice.image),De(o,C(z)),Pe(o,"loading",a()?"eager":"lazy")}),x(e,o)};le(i,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),x(e,o)};le(n,function(e){t.choice.image&&!t.row.objectImageRemoved&&e(r)});var c=se(i,2),l=k(c),s=function(e){var o=Ar(),i=k(o);I(i,function(){return je.sanitize($o(t.choice.title),Kt)}),D(function(){return De(o,C(q))}),x(e,o)};le(l,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(s)});var d=se(l,2),u=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(d,function(e){t.choice.isSelectableMultiple&&C(N)&&0===C(m).multiChoiceCounterPosition&&e(u)});var v=se(d,2),f=function(e){var o=H(),i=Y(o);Fe(i,17,function(){return t.choice.scores},Re,function(e,o){mr(e,{get score(){return C(o)},get row(){return t.row},get choice(){return t.choice}})}),x(e,o)};le(v,function(e){t.row.objectScoreRemoved||e(f)});var g=se(v,2),p=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(g,function(e){t.choice.isSelectableMultiple&&C(N)&&1===C(m).multiChoiceCounterPosition&&e(p)});var h=se(g,2),b=function(e){var o=H(),i=Y(o);Fe(i,17,function(){return t.choice.requireds},Re,function(e,t){Pn(e,{get required(){return C(t)},get scoreText(){return C(G)}})}),x(e,o)};le(h,function(e){t.row.objectRequirementRemoved||e(b)});var T=se(h,2),y=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(T,function(e){t.choice.isSelectableMultiple&&C(N)&&2===C(m).multiChoiceCounterPosition&&e(y)});var S=se(T,2),B=function(e){var o=kr(),i=k(o);I(i,function(){return je.sanitize($o(t.choice.text),Kt)}),D(function(){return De(o,C(E))}),x(e,o)};le(S,function(e){""===t.choice.text||t.row.objectTextRemoved||e(B)});var A=se(S,2),M=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(A,function(e){t.choice.isSelectableMultiple&&C(N)&&3===C(m).multiChoiceCounterPosition&&e(M)});var F=se(A,2),R=function(e){var o=Mr(),i=Y(o);Fe(i,21,function(){return t.choice.addons},Re,function(e,o){ir(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return C(o)},get isEnabled(){return C(O)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()}})});var n=se(i,2),r=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(n,function(e){t.choice.isSelectableMultiple&&C(N)&&4===C(m).multiChoiceCounterPosition&&e(r)}),D(function(){var e;return P(i,1,"d-column pa-0 col justify-content-".concat(null!==(e=t.choice.addonJustify)&&void 0!==e?e:""))}),x(e,o)};le(F,function(e){t.choice.useSeperateAddon||e(R)});var j=se(c,2),$=function(e){var o=Fr(),i=k(o);Fe(i,21,function(){return t.choice.addons},Re,function(e,o){ir(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return C(o)},get isEnabled(){return C(O)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()}})});var n=se(i,2),r=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(n,function(e){t.choice.isSelectableMultiple&&C(N)&&4===C(m).multiChoiceCounterPosition&&e(r)}),D(function(){var e;return P(i,1,"d-column pa-0 col justify-content-".concat(null!==(e=t.choice.addonJustify)&&void 0!==e?e:""))}),x(e,o)};le(j,function(e){t.choice.useSeperateAddon&&e($)}),D(function(){var e;De(i,"max-width: ".concat(null!==(e=C(w))&&void 0!==e?e:"","%")),De(c,"max-width: ".concat(100-C(w),"%"))}),x(e,o)},r=function(e,o){var i=function(e){var o=Lr(),i=Y(o),n=k(i),r=function(e){var o=jr(),i=k(o);I(i,function(){return je.sanitize($o(t.choice.title),Kt)}),D(function(){return De(o,C(q))}),x(e,o)};le(n,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(r)});var c=se(n,2),l=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(c,function(e){t.choice.isSelectableMultiple&&C(N)&&0===C(m).multiChoiceCounterPosition&&e(l)});var s=se(c,2),d=function(e){var o=H(),i=Y(o);Fe(i,17,function(){return t.choice.scores},Re,function(e,o){mr(e,{get score(){return C(o)},get row(){return t.row},get choice(){return t.choice}})}),x(e,o)};le(s,function(e){t.row.objectScoreRemoved||e(d)});var u=se(s,2),v=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(u,function(e){t.choice.isSelectableMultiple&&C(N)&&1===C(m).multiChoiceCounterPosition&&e(v)});var f=se(u,2),g=function(e){var o=H(),i=Y(o);Fe(i,17,function(){return t.choice.requireds},Re,function(e,t){Pn(e,{get required(){return C(t)},get scoreText(){return C(G)}})}),x(e,o)};le(f,function(e){t.row.objectRequirementRemoved||e(g)});var p=se(f,2),h=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(p,function(e){t.choice.isSelectableMultiple&&C(N)&&2===C(m).multiChoiceCounterPosition&&e(h)});var b=se(p,2),T=function(e){var o=Dr(),i=k(o);I(i,function(){return je.sanitize($o(t.choice.text),Kt)}),D(function(){return De(o,C(E))}),x(e,o)};le(b,function(e){""===t.choice.text||t.row.objectTextRemoved||e(T)});var y=se(b,2),S=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(y,function(e){t.choice.isSelectableMultiple&&C(N)&&3===C(m).multiChoiceCounterPosition&&e(S)});var B=se(y,2),A=function(e){var o=Pr(),i=Y(o);Fe(i,21,function(){return t.choice.addons},Re,function(e,o){ir(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return C(o)},get isEnabled(){return C(O)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()}})});var n=se(i,2),r=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(n,function(e){t.choice.isSelectableMultiple&&C(N)&&4===C(m).multiChoiceCounterPosition&&e(r)}),D(function(){var e;return P(i,1,"d-column pa-0 col justify-content-".concat(null!==(e=t.choice.addonJustify)&&void 0!==e?e:""))}),x(e,o)};le(B,function(e){t.choice.useSeperateAddon||e(A)});var M=se(i,2),F=k(M),R=function(e){var o=H(),i=Y(o),n=function(e){pt(e,{get text(){return t.choice.imageSourceTooltip},children:function(e,o){var i=$r();D(function(){Pe(i,"src",t.choice.image),De(i,C(z)),Pe(i,"loading",a()?"eager":"lazy")}),x(e,i)},$$slots:{default:!0}})},r=function(e){var o=qr();D(function(){Pe(o,"src",t.choice.image),De(o,C(z)),Pe(o,"loading",a()?"eager":"lazy")}),x(e,o)};le(i,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),x(e,o)};le(F,function(e){t.choice.image&&!t.row.objectImageRemoved&&e(R)});var j=se(M,2),$=function(e){var o=Vr(),i=k(o);Fe(i,21,function(){return t.choice.addons},Re,function(e,o){ir(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return C(o)},get isEnabled(){return C(O)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()}})});var n=se(i,2),r=function(e){var o=ve(function(){return C(O)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});lr(e,{get isEnabled(){return C(o)},get multiChoiceButton(){return C(L)},get multiChoiceText(){return C(V)},get choice(){return t.choice},selectedOneMore:function(){return ne(t.choice,t.row)},selectedOneLess:function(){return re(t.choice,t.row)}})};le(n,function(e){t.choice.isSelectableMultiple&&C(N)&&4===C(m).multiChoiceCounterPosition&&e(r)}),D(function(){var e;return P(i,1,"d-column pa-0 col justify-content-".concat(null!==(e=t.choice.addonJustify)&&void 0!==e?e:""))}),x(e,o)};le(j,function(e){t.choice.useSeperateAddon&&e($)}),D(function(){var e;De(i,"max-width: ".concat(100-C(w),"%")),De(M,"max-width: ".concat(null!==(e=C(w))&&void 0!==e?e:"","%"))}),x(e,o)};le(e,function(e){3===t.choice.template&&e(i)},o)};le(i,function(e){2===t.choice.template?e(n):e(r,!1)}),x(e,o)};le(l,function(e){t.choice.template>=4||1===t.choice.template||t.windowWidth<=960||t.row.choicesShareTemplate?e(s):e(d,!1)}),D(function(e,r){var a,l;P(i,1,e),o=P(n,1,"d-flex",null,o,r),P(c,1,"row row-".concat(null!==(a=t.row.id)&&void 0!==a?a:""," choice-").concat(null!==(l=t.choice.id)&&void 0!==l?l:""," ").concat(C(F)?"choice-selected":"choice-unselected"," ").concat(C(O)?"choice-enabled":"choice-disabled"," ").concat(C(F)&&C(v).selOverlayOnImage||!C(O)&&C(v).reqOverlayOnImage?"bg-overlay":""," w-100")),De(c,C(U))},[function(){return Te(function(){var e=t.choice.objectWidth||t.row.objectWidth,o=function(e){switch(e){case"col-sm-6":case"col-sm-5":return 2;case"col-md-4":return 3;case"col-md-3":return 4;case"w-20":return 5;case"col-lg-2":return 6;case"w-14":return 7;case"w-12":return 8;case"w-11":return 9;case"w-10":return 10;case"w-9":return 11;case"col-xl-1":return 12;default:return 1}}(e),i="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(r()>1280)return e;if(!(r()>720))return r()>480?1===o?"col-12":"col-6":"col-12";switch(o){case 1:return"col-12";case 2:return"col-6";case 3:return i>2?"col-4":app.objectsPerRow;case 4:return i>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}())},function(){return{fullHeight:C(R)}}]),x(e,i)};le(de,function(e){!C(O)&&C(v).reqFilterVisibleIsOn||e(ue)});var fe=se(de,2),ge=function(e){var t=ve(function(){return"dlgCommon"===C(T)});vn(e,{get open(){return C(t)},onclose:function(){return A(T,"none")},title:"",get context(){return l.context},closeHandler:function(e,t){"accept"===e.detail.action&&l.choice&&l.row?(y=!0,l.isWord&&(l.choice.wordChangeSelect=t),ie(l.choice,l.row),y=!1):y=!1},get isWord(){return l.isWord},get prevText(){return l.prevText}})};le(fe,function(e){"dlgCommon"===C(T)&&e(ge)}),x(e,ae);var me=S({activateObject:te});return n(),me}qe(["click"]);var Ur=T('<img alt=""/>'),zr=T('<img alt=""/>'),Gr=T('<h2 class="mb-0"><!></h2>'),_r=T('<img alt=""/>'),Hr=T('<img alt=""/>'),Yr=T('<p class="mb-0"><!></p>'),Jr=T('<img alt=""/>'),Zr=T('<img alt=""/>'),Xr=T('<div class="col-12 m-0 p-0"><!> <!> <!> <!> <!></div>'),Kr=T('<h2 class="mb-0"><!></h2>'),Qr=T('<p class="mb-0"><!></p>'),ea=T('<img alt=""/>'),ta=T('<img alt=""/>'),oa=T('<div class="col p-0 text-center"><!> <!></div> <div class="col p-0 text-center"><!></div>',1),ia=T('<img alt=""/>'),na=T('<img alt=""/>'),ra=T('<h2 class="mb-0"><!></h2>'),aa=T('<p class="mb-0"><!></p>'),ca=T('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!></div>',1),la=T("<div><!></div>"),sa=T("<div><!></div>"),da=T("<div><!> <!></div>");function ua(e,t){u(t,!0);var o=M(t,"preloadImages",3,!1),i=M(t,"isBackpack",3,!1),n=B(void 0),r=ve(function(){return qo("privateBackgroundIsOn",t.row)}),a=ve(function(){return qo("privateRowImageIsOn",t.row)}),c=ve(function(){return qo("privateRowIsOn",t.row)}),l=ve(function(){return qo("privateTextIsOn",t.row)}),s=B(0),d=ve(function(){return void 0!==C(a).rowImageBoxWidth?C(a).rowImageBoxWidth:50}),v=ve(function(){return Wo(t.row.requireds)}),f=ve(function(){return t.row.onlyIfNoChoices&&0!==t.row.currentChoices}),p=ve(function(){var e=[];if(void 0!==t.row.resultGroupId&&""!==t.row.resultGroupId&&t.row.resultGroupId){var o,i=w(Vt);try{for(i.s();!(o=i.n()).done;){var n=g(o.value,1)[0],r=Et.get(n);if(void 0!==r){var a=r.choice,c=r.row;if(!a.isNotResult)if(t.row.resultGroupId===c.resultGroupId)e.push({choice:a,row:c});else if(void 0!==a.groups)for(var l=0;l<a.groups.length;l++)if(a.groups[l]===t.row.resultGroupId){e.push({choice:a,row:c});break}}}}catch(p){i.e(p)}finally{i.f()}}else{var s,d=w(Vt);try{for(d.s();!(s=d.n()).done;){var u=g(s.value,1)[0],v=Et.get(u);if(void 0!==v){var f=v.choice,m=v.row;f.isNotResult||e.push({choice:f,row:m})}}}catch(p){d.e(p)}finally{d.f()}}return e.sort(function(e,t){return e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index}),e}),h=ve(function(){if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.backgroundImage)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(var e=0;e<t.row.rowDesignGroups.length;e++){var o=Ht.get(t.row.rowDesignGroups[e]);if(void 0!==o&&o.privateBackgroundIsOn&&o.styling.backgroundImage){var i=o.activatedId,n=zt.get(i);if(""===i||Lo(o.activatedId))return o.styling;if(void 0!==app.globalRequirements&&void 0!==n&&Wo(n.requireds))return o.styling}}return!1}),b=ve(function(){if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.bgColorIsOn&&t.row.styling.backgroundColor)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(var e=0;e<t.row.rowDesignGroups.length;e++){var o=Ht.get(t.row.rowDesignGroups[e]);if(void 0!==o&&o.privateBackgroundIsOn&&o.styling.bgColorIsOn&&o.styling.backgroundColor){var i=o.activatedId,n=zt.get(i);if(""===i||Lo(o.activatedId))return o.styling;if(void 0!==app.globalRequirements&&void 0!==n&&Wo(n.requireds))return o.styling}}return!1}),T=ve(function(){var e=[];return e.push("margin: ".concat(C(c).rowBodyMarginTop,"px ").concat(C(c).rowBodyMarginSides,"% ").concat(C(c).rowBodyMarginBottom,"px ").concat(C(c).rowBodyMarginSides,"%;")),C(h)&&e.push("background-image: url('".concat(C(h).backgroundImage,"'); ").concat(C(h).isBackgroundRepeat?"background-repeat: repeat;":C(h).isBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),C(b)&&e.push("background-color: ".concat(Yi(C(b).backgroundColor),";")),e.join(" ")}),O=ve(function(){var e=C(c).rowBorderRadiusIsPixels?"px":"%",t=[];return C(c).rowBorderImage&&t.push("border-image: url('".concat(C(c).rowBorderImage,"') ").concat(C(c).rowBorderImageSliceTop," ").concat(C(c).rowBorderImageSliceRight," ").concat(C(c).rowBorderImageSliceBottom," ").concat(C(c).rowBorderImageSliceLeft," / ").concat(C(c).rowBorderImageWidth,"px ").concat(C(c).rowBorderImageRepeat,"; border-style: solid; padding: ").concat(C(c).rowBorderImageWidth,"px;")),C(r).rowBackgroundImage&&t.push("background-image: url('".concat(C(r).rowBackgroundImage,"'); ").concat(C(r).isRowBackgroundRepeat?"background-repeat: repeat;":C(r).isRowBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),C(r).rowBgColorIsOn&&t.push("background-color: ".concat(Yi(C(r).rowBgColor),";")),t.push("margin-left: ".concat(C(c).rowMargin,"%; margin-right: ").concat(C(c).rowMargin,"%;")),C(c).rowGradientIsOn&&t.push("background-image: linear-gradient(".concat(C(c).rowGradient,");")),t.push("border-radius: ".concat(C(c).rowBorderRadiusTopLeft).concat(e," ").concat(C(c).rowBorderRadiusTopRight).concat(e," ").concat(C(c).rowBorderRadiusBottomRight).concat(e," ").concat(C(c).rowBorderRadiusBottomLeft).concat(e,";")),C(c).rowOverflowIsOn&&t.push("overflow: hidden;"),C(c).rowBorderIsOn&&t.push("border: ".concat(C(c).rowBorderWidth,"px ").concat(C(c).rowBorderStyle," ").concat(Yi(C(c).rowBorderColor),";")),C(c).rowDropShadowIsOn&&(C(c).rowUseBoxShadowIsOn?t.push("box-shadow: ".concat(C(c).rowDropShadowH,"px ").concat(C(c).rowDropShadowV,"px ").concat(C(c).rowDropShadowBlur,"px ").concat(Yi(C(c).rowDropShadowColor),";")):t.push("filter: drop-shadow(".concat(C(c).rowDropShadowH,"px ").concat(C(c).rowDropShadowV,"px ").concat(C(c).rowDropShadowBlur,"px ").concat(Yi(C(c).rowDropShadowColor),");"))),t.join(" ")}),F=ve(function(){return"font-family: ".concat(C(l).rowTitle,"; font-size: ").concat(C(l).rowTitleTextSize,"%; text-align: ").concat(C(l).rowTitleAlign,"; color: ").concat(Yi(C(l).rowTitleColor))}),R=ve(function(){return"white-space: pre-wrap; font-family: ".concat(C(l).rowText,"; font-size: ").concat(C(l).rowTextTextSize,"%; text-align: ").concat(C(l).rowTextAlign,"; color: ").concat(Yi(C(l).rowTextColor),"; padding: ").concat(C(c).rowTextPaddingX,"px ").concat(C(c).rowTextPaddingY,"% ").concat(C(c).rowTextPaddingX,"px ").concat(C(c).rowTextPaddingY,"%;")}),j=ve(function(){var e=C(a).rowImgBorderRadiusIsPixels?"px":"%",t=[];return t.push("width: ".concat(C(a).rowImageWidth,"%; margin-top: ").concat(C(a).rowImageMarginTop,"%; margin-bottoom: ").concat(C(a).rowImageMarginBottom,"%;")),t.push("border-radius: ".concat(C(a).rowImgBorderRadiusTopLeft).concat(e," ").concat(C(a).rowImgBorderRadiusTopRight).concat(e," ").concat(C(a).rowImgBorderRadiusBottomRight).concat(e," ").concat(C(a).rowImgBorderRadiusBottomLeft).concat(e,";")),C(a).rowImgOverflowIsOn&&t.push("overflow: hidden;"),C(a).rowImgBorderIsOn&&t.push("border: ".concat(C(a).rowImgBorderWidth,"px ").concat(C(a).rowImgBorderStyle," ").concat(Yi(C(a).rowImgBorderColor),";")),t.join(" ")}),$=ve(function(){return"padding-left: ".concat(C(c).rowButtonYPadding,"px; padding-right: ").concat(C(c).rowButtonYPadding,"px; padding-top: ").concat(C(c).rowButtonXPadding,"px; padding-bottom: ").concat(C(c).rowButtonXPadding,"px;")});function q(){if(t.row.btnPointAddon&&"sumaddon"===t.row.buttonTypeRadio&&void 0!==t.row.pointTypeRandom){var e=t.row.randomMax||0,o=t.row.randomMin||0,i=Math.floor(Math.random()*(e-o)+o),r=Nt.get(t.row.pointTypeRandom);void 0!==r&&(r.startingSum+=i)}else if(t.row.buttonRandom){var a=[],c=t.row.objects.filter(function(e){return Wo(e.requireds)&&!e.isNotSelectable});if(t.row.isWeightedRandom){for(var l=0,s=0;s<c.length;s++){l+=c[s].randomWeight||100}if(void 0!==t.row.buttonRandomNumber)for(var d=0;d<t.row.buttonRandomNumber;d++)for(var u=Math.floor(Math.random()*l),v=0,f=0;f<c.length;f++){var g=c[f];if(u<(v+=g.randomWeight||100)){C(n).activateObject(g,t.row);break}}}else if(void 0!==t.row.buttonRandomNumber)for(var m=0;m<t.row.buttonRandomNumber;m++){var p=0,h=void 0,b=void 0;do{h=c[b=Math.floor(Math.random()*c.length)],p++}while(t.row.onlyUnselectedChoices&&(-1!==a.indexOf(b)||Vt.has(h.id))&&p<100);h&&-1===a.indexOf(b)&&(a.push(b),C(n).activateObject(h,t.row))}}else if(void 0!==t.row.buttonId){var w=_t.get(t.row.buttonId);void 0!==w&&(Vt.has(w.id)?t.row.buttonType&&(w.isTrue=!1,Vt.delete(w.id)):(w.isTrue=!0,Vt.set(w.id,{multiple:0,isVariable:!0})))}}m(function(){if(t.row.deselectChoices&&!C(v))for(var e=0;e<t.row.objects.length;e++){var o=t.row.objects[e];o.isActive&&C(n).activateObject(o,t.row)}});var V=da(),L=k(V),N=function(e){var i=la(),n=k(i),r=function(e){var i=Xr(),n=k(i),r=function(e){var i=H(),n=Y(i),r=function(e){var o=ve(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||C(f)});Be(e,{onclick:q,get disabled(){return C(o)},get style(){return C($)},variant:"raised",children:function(e,o){Oe(e,{children:function(e,o){var i=H(),n=Y(i);I(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e,i){var n=function(e){var i=H(),n=Y(i),r=function(e){pt(e,{get text(){return t.row.imageSourceTooltip},children:function(e,i){var n=Ur();D(function(){Pe(n,"src",t.row.image),De(n,C(j)),Pe(n,"loading",o()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var i=zr();D(function(){Pe(i,"src",t.row.image),De(i,C(j)),Pe(i,"loading",o()?"eager":"lazy")}),x(e,i)};le(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),x(e,i)};le(e,function(e){t.row.image&&e(n)},i)};le(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),x(e,i)};le(n,function(e){(1===t.row.template||t.windowWidth<=960)&&e(r)});var a=se(n,2),c=function(e){var o=Gr(),i=k(o);I(i,function(){return je.sanitize($o(t.row.title),Kt)}),D(function(){return De(o,C(F))}),x(e,o)};le(a,function(e){""!==t.row.title&&e(c)});var l=se(a,2),s=function(e){var i=H(),n=Y(i),r=function(e){var o=ve(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||C(f)});Be(e,{onclick:q,get disabled(){return C(o)},get style(){return C($)},variant:"raised",children:function(e,o){Oe(e,{children:function(e,o){var i=H(),n=Y(i);I(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e,i){var n=function(e){var i=H(),n=Y(i),r=function(e){pt(e,{get text(){return t.row.imageSourceTooltip},children:function(e,i){var n=_r();D(function(){Pe(n,"src",t.row.image),De(n,C(j)),Pe(n,"loading",o()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var i=Hr();D(function(){Pe(i,"src",t.row.image),De(i,C(j)),Pe(i,"loading",o()?"eager":"lazy")}),x(e,i)};le(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),x(e,i)};le(e,function(e){t.row.image&&e(n)},i)};le(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),x(e,i)};le(l,function(e){5===t.row.template&&e(s)});var d=se(l,2),u=function(e){var o=Yr(),i=k(o);I(i,function(){return je.sanitize($o(t.row.titleText),Kt)}),D(function(){return De(o,C(R))}),x(e,o)};le(d,function(e){""!==t.row.titleText&&e(u)});var v=se(d,2),g=function(e){var i=H(),n=Y(i),r=function(e){var o=ve(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||C(f)});Be(e,{onclick:q,get disabled(){return C(o)},get style(){return C($)},variant:"raised",children:function(e,o){Oe(e,{children:function(e,o){var i=H(),n=Y(i);I(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e,i){var n=function(e){var i=H(),n=Y(i),r=function(e){pt(e,{get text(){return t.row.imageSourceTooltip},children:function(e,i){var n=Jr();D(function(){Pe(n,"src",t.row.image),De(n,C(j)),Pe(n,"loading",o()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var i=Zr();D(function(){Pe(i,"src",t.row.image),De(i,C(j)),Pe(i,"loading",o()?"eager":"lazy")}),x(e,i)};le(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),x(e,i)};le(e,function(e){t.row.image&&e(n)},i)};le(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),x(e,i)};le(v,function(e){4===t.row.template&&e(g)}),x(e,i)},a=function(e){var i=H(),n=Y(i),r=function(e){var i=oa(),n=Y(i),r=k(n),a=function(e){var o=Kr(),i=k(o);I(i,function(){return je.sanitize($o(t.row.title),Kt)}),D(function(){return De(o,C(F))}),x(e,o)};le(r,function(e){""!==t.row.title&&e(a)});var c=se(r,2),l=function(e){var o=Qr(),i=k(o);I(i,function(){return je.sanitize($o(t.row.titleText),Kt)}),D(function(){return De(o,C(R))}),x(e,o)};le(c,function(e){""!==t.row.titleText&&e(l)});var s=se(n,2),u=k(s),v=function(e){var o=ve(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||C(f)});Be(e,{onclick:q,get disabled(){return C(o)},get style(){return C($)},variant:"raised",children:function(e,o){Oe(e,{children:function(e,o){var i=H(),n=Y(i);I(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},g=function(e,i){var n=function(e){var i=H(),n=Y(i),r=function(e){pt(e,{get text(){return t.row.imageSourceTooltip},children:function(e,i){var n=ea();D(function(){Pe(n,"src",t.row.image),De(n,C(j)),Pe(n,"loading",o()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var i=ta();D(function(){Pe(i,"src",t.row.image),De(i,C(j)),Pe(i,"loading",o()?"eager":"lazy")}),x(e,i)};le(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),x(e,i)};le(e,function(e){t.row.image&&e(n)},i)};le(u,function(e){t.row.isButtonRow?e(v):e(g,!1)}),D(function(){var e;De(n,"max-width: ".concat(100-C(d),"%")),De(s,"max-width: ".concat(null!==(e=C(d))&&void 0!==e?e:"","%"))}),x(e,i)},a=function(e,i){var n=function(e){var i=ca(),n=Y(i),r=k(n),a=function(e){var o=ve(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||C(f)});Be(e,{onclick:q,get disabled(){return C(o)},get style(){return C($)},variant:"raised",children:function(e,o){Oe(e,{children:function(e,o){var i=H(),n=Y(i);I(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},c=function(e,i){var n=function(e){var i=H(),n=Y(i),r=function(e){pt(e,{get text(){return t.row.imageSourceTooltip},children:function(e,i){var n=ia();D(function(){Pe(n,"src",t.row.image),De(n,C(j)),Pe(n,"loading",o()?"eager":"lazy")}),x(e,n)},$$slots:{default:!0}})},a=function(e){var i=na();D(function(){Pe(i,"src",t.row.image),De(i,C(j)),Pe(i,"loading",o()?"eager":"lazy")}),x(e,i)};le(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),x(e,i)};le(e,function(e){t.row.image&&e(n)},i)};le(r,function(e){t.row.isButtonRow?e(a):e(c,!1)});var l=se(n,2),s=k(l),u=function(e){var o=ra(),i=k(o);I(i,function(){return je.sanitize($o(t.row.title),Kt)}),D(function(){return De(o,C(F))}),x(e,o)};le(s,function(e){""!==t.row.title&&e(u)});var v=se(s,2),g=function(e){var o=aa(),i=k(o);I(i,function(){return je.sanitize($o(t.row.titleText),Kt)}),D(function(){return De(o,C(R))}),x(e,o)};le(v,function(e){""!==t.row.titleText&&e(g)}),D(function(){var e;De(n,"max-width: ".concat(null!==(e=C(d))&&void 0!==e?e:"","%")),De(l,"max-width: ".concat(100-C(d),"%"))}),x(e,i)};le(e,function(e){3===t.row.template&&e(n)},i)};le(n,function(e){2===t.row.template?e(r):e(a,!1)}),x(e,i)};le(n,function(e){t.row.template>=4||1===t.row.template||t.windowWidth<=960?e(r):e(a,!1)}),D(function(){var e;P(i,1,"row gx-0 row-".concat(null!==(e=t.row.id)&&void 0!==e?e:"")),De(i,""!==t.row.title?C(O):"")}),x(e,i)};le(L,function(e){C(v)&&e(N)});var W=se(L,2),E=function(e){var r=sa(),a=k(r),c=function(e){var i=H(),r=Y(i);Fe(r,17,function(){return C(p)},Re,function(e,i,r){y(Er(e,{get row(){return t.row},get choice(){return C(i).choice},index:r,get windowWidth(){return t.windowWidth},get preloadImages(){return o()}}),function(e){return A(n,e,!0)},function(){return C(n)})}),x(e,i)},l=function(e){var r=H(),a=Y(r);Fe(a,17,function(){return t.row.objects},Re,function(e,r,a){y(Er(e,{get row(){return t.row},get choice(){return C(r)},index:a,get windowWidth(){return t.windowWidth},get preloadImages(){return o()},get isBackpack(){return i()},get mainDiv(){return t.mainDiv}}),function(e){return A(n,e,!0)},function(){return C(n)})}),x(e,r)};le(a,function(e){t.row.isResultRow?e(c):e(l,!1)}),D(function(){var e;return P(r,1,"row gx-0 m-0 p-0 justify-".concat(null!==(e=t.row.rowJustify)&&void 0!==e?e:""))}),x(e,r)};le(W,function(e){C(v)&&e(E)}),D(function(){var e;P(V,1,"row-".concat(null!==(e=t.row.id)&&void 0!==e?e:"","-bg text-center ").concat(C(v)?"":"hidden")),De(V,C(T))}),Ne(V,"clientWidth",function(e){return A(s,e)}),x(e,V),S()}var va=T('<div><span><!> <!> <span translate="no"> </span> <!> <!></span></div>');var fa=T("<!> <!>",1),ga=T('<div class="p-0 col-12"><!></div>'),ma=T("<div><!></div>"),pa=T('<div class="container-fluid p-0"><div class="row gx-0"></div></div>'),ha=T("<!> <!> <!>",1);function ba(e,t){u(t,!0);var o=M(t,"open",7),i=B(0),n=B(void 0),r=ve(function(){var e=[];return e.push("overflow-wrap: break-word;"),e.push("white-space: normal;"),app.styling.useBackpackDesign?(app.styling.backpackBgImage&&e.push("background-image: url('".concat(app.styling.backpackBgImage,"');")),e.push("background-color: ".concat(Yi(app.styling.backpackBgColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackpackBgFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")):(app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(Yi(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")),e.join(" ")}),a=ve(function(){return"dlgBackpack"!==to.currentDialog?"close":""}),c=ve(function(){return"dlgBackpack"!==to.currentDialog?"close":""}),l=ve(function(){return void 0!==app.styling.backPackWidth?app.styling.backPackWidth:1200});ye(e,{get escapeKeyAction(){return C(a)},get scrimClickAction(){return C(c)},get surface$style(){var e;return"width: ".concat(null!==(e=C(l))&&void 0!==e?e:"","px; max-width: calc(100vw - 32px);")},get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:function(e,t){var o=ha(),a=Y(o);xe(a,{class:"p-0 m-0 row",tabindex:0,autofocus:!0,children:function(e,t){var o=ga(),i=k(o);Be(i,{onclick:function(){return function(e){return Ei.apply(this,arguments)}(C(n))},class:"h-100",children:function(e,t){var o=fa(),i=Y(o);We(i,{class:"mdi mdi-file-image"});var n=se(i,2);Oe(n,{children:function(e,t){var o=he("Download Image");x(e,o)},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}});var c=se(a,2);Se(c,{id:"backpackDialog",class:"p-0",children:function(e,t){var o=pa(),a=k(o);Fe(a,21,function(){return app.backpack},Re,function(e,t){var o=ma();ua(k(o),{get row(){return C(t)},get windowWidth(){return C(i)},get preloadImages(){return app.preloadImages},isBackpack:!0}),D(function(){return P(o,1,Te(C(t).width?"col-6":"col-12"))}),x(e,o)}),y(o,function(e){return A(n,e)},function(){return C(n)}),D(function(){return De(o,C(r))}),Ne(o,"clientWidth",function(e){return A(i,e)}),x(e,o)},$$slots:{default:!0}});var l=se(c,2);Ce(l,{children:function(e,t){Be(e,{action:"close",children:function(e,t){Oe(e,{class:"dialog-actions--btn",children:function(e,t){var o=he("Close");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}}),S()}var wa=T("<div><!></div>"),Ta=function(e,t){e.preventDefault(),t()},Ia=T('<span class="picture-inner-text svelte-k98dno"><!></span>'),ya=T('<span class="picture-inner-text svelte-k98dno"><!></span>'),xa=T('<div class="picture-inner svelte-k98dno"><!></div>'),Sa=T('<div class="preview-container svelte-k98dno"><canvas tabindex="0"></canvas> <!></div> <!> <!> <!>',1),Ca=T("<div><!></div> <!> <!>",1),Ba=T("<div><!></div>"),Oa=T('<div id="picture-input" class="picture-input svelte-k98dno"><!> <input type="file" class="svelte-k98dno"/></div>');function Aa(e,t){u(t,!0);var r,c,f=M(t,"width",19,function(){return Number.MAX_SAFE_INTEGER}),g=M(t,"height",19,function(){return Number.MAX_SAFE_INTEGER}),p=M(t,"margin",3,0),w=M(t,"accept",3,"image/*, image/avif"),T=M(t,"capture",3,null),O=M(t,"size",19,function(){return Number.MAX_SAFE_INTEGER}),R=M(t,"name",3,null),j=M(t,"id",3,null),$=M(t,"buttonClass",3,""),q=M(t,"removeButtonClass",3,""),V=M(t,"aspectButtonClass",3,""),L=M(t,"prefill",11,""),N=M(t,"prefillOptions",19,function(){return{}}),W=M(t,"crop",3,!0),E=M(t,"radius",3,0),U=M(t,"removable",3,!1),z=M(t,"hideChangeButton",3,!1),G=M(t,"autoToggleAspectRatio",3,!1),_=M(t,"toggleAspectRatio",3,!1),H=M(t,"changeOnClick",3,!0),J=M(t,"plain",3,!1),Z=M(t,"zIndex",3,1e4),X=M(t,"alertOnError",3,!0),K=M(t,"customStrings",19,function(){return{}}),Q=B(!1),ee=B(0),te=B(0),oe=B(!1),ie=B(0),ne=B(0),re=B(1),ae=B(0),de=B(""),ue=B(null),fe=B(null),ge=B(""),me=B(0),pe=B(0),we=B(""),Te=B(!1),Ie=B(0),ye=B(0),xe=B(0),Se=B(null),Ce=B(s([])),Ae={upload:"<p>Your device does not support file uploading.</p>",drag:"Drag an image or <br>click here to select a file",tap:"Tap here to select a photo <br>from your gallery",change:"Change Photo",aspect:"Landscape/Portrait",remove:"Remove Photo",select:"Select a Photo",selected:"<p>Photo successfully selected!</p>",fileSize:"The file size exceeds the limit",fileType:"This file type is not supported."},ke=B(void 0),Me=ve(function(){if(navigator.userAgent.match(/(Android (1\.0|1\.1|1\.5|1\.6|2\.0|2\.1))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.0|2\.5|3\.0))/))return!1;var e=document.createElement("input");return e.type="file",!e.disabled}),Fe=ve(function(){return!(!window.FileReader||!window.CanvasRenderingContext2D)}),Re=ve(function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!("ontouchstart"in window||navigator.maxTouchPoints)}),je=ve(function(){return C(oe)?"dragging-over":""}),$e=ve(function(){return"".concat(Math.min(.04*C(te),21),"px")});function qe(){if(K())for(var e in K())e in Ae&&"string"==typeof K()[e]&&(Ae[e]=K()[e])}function Ve(){C(Q)&&!H()||Ge(),t.onclick&&t.onclick()}function Le(){Ye()&&C(ue)&&ze(C(ue))}function Ne(){C(Re)&&A(oe,!1)}function We(e){var o,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.target,r="drop"===e.type?null===(o=e.dataTransfer)||void 0===o?void 0:o.files:n.files;if(r&&0!==r.length){if(r[0].size<=0||r[0].size>1024*Number(O())*1024)return t.onerror&&t.onerror({type:"fileSize",fileSize:r[0].size,fileType:r[0].type,fileName:r[0].name,message:"".concat(Ae.fileSize," (").concat(O(),"MB)")}),void(X()&&alert("".concat(Ae.fileSize," (").concat(O(),"MB)")));if(r[0].name!==C(ge)||r[0].size!==C(me)||C(pe)!==r[0].lastModified){if(A(fe,r[0],!0),A(ge,r[0].name,!0),A(me,r[0].size,!0),A(pe,r[0].lastModified,!0),A(we,r[0].type.split(";")[0],!0),"image/*, image/avif"===w()){if(!C(we).startsWith("image/"))return}else if(-1===C(Ce).indexOf(C(we)))return t.onerror&&t.onerror({type:"fileType",fileSize:C(me),fileType:C(we),fileName:C(ge),message:Ae.fileType}),void(X()&&alert(Ae.fileType));A(Q,!0),A(de,""),C(Fe)&&C(fe)?Ue(C(fe)):i?t.onprefill&&t.onprefill():t.onchange&&t.onchange(C(de))}}}function Ue(e,o){!function(e,t){var o=new FileReader;o.onload=function(e){var o=new DataView(e.target.result);if(65496!==o.getUint16(0,!1))return t(-2);for(var i=o.byteLength,n=2;n<i;){var r=o.getUint16(n,!1);if(n+=2,65505===r){if(1165519206!==o.getUint32(n+=2,!1))return t(-1);var a=18761===o.getUint16(n+=6,!1);n+=o.getUint32(n+4,a);var c=o.getUint16(n,a);n+=2;for(var l=0;l<c;l++)if(274===o.getUint16(n+12*l,a))return t(o.getUint16(n+12*l+8,a))}else{if(65280&~r)break;n+=o.getUint16(n,!1)}}return t(-1)},o.readAsArrayBuffer(e.slice(0,65536))}(e,function(o){!function(e){A(Te,!1),8===e?A(Te,-Math.PI/2):6===e?A(Te,Math.PI/2):3===e&&A(Te,-Math.PI)}(o);var i=new FileReader;i.onload=function(e){A(de,e.target.result,!0),A(ue,new Image,!0),C(ue).onload=function(){G()&&(Je(C(ie),C(ne))!==Je(C(ue).width,C(ue).height)&&Ze());ze(C(ue))},C(ue).src=C(de),t.onchange&&t.onchange(C(de))},i.readAsDataURL(e)})}function ze(e){A(Ie,e.width,!0),A(ye,e.height,!0),A(xe,e.width/e.height);var t=0,o=0,i=C(te),n=C(ee),r=C(te)/C(ee);W()?C(xe)>=r?(i=n*C(xe),t=(C(te)-i)/2):(n=i/C(xe),o=(C(ee)-n)/2):C(xe)>=r?(n=i/C(xe),o=(C(ee)-n)/2):(i=n*C(xe),t=(C(te)-i)/2),C(ke)&&(C(ke).style.background="none",C(ke).width=C(te)*C(re),C(ke).height=C(ee)*C(re),C(Se)&&(C(Se).setTransform(1,0,0,1,0,0),C(Se).clearRect(0,0,C(ke).width,C(ke).height),C(Te)&&void 0===e.style.imageOrientation&&(C(Se).translate(t*C(re),o*C(re)),C(Se).translate(i/2*C(re),n/2*C(re)),C(Se).rotate(C(Te)),t=-i/2,o=-n/2),C(Se).drawImage(e,t*C(re),o*C(re),i*C(re),n*C(re))))}function Ge(){c.click()}function _e(){c.value="",c.type="",c.type="file",A(ge,""),A(we,""),A(me,0),A(pe,0),A(Q,!1),A(de,""),A(fe,null),A(ue,null),C(ke)&&(C(ke).style.backgroundColor="rgba(200,200,200,.25)",C(ke).width=C(te)*C(re)),t.onremove&&t.onremove()}function He(){Ze(),C(ue)&&ze(C(ue));var e=Je(C(ie),C(ne));t.onaspectratiochange&&t.onaspectratiochange(e)}function Ye(){var e=C(ie)/C(ne),t=r.clientWidth;return!!t&&(!(!_()&&!G()&&t===C(ae))&&(A(ae,t,!0),A(te,Math.min(C(ae)-2*Number(p()),C(ie)),!0),A(ee,C(te)/e),!0))}function Je(e,t){return e>t?"landscape":e<t?"portrait":"square"}function Ze(){var e;e=C(ie),A(ie,C(ne),!0),A(ne,e,!0),Ye()}function Xe(e,r){var c=window.File;try{new c([],"")}catch(ht){c=function(e){function t(e,o){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(n=i(this,t,[e,r]),"lastModifiedDate",new Date),h(n,"lastModified",+n.lastModifiedDate),h(n,"name",void 0),n.name=o,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e),function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(n(Blob))}if(r=Object.assign({},r),"object"===d(e))return A(Q,!0),A(de,""),void(C(Fe)?Ue(e):t.onprefill&&t.onprefill());-1===e.indexOf("data:")&&(e+=-1!==e.indexOf("?")?"&_="+(new Date).getTime():"?_="+(new Date).getTime());var l=new Headers;l.append("Accept","image/*, image/avif"),fetch(e,{method:"GET",mode:"cors",headers:l}).then(function(e){return e.blob()}).then(function(t){var o={target:{files:[]}},i=r.fileName||e.split("/").slice(-1)[0],n=r.mediaType||t.type||"image/"+(r.fileType||i.split("?")[0].split(".").slice(-1)[0]);"image/svg"===(n=n.replace("jpg","jpeg").replace("image/svg","image/svg+xml"))&&(n="image/svg+xml"),o.target.files[0]=new c([t],i,{type:n}),We(o,!0)}).catch(function(e){t.onerror&&t.onerror({type:"failedPrefill",message:"Failed loading prefill image: "+e}),X()&&alert("Failed loading prefill image: "+e)})}m(function(){L()&&Xe(L(),N())}),F(v(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ce();case 1:qe(),L()&&Xe(L(),N()),window.addEventListener("resize",Le),Le(),C(Fe)&&C(ke)&&(A(re,Math.round(window.devicePixelRatio||1),!0),C(ke).getContext&&(A(Se,C(ke).getContext("2d"),!0),C(Se)&&C(Se).scale(C(re),C(re)))),"image/*, image/avif"!==w()&&A(Ce,w().split(",").map(function(e){return e.trim()}),!0),A(ie,f()!=Number.MAX_SAFE_INTEGER?Number(f()):r.clientWidth,!0),A(ne,g()!=Number.MAX_SAFE_INTEGER?Number(g()):C(ie),!0),A(te,C(ie),!0),A(ee,C(ne),!0);case 2:return e.a(2)}},e)}))),b(function(){window.removeEventListener("resize",Le)});var Ke=Oa(),Qe=k(Ke),et=function(e){var t=wa(),o=k(t);I(o,function(){return Ae.upload}),x(e,t)},tt=function(e,t){var o=function(e){var t=Sa(),o=Y(t),i=k(o);i.__click=[Ta,Ve],y(i,function(e){return A(ke,e)},function(){return C(ke)});var n=se(i,2),r=function(e){var t=xa(),o=k(t),i=function(e){var t=Ia(),o=k(t);I(o,function(){return Ae.drag}),x(e,t)},n=function(e){var t=ya(),o=k(t);I(o,function(){return Ae.tap}),x(e,t)};le(o,function(e){C(Re)?e(i):e(n,!1)}),D(function(e){var o,i,n,r;return De(t,"top: -".concat(null!==(o=C(ee))&&void 0!==o?o:"","px; margin-bottom: -").concat(null!==(i=C(ee))&&void 0!==i?i:"","px; font-size: ").concat(null!==(n=C($e))&&void 0!==n?n:"","; border-radius: ").concat(null!==(r=E())&&void 0!==r?r:"","%; z-index: ").concat(null!=e?e:"",";"))},[function(){return parseInt(Z()+"")+2}]),x(e,t)};le(n,function(e){C(Q)||J()||e(r)});var a=se(o,2),c=function(e){Be(e,{variant:"raised",onclick:Ge,get class(){return $()},children:function(e,t){Oe(e,{children:function(e,t){var o=he();D(function(){return be(o,Ae.change)}),x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};le(a,function(e){C(Q)&&!z()&&e(c)});var l=se(a,2),s=function(e){Be(e,{variant:"raised",onclick:_e,get class(){return q()},children:function(e,t){Oe(e,{children:function(e,t){var o=he();D(function(){return be(o,Ae.remove)}),x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};le(l,function(e){C(Q)&&U()&&e(s)});var d=se(l,2),u=function(e){Be(e,{variant:"raised",onclick:He,get class(){return V()},children:function(e,t){Oe(e,{children:function(e,t){var o=he();D(function(){return be(o,Ae.aspect)}),x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};le(d,function(e){C(Q)&&_()&&f()!==g()&&e(u)}),D(function(e){var t,n,r,a,c;De(o,"max-width: ".concat(null!==(t=C(te))&&void 0!==t?t:"","px; height: ").concat(null!==(n=C(ee))&&void 0!==n?n:"","px; border-radius: ").concat(null!==(r=E())&&void 0!==r?r:"","%;")),P(i,1,"picture-preview ".concat(null!==(a=C(je))&&void 0!==a?a:""),"svelte-k98dno"),De(i,"height: ".concat(null!==(c=C(ee))&&void 0!==c?c:"","px; z-index: ").concat(null!=e?e:"",";"))},[function(){return parseInt(Z()+"")+1}]),Ee("drag",i,function(e){e.stopPropagation(),e.preventDefault()}),Ee("dragover",i,function(e){e.stopPropagation(),e.preventDefault()}),Ee("dragstart",i,function(e){e.stopPropagation(),e.preventDefault()}),Ee("dragend",i,function(e){e.stopPropagation(),e.preventDefault()}),Ee("dragenter",i,function(e){e.stopPropagation(),e.preventDefault(),C(Re)&&A(oe,!0)}),Ee("dragleave",i,function(e){e.stopPropagation(),e.preventDefault(),Ne()}),Ee("drop",i,function(e){e.stopPropagation(),e.preventDefault(),function(e){Ne(),We(e)}(e)}),x(e,t)},i=function(e){var t=Ba(),o=k(t),i=function(e){Be(e,{variant:"raised",onclick:Ge,get class(){return $()},children:function(e,t){Oe(e,{children:function(e,t){var o=he();D(function(){return be(o,Ae.select)}),x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},n=function(e){var t=Ca(),o=Y(t),i=k(o);I(i,function(){return Ae.selected});var n=se(o,2),r=function(e){Be(e,{variant:"raised",onclick:Ge,get class(){return $()},children:function(e,t){Oe(e,{children:function(e,t){var o=he();D(function(){return be(o,Ae.change)}),x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};le(n,function(e){z()||e(r)});var a=se(n,2),c=function(e){Be(e,{variant:"raised",onclick:_e,get class(){return q()},children:function(e,t){Oe(e,{children:function(e,t){var o=he();D(function(){return be(o,Ae.remove)}),x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};le(a,function(e){U()&&e(c)}),x(e,t)};le(o,function(e){C(Q)?e(n,!1):e(i)}),x(e,t)};le(e,function(e){C(Fe)?e(o):e(i,!1)},t)};le(Qe,function(e){C(Me)?e(tt,!1):e(et)});var ot=se(Qe,2);ot.__change=We,y(ot,function(e){return c=e},function(){return c}),y(Ke,function(e){return r=e},function(){return r}),D(function(){Pe(ot,"name",R()),Pe(ot,"id",j()),Pe(ot,"accept",w()),Pe(ot,"capture",T())}),x(e,Ke),S()}qe(["click","change"]);var ka=T('<div class="mb-4 text-left"><!></div>'),Ma=T('<img alt="Converted" loading="lazy" class="svelte-1br61l5"/> <!> <!>',1),Fa=T('<div class="col col-lg-4"><!> <!></div> <div class="col col-lg-8"><!></div>',1),Ra=T('<div><img alt="Cropper" loading="lazy" class="cropper-image svelte-1br61l5"/></div>'),ja=T('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div> <div class="mt-2"><!></div> <!>',1),Da=T('<div class="pt-3 col col-12"><img alt="Compress" loading="lazy" class="svelte-1br61l5"/></div>'),Pa=T('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div> <!></div>'),$a=T('<div class="col col-lg-4"><div><!></div> <div><b>Before:</b> <b>After:</b> </div> <!></div> <div class="col-lg-8"><!> <!> <!></div>',1),qa=T('<div class="container"><!> <div class="row"><!></div></div>'),Va=T("<!> <!> <!>",1);function La(e,t){u(t,!0);var o,i=M(t,"open",7),n=M(t,"imgObject",7),r=M(t,"canHaveURL",3,!0),a=B("Cropper"),c=B(100),l=B(90),s=!1,d=B(1),v=B(1),f=B(void 0),g=B(void 0),p=B(void 0),h=B(!1),b=0,w=ve(function(){if(C(g)){var e=(t=C(g),(o=t.match(/^data:.+;base64,(.+)$/))?o[1]:t).length*(3/4)-2;return Math.round(e/1024)}var t,o;return 0}),T=ve(function(){if(C(p)){var e=C(p).split(",")[1].length*(3/4)-2;return Math.round(e/1024)}return 0});function I(){var e=V(n(),t.imgProp);e&&$(e)}function O(){C(p)&&q(n(),t.imgProp,C(p),!1)}function F(){o&&o.setAspectRatio(C(v)/C(d))}function R(){if(o&&C(f)){var e=o.getCroppedCanvas().toDataURL("image/webp");C(f).src=e,q(n(),t.imgProp,e)}}function $(e){var t=document.createElement("canvas"),o=t.getContext("2d"),i=new Image;i.crossOrigin="anonymous",i.onload=function(){var e=C(c)/100,n=i.width*e,r=i.height*e;t.setAttribute("width",n.toString()),t.setAttribute("height",r.toString()),null==o||o.drawImage(i,0,0,n,r),A(p,t.toDataURL("image/webp",C(l)),!0),b++,s&&b>1&&(s=!1,O(),b=0)},i.src=e}function q(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e&&(e[t]=i,A(g,i,!0),o&&o.replace(i),n&&$(i))}function V(e,t){return e&&e[t]?e[t]:""}m(function(){return C(f)?o=new Ue(C(f),{viewMode:3,dragMode:"move"}):o&&o.destroy(),function(){o&&o.destroy()}}),ye(e,{surface$style:"width: 1200px; max-width: calc(100vw - 32px);",style:"text-align: center",get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,o){var u=Va(),g=Y(u);xe(g,{tabindex:0,autofocus:!0,children:function(e,t){var o=he("Image");x(e,o)},$$slots:{default:!0}});var m=se(g,2);Se(m,{children:function(e,o){var u=qa(),g=k(u),m=function(e){var t=ka(),o=k(t);Ae(o,{label:function(e){var t=he("Uploaded Image or External URL.");x(e,t)},children:function(e,t){ke(e,{color:"secondary",class:"switch-scale",get checked(){return C(h)},set checked(e){A(h,e,!0)}})},$$slots:{label:!0,default:!0}}),x(e,t)};le(g,function(e){r()&&e(m)});var p=se(g,2),b=k(p),S=function(e){var o=Fa(),i=Y(o),r=k(i);cn(r,{get value(){return n().imageLink||""},set value(e){!function(e){n().imageLink=e}(e)},label:"External Image URL",variant:"filled"});var a=se(r,2);Be(a,{onclick:function(){q(n(),t.imgProp,n().imageLink)},variant:"raised",children:function(e,t){Oe(e,{children:function(e,t){var o=he("Convert URL to Image");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=se(i,2),l=k(c),s=function(e){var o=Ma(),i=Y(o),r=se(i,2);Be(r,{onclick:function(){q(n(),t.imgProp,""),delete n().imageLink},variant:"raised",class:"my-3",children:function(e,t){Oe(e,{children:function(e,t){var o=he("Remove Photo");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=se(r,2);cn(a,{get value(){return n().imageSourceTooltip||""},set value(e){!function(e){n().imageSourceTooltip=e}(e)},label:"Tooltip That Shows When Hovering over it",variant:"filled"}),D(function(e){return Pe(i,"src",e)},[function(){return V(n(),t.imgProp)}]),x(e,o)};le(l,function(e){void 0!==V(n(),t.imgProp)&&""!==V(n(),t.imgProp)&&e(s)}),x(e,o)},B=function(e){var o=$a(),r=Y(o),u=k(r),g=k(u),m=function(e){var o=ve(function(){return li(V(n(),t.imgProp))?V(n(),t.imgProp):""});Aa(e,{hideChangeButton:!0,removable:!0,crop:!1,get prefill(){return C(o)},onchange:function(e){q(n(),t.imgProp,e)},onclick:function(){return s=app.compressImageAuto},onremove:function(){return q(n(),t.imgProp,"")}})};le(g,function(e){i()&&e(m)});var p,h=se(u,2),b=se(k(h)),S=se(b,2),B=se(h,2);cn(B,{get value(){return n().imageSourceTooltip||""},set value(e){!function(e){n().imageSourceTooltip=e}(e)},label:"Tooltip That Shows When Hovering over it",variant:"filled"});var M=se(r,2),$=k(M);ze($,{tabs:["Cropper","Compress"],get active(){return C(a)},set active(e){A(a,e,!0)},tab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;He(e,{get tab(){return t()},children:function(e,o){Oe(e,{children:function(e,o){var i=he();D(function(){return be(i,t())}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{tab:!0}});var L=se($,2),N=ve(function(){return"Cropper"!==C(a)?"display: none;":""});Ge(L,{role:"tabpanel",variant:"unelevated",get style(){return C(N)},children:function(e,o){_e(e,{children:function(e,o){var i=ja(),r=Y(i),a=k(r);cn(k(a),{label:"Width Aspect",type:"number",variant:"filled",get value(){return C(v)},set value(e){A(v,e,!0)}});var c=se(a,2);cn(k(c),{label:"Height Aspect",type:"number",variant:"filled",get value(){return C(d)},set value(e){A(d,e,!0)}});var l=se(c,2),s=k(l);Be(s,{onclick:F,variant:"raised",style:"height: 100%;",children:function(e,t){Oe(e,{children:function(e,t){var o=he("Change Aspect");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var u=se(r,2),g=k(u);Be(g,{onclick:R,variant:"raised",children:function(e,t){Oe(e,{children:function(e,t){var o=he("Crop Image");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var m=se(u,2),p=function(e){var o=Ra(),i=k(o);y(i,function(e){return A(f,e)},function(){return C(f)}),D(function(e){return Pe(i,"src",e)},[function(){return V(n(),t.imgProp)}]),x(e,o)};le(m,function(e){li(V(n(),t.imgProp))&&e(p)}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var W=se(L,2),E=ve(function(){return"Compress"!==C(a)?"display: none;":""});Ge(W,{role:"tabpanel",variant:"unelevated",get style(){return C(E)},children:function(e,o){_e(e,{children:function(e,o){var i=Pa(),r=k(i);cn(k(r),{onchange:I,label:"Image Scale",type:"number",variant:"filled",get value(){return C(c)},set value(e){A(c,e,!0)}});var a=se(r,2);cn(k(a),{onchange:I,label:"Image Quality",type:"number",variant:"filled",get value(){return C(l)},set value(e){A(l,e,!0)}});var s=se(a,2),d=k(s);Be(d,{onclick:O,variant:"raised",style:"height: 100%;",children:function(e,t){Oe(e,{children:function(e,t){var o=he("Compress Image");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var u=se(s,2),v=function(e){var o=Da(),i=k(o);D(function(e){return Pe(i,"src",e)},[function(){return V(n(),t.imgProp)}]),x(e,o)};le(u,function(e){li(V(n(),t.imgProp))&&e(v)}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),D(function(e){var t,o;p=P(h,1,"pa-4",null,p,e),be(b,"".concat(null!==(t=C(w))&&void 0!==t?t:""," kB|")),be(S,"".concat(null!==(o=C(T))&&void 0!==o?o:""," kB"))},[function(){return{hidden:!V(n(),t.imgProp)}}]),x(e,o)};le(b,function(e){C(h)?e(S):e(B,!1)}),x(e,u)},$$slots:{default:!0}});var p=se(m,2);Ce(p,{children:function(e,t){Be(e,{action:"close",children:function(e,t){Oe(e,{class:"dialog-actions--btn",children:function(e,t){var o=he("Close");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),x(e,u)},$$slots:{default:!0}}),S()}var Na=0,Wa=T("<div><!></div>");var Ea=0,Ua=T("<input/>"),za=T('<span class="mdc-select__ripple"></span>'),Ga=T('<div><!> <div><!> <!> <!> <!> <span><span> </span></span> <span><svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false"><polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon><polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon></svg></span> <!></div> <!></div> <!>',1);function _a(e,t){u(t,!0);var o=g(Ve(),2),i=o[0],n=o[1],r=function(){return Le(ot,"$selectedTextStore",i)},a=function(){};function c(e){return e===a}var l,d=M(t,"use",19,function(){return[]}),v=M(t,"class",3,""),f=M(t,"style",3,""),w=M(t,"ripple",3,!0),T=M(t,"disabled",3,!1),I=M(t,"variant",3,"standard"),O=M(t,"noLabel",3,!1),P=M(t,"label",3,void 0),$=M(t,"value",15),q=M(t,"key",3,function(e){return e}),V=M(t,"dirty",15,!1),L=M(t,"invalid",15,a),N=M(t,"updateInvalid",19,function(){return c(L())}),W=M(t,"required",3,!1),U=M(t,"inputId",19,function(){return"SMUI-select-"+Ea++}),z=M(t,"hiddenInput",3,!1),G=M(t,"withLeadingIcon",3,a),ee=M(t,"anchor$use",19,function(){return[]}),te=M(t,"anchor$class",3,""),ne=M(t,"selectedTextContainer$use",19,function(){return[]}),re=M(t,"selectedTextContainer$class",3,""),ae=M(t,"selectedText$use",19,function(){return[]}),ce=M(t,"selectedText$class",3,""),ue=M(t,"dropdownIcon$use",19,function(){return[]}),Te=M(t,"dropdownIcon$class",3,""),ye=M(t,"menu$class",3,""),xe=M(t,"alwaysFloat",3,!1),Se=J(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","children","leadingIcon","helperText","alwaysFloat"]),Ce=c(L());c(L())&&L(!1);var Be,Oe,Ae,ke=B(void 0),Me=s({}),Fe=s({}),Re=s({}),je=B(-1),De=ve(function(){return void 0!==Se.menu$id?Se.menu$id:U()+"-menu"}),Pe=B(void 0),$e=oe("SMUI:addLayoutListener"),qe=B(!1),Ne=s({}),We=B(void 0),Ee=B(void 0),Ue=B(!1),ze=oe("SMUI:select:context"),Ge=void 0,_e=void 0,He=B(void 0),et=B(void 0),tt=B(void 0);ie("SMUI:list:role",""),ie("SMUI:list:nav",!1);var ot=E("");ie("SMUI:select:selectedText",ot);var it=E($());m(function(){Je(it,$())}),ie("SMUI:select:value",it),m(function(){C(ke)&&C(ke).getValue()!==q()($())&&C(ke).setValue(q()($()))});var nt=C(je);function rt(e){return e in Me?Me[e]:ht().classList.contains(e)}function at(e){Me[e]||(Me[e]=!0)}function ct(e){e in Me&&!Me[e]||(Me[e]=!1)}function lt(e,t){Fe[e]!=t&&(""===t||null==t?delete Fe[e]:Fe[e]=t)}function st(e){Ne[e]||(Ne[e]=!0)}function dt(e){e in Ne&&!Ne[e]||(Ne[e]=!1)}function ut(e){return e in Re?void 0!==Re[e]?Re[e]:null:ht().getAttribute(e)}function vt(e,t){Re[e]!==t&&(Re[e]=t)}function ft(e){e in Re&&null==Re[e]||(Re[e]=void 0)}function gt(){return Ae.getOrderedList().map(function(e){return e.getValue()})}function mt(e){var t;null===(t=C(ke))||void 0===t||t.setUseDefaultValidation(e)}function pt(){var e;null===(e=C(ke))||void 0===e||e.layout()}function ht(){return l}m(function(){if(nt!==C(je))if(nt=C(je),C(ke))C(ke).setSelectedIndex(C(je),!1,!0);else{var e=gt();$()!==e[C(je)]&&$(e[C(je)])}}),m(function(){C(ke)&&C(ke).getDisabled()!==T()&&C(ke).setDisabled(T())}),m(function(){C(ke)&&V()&&C(ke).isValid()!==!L()&&(N()?L(!C(ke).isValid()):C(ke).setValid(!L()))}),m(function(){C(ke)&&C(ke).getRequired()!==W()&&C(ke).setRequired(W())}),$e&&(Oe=$e(pt)),ie("SMUI:select:leading-icon:mount",function(e){Ge=e}),ie("SMUI:select:leading-icon:unmount",function(){Ge=void 0}),ie("SMUI:list:mount",function(e){Ae=e}),ie("SMUI:select:helper-text:id",function(e){A(Pe,e,!0)}),ie("SMUI:select:helper-text:mount",function(e){_e=e}),ie("SMUI:select:helper-text:unmount",function(){A(Pe,void 0),_e=void 0}),F(function(){return A(ke,new Ze({setSelectedText:function(e){Je(ot,e)},isSelectAnchorFocused:function(){return document.activeElement===Be},getSelectAnchorAttr:ut,setSelectAnchorAttr:vt,removeSelectAnchorAttr:ft,addMenuClass:st,removeMenuClass:dt,openMenu:function(){A(qe,!0)},closeMenu:function(){A(qe,!1)},getAnchorElement:function(){return Be},setMenuAnchorElement:function(e){A(We,e,!0)},setMenuAnchorCorner:function(e){A(Ee,e,!0)},setMenuWrapFocus:function(e){A(Ue,e,!0)},getSelectedIndex:function(){return C(je)},setSelectedIndex:function(e){nt=e,A(je,e,!0),$(gt()[C(je)])},focusMenuItemAtIndex:function(e){Ae.focusItemAtIndex(e)},getMenuItemCount:function(){return Ae.items.length},getMenuItemValues:function(){return gt().map(q())},getMenuItemTextAtIndex:function(e){return Ae.getPrimaryTextAtIndex(e)},isTypeaheadInProgress:function(){return Ae.typeaheadInProgress},typeaheadMatchItem:function(e,t){return Ae.typeaheadMatchItem(e,t)},addClass:at,removeClass:ct,hasClass:rt,setRippleCenter:function(e){return C(et)&&C(et).setRippleCenter(e)},activateBottomLine:function(){return C(et)&&C(et).activate()},deactivateBottomLine:function(){return C(et)&&C(et).deactivate()},notifyChange:function(e){var t;(V(!0),N())&&L(!(null!==(t=C(ke))&&void 0!==t&&t.isValid()));we(ht(),"SMUISelectChange",{value:$(),index:C(je)})},hasOutline:function(){return!!C(tt)},notchOutline:function(e){return C(tt)&&C(tt).notch(e)},closeOutline:function(){return C(tt)&&C(tt).closeNotch()},hasLabel:function(){return!!C(He)},floatLabel:function(e){return C(He)&&C(He).float(e||xe())},getLabelWidth:function(){return C(He)?C(He).getWidth():0},setLabelRequired:function(e){return C(He)&&C(He).setRequired(e)}},{get helperText(){return _e},get leadingIcon(){return Ge}}),!0),A(je,gt().indexOf($()),!0),C(ke).init(),mt(Ce),function(){var e;null===(e=C(ke))||void 0===e||e.destroy()}}),b(function(){Oe&&Oe()});var bt=Ga(),wt=Y(bt);Z(wt,function(e,t,o){return p({class:e,style:t},o)},[function(){var e;return X(p((h(h(h(h(h(h(h(h(h(h(e={},v(),!0),"mdc-select",!0),"mdc-select--required",W()),"mdc-select--disabled",T()),"mdc-select--filled","filled"===I()),"mdc-select--outlined","outlined"===I()),"smui-select--standard","standard"===I()),"mdc-select--with-leading-icon",c(G())?t.leadingIcon:G()),"mdc-select--no-label",O()||null==P()),"mdc-select--invalid",L()),h(h(e,"mdc-select--activated",C(qe)),"mdc-data-table__pagination-rows-per-page-select","data-table:pagination"===ze)),Me))},function(){return Object.entries(Fe).map(function(e){var t=g(e,2),o=t[0],i=t[1];return"".concat(o,": ").concat(i,";")}).concat([f()]).join(" ")},function(){return de(Se,["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])}]);var Tt=k(wt),It=function(e){var t=Ua();Z(t,function(e){return p({type:"hidden",required:W(),disabled:T(),value:$()},e)},[function(){return ge(Se,"input$")}]),x(e,t)};le(Tt,function(e){z()&&e(It)});var yt=se(Tt,2),xt=function(e){var o,i,n;Be.focus(),C(ke)&&C(ke).handleClick((n=(i=e).currentTarget.getBoundingClientRect(),(function(e){return"touches"in e}(i)?i.touches[0].clientX:i.clientX)-n.left)),null===(o=t.anchor$onclick)||void 0===o||o.call(t,e)},St=function(e){var o;C(ke)&&C(ke).handleKeydown(e),null===(o=t.onkeydown)||void 0===o||o.call(t,e)},Ct=function(e){var o;C(ke)&&C(ke).handleBlur(),we(ht(),"blur",e),null===(o=t.anchor$onblur)||void 0===o||o.call(t,e)},Bt=function(e){var o;C(ke)&&C(ke).handleFocus(),we(ht(),"focus",e),null===(o=t.anchor$onfocus)||void 0===o||o.call(t,e)};Z(yt,function(e,t){return p(p(p({class:e,"aria-required":W()?"true":void 0,"aria-disabled":T()?"true":void 0,"aria-controls":C(De),"aria-expanded":C(qe)?"true":"false","aria-describedby":C(Pe),role:"combobox",tabindex:"0"},Re),t),{},{onclick:xt,onkeydown:St,onblur:Ct,onfocus:Bt})},[function(){return X(h(h({},te(),!0),"mdc-select__anchor",!0))},function(){return ge(Se,"anchor$")}]);var Ot=k(yt),At=function(e){var t=za();x(e,t)};le(Ot,function(e){"filled"===I()&&e(At)});var kt=se(Ot,2),Mt=function(e){var t=ve(function(){return U()+"-smui-label"}),o=ve(function(){return""!==r()||xe()}),i=ve(function(){return ge(Se,"label$")});y(pe(e,_({get id(){return C(t)},get floatAbove(){return C(o)},get required(){return W()}},function(){return C(i)},{children:function(e,t){var o=H(),i=Y(o),n=function(e){},r=function(e,t){var o=function(e){var t=he();D(function(){return be(t,P())}),x(e,t)},i=function(e){var t=H(),o=Y(t);R(o,P),x(e,t)};le(e,function(e){"string"==typeof P()?e(o):e(i,!1)},t)};le(i,function(e){null==P()?e(n):e(r,!1)}),x(e,o)},$$slots:{default:!0}})),function(e){return A(He,e,!0)},function(){return C(He)})};le(kt,function(e){"outlined"===I()||O()||null==P()||e(Mt)});var Ft=se(kt,2),Rt=function(e){var t=ve(function(){return O()||null==P()}),o=ve(function(){return ge(Se,"outline$")});y(me(e,_({get noLabel(){return C(t)}},function(){return C(o)},{children:function(e,t){var o=H(),i=Y(o),n=function(e){var t=ve(function(){return U()+"-smui-label"}),o=ve(function(){return""!==r()||xe()}),i=ve(function(){return ge(Se,"label$")});y(pe(e,_({get id(){return C(t)},get floatAbove(){return C(o)},get required(){return W()}},function(){return C(i)},{children:function(e,t){var o=H(),i=Y(o),n=function(e){},r=function(e,t){var o=function(e){var t=he();D(function(){return be(t,P())}),x(e,t)},i=function(e){var t=H(),o=Y(t);R(o,P),x(e,t)};le(e,function(e){"string"==typeof P()?e(o):e(i,!1)},t)};le(i,function(e){null==P()?e(n):e(r,!1)}),x(e,o)},$$slots:{default:!0}})),function(e){return A(He,e,!0)},function(){return C(He)})};le(i,function(e){O()||null==P()||e(n)}),x(e,o)},$$slots:{default:!0}})),function(e){return A(tt,e,!0)},function(){return C(tt)})};le(Ft,function(e){"outlined"===I()&&e(Rt)});var jt=se(Ft,2);R(jt,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:j});var Dt=se(jt,2);Z(Dt,function(e,t){return p({class:e},t)},[function(){return X(h(h({},re(),!0),"mdc-select__selected-text-container",!0))},function(){return ge(Se,"selectedTextContainer$")}]);var Pt=k(Dt);Z(Pt,function(e,t){return p({id:U()+"-smui-selected-text",class:e,role:"button","aria-haspopup":"listbox","aria-labelledby":U()+"-smui-label"},t)},[function(){return X(h(h({},ce(),!0),"mdc-select__selected-text",!0))},function(){return ge(Se,"selectedText$")}]);var $t=k(Pt);K(Pt,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},ae),K(Dt,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},ne);var qt=se(Dt,2);Z(qt,function(e,t){return p({class:e},t)},[function(){return X(h(h({},Te(),!0),"mdc-select__dropdown-icon",!0))},function(){return ge(Se,"dropdownIcon$")}]),K(qt,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},ue);var Vt=se(qt,2),Lt=function(e){var t=ve(function(){return ge(Se,"ripple$")});y(Ie(e,_(function(){return C(t)})),function(e){return A(et,e,!0)},function(){return C(et)})};le(Vt,function(e){"outlined"!==I()&&w()&&e(Lt)}),y(yt,function(e){return Be=e},function(){return Be}),K(yt,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},ee);var Nt=se(yt,2),Wt=ve(function(){return X(p(h(h({},ye(),!0),"mdc-select__menu",!0),Ne))}),Et=ve(function(){return ge(Se,"menu$")});Xe(Nt,_({get class(){return C(Wt)},get id(){return C(De)},fullWidth:!0,anchor:!1,get anchorElement(){return C(We)},get anchorCorner(){return C(Ee)}},function(){return C(Et)},{onSMUIMenuSelected:function(e){var o;C(ke)&&C(ke).handleMenuItemAction(e.detail.index),null===(o=t.onSMUIMenuSelected)||void 0===o||o.call(t,e)},onSMUIMenuSurfaceClosing:function(e){var o;C(ke)&&C(ke).handleMenuClosing(),null===(o=t.onSMUIMenuSurfaceClosing)||void 0===o||o.call(t,e)},onSMUIMenuSurfaceClosed:function(e){var o;C(ke)&&C(ke).handleMenuClosed(),null===(o=t.onSMUIMenuSurfaceClosed)||void 0===o||o.call(t,e)},onSMUIMenuSurfaceOpened:function(e){var o;C(ke)&&C(ke).handleMenuOpened(),null===(o=t.onSMUIMenuSurfaceOpened)||void 0===o||o.call(t,e)},get open(){return C(qe)},set open(e){A(qe,e,!0)},children:function(e,o){var i=ve(function(){return ge(Se,"list$")});Ke(e,_({role:"listbox",get wrapFocus(){return C(Ue)}},function(){return C(i)},{style:"max-height: 296px",get selectedIndex(){return C(je)},set selectedIndex(e){A(je,e,!0)},children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}}))},$$slots:{default:!0}})),y(wt,function(e){return l=e},function(){return l}),K(wt,function(e,t){var o;return null===(o=fe)||void 0===o?void 0:o(e,t)},function(){return{ripple:"filled"===I(),unbounded:!1,addClass:at,removeClass:ct,addStyle:lt}}),K(wt,function(e,t){var o;return null===(o=Qe)||void 0===o?void 0:o(e,t)},function(){return{addClass:at,removeClass:ct}}),K(wt,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},d);var Ut=se(wt,2),zt=function(e){var o=ve(function(){return ge(Se,"helperText$")});!function(e,t){u(t,!0);var o,i=M(t,"use",19,function(){return[]}),n=M(t,"class",3,""),r=M(t,"id",19,function(){return"SMUI-select-helper-text-"+Na++}),a=M(t,"persistent",3,!1),c=M(t,"validationMsg",3,!1),l=J(t,["$$slots","$$events","$$legacy","use","class","id","persistent","validationMsg","children"]),d=B(void 0),v=s({}),f=s({}),g=B(void 0),m=oe("SMUI:select:helper-text:id"),b=oe("SMUI:select:helper-text:mount"),w=oe("SMUI:select:helper-text:unmount");function T(e){return e in v?v[e]:V().classList.contains(e)}function I(e){v[e]||(v[e]=!0)}function O(e){e in v&&!v[e]||(v[e]=!1)}function P(e){return e in f?void 0!==f[e]?f[e]:null:V().getAttribute(e)}function $(e,t){f[e]!==t&&(f[e]=t)}function q(e){e in f&&null==f[e]||(f[e]=void 0)}function V(){return o}F(function(){return A(d,new Ye({addClass:I,removeClass:O,hasClass:T,getAttr:P,setAttr:$,removeAttr:q,setContent:function(e){A(g,e,!0)}}),!0),m&&m(r()),b&&b(C(d)),C(d).init(),function(){var e;w&&C(d)&&w(C(d)),null===(e=C(d))||void 0===e||e.destroy()}});var L=Wa();Z(L,function(e){return p(p({class:e,"aria-hidden":a()?void 0:"true",id:r()},f),l)},[function(){return X(p(h(h(h(h({},n(),!0),"mdc-select-helper-text",!0),"mdc-select-helper-text--validation-msg",c()),"mdc-select-helper-text--validation-msg-persistent",a()),v))}]);var N=k(L),W=function(e){var o=H(),i=Y(o);R(i,function(){var e;return null!==(e=t.children)&&void 0!==e?e:j}),x(e,o)},E=function(e){var t=he();D(function(){return be(t,C(g))}),x(e,t)};le(N,function(e){null==C(g)?e(W):e(E,!1)}),y(L,function(e){return o=e},function(){return o}),K(L,function(e,t){var o;return null===(o=Q)||void 0===o?void 0:o(e,t)},i),x(e,L),S({getElement:V})}(e,_(function(){return C(o)},{children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.helperText)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}}))};le(Ut,function(e){t.helperText&&e(zt)}),D(function(){return be($t,r())}),x(e,bt);var Gt=S({getUseDefaultValidation:function(){if(null==C(ke))throw new Error("Instance is undefined.");return C(ke).getUseDefaultValidation()},setUseDefaultValidation:mt,focus:function(){Be.focus()},layout:pt,getElement:ht});return n(),Gt}function Ha(e,t){u(t,!0);var o=g(Ve(),2),i=o[0],n=o[1],r=M(t,"use",19,function(){return[]});M(t,"class",3,"");var a,c=M(t,"value",3,""),l=J(t,["$$slots","$$events","$$legacy","use","class","value","children"]),s=oe("SMUI:select:selectedText"),d=oe("SMUI:select:value");ie("SMUI:list:item:role","option");var v=ve(function(){return null!=c()&&""!==c()&&Le(d,"$selectedValue",i)===c()});function f(){C(v)&&a&&Je(s,a.getPrimaryText())}F(f),b(f),y(et(e,_({get use(){return r()},get"data-value"(){return c()},get value(){return c()},get selected(){return C(v)}},function(){return l},{children:function(e,o){var i=H(),n=Y(i);R(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:j}),x(e,i)},$$slots:{default:!0}})),function(e){return a=e},function(){return a});var m=S({getElement:function(){return a.getElement()}});return n(),m}var Ya=T('<div class="col-12 px-3 mt-0"><!></div>'),Ja=T('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12"><!></div> <div class="col-12"><!></div> <!> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div></div></div>'),Za=T("<b>Interactive CYOA Creator Plus</b>"),Xa=T('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12 text-right"> <br/></div></div></div>'),Ka=T("<!> <!>",1),Qa=T("<!> <!>",1),ec=T("<!> <!> <!>",1);function tc(e,t){u(t,!0);var o=M(t,"open",7),i=[{text:"2 Per Row",value:"col-6"},{text:"3 Per Row",value:"col-4"},{text:"4 Per Row",value:"col-3"}],n=B("General");function r(){go&&go.abort(),po()}function a(){for(var e=io.allowDeselect,t=0;t<app.backpack.length;t++){var o=app.backpack[t];o.isResultRow&&(o.isInfoRow=!e)}}ye(e,{surface$style:"width: 600px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:function(e,t){var o=ec(),c=Y(o);xe(c,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:function(e,t){var o=he("Settings");x(e,o)},$$slots:{default:!0}});var l=se(c,2);Se(l,{children:function(e,t){var o=Qa(),c=Y(o);ze(c,{tabs:["General","About"],get active(){return C(n)},set active(e){A(n,e,!0)},tab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;He(e,{get tab(){return t()},children:function(e,o){Oe(e,{children:function(e,o){var i=he();D(function(){return be(i,t())}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{tab:!0}});var l=se(c,2),s=function(e){Ge(e,{role:"tabpanel",variant:"unelevated",children:function(e,t){_e(e,{children:function(e,t){var o=Ja(),n=k(o),c=k(n);_a(k(c),{label:"Choices Per Row",variant:"standard",alwaysFloat:!0,get value(){return app.objectsPerRow},set value(e){app.objectsPerRow=e},helperText:function(e){var t=he("Maximum number of choices per row for screens between 720px and 1280px.");x(e,t)},children:function(e,t){var o=H(),n=Y(o);Fe(n,17,function(){return i},function(e){return e.text},function(e,t){Ha(e,{get value(){return C(t).value},children:function(e,o){var i=he();D(function(){return be(i,C(t).text)}),x(e,i)},$$slots:{default:!0}})}),x(e,o)},$$slots:{helperText:!0,default:!0}});var l=se(c,2),s=k(l);Ae(s,{label:function(e){var t=he("Enable Auto Save");x(e,t)},children:function(e,t){ke(e,{get checked(){return app.buildAutoSaveIsOn||!1},set checked(e){!function(e){app.buildAutoSaveIsOn=e}(e)},onSMUISwitchChange:function(){app.buildAutoSaveIsOn&&r()},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var d=se(l,2),u=function(e){var t=Ya(),o=k(t);cn(o,{get value(){return app.buildAutoSaveInterval||10},set value(e){!function(e){app.buildAutoSaveInterval=e}(e)},label:"Auto Save Interval",type:"number",suffix:"min",variant:"standard",style:"max-width: 200px",input$class:"text-right",input$min:"1",onchange:function(){app.buildAutoSaveInterval<1&&(app.buildAutoSaveInterval=1),r()}}),x(e,t)};le(d,function(e){app.buildAutoSaveIsOn&&e(u)});var v=se(d,2),f=k(v);Ae(f,{label:function(e){var t=he("Preload Images in Backpack");x(e,t)},children:function(e,t){ke(e,{get checked(){return app.preloadImages||!1},set checked(e){!function(e){app.preloadImages=e}(e)},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var g=se(v,2),m=k(g);Ae(m,{label:function(e){var t=he("Allow Deselecting Choices in Backpack");x(e,t)},children:function(e,t){ke(e,{onSMUISwitchChange:a,color:"secondary",class:"switch-scale",get checked(){return io.allowDeselect},set checked(e){io.allowDeselect=e}})},$$slots:{label:!0,default:!0}});var p=se(g,2),h=k(p);Ae(h,{label:function(e){var t=he("Show Background Music Player");x(e,t)},children:function(e,t){ke(e,{get checked(){return app.showMusicPlayer||!1},set checked(e){!function(e){app.showMusicPlayer=e}(e)},color:"secondary",class:"switch-scale",onchange:function(){if(app.showMusicPlayer){var e=W(Qt);if(e){var t=0,o=0;0!==eo.bgmTitleInterval&&(clearInterval(eo.bgmTitleInterval),eo.bgmTitleInterval=0),eo.bgmTitleInterval=window.setInterval(function(){if(void 0!==e.playerInfo.videoData&&""!==eo.bgmObjectId){var t=Et.get(eo.bgmObjectId);if(void 0!==t){var o=t.choice;e.playerInfo.videoData.video_id===o.bgmId&&void 0!==e.playerInfo.videoData.title&&""!==e.playerInfo.videoData.title&&(eo.bgmTitle=e.playerInfo.videoData.title,eo.curBgmLength=e.getDuration(),clearInterval(eo.bgmTitleInterval),eo.bgmTitleInterval=0)}}},1e3),0!==eo.bgmPlayInterval&&(clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0),eo.bgmPlayInterval=window.setInterval(function(){if(void 0!==e.playerInfo.videoData&&!eo.isSeeking&&1===e.getPlayerState()){var i=Math.floor(e.getCurrentTime());i!==eo.curBgmTime?t!==i?eo.curBgmTime=i:(++o>eo.curBgmLength&&(o=1),eo.curBgmTime=o):(t=i,o=i+1,eo.curBgmTime=o)}},1e3)}}else eo.bgmIsPlaying&&(0!==eo.bgmTitleInterval&&(clearInterval(eo.bgmTitleInterval),eo.bgmTitleInterval=0),0!==eo.bgmPlayInterval&&(clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0))}})},$$slots:{label:!0,default:!0}}),x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},d=function(e,t){var o=function(e){Ge(e,{role:"tabpanel",variant:"unelevated",children:function(e,t){var o=Ka(),i=Y(o);tt(i,{class:"text-center",children:function(e,t){var o=Za();x(e,o)},$$slots:{default:!0}});var n=se(i,2);_e(n,{children:function(e,t){var o=Xa(),i=k(o),n=k(i),r=k(n);D(function(){return be(r,"v".concat(St))}),x(e,o)},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}})};le(e,function(e){"About"===C(n)&&e(o)},t)};le(l,function(e){"General"===C(n)?e(s):e(d,!1)}),x(e,o)},$$slots:{default:!0}});var s=se(l,2);Ce(s,{children:function(e,t){Be(e,{action:"close",children:function(e,t){Oe(e,{class:"dialog-actions--btn",children:function(e,t){var o=he("Close");x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}}),S()}var oc=T("<!> <!>",1),ic=T("<!> <!>",1),nc=T("<!> <!>",1),rc=T("<!> <!>",1),ac=T("<!> <!>",1),cc=T("<!> <!>",1),lc=T("<!> <!> <!> <!> <!> <!> <!>",1),sc=T("<i></i>"),dc=T('<i class="mdi mdi-stop"></i>'),uc=T("<i></i>"),vc=T('<!> <!> <!> <div class="px-1" style="max-width: 104px; width: 100%"><!></div> <div class="ps-1" style="max-width:150px; overflow: hidden;"><span class="scrolling-text"> </span></div> <div class="px-1 col"><!></div> <div class="text-center" style="width: 180px"> </div>',1),fc=T('<i class="mdi mdi-format-list-checks"></i>'),gc=T('<div class="py-0 justify-center"><!></div>'),mc=T('<i class="mdi mdi-checkbox-marked-circle-outline"></i>'),pc=T("<!> <!> <!>",1),hc=T("<div><!></div>"),bc=T('<div class="ab-0"><div class="fadeOverlay"></div> <!> <!> <div class="s-main"><!> <!> <div class="container-fluid p-0"><div class="row gx-0"></div></div></div></div> <!> <!> <!>',1);function wc(e,t){u(t,!0);var o=B(!1),i=B(!1),n=B("none"),r=ve(function(){return C(i)?app.showMusicPlayer?"top: 32px;":"top: 0;":"bottom: 0;"}),a=ve(function(){return"opacity: ".concat(app.fadeTransitionIsOn?1:0,"; transition: opacity ").concat(app.fadeTransitionTime,"s ease-out; background-color: ").concat(Yi(app.fadeTransitionColor),"; pointer-events: ").concat(app.fadeTransitionIsOn?"auto":"none","; cursor: ").concat(app.fadeTransitionIsOn?"none":"auto",";")}),l=B(0),s=B(void 0),d=ve(function(){return app.pointTypes.length>0||app.backpack.length>0||app.importedChoicesIsOpen}),v=ve(function(){return"background-color: ".concat(Yi(app.styling.barBackgroundColor),";margin:").concat(app.styling.barMargin,"px;padding:").concat(app.styling.barPadding,"px;").concat(C(r))}),f=ve(function(){return"color: ".concat(Yi(app.styling.barTextColor),";margin: ").concat(app.styling.barTextMargin,"px;padding: ").concat(app.styling.barTextPadding,'px;font-family: "').concat(app.styling.barTextFont,'";font-size: ').concat(app.styling.barTextSize,"px")}),g=ve(function(){return"color: ".concat(Yi(app.styling.barIconColor),";")}),p=ve(function(){var e=[];return app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(Yi(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;"),C(d)&&e.push("padding-bottom: 56px;"),app.useVW&&e.push("font-size: 0.835vw;"),e.join("")}),h=ve(function(){var e=[];return app.showMusicPlayer&&e.push("padding-top: 32px;"),e.join("")}),w=ve(function(){return"".concat(R(eo.curBgmTime)," | ").concat(R(eo.curBgmLength))}),T=B(0),M=B(100),F=B(!1);function R(e){var t=Math.floor(e/3600),o=Math.floor(e%3600/60),i=Math.floor(e%60),n=String(o).padStart(2,"0"),r=String(i).padStart(2,"0");return t>0?"".concat(t,":").concat(n,":").concat(r):"".concat(n,":").concat(r)}function j(){var e=localStorage.getItem("theme");Xt.value="dark"===e?"light":"dark";var t=document.head.querySelector("#theme-dark"),o=document.head.querySelector("#theme-light");"dark"===Xt.value?(t&&(t.media="screen and (prefers-color-scheme: light)"),o&&(o.media="screen and (prefers-color-scheme: dark)")):(t&&(t.media="screen and (prefers-color-scheme: dark)"),o&&(o.media="screen and (prefers-color-scheme: light)")),localStorage.setItem("theme",Xt.value)}function $(){if(Qt&&0!==eo.curBgmLength){var e=W(Qt);if(e)if(eo.bgmIsPlaying)e.pauseVideo(),eo.bgmIsPlaying=!1,0!==eo.bgmPlayInterval&&(clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0);else{var t=0,o=0;0!==eo.bgmPlayInterval&&(clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0),e.playVideo(),eo.bgmIsPlaying=!0,eo.bgmPlayInterval=window.setInterval(function(){if(void 0!==e.playerInfo.videoData&&!eo.isSeeking&&1===e.getPlayerState()){var i=Math.floor(e.getCurrentTime());i!==eo.curBgmTime?t!==i?eo.curBgmTime=i:(++o>eo.curBgmLength&&(o=1),eo.curBgmTime=o):(t=i,o=i+1,eo.curBgmTime=o)}},1e3)}}}function q(){if(Qt&&eo.bgmIsPlaying&&0!==eo.curBgmLength){var e=W(Qt);e&&(e.stopVideo(),eo.bgmIsPlaying=!1,eo.curBgmTime=0,0!==eo.bgmPlayInterval&&(clearInterval(eo.bgmPlayInterval),eo.bgmPlayInterval=0))}}function V(){if(app.isMute=!app.isMute,Qt){var e=W(Qt);e&&(app.isMute?e.mute():e.unMute())}}function L(){Qt&&eo.bgmIsPlaying&&(eo.isSeeking=!0)}function N(){var e;if(Qt&&eo.bgmIsPlaying){var t=W(Qt);t&&(t.seekTo(C(T),!0),eo.curBgmTime=C(T)),eo.isSeeking=!1}null===(e=document.activeElement)||void 0===e||e.blur()}function E(){A(F,!0)}function U(){var e;if(app.curVolume=C(M),Qt){var t=W(Qt);t&&t.setVolume(C(M))}A(F,!1),null===(e=document.activeElement)||void 0===e||e.blur()}m(function(){eo.isSeeking||A(T,eo.curBgmTime,!0)}),m(function(){C(F)||A(M,app.curVolume,!0)});var z=bc(),G=Y(z),_=k(G),J=se(_,2);ot(J,{style:"top: 0;",variant:"modal",get open(){return C(o)},set open(e){A(o,e,!0)},children:function(e,t){nt(e,{class:"navigation-drawer",children:function(e,t){Ke(e,{children:function(e,t){var r=lc(),a=Y(r);et(a,{onSMUIAction:function(){return A(o,!1)},class:"my-0",children:function(e,t){var o=oc(),i=Y(o);rt(i,{class:"mdi mdi-chevron-left"});var n=se(i,2);at(n,{class:"w-100 list-text text-center",children:function(e,t){var o=he("Close Menu");x(e,o)},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}});var c=se(a,2);ct(c,{class:"my-3"});var l=se(c,2);et(l,{onSMUIAction:j,class:"my-0",children:function(e,t){var o=ic(),i=Y(o);rt(i,{class:"mdi mdi-theme-light-dark"});var n=se(i,2);at(n,{class:"w-100 list-text text-center",children:function(e,t){var o=he("Toogle Dark/Light Theme");x(e,o)},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}});var s=se(l,2);et(s,{onSMUIAction:function(){return A(i,!C(i))},class:"my-0",children:function(e,t){var o=nc(),i=Y(o);rt(i,{class:"mdi mdi-swap-vertical"});var n=se(i,2);at(n,{class:"w-100 list-text text-center",children:function(e,t){var o=he("Top/Bottom Point Bar");x(e,o)},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}});var d=se(s,2);et(d,{get onSMUIAction(){return ti},class:"my-0",children:function(e,t){var o=rc(),i=Y(o);rt(i,{class:"mdi mdi-select-off"});var n=se(i,2);at(n,{class:"w-100 list-text text-center",children:function(e,t){var o=he("Clean Selected Choices");x(e,o)},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}});var u=se(d,2),v=function(e){et(e,{onSMUIAction:function(){A(n,"appSaveLoad"),A(o,!1)},class:"my-0",children:function(e,t){var o=ac(),i=Y(o);rt(i,{class:"mdi mdi-content-save"});var n=se(i,2);at(n,{class:"w-100 list-text text-center",children:function(e,t){var o=he("Save/Load Build");x(e,o)},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}})};le(u,function(e){app.importedChoicesIsOpen&&e(v)});var f=se(u,2);et(f,{onSMUIAction:function(){A(n,"appGlobalSettings"),A(o,!1)},class:"my-0",children:function(e,t){var o=cc(),i=Y(o);rt(i,{class:"mdi mdi-cog"});var n=se(i,2);at(n,{class:"w-100 list-text text-center",children:function(e,t){var o=he("Settings");x(e,o)},$$slots:{default:!0}}),x(e,o)},$$slots:{default:!0}}),x(e,r)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var Z=se(J,2);it(Z,{});var X=se(Z,2),K=k(X),Q=function(e){lt(e,{class:"music-player",variant:"fixed",children:function(e,t){st(e,{class:"music-player--row",children:function(e,t){dt(e,{class:"px-2 justify-left",children:function(e,t){var o=vc(),i=Y(o);Me(i,{class:"music-player--button",onclick:$,size:"button","aria-label":"Play",children:function(e,t){var o=sc();D(function(){return P(o,1,Te(eo.bgmIsPlaying?"mdi mdi-pause":"mdi mdi-play"))}),x(e,o)},$$slots:{default:!0}});var n=se(i,2);Me(n,{class:"music-player--button",onclick:q,size:"button","aria-label":"Stop",children:function(e,t){var o=dc();x(e,o)},$$slots:{default:!0}});var r=se(n,2);Me(r,{class:"music-player--button",onclick:V,size:"button","aria-label":"Mute",children:function(e,t){var o=uc();D(function(){return P(o,1,Te(app.isMute?"mdi mdi-volume-off":"mdi mdi-volume-high"))}),x(e,o)},$$slots:{default:!0}});var a=se(r,2),c=k(a);$e(c,{min:0,max:100,step:1,class:"mx-2",onpointerdown:E,onpointerup:U,get disabled(){return app.isMute},get value(){return C(M)},set value(e){A(M,e,!0)}});var l=se(a,2),s=k(l),d=k(s),u=se(l,2),v=k(u),f=ve(function(){return eo.curBgmLength||1});$e(v,{min:0,get max(){return C(f)},step:1,class:"mx-2",onpointerdown:L,onpointerup:N,get value(){return C(T)},set value(e){A(T,e,!0)}});var g=se(u,2),m=k(g);D(function(){be(d,eo.bgmTitle),be(m,C(w))}),x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})};le(K,function(e){app.showMusicPlayer&&e(Q)});var ee=se(K,2),te=function(e){lt(e,{class:"pointBar",get style(){return C(v)},variant:"fixed",color:"secondary",children:function(e,t){st(e,{class:"justify-space-around",children:function(e,t){var i=pc(),r=Y(i);dt(r,{class:"py-0 justify-center",children:function(e,t){Me(e,{class:"pointbar-icons",onclick:function(){return A(o,!0)},"aria-label":"Open Import Window",get style(){return C(g)},children:function(e,t){var o=fc();x(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=se(r,2);dt(a,{class:"pointbar-center--viewer",children:function(e,t){var o=H(),i=Y(o);Fe(i,17,function(){return app.pointTypes},Re,function(e,t){var o=H(),i=Y(o),n=function(e){var o=gc();!function(e,t){u(t,!0);var o=ve(function(){return"color: ".concat(Yi(app.styling.barTextColor),";margin: ").concat(app.styling.barTextMargin,"px;padding: ").concat(app.styling.barTextPadding,'px;font-family: "').concat(app.styling.barTextFont,'";font-size: ').concat(app.styling.barTextSize,"px")}),i=ve(function(){if(t.point.startingSum>=0){if(void 0!==app.styling.barPointPos)return"color: ".concat(Yi(app.styling.barPointPos),";")}else if(void 0!==app.styling.barPointNeg)return"color: ".concat(Yi(app.styling.barPointNeg),";");return""});function n(e,t){var o=t?e.negativeImage:e.image,i=t?e.negativeIconWidth:e.iconWidth,n=t?e.negativeIconHeight:e.iconHeight;return o?'<img src="'.concat(o,'" style="width: ').concat(i,"px; height:").concat(n,'px;" alt="">'):""}var r=va(),a=k(r),c=k(a),l=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o);I(i,function(){return n(t.point,!0)}),x(e,o)};le(i,function(e){t.point.negativeImageOnSide||t.point.negativeImageSidePlacement||e(r)}),x(e,o)},a=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o);I(i,function(){return n(t.point,!1)}),x(e,o)};le(i,function(e){t.point.imageOnSide||t.point.imageSidePlacement||e(r)}),x(e,o)};le(i,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),x(e,o)};le(c,function(e){t.point.iconIsOn&&e(l)});var s=se(c),d=se(s),v=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o);I(i,function(){return n(t.point,!0)}),x(e,o)};le(i,function(e){t.point.negativeImageOnSide&&!t.point.negativeImageSidePlacement&&e(r)}),x(e,o)},a=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o);I(i,function(){return n(t.point,!1)}),x(e,o)};le(i,function(e){t.point.imageOnSide&&!t.point.imageSidePlacement&&e(r)}),x(e,o)};le(i,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),x(e,o)};le(d,function(e){t.point.iconIsOn&&e(v)});var f=se(d,2),g=k(f),m=se(f,2),p=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o);I(i,function(){return n(t.point,!0)}),x(e,o)};le(i,function(e){!t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),x(e,o)},a=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o);I(i,function(){return n(t.point,!1)}),x(e,o)};le(i,function(e){!t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),x(e,o)};le(i,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),x(e,o)};le(m,function(e){t.point.iconIsOn&&e(p)});var h=se(m),b=se(h),w=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o);I(i,function(){return n(t.point,!0)}),x(e,o)};le(i,function(e){t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),x(e,o)},a=function(e){var o=H(),i=Y(o),r=function(e){var o=H(),i=Y(o);I(i,function(){return n(t.point,!1)}),x(e,o)};le(i,function(e){t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),x(e,o)};le(i,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),x(e,o)};le(b,function(e){t.point.iconIsOn&&e(w)}),D(function(e,n){var c,l;De(r,C(o)),De(a,e),be(s," ".concat(null!==(c=t.point.beforeText)&&void 0!==c?c:""," ")),De(f,C(i)),be(g,n),be(h," ".concat(null!==(l=t.point.afterText)&&void 0!==l?l:""," "))},[function(){return t.point.pointPrivateColorIsOn?"color: ".concat(t.point.startingSum>=0?Yi(t.point.privateColor):Yi(t.point.privateNegativeColor)):""},function(){return t.point.startingSum%1==0?t.point.startingSum:parseFloat(t.point.startingSum.toFixed(void 0!==t.point.decimalPlaces?t.point.decimalPlaces:2))}]),x(e,r),S()}(k(o),{get point(){return C(t)}}),D(function(){return De(o,C(f))}),x(e,o)};le(i,function(e){(function(e){if(e.isNotShownPointBar){if(void 0!==e.activatedId&&""!==e.activatedId){var t=zt.get(e.activatedId),o=_t.get(e.activatedId);return void 0!==t?Wo(t.requireds):void 0!==o?o.isTrue:Lo(e.activatedId)}return!1}return!0})(C(t))&&e(n)}),x(e,o)}),x(e,o)},$$slots:{default:!0}});var c=se(a,2);dt(c,{class:"py-0 justify-center",children:function(e,t){var o=H(),i=Y(o),r=function(e){Me(e,{class:"pointbar-icons",onclick:function(){return A(n,"dlgBackpack")},"aria-label":"Open Backpack Window",get style(){return C(g)},children:function(e,t){var o=mc();x(e,o)},$$slots:{default:!0}})};le(i,function(e){app.backpack.length>0&&(void 0===app.hideBackpackBtn||0===app.hideBackpackBtn||app.hideBackpackBtn>0&&app.hideBackpackBtn===app.btnBackpackIsOn)&&e(r)}),x(e,o)},$$slots:{default:!0}}),x(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};le(ee,function(e){C(d)&&e(te)});var oe=se(ee,2),ie=k(oe);Fe(ie,21,function(){return app.rows},Re,function(e,t){var o=hc();ua(k(o),{get row(){return C(t)},get windowWidth(){return C(l)},get mainDiv(){return C(s)}}),D(function(){return P(o,1,Te(C(t).width?"col-6":"col-12"))}),x(e,o)}),y(ie,function(e){return A(s,e)},function(){return C(s)});var ne=se(G,2),re=function(e){var t=ve(function(){return"appSaveLoad"===C(n)});Rn(e,{get open(){return C(t)},onclose:function(){return A(n,"none")}})},ae=function(e,t){var o=function(e){var t=ve(function(){return"dlgBackpack"===C(n)});ba(e,{get open(){return C(t)},onclose:function(){return A(n,"none")}})},i=function(e,t){var o=function(e){var t=ve(function(){return"appGlobalSettings"===C(n)});tc(e,{get open(){return C(t)},onclose:function(){return A(n,"none")}})};le(e,function(e){"appGlobalSettings"===C(n)&&e(o)},t)};le(e,function(e){"dlgBackpack"===C(n)?e(o):e(i,!1)},t)};le(ne,function(e){"appSaveLoad"===C(n)?e(re):e(ae,!1)});var ce=se(ne,2),de=function(e){var t=ve(function(){return"appImageUpload"===to.currentDialog});La(e,{get open(){return C(t)},onclose:function(){return to.currentDialog="none"},get imgObject(){return to.data},get imgProp(){return to.imgProp}})},ue=function(e,t){var o=function(e){var t=ve(function(){return"dlgCommon"===to.currentDialog});vn(e,{get open(){return C(t)},onclose:function(){return to.currentDialog="none"},get closeHandler(){return to.cFunc},get title(){return to.title},get context(){return to.context},get isWord(){return to.isWord}})};le(e,function(e){"dlgCommon"===to.currentDialog&&void 0!==to.cFunc&&void 0!==to.title&&void 0!==to.context&&e(o)},t)};le(ce,function(e){"appImageUpload"===to.currentDialog&&void 0!==to.data&&void 0!==to.imgProp?e(de):e(ue,!1)}),function(e,t){u(t,!0);var o=B(void 0),i=null;m(function(){var e;C(o)&&""!==c.text&&(c.isVisible&&c.anchor?(null===(e=i)||void 0===e||e.destroy(),i=O(c.anchor,C(o),{placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{boundary:"viewport"}},{name:"flip",options:{fallbackPlacements:["bottom","top"]}}]}),C(o).classList.add("mdc-tooltip--shown")):i&&(i.destroy(),i=null,C(o).classList.remove("mdc-tooltip--shown")))}),b(function(){var e;null===(e=i)||void 0===e||e.destroy()});var n=gt(),r=k(n),a=k(r);I(a,function(){return c.text}),y(n,function(e){return A(o,e)},function(){return C(o)}),x(e,n),S()}(se(ce,2),{}),D(function(){De(G,C(p)),De(_,C(a)),De(X,C(h))}),Ne(G,"clientWidth",function(e){return A(l,e)}),x(e,z),S()}var Tc=T('<div id="bgm-player" style="display:none"></div> <!> <!>',1);void 0===window.ResizeObserver&&(window.ResizeObserver=vt),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){t.appendChild(e instanceof Node?e:document.createTextNode(String(e)))}),this.appendChild(t)}})}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("before")||Object.defineProperty(e,"before",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){t.appendChild(e instanceof Node?e:document.createTextNode(String(e)))}),this.parentNode.insertBefore(t,this)}})}),"function"!=typeof queueMicrotask&&(window.queueMicrotask=function(e){Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e},0)})});var Ic=function(e){e.preventDefault(),e.returnValue=""};window.addEventListener?window.addEventListener("beforeunload",Ic):window.onbeforeunload=Ic,ft(function(e,o){var i,n,r;u(o,!0);var a,c="<div>Loading</div>";function s(){var e=localStorage.getItem("theme"),t=document.head.querySelector("#theme-dark"),o=document.head.querySelector("#theme-light"),i=function(){if(!window.matchMedia)return!1;try{return"not all"!==window.matchMedia("(prefers-color-scheme: dark)").media}catch(ht){return!1}}();"dark"===e?i?(t&&(t.media="screen and (prefers-color-scheme: light)"),o&&(o.media="screen and (prefers-color-scheme: dark)"),Xt.value="dark"):(t&&(t.media="all"),o&&(o.media="not all")):i||(o&&(o.media="all"),t&&(t.media="not all"))}function d(e){return f.apply(this,arguments)}function f(){return(f=v(l().m(function e(o){var i,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:i=Array.from(o),r=l().m(function e(){var t,o;return l().w(function(e){for(;;)switch(e.n){case 0:return t=i[a],e.p=1,e.n=2,new Promise(function(e,o){var i=new Image;i.onload=e,i.onerror=o,i.src=t});case 2:e.n=4;break;case 3:e.p=3,o=e.v,console.error(o);case 4:return e.p=4,n&&(n.innerHTML="<div>Images</div><div>".concat(a," / ").concat(i.length,"</div>")),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}),a=0;case 1:if(!(a<i.length)){e.n=3;break}return e.d(t(r()),2);case 2:a++,e.n=1;break;case 3:return e.a(2)}},e)}))).apply(this,arguments)}function g(){return p.apply(this,arguments)}function p(){return(p=v(l().m(function e(){var t,o;return l().w(function(e){for(;;)switch(e.n){case 0:if(!lo.value){e.n=4;break}return t="Your browser does not support the .avif format.\n Avif images may not be displayed.",e.p=1,e.n=2,new Promise(function(e,t){var o=new Image;o.onload=e,o.onerror=t,o.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="});case 2:e.n=4;break;case 3:e.p=3,o=e.v,console.error(o),oo.labelText=t,oo.isOpen=!0;case 4:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function h(){return h=v(l().m(function e(){var t,o,a,s,u,f,m,p,h,b,w,T,I,y,x;return l().w(function(e){for(;;)switch(e.n){case 0:if(i=document.getElementById("lm"),r=document.getElementById("projectSize"),n=document.getElementById("indicator"),t=r?parseInt(r.innerHTML):0,o=n?n.className:"",n&&(c=n.innerHTML),i&&(i.style.pointerEvents="none"),"function"!=typeof window.fetch){e.n=14;break}return e.p=1,e.n=2,fetch("project.json");case 2:if(!(a=e.v)||!a.body){e.n=10;break}s=a.body.getReader(),u=new TextDecoder,f=0,m="";case 3:return e.n=4,s.read();case 4:if(p=e.v,h=p.done,b=p.value,!h){e.n=5;break}return e.a(3,6);case 5:f+=b.length,m+=u.decode(b,{stream:!0}),n&&(n.innerHTML="ind2"===o&&t>0?"".concat(c,"<div>").concat((f/t*100).toFixed(1)," %</div>"):"ind3"===o&&t>0?"".concat(c,"<div>").concat((f/1e6).toFixed(1),"/").concat((t/1e6).toFixed(1)," MB</div>"):"".concat(c,"<div>").concat((f/1e6).toFixed(1)," MB</div>")),e.n=3;break;case 6:if(i&&(i.style.height="0"),w=JSON.parse(m),T=Fi(w),!(I=ki.safeParse(T)).success){e.n=9;break}if(Di(I.data),!(app.preloadExternalImages&&co.size>0)){e.n=7;break}return e.n=7,d(co);case 7:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){i&&(i.style.height="",i.style.opacity="1",i.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=8,g();case 8:e.n=10;break;case 9:oo.labelText="Failed to load data.",oo.isOpen=!0,console.error(I.error);case 10:e.n=13;break;case 11:if(e.p=11,x=e.v,console.error(x),i&&(i.style.height="0"),Di(JSON.parse(JSON.stringify(app))),!(app.preloadExternalImages&&co.size>0)){e.n=12;break}return e.n=12,d(co);case 12:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){i&&(i.style.height="",i.style.opacity="1",i.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=13,g();case 13:e.n=15;break;case 14:(y=new XMLHttpRequest).open("GET","project.json",!0),y.onprogress=function(e){n&&(n.innerHTML="ind2"===o&&t>0?"".concat(c,"<div>").concat((e.loaded/t*100).toFixed(1)," %</div>"):"ind3"===o&&t>0?"".concat(c,"<div>").concat((e.loaded/1e6).toFixed(1),"/").concat((t/1e6).toFixed(1)," MB</div>"):"".concat(c,"<div>").concat((e.loaded/1e6).toFixed(1)," MB</div>"))},y.onload=v(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:if(i&&(i.style.height="0"),200!==y.status){e.n=2;break}if(Di(JSON.parse(y.responseText)),!(app.preloadExternalImages&&app.externalImages.size>0)){e.n=1;break}return e.n=1,d(app.externalImages);case 1:e.n=3;break;case 2:Di(JSON.parse(JSON.stringify(app)));case 3:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){i&&(i.style.height="",i.style.opacity="1",i.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=4,g();case 4:return e.a(2)}},e)})),y.send();case 15:return e.a(2)}},e,null,[[1,11]])})),h.apply(this,arguments)}m(function(){oo.isOpen&&(a.close(),a.open(),oo.isOpen=!1)}),F(function(){window.debugApp=app,s(),function(){To.apply(this,arguments)}(),function(){h.apply(this,arguments)}(),b(function(){Qt.update(function(e){return null==e||e.destroy(),null})})});var w=Tc(),T=se(Y(w),2);wc(T,{});var I=se(T,2);y(ut(I,{get labelText(){return oo.labelText},get timeoutMs(){return oo.timeoutMs},children:function(e,t){Oe(e,{class:"text-center"})},$$slots:{default:!0}}),function(e){return a=e},function(){return a}),x(e,w),S()},{target:document.getElementById("app")})}}})}();
