var e=Object.defineProperty,t=(t,o,i)=>((t,o,i)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i)(t,"symbol"!=typeof o?o+"":o,i);import{p as o,a as i,u as r,o as n,f as l,h as a,b as s,c as d,d as c,g as u,s as g,e as m,i as p,j as h,k as v,l as f,m as b,n as w,S as I,q as T,r as y,t as x,w as C,v as $,x as B,C as S,y as O,z as A,A as R,B as M,D as k,E as F,F as j,G as D,H as P,I as q,J as V,K as L,M as N,L as U,N as E,O as W,P as z,Q as G,R as H,T as _,U as Y,V as X,W as Z,X as J,Y as K,Z as Q,_ as ee,$ as te,a0 as oe,a1 as ie,a2 as re,a3 as ne,a4 as le,a5 as ae,a6 as se,a7 as de,a8 as ce,a9 as ue,aa as ge,ab as me,ac as pe,ad as he,ae as ve,af as fe,ag as be,ah as we,ai as Ie,aj as Te,ak as ye,al as xe,am as Ce,an as $e,ao as Be,ap as Se,aq as Oe,ar as Ae,as as Re,at as Me,au as ke,av as Fe,aw as je,ax as De,ay as Pe,az as qe,aA as Ve,aB as Le,aC as Ne,aD as Ue,aE as Ee,aF as We,aG as ze,aH as Ge,aI as He,aJ as _e,aK as Ye,aL as Xe,aM as Ze}from"./chunk-vendors.59af3576.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Je=o({anchor:null,text:"",isVisible:!0});var Ke=l('<div class="mdc-tooltip" role="tooltip" style="z-index: 9999;"><div class="mdc-tooltip__surface"><!></div></div>');var Qe=l("<div><!></div>");const et=function(e,t){i(t,!0);let o,r=v(t,"text",3,"");function n(){Je.anchor=o,Je.text=r(),Je.isVisible=!0}function l(){Je.isVisible=!1}f(()=>(o.addEventListener("mouseenter",n),o.addEventListener("mouseleave",l),o.addEventListener("focusin",n),o.addEventListener("focusout",l),()=>{o.removeEventListener("mouseenter",n),o.removeEventListener("mouseleave",l),o.removeEventListener("focusin",n),o.removeEventListener("focusout",l)}));var a=Qe(),u=h(a);b(u,()=>t.children??w),s(a,e=>o=e,()=>o),d(e,a),c()};
/*!
 * canvas-size
 * v2.0.0
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function tt(e){const t=e.sizes.shift(),o=Math.max(Math.ceil(t[0]),1),i=Math.max(Math.ceil(t[1]),1),r=[o-1,i-1,1,1],n=performance.now(),l="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;let a,s;l?(a=new OffscreenCanvas(1,1),s=new OffscreenCanvas(o,i)):(a=document.createElement("canvas"),a.width=1,a.height=1,s=document.createElement("canvas"),s.width=o,s.height=i);const d=a.getContext("2d"),c=s.getContext("2d");c&&(c.fillRect.apply(c,r),d.drawImage(s,o-1,i-1,1,1,0,0,1,1));const u=d&&0!==d.getImageData(0,0,1,1).data[3],g=parseInt(performance.now()-n);return[a,s].forEach(e=>{e.height=0,e.width=0}),l?(postMessage({width:o,height:i,testTime:g,isTestPass:u}),!u&&e.sizes.length&&setTimeout(()=>{tt(e)},0)):u?e.onSuccess({width:o,height:i,testTime:g}):(e.onError({width:o,height:i,testTime:g}),e.sizes.length&&setTimeout(()=>{tt(e)},0)),u}const ot={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},it={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},rt={};function nt(e){const t=e.width===e.height,o=1===e.height,i=1===e.width,r=[];if(e.width&&e.height){const n=e.min||it.min,l=e.step||it.step;let a=Math.max(e.width,e.height);for(;a>=n;){const e=t||o?a:1,n=t||i?a:1;r.push([e,n]),a-=l}}else e.sizes.forEach(e=>{const n=t||o?e:1,l=t||i?e:1;r.push([n,l])});return r}function lt(e){const t="undefined"!=typeof window,o=t&&"Promise"in window,i=t&&"HTMLCanvasElement"in window,r=t&&"OffscreenCanvas"in window,n=URL.createObjectURL(new Blob([])).slice(-36),l=performance.now(),{onError:a,onSuccess:s,...d}=e,c=()=>parseInt(performance.now()-l);let u=null;if(!i)return!1;if(e.useWorker&&r){const e=`\n            var canvasTest = ${tt.toString()};\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        `,t=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(t);u=new Worker(o),URL.revokeObjectURL(o),u.onmessage=function(e){const{width:t,height:o,testTime:i,isTestPass:r}=e.data,l={width:t,height:o,testTime:i,totalTime:c()};r?(rt[n].onSuccess(l),delete rt[n]):rt[n].onError(l)}}return o?new Promise(t=>{const o={...e,onError(o){let{width:i,height:r,testTime:n}=o;const l={width:i,height:r,testTime:n,totalTime:c()};let s;if(0===e.sizes.length)s=!0;else{const[[t,o]]=e.sizes.slice(-1);s=i===t&&r===o}a(l),s&&t({...l,success:!1})},onSuccess(e){let{width:o,height:i,testTime:r}=e;const n={width:o,height:i,testTime:r,totalTime:c()};s(n),t({...n,success:!0})}};if(u){const{onError:e,onSuccess:t}=o;rt[n]={onError:e,onSuccess:t},u.postMessage(d)}else tt(o)}):u?(rt[n]={onError:a,onSuccess:s},void u.postMessage(d)):tt(e)}const at={maxArea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=nt({width:e.max,height:e.max,min:e.min,step:e.step,sizes:[...ot.area]});return lt({...it,...e,sizes:t})},maxHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=nt({width:1,height:e.max,min:e.min,step:e.step,sizes:[...ot.height]});return lt({...it,...e,sizes:t})},maxWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=nt({width:e.max,height:1,min:e.min,step:e.step,sizes:[...ot.width]});return lt({...it,...e,sizes:t})},test(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...it,...e};return t.sizes=[...t.sizes],t.width&&t.height&&(t.sizes=[[t.width,t.height]]),lt(t)}},st="2.0.0-beta",dt={selFilterBlurIsOn:!1,selFilterBlur:0,selFilterBrightIsOn:!1,selFilterBright:100,selFilterContIsOn:!1,selFilterCont:100,selFilterGrayIsOn:!1,selFilterGray:0,selFilterHueIsOn:!1,selFilterHue:0,selFilterInvertIsOn:!1,selFilterInvert:0,selFilterOpacIsOn:!1,selFilterOpac:100,selFilterSaturIsOn:!1,selFilterSatur:1,selFilterSepiaIsOn:!1,selFilterSepia:0,selBgColorIsOn:!0,selOverlayOnImage:!1,selFilterBgColor:"#70FF7EFF",selBorderColorIsOn:!1,selFilterBorderColor:"#000000FF",selCTitleColorIsOn:!1,selFilterCTitleColor:"#000000FF",selCTextColorIsOn:!1,selFilterCTextColor:"#000000FF",selATitleColorIsOn:!1,selFilterATitleColor:"#000000FF",selATextColorIsOn:!1,selFilterATextColor:"#000000FF",selScoreTextColorIsOn:!1,selFilterSTextColor:"#000000FF",reqFilterBlurIsOn:!1,reqFilterBlur:0,reqFilterBrightIsOn:!1,reqFilterBright:100,reqFilterContIsOn:!1,reqFilterCont:100,reqFilterGrayIsOn:!1,reqFilterGray:0,reqFilterHueIsOn:!1,reqFilterHue:0,reqFilterInvertIsOn:!1,reqFilterInvert:0,reqFilterOpacIsOn:!0,reqFilterOpac:50,reqFilterSaturIsOn:!1,reqFilterSatur:1,reqFilterSepiaIsOn:!1,reqFilterSepia:0,reqBgColorIsOn:!1,reqOverlayOnImage:!1,reqFilterBgColor:"#FFFFFFFF",reqBorderColorIsOn:!1,reqFilterBorderColor:"#000000FF",reqCTitleColorIsOn:!1,reqFilterCTitleColor:"#000000FF",reqCTextColorIsOn:!1,reqFilterCTextColor:"#000000FF",reqATitleColorIsOn:!1,reqFilterATitleColor:"#000000FF",reqATextColorIsOn:!1,reqFilterATextColor:"#000000FF",reqScoreTextColorIsOn:!1,reqFilterSTextColor:"#000000FF",reqFilterVisibleIsOn:!1,unselFilterBlurIsOn:!1,unselFilterBlur:0,unselFilterBrightIsOn:!1,unselFilterBright:100,unselFilterContIsOn:!1,unselFilterCont:100,unselFilterGrayIsOn:!1,unselFilterGray:0,unselFilterHueIsOn:!1,unselFilterHue:0,unselFilterInvertIsOn:!1,unselFilterInvert:0,unselFilterOpacIsOn:!1,unselFilterOpac:100,unselFilterSaturIsOn:!1,unselFilterSatur:1,unselFilterSepiaIsOn:!1,unselFilterSepia:0},ct={customRowTitle:!1,rowTitle:"Times New Roman",customRowText:!1,rowText:"Times New Roman",customObjectTitle:!1,objectTitle:"Times New Roman",customObjectText:!1,objectText:"Times New Roman",customAddonTitle:!1,addonTitle:"Times New Roman",customAddonText:!1,addonText:"Times New Roman",customScoreText:!1,scoreText:"Times New Roman",rowTitleTextSize:200,rowTextTextSize:100,objectTitleTextSize:200,objectTextTextSize:100,addonTitleTextSize:200,addonTextTextSize:100,scoreTextSize:75,rowTitleColor:"#000000",rowTextColor:"#000000",objectTitleColor:"#000000",objectTextColor:"#000000",addonTitleColor:"#000000",addonTextColor:"#000000",scoreTextColor:"#000000",rowTitleAlign:"center",rowTextAlign:"center",objectTitleAlign:"center",objectTextAlign:"center",addonTitleAlign:"center",addonTextAlign:"center",scoreTextAlign:"center"},ut={objectImgBorderStyle:"solid",objectImgBorderWidth:2,objectImageWidth:100,objectImageMarginTop:0,objectImageMarginBottom:0,objectImgBorderRadiusTopLeft:0,objectImgBorderRadiusTopRight:0,objectImgBorderRadiusBottomRight:0,objectImgBorderRadiusBottomLeft:0,objectImgBorderRadiusIsPixels:!0,objectImgBorderIsOn:!1,objectImgOverflowIsOn:!1,objectImgBorderColor:"red",objectImgObjectFillStyle:"",objectImgObjectFillIsOn:!1,objectImageBoxWidth:50},gt={rowImgBorderStyle:"solid",rowImgBorderWidth:2,rowImageWidth:100,rowImageMarginTop:0,rowImageMarginBottom:0,rowImgBorderRadiusTopLeft:0,rowImgBorderRadiusTopRight:0,rowImgBorderRadiusBottomRight:0,rowImgBorderRadiusBottomLeft:0,rowImgBorderRadiusIsPixels:!0,rowImgBorderIsOn:!1,rowImgOverflowIsOn:!1,rowImgBorderColor:"red",rowImageBoxWidth:50},mt={useAddonImage:!1,addonImgBorderStyle:"solid",addonImgBorderWidth:2,addonImageWidth:100,addonImageMarginTop:0,addonImageMarginBottom:0,addonImgBorderRadiusTopLeft:0,addonImgBorderRadiusTopRight:0,addonImgBorderRadiusBottomRight:0,addonImgBorderRadiusBottomLeft:0,addonImgBorderRadiusIsPixels:!0,addonImgBorderIsOn:!1,addonImgOverflowIsOn:!1,addonImgBorderColor:"red",addonImgObjectFillStyle:"",addonImgObjectFillIsOn:!1,addonImageBoxWidth:50},pt={bgColorIsOn:!1,backgroundColor:"#FFFFFFFF",rowBgColorIsOn:!1,rowBgColor:"#FFFFFFFF",objectBgColorIsOn:!1,objectBgColor:"#FFFFFFFF",isBackgroundRepeat:!1,isBackgroundFitIn:!1,backgroundImage:"",isRowBackgroundRepeat:!1,isRowBackgroundFitIn:!1,rowBackgroundImage:"",isObjectBackgroundRepeat:!1,isObjectBackgroundFitIn:!1,objectBackgroundImage:""},ht={objectHeight:!0,objectDesignIsAdvanced:!1,objectMargin:10,objectTextPadding:10,objectBorderStyle:"solid",objectBorderWidth:2,objectBorderIsOn:!1,objectDropShadowH:0,objectDropShadowV:0,objectDropShadowBlur:0,objectDropShadowSpread:0,objectDropShadowIsOn:!1,objectUseBoxShadowIsOn:!1,objectBorderRadiusTopLeft:0,objectBorderRadiusTopRight:0,objectBorderRadiusBottomRight:0,objectBorderRadiusBottomLeft:0,objectBorderRadiusIsPixels:!0,objectOverflowIsOn:!0,objectDropShadowColor:"grey",objectGradientIsOn:!1,objectGradient:"",objectGradientOnSelect:"",objectGradientOnReq:"",objectBorderColor:"red",objectBorderImage:"",objectBorderImageRepeat:"stretch",objectBorderImageWidth:5,objectBorderImageSliceTop:5,objectBorderImageSliceBottom:5,objectBorderImageSliceLeft:5,objectBorderImageSliceRight:5,removeSpaceAddonIsOn:!1,titlePaddingIsOn:!1},vt={rowDesignIsAdvanced:!1,rowMargin:10,rowBodyMarginSides:1,rowBodyMarginTop:25,rowBodyMarginBottom:25,rowTextPaddingY:5,rowTextPaddingX:10,rowOverflowIsOn:!0,rowDropShadowH:0,rowDropShadowV:0,rowDropShadowBlur:0,rowDropShadowSpread:0,rowDropShadowColor:"grey",rowButtonXPadding:0,rowButtonYPadding:0,rowDropShadowIsOn:!1,rowUseBoxShadowIsOn:!1,rowBorderRadiusTopLeft:0,rowBorderRadiusTopRight:0,rowBorderRadiusBottomRight:0,rowBorderRadiusBottomLeft:0,rowBorderRadiusIsPixels:!0,rowBorderStyle:"solid",rowBorderWidth:2,rowBorderIsOn:!1,rowBorderColor:"red",rowGradientIsOn:!1,rowGradient:"",rowBorderImage:"",rowBorderImageRepeat:"stretch",rowBorderImageWidth:5,rowBorderImageSliceTop:5,rowBorderImageSliceBottom:5,rowBorderImageSliceLeft:5,rowBorderImageSliceRight:5},ft={useAddonDesign:!1,addonDesignIsAdvanced:!1,addonMargin:10,addonTextPadding:10,addonBorderStyle:"solid",addonBorderWidth:2,addonBorderIsOn:!1,addonDropShadowH:0,addonDropShadowV:0,addonDropShadowBlur:0,addonDropShadowSpread:0,addonDropShadowIsOn:!1,addonUseBoxShadowIsOn:!1,addonBorderRadiusTopLeft:0,addonBorderRadiusTopRight:0,addonBorderRadiusBottomRight:0,addonBorderRadiusBottomLeft:0,addonBorderRadiusIsPixels:!0,addonOverflowIsOn:!0,addonDropShadowColor:"grey",addonGradientIsOn:!1,addonGradient:"",addonGradientOnSelect:"",addonGradientOnReq:"",addonBorderColor:"red",addonBorderImage:"",addonBorderImageRepeat:"stretch",addonBorderImageWidth:5,addonBorderImageSliceTop:5,addonBorderImageSliceBottom:5,addonBorderImageSliceLeft:5,addonBorderImageSliceRight:5,removeSpaceAddonIsOn:!1,useAddonBackgroundImage:!1,addonBackgroundImage:"",isAddonBackgroundFitIn:!1,isAddonBackgroundRepeat:!1,addonBgColorIsOn:!1,addonBgColor:"#FFFFFFFF",addonTitlePaddingIsOn:!1},bt={customMultiTextFont:!1,multiChoiceCounterPosition:0,multiChoiceCounterSize:170,multiChoiceTextFont:"Times New Roman",multiChoiceTextSize:100},wt={barTextPadding:17,barTextMargin:0,customBarTextFont:!1,barTextFont:"Times New Roman",barPadding:0,barMargin:0,barTextSize:15,barTextColor:"#000000",barPointPos:"#FF0000FF",barPointNeg:"#FF0000FF",barIconColor:"#0000008A",barBackgroundColor:"#FFFFFFFF"},It={useBackpackDesign:!1,backpackBgColor:"#FFFFFF",isBackpackBgRepeat:!1,isBackpackBgFitIn:!1,backpackBgImage:"",backPackWidth:1200},app=o({version:st,isEditModeOnAll:!0,isStyleOpen:!1,isPointsOpen:!1,isChoicesOpen:!1,isDesignOpen:!1,isFadingOut:!1,isPointerCursor:!1,importedChoicesIsOpen:!0,curBgmTime:0,curBgmLength:0,curVolume:100,isSeeking:!1,isMute:!1,lastFadeTime:0,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,tmpRequired:[],rowIdLength:4,objectIdLength:4,words:[],wordChangeComplete:!1,groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,checkDeleteRow:!0,checkDeleteObject:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:{...dt,...ct,...ut,...gt,...mt,...pt,...ht,...vt,...ft,...bt,...wt,...It}}),Tt={version:st,isEditModeOnAll:!0,isStyleOpen:!1,isPointsOpen:!1,isChoicesOpen:!1,isDesignOpen:!1,isFadingOut:!1,isPointerCursor:!1,importedChoicesIsOpen:!0,curBgmTime:0,curBgmLength:0,curVolume:100,isSeeking:!1,isMute:!1,lastFadeTime:0,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,tmpRequired:[],rowIdLength:4,objectIdLength:4,words:[],wordChangeComplete:!1,groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,checkDeleteRow:!0,checkDeleteObject:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:{...dt,...ct,...ut,...gt,...mt,...pt,...ht,...vt,...ft,...bt,...wt,...It}},yt=o(new I),xt=o(new I),Ct=o(new I),$t=o(new I),Bt=o(new I),St=o(new I),Ot=o(new I),At=o(new I),Rt=o(new I),Mt=o(new I),kt=o(new I),Ft=o(new I),jt=o([]),Dt=o({value:"light"}),Pt={ALLOWED_TAGS:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","font","iframe","img"]},qt=C(null),Vt=o({isBgmInit:!1,bgmIsPlaying:!1,bgmPlayInterval:0,bgmTitleInterval:0,bgmFadeInterval:0,bgmFadeTimer:0,bgmTitle:"No Audio Title",curBgmTime:0,curBgmLength:0,isSeeking:!1,lastFadeTime:0,isFadingOut:!1,bgmObjectId:""}),Lt=o({currentDialog:"none"}),Nt=o({labelText:"",timeoutMs:4e3,isOpen:!1}),Ut=o({stored:!1,name:"Auto Save",time:"",app:""}),Et=o(Array.from({length:99},(e,t)=>({stored:!1,name:`Slot ${t+1}`,time:"",app:""})));o({backgroundColor:"",backgroundImage:"",barBgColor:""});const Wt=new Set,zt={value:!1};let Gt=null;function Ht(){return new Promise((e,t)=>{if(Gt)return e(Gt);const o=indexedDB.open("cyoaDB",2);o.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore")},o.onsuccess=t=>{Gt=t.target.result,e(Gt)},o.onerror=e=>{t(e)}})}let _t=null;function Yt(e,t){return new Promise((o,i)=>{const r=setTimeout(()=>o(),e);t&&t.addEventListener("abort",()=>{clearTimeout(r),i(new DOMException("Aborted","AbortError"))})})}async function Xt(){const e=new AbortController;_t=e;const t=`${location.pathname.replace(/\/index\.html$/,"/")}autoSave`;for(;app.buildAutoSaveIsOn;){try{await Yt(1e3*app.buildAutoSaveInterval*60,e.signal)}catch(o){break}if(!app.buildAutoSaveIsOn)break;const i=(await Ht()).transaction("buildStore","readwrite").objectStore("buildStore"),r=navigator.language,n=new Date,l=new Intl.DateTimeFormat(r,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(n),a={stored:!0,name:"Auto Save",time:l,app:Zt()};try{await new Promise((e,o)=>{const r=i.put(a,t);r.onsuccess=()=>e(),r.onerror=()=>o(r.error)}),Ut.stored=!0,Ut.time=l,Ut.app=a.app,Nt.labelText="Auto-save completed successfully.",Nt.isOpen=!0}catch(o){console.log(o)}}}function Zt(){let e=[];return Array.from(yt.entries()).forEach(([t,o])=>{let i=Bt.get(t);if(void 0!==i){const r=i.choice;let n=t;0===o.multiple?(r.isActivateRandom&&void 0!==r.activatedRandom&&r.activatedRandom.length>0&&(n+=`/RND#${r.activatedRandom.join("/AND#").replaceAll("/ON#","/RON#")}`),r.textfieldIsOn&&r.customTextfieldIsOn&&void 0!==r.wordChangeSelect&&(n+=`/WORD#${r.wordChangeSelect.replaceAll(",","/CHAR#")}`),r.isImageUpload&&r.image!==r.defaultImage&&(n+=`/IMG#${r.image.replaceAll(",","/CHAR#")}`),e.push(n)):(n+=`/ON#${o.multiple}`,r.isActivateRandom&&void 0!==r.activatedRandomMul&&r.activatedRandomMul.length>0&&(n+=`/RND#${r.activatedRandomMul.flat(2).join("/AND#").replaceAll("/ON#","/RON#")}`),e.push(n))}}),e.join(",")}function Jt(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}_${String(e.getHours()).padStart(2,"0")}-${String(e.getMinutes()).padStart(2,"0")}-${String(e.getSeconds()).padStart(2,"0")}`}function Kt(e,t){let o="row-",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<t;r++)o+=i.charAt(Math.floor(36*Math.random()));return $t.has(o)?e>2?Kt(0,++t):Kt(++e,t):o}function Qt(e,t){let o="word-",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<t;r++)o+=i.charAt(Math.floor(36*Math.random()));return At.has(o)?e>2?Qt(0,++t):Qt(++e,t):o}function eo(e,t){let o="choice-",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<t;r++)o+=i.charAt(Math.floor(36*Math.random()));return Bt.has(o)?e>2?eo(0,++t):eo(++e,t):o}function to(e,t,o){let i="design-",r="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)i+=r.charAt(Math.floor(36*Math.random()));return(o?kt.has(i):Ft.has(i))?e>2?to(0,++t,o):to(++e,t,o):i}function oo(e,t){let o="group-",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<t;r++)o+=i.charAt(Math.floor(36*Math.random()));return St.has(o)?e>2?oo(0,++t):oo(++e,t):o}function io(e,t){let o="point-",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<t;r++)o+=i.charAt(Math.floor(36*Math.random()));return Ct.has(o)?e>2?io(0,++t):io(++e,t):o}function ro(e,t){let o="variable-",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<t;r++)o+=i.charAt(Math.floor(36*Math.random()));return Rt.has(o)?e>2?ro(0,++t):ro(++e,t):o}function no(e){let t=e;if(app.words){const e=new RegExp(app.words.map(e=>e.id.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")).join("|"),"g");t=t.replace(e,e=>{var t,o;if(Ct.has(e)){let o=null==(t=Ct.get(e))?void 0:t.startingSum;if(void 0!==o)return o.toString()}else if(Mt.has(e)){let t=Mt.get(e);if(void 0!==t)return t.toString()}else if(At.has(e)){let t=null==(o=At.get(e))?void 0:o.replaceText;if(void 0!==t)return t}return e})}return t}function lo(e,t,o){if(void 0!==o){if(void 0!==o.styling&&o.isPrivateStyling&&o[e])return o.styling;if(void 0!==app.objectDesignGroups&&o.objectDesignGroups)for(let t=0;t<o.objectDesignGroups.length;t++){let i=Ft.get(o.objectDesignGroups[t]);if(void 0!==i&&i[e]){let e=i.activatedId,t=Ot.get(e);if(""===e||so(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==t&&co(t.requireds))return i.styling}}}if(void 0!==t){if(void 0!==t.styling&&t.isPrivateStyling&&t[e])return t.styling;if(void 0!==app.rowDesignGroups&&t.rowDesignGroups)for(let o=0;o<t.rowDesignGroups.length;o++){let i=kt.get(t.rowDesignGroups[o]);if(void 0!==i&&i[e]){let e=i.activatedId,t=Ot.get(e);if(""===e||so(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==t&&co(t.requireds))return i.styling}}}return app.styling}function ao(e,t){if(t.has(e)){return ao(`${e}_dup`,t)}return e}function so(e,t){var o;const[i,r="0"]=e.split("/ON#"),n=parseInt(r),l=t??yt;if(n>0){return((null==(o=l.get(i))?void 0:o.multiple)??0)>=n}return l.has(i)}function co(e,t){let o=!0;if(void 0!==e){let i=function(o){const i=e[o],r=t??yt;if(i.required)switch(i.type){case"id":return so(i.reqId,r);case"points":const e=Ct.get(i.reqId);if(void 0!==e){if(void 0===i.operator)return e.startingSum>i.reqPoints;switch(i.operator){case"1":return e.startingSum>i.reqPoints;case"2":return e.startingSum>=i.reqPoints;case"3":return e.startingSum==i.reqPoints;case"4":return e.startingSum<=i.reqPoints;case"5":return e.startingSum<i.reqPoints}}return!1;case"or":let t=void 0===i.orNum?1:i.orNum,o=0;for(let u=0;u<i.orRequired.length;u++){let e=i.orRequired[u].req;void 0!==e&&so(e,r)&&o++}return o>=t;case"pointCompare":const n=Ct.get(i.reqId),l=Ct.get(i.reqId1);if(void 0!==n&&void 0!==l){let e=l.startingSum;if(i.more)for(let t=0;t<i.more.length;t++){let o=0,r=i.more[t].id,n=i.more[t].points;if(void 0!==r){let e=Ct.get(r);void 0!==e&&(o=e.startingSum)}else void 0!==n&&(o=n);switch(i.more[t].operator){case"1":e+=o;break;case"2":e-=o;break;case"3":e*=o;break;case"4":e/=o;break;case"5":e%=o}}switch(i.operator){case"1":return n.startingSum>e;case"2":return n.startingSum>=e;case"3":return n.startingSum==e;case"4":return n.startingSum<=e;case"5":return n.startingSum<e;default:return!1}}return!1;case"selFromGroups":if(i.selGroups){let e=0,t=void 0===i.selFromOperators?"1":i.selFromOperators,o=void 0===i.selNum?1:i.selNum;for(let r=0;r<i.selGroups.length;r++){const t=St.get(i.selGroups[r]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++)yt.has(o[t])&&e++}}switch(t){case"1":return!(o>e||0===o&&e>0);case"2":return o===e;case"3":return!(o<e||0===o&&e>0);default:return!1}}case"selFromRows":if(i.selRows){let e=0,t=void 0===i.selFromOperators?"1":i.selFromOperators,o=void 0===i.selNum?1:i.selNum;for(let r=0;r<i.selRows.length;r++){const t=$t.get(i.selRows[r]);void 0!==t&&(e+=t.currentChoices)}switch(t){case"1":return!(o>e||0===o&&e>0);case"2":return o===e;case"3":return!(o<e||0===o&&e>0);default:return!1}}case"selFromWhole":let a=0,s=void 0===i.selFromOperators?"1":i.selFromOperators,d=void 0===i.selNum?1:i.selNum;for(let i=0;i<app.rows.length;i++)a+=app.rows[i].currentChoices;switch(s){case"1":return!(d>a||0===d&&a>0);case"2":return d===a;case"3":return!(d<a||0===d&&a>0);default:return!1}case"gid":const c=Ot.get(i.reqId);return void 0!==c&&void 0!==app.globalRequirements&&co(c.requireds,r)}else switch(i.type){case"id":return!so(i.reqId,r);case"or":let e=void 0===i.orNum?1:i.orNum,t=0;for(let n=0;n<i.orRequired.length;n++){let e=i.orRequired[n].req;void 0!==e&&so(e,r)&&t++}return e>t;case"gid":const o=Ot.get(i.reqId);return void 0!==o&&void 0!==app.globalRequirements&&!co(o.requireds,r)}return!1};for(let t=0;t<e.length;t++)o=o&&i(t)}return o}function uo(e,t,o,i){function r(){let r=0,n=0,l=0;if(o&&(i.loadVideoById(t),e.bgmNoLoop?i.setLoop(!1):(i.loadPlaylist(t),i.setLoop(!0))),e.bgmFadeIn&&void 0!==e.bgmFadeInSec&&e.bgmFadeInSec>0){const t=e.bgmFadeInSec/20;Vt.lastFadeTime=e.bgmFadeInSec,i.setVolume(0),i.playVideo(),0!==Vt.bgmFadeInterval&&(window.clearInterval(Vt.bgmFadeInterval),Vt.bgmFadeInterval=0),0!==Vt.bgmPlayInterval&&(window.clearInterval(Vt.bgmPlayInterval),Vt.bgmPlayInterval=0),Vt.isFadingOut&&(Vt.isFadingOut=!1),Vt.bgmFadeInterval=window.setInterval(()=>{1===i.getPlayerState()&&(r<app.curVolume?(r+=5,i.setVolume(r),Vt.lastFadeTime=Vt.lastFadeTime-t):(i.setVolume(app.curVolume),window.clearInterval(Vt.bgmFadeInterval),Vt.bgmFadeInterval=0,Vt.lastFadeTime=0))},t)}else Vt.isFadingOut&&(Vt.isFadingOut=!1,window.clearInterval(Vt.bgmFadeInterval),Vt.bgmFadeInterval=0),i.playVideo(),i.setVolume(app.curVolume);Vt.bgmObjectId=e.id,app.showMusicPlayer&&(0!==Vt.bgmTitleInterval&&(window.clearInterval(Vt.bgmTitleInterval),Vt.bgmTitleInterval=0),Vt.bgmTitleInterval=window.setInterval(()=>{if(void 0!==i.playerInfo.videoData){let e=i.playerInfo.videoData;e.video_id===t&&void 0!==e.title&&""!==e.title&&(Vt.bgmTitle=e.title,Vt.curBgmLength=i.getDuration(),window.clearInterval(Vt.bgmTitleInterval),Vt.bgmTitleInterval=0)}},1e3),0!==Vt.bgmPlayInterval&&(window.clearInterval(Vt.bgmPlayInterval),Vt.bgmPlayInterval=0),Vt.bgmPlayInterval=window.setInterval(()=>{if(void 0!==i.playerInfo.videoData&&!Vt.isSeeking&&1===i.getPlayerState()){const e=Math.floor(i.getCurrentTime());e!==Vt.curBgmTime?n!==e?Vt.curBgmTime=e:(l++,l>Vt.curBgmLength&&(l=1),Vt.curBgmTime=l):(n=e,l=e+1,Vt.curBgmTime=l)}},1e3))}if(Vt.isFadingOut){const e=Vt.lastFadeTime;0!==Vt.bgmFadeTimer&&(window.clearTimeout(Vt.bgmFadeTimer),Vt.bgmFadeTimer=0),Vt.bgmFadeTimer=window.setTimeout(()=>{r()},e)}else r()}function go(e,t){const o=app.curVolume/5;if(e.bgmFadeOut&&void 0!==e.bgmFadeOutSec&&e.bgmFadeOutSec>0&&o>0){const i=e.bgmFadeOutSec/o;let r=app.curVolume;Vt.lastFadeTime=e.bgmFadeOutSec,Vt.isFadingOut=!0,0!==Vt.bgmFadeInterval&&(window.clearInterval(Vt.bgmFadeInterval),Vt.bgmFadeInterval=0),Vt.bgmFadeInterval=window.setInterval(()=>{void 0!==t.setVolume&&(r>0?(r-=5,t.setVolume(r),Vt.lastFadeTime-=i):Vt.isFadingOut&&(t.pauseVideo(),t.setVolume(app.curVolume),window.clearInterval(Vt.bgmFadeInterval),Vt.bgmFadeInterval=0,Vt.lastFadeTime=0,Vt.isFadingOut=!1,0!==Vt.bgmTitleInterval&&(window.clearInterval(Vt.bgmTitleInterval),Vt.bgmTitleInterval=0),0!==Vt.bgmPlayInterval&&(window.clearInterval(Vt.bgmPlayInterval),Vt.bgmPlayInterval=0),Vt.bgmTitle="No Audio Title",Vt.curBgmTime=0,Vt.curBgmLength=0))},i)}else t.pauseVideo(),0!==Vt.bgmTitleInterval&&(window.clearInterval(Vt.bgmTitleInterval),Vt.bgmTitleInterval=0),0!==Vt.bgmPlayInterval&&(window.clearInterval(Vt.bgmPlayInterval),Vt.bgmPlayInterval=0),Vt.bgmTitle="No Audio Title",Vt.curBgmTime=0,Vt.curBgmLength=0}function mo(e,t,o){const i=$(qt);if(i&&void 0!==i.playerInfo.videoData){const o=Vt.bgmIsPlaying,r=i.playerInfo.videoData.video_id,n=i.getPlayerState();r===t?Vt.bgmObjectId===e.id?o?(2===n||i.stopVideo(),uo(e,t,!1,i)):go(e,i):o?(i.stopVideo(),uo(e,t,!1,i)):go(e,i):o&&uo(e,t,!0,i)}else o<10?window.setTimeout(()=>{mo(e,t,++o)},200):console.log("Failed to play bgm")}async function po(e){const t=new((await new Promise(e=>{if(window.YT&&window.YT.Player)e(window.YT);else{const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t),window.onYouTubeIframeAPIReady=()=>e(window.YT)}})).Player)("bgm-player",{width:0,height:0,events:{onReady:()=>{qt.set(t),mo(e,e.bgmId??"",0),app.isMute&&!t.isMuted()&&t.mute()}}})}function ho(e,t){void 0!==e&&(t&&(void 0!==e.addonBorderRadiusTopLeft&&(e.addonBorderRadiusTopLeft*=10),void 0!==e.addonBorderRadiusTopRight&&(e.addonBorderRadiusTopRight*=10),void 0!==e.addonBorderRadiusBottomLeft&&(e.addonBorderRadiusBottomLeft*=10),void 0!==e.addonBorderRadiusBottomRight&&(e.addonBorderRadiusBottomRight*=10),void 0!==e.addonImgBorderRadiusTopLeft&&(e.addonImgBorderRadiusTopLeft*=10),void 0!==e.addonImgBorderRadiusTopRight&&(e.addonImgBorderRadiusTopRight*=10),void 0!==e.addonImgBorderRadiusBottomLeft&&(e.addonImgBorderRadiusBottomLeft*=10),void 0!==e.addonImgBorderRadiusBottomRight&&(e.addonImgBorderRadiusBottomRight*=10),void 0!==e.objectBorderRadiusTopLeft&&(e.objectBorderRadiusTopLeft*=10),void 0!==e.objectBorderRadiusTopRight&&(e.objectBorderRadiusTopRight*=10),void 0!==e.objectBorderRadiusBottomLeft&&(e.objectBorderRadiusBottomLeft*=10),void 0!==e.objectBorderRadiusBottomRight&&(e.objectBorderRadiusBottomRight*=10),void 0!==e.objectImgBorderRadiusTopLeft&&(e.objectImgBorderRadiusTopLeft*=10),void 0!==e.objectImgBorderRadiusTopRight&&(e.objectImgBorderRadiusTopRight*=10),void 0!==e.objectImgBorderRadiusBottomLeft&&(e.objectImgBorderRadiusBottomLeft*=10),void 0!==e.objectImgBorderRadiusBottomRight&&(e.objectImgBorderRadiusBottomRight*=10),void 0!==e.rowBorderRadiusTopLeft&&(e.rowBorderRadiusTopLeft*=10),void 0!==e.rowBorderRadiusTopRight&&(e.rowBorderRadiusTopRight*=10),void 0!==e.rowBorderRadiusBottomLeft&&(e.rowBorderRadiusBottomLeft*=10),void 0!==e.rowBorderRadiusBottomRight&&(e.rowBorderRadiusBottomRight*=10),void 0!==e.rowImgBorderRadiusTopLeft&&(e.rowImgBorderRadiusTopLeft*=10),void 0!==e.rowImgBorderRadiusTopRight&&(e.rowImgBorderRadiusTopRight*=10),void 0!==e.rowImgBorderRadiusBottomLeft&&(e.rowImgBorderRadiusBottomLeft*=10),void 0!==e.rowImgBorderRadiusBottomRight&&(e.rowImgBorderRadiusBottomRight*=10)),"object"==typeof e.selFilterBgColor&&(e.selFilterBgColor=e.selFilterBgColor.hexa),"object"==typeof e.selFilterBorderColor&&(e.selFilterBorderColor=e.selFilterBorderColor.hexa),"object"==typeof e.selFilterCTitleColor&&(e.selFilterCTitleColor=e.selFilterCTitleColor.hexa),"object"==typeof e.selFilterCTextColor&&(e.selFilterCTextColor=e.selFilterCTextColor.hexa),"object"==typeof e.selFilterATitleColor&&(e.selFilterATitleColor=e.selFilterATitleColor.hexa),"object"==typeof e.selFilterATextColor&&(e.selFilterATextColor=e.selFilterATextColor.hexa),"object"==typeof e.selFilterSTextColor&&(e.selFilterSTextColor=e.selFilterSTextColor.hexa),"object"==typeof e.reqFilterBgColor&&(e.reqFilterBgColor=e.reqFilterBgColor.hexa),"object"==typeof e.reqFilterBorderColor&&(e.reqFilterBorderColor=e.reqFilterBorderColor.hexa),"object"==typeof e.reqFilterCTitleColor&&(e.reqFilterCTitleColor=e.reqFilterCTitleColor.hexa),"object"==typeof e.reqFilterCTextColor&&(e.reqFilterCTextColor=e.reqFilterCTextColor.hexa),"object"==typeof e.reqFilterATitleColor&&(e.reqFilterATitleColor=e.reqFilterATitleColor.hexa),"object"==typeof e.reqFilterATextColor&&(e.reqFilterATextColor=e.reqFilterATextColor.hexa),"object"==typeof e.reqFilterSTextColor&&(e.reqFilterSTextColor=e.reqFilterSTextColor.hexa),"object"==typeof e.rowTitleColor&&(e.rowTitleColor=e.rowTitleColor.hexa),"object"==typeof e.rowTextColor&&(e.rowTextColor=e.rowTextColor.hexa),"object"==typeof e.objectTitleColor&&(e.objectTitleColor=e.objectTitleColor.hexa),"object"==typeof e.objectTextColor&&(e.objectTextColor=e.objectTextColor.hexa),"object"==typeof e.addonTitleColor&&(e.addonTitleColor=e.addonTitleColor.hexa),"object"==typeof e.addonTextColor&&(e.addonTextColor=e.addonTextColor.hexa),"object"==typeof e.scoreTextColor&&(e.scoreTextColor=e.scoreTextColor.hexa),"object"==typeof e.objectImgBorderColor&&(e.objectImgBorderColor=e.objectImgBorderColor.hexa),"object"==typeof e.rowImgBorderColor&&(e.rowImgBorderColor=e.rowImgBorderColor.hexa),"object"==typeof e.addonImgBorderColor&&(e.addonImgBorderColor=e.addonImgBorderColor.hexa),"object"==typeof e.backgroundColor&&(e.backgroundColor=e.backgroundColor.hexa),"object"==typeof e.rowBgColor&&(e.rowBgColor=e.rowBgColor.hexa),"object"==typeof e.objectBgColor&&(e.objectBgColor=e.objectBgColor.hexa),"object"==typeof e.objectDropShadowColor&&(e.objectDropShadowColor=e.objectDropShadowColor.hexa),"object"==typeof e.objectBorderColor&&(e.objectBorderColor=e.objectBorderColor.hexa),"object"==typeof e.rowDropShadowColor&&(e.rowDropShadowColor=e.rowDropShadowColor.hexa),"object"==typeof e.rowBorderColor&&(e.rowBorderColor=e.rowBorderColor.hexa),"object"==typeof e.addonDropShadowColor&&(e.addonDropShadowColor=e.addonDropShadowColor.hexa),"object"==typeof e.addonBorderColor&&(e.addonBorderColor=e.addonBorderColor.hexa),"object"==typeof e.addonBgColor&&(e.addonBgColor=e.addonBgColor.hexa),"object"==typeof e.barTextColor&&(e.barTextColor=e.barTextColor.hexa),"object"==typeof e.barIconColor&&(e.barIconColor=e.barIconColor.hexa),"object"==typeof e.barBackgroundColor&&(e.barBackgroundColor=e.barBackgroundColor.hexa),"object"==typeof e.backpackBgColor&&(e.backpackBgColor=e.backpackBgColor.hexa),"object"==typeof e.barPointNeg&&(e.barPointNeg=e.barPointNeg.hexa),"object"==typeof e.barPointPos&&(e.barPointPos=e.barPointPos.hexa))}function vo(e,t,o){switch(t){case"1":return e-o;case"2":return e+o;case"3":return e*o;case"4":return e/o;default:return e}}function fo(e){delete e.tmpDiscount,delete e.discountTextA,delete e.discountTextB,delete e.dupTextA,delete e.dupTextB,delete e.discountedFrom,delete e.discountIsOn,delete e.discountScore,delete e.discountScoreCal,delete e.notStackableDiscount}function bo(e,t){var o,i,r,n,l,a,s,d;if(void 0!==e.discountOperator&&void 0!==e.discountValue){let c=t.value,u=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value,g=0,m=0,p=[],h=!1,v=0;if(e.stackableDiscount){if(t.notStackableDiscount){if(void 0!==t.tmpDiscount){for(let e=0;e<t.tmpDiscount.length;e++)t.tmpDiscount[e].isStackable&&(p=t.tmpDiscount[e].discountedFrom,c=t.tmpDiscount[e].discountedValue,v=e);t.tmpDiscount.splice(v,1)}}else if(void 0!==t.discountedFrom){let l=t.discountedFrom.indexOf(e.id);if(t.discountedFrom.splice(l,1),t.discountedFrom.length>0){for(let e=0;e<t.discountedFrom.length;e++){const o=Bt.get(t.discountedFrom[e]);if(void 0!==o){const e=o.choice;void 0!==e.discountOperator&&void 0!==e.discountValue&&(g=vo(c,e.discountOperator,e.discountValue),m=g,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(g=Math.max(g,e.discountLowLimit)))}}if(e.discountShow){let l=(null==(o=t.discountTextA)?void 0:o.indexOf(e.discountAfterText??""))??-1,a=(null==(i=t.discountTextB)?void 0:i.indexOf(e.discountBeforeText??""))??-1;e.discountTextDuplicated?(-1!==l&&void 0!==t.dupTextA&&void 0!==e.discountAfterText&&(t.dupTextA[e.discountAfterText]-=1,0===t.dupTextA[e.discountAfterText]&&(null==(r=t.discountTextA)||r.splice(l,1),delete t.dupTextA[e.discountAfterText])),-1!==a&&void 0!==t.dupTextB&&void 0!==e.discountBeforeText&&(t.dupTextB[e.discountBeforeText]-=1,0===t.dupTextB[e.discountBeforeText]&&(null==(n=t.discountTextB)||n.splice(l,1),delete t.dupTextB[e.discountBeforeText]))):(-1!==l&&void 0!==t.discountTextA&&(t.discountTextA.splice(l,1),t.discountAfterText=t.discountTextA.join("")),-1!==a&&void 0!==t.discountTextB&&(t.discountTextB.splice(a,1),t.discountBeforeText=t.discountTextB.join("")))}t.discountScore=g,t.discountScoreCal=m}else{if(void 0!==t.tmpDiscount)for(let e=0;e<t.tmpDiscount.length;e++)t.tmpDiscount[e].isStackable||g>t.tmpDiscount[e].discountedValue&&(p=t.tmpDiscount[e].discountedFrom,m=t.tmpDiscount[e].calcValue,g=t.tmpDiscount[e].discountedValue,v=e,h=!0);h&&void 0!==t.tmpDiscount?0===p.length?t.tmpDiscount.splice(v,1):(t.discountedFrom=p,t.tmpDiscount[v].showDiscount&&(t.discountBeforeText=t.tmpDiscount[v].beforeText,t.discountAfterText=t.tmpDiscount[v].afterText),t.tmpDiscount.splice(v,1),t.notStackableDiscount=!0):fo(t)}}}else if(t.notStackableDiscount)if(void 0!==t.discountedFrom&&t.discountedFrom.length>0&&void 0!==t.tmpDiscount){if(-1!==t.discountedFrom.indexOf(e.id)){if(t.tmpDiscount.length>0){c=t.tmpDiscount[0].discountedValue,h=!0;for(let e=1;e<t.tmpDiscount.length;e++)c>t.tmpDiscount[e].discountedValue&&(c=t.tmpDiscount[e].discountedValue,v=e)}h?(t.discountScore=c,t.discountScoreCal=t.tmpDiscount[v].calcValue,t.discountedFrom=t.tmpDiscount[v].discountedFrom,t.notStackableDiscount=!t.tmpDiscount[v].isStackable,t.discountShow=t.tmpDiscount[v].showDiscount,t.tmpDiscount[v].isStackable&&t.tmpDiscount[v].showDiscount?(t.discountBeforeText=null==(l=t.discountTextB)?void 0:l.join(""),t.discountAfterText=null==(a=t.discountTextA)?void 0:a.join("")):t.tmpDiscount[v].showDiscount?(t.discountBeforeText=t.tmpDiscount[v].beforeText,t.discountAfterText=t.tmpDiscount[v].afterText):(t.discountBeforeText="",t.discountAfterText=""),t.tmpDiscount.splice(v,1)):fo(t)}else for(let o=0;o<t.tmpDiscount.length;o++)if(-1!==t.tmpDiscount[o].discountedFrom.indexOf(e.id)){t.tmpDiscount.splice(o,1);break}}else fo(t);else if(void 0!==t.tmpDiscount){if(t.tmpDiscount=t.tmpDiscount.filter(t=>-1!==t.discountedFrom.indexOf(e.id)),t.tmpDiscount.length>0){c=t.tmpDiscount[0].discountedValue,h=!0;for(let e=1;e<t.tmpDiscount.length;e++)c>t.tmpDiscount[e].discountedValue&&(c=t.tmpDiscount[e].discountedValue,v=e)}h?(t.discountScore=c,t.discountScoreCal=t.tmpDiscount[v].calcValue,t.discountedFrom=t.tmpDiscount[v].discountedFrom,t.notStackableDiscount=!t.tmpDiscount[v].isStackable,t.notStackableDiscount?t.tmpDiscount[v].showDiscount?(t.discountBeforeText=t.tmpDiscount[v].beforeText,t.discountAfterText=t.tmpDiscount[v].afterText):(t.discountBeforeText="",t.discountAfterText=""):(t.discountBeforeText=null==(s=t.discountTextB)?void 0:s.join(""),t.discountAfterText=null==(d=t.discountTextA)?void 0:d.join("")),t.tmpDiscount.splice(v,1)):fo(t)}else fo(t);let f=t.discountScore??t.value;f!==u?(t.tmpDisScore=u-f,t.isChangeDiscount=!0):delete t.isChangeDiscount}}function wo(e,t){if(void 0!==e.discountOperator&&void 0!==e.discountValue){let o,i=t.value,r=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value,n=0,l=0,a=[],s=!1,d=0;if(t.discountedFrom??(t.discountedFrom=[]),e.stackableDiscount)if(t.notStackableDiscount){if(void 0!==t.tmpDiscount){for(let o=0;o<t.tmpDiscount.length;o++)t.tmpDiscount[o].isStackable&&(a=t.tmpDiscount[o].discountedFrom,a.push(e.id),i=t.tmpDiscount[o].discountedValue,s=!0,d=o);n=vo(i,e.discountOperator,e.discountValue),l=n,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(n=Math.max(n,e.discountLowLimit)),void 0!==t.discountScore&&t.discountScore>n?(t.tmpDisScore=t.discountScore-n,t.isChangeDiscount=!0,o={isStackable:!1,discountedFrom:t.discountedFrom,calcValue:t.discountScoreCal??t.discountScore,discountedValue:t.discountScore,showDiscount:!1},t.discountShow&&(o.showDiscount=!0,o.beforeText=e.discountBeforeText,o.afterText=e.discountAfterText),t.discountScore=n,t.discountScoreCal=l,e.discountShow&&(t.discountShow=!0,Io(e,t)),void 0!==t.discountTextA&&(t.discountAfterText=t.discountTextA.join("")),void 0!==t.discountTextB&&(t.discountBeforeText=t.discountTextB.join("")),t.discountedFrom.push(...a),s&&t.tmpDiscount.splice(d,1),t.tmpDiscount.push(o),t.notStackableDiscount=!1):(t.isChangeDiscount=!1,a.push(e.id),e.discountShow&&Io(e,t),s?(t.tmpDiscount[d].discountedFrom=a,t.tmpDiscount[d].calcValue=l,t.tmpDiscount[d].discountedValue=n):(o={isStackable:e.stackableDiscount??!1,discountedFrom:a,calcValue:l,discountedValue:n,showDiscount:e.discountShow??!1},t.tmpDiscount.push(o)))}}else i=t.discountIsOn?t.discountScoreCal??t.value:t.value,r=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value,n=vo(i,e.discountOperator,e.discountValue),l=n,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(n=Math.max(n,e.discountLowLimit)),t.discountedFrom??(t.discountedFrom=[]),t.discountScore=n,t.discountScoreCal=l,t.discountedFrom.push(e.id),t.discountScore!==r?(t.tmpDisScore=r-t.discountScore,t.isChangeDiscount=!0):t.isChangeDiscount=!1,t.discountIsOn||(t.discountIsOn=!0),e.discountShow&&(t.discountShow=!0,Io(e,t)),void 0!==t.discountTextA&&(t.discountAfterText=t.discountTextA.join("")),void 0!==t.discountTextB&&(t.discountBeforeText=t.discountTextB.join(""));else t.tmpDiscount??(t.tmpDiscount=[]),n=vo(i,e.discountOperator,e.discountValue),l=n,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(n=Math.max(n,e.discountLowLimit)),t.discountIsOn?void 0!==t.discountScore&&(t.discountScore>n?(o={isStackable:!t.notStackableDiscount,discountedFrom:t.discountedFrom,calcValue:t.discountScoreCal??t.discountScore,discountedValue:t.discountScore,showDiscount:t.discountShow??!1},t.discountShow&&(o.showDiscount=!0,o.beforeText=t.discountBeforeText,o.afterText=t.discountAfterText),t.discountScore=n,t.discountScoreCal=l,t.discountShow=e.discountShow,t.discountBeforeText=e.discountBeforeText,t.discountAfterText=e.discountAfterText,t.discountedFrom=[e.id],t.notStackableDiscount=!0):(o={isStackable:e.stackableDiscount??!1,discountedFrom:[e.id],calcValue:l,discountedValue:n,showDiscount:e.discountShow??!1},e.discountShow&&(o.showDiscount=!0,o.beforeText=e.discountBeforeText,o.afterText=e.discountAfterText)),t.tmpDiscount.push(o)):(t.discountScore=n,t.discountScoreCal=l,e.discountShow&&(t.discountShow=e.discountShow,t.discountBeforeText=e.discountBeforeText,t.discountAfterText=e.discountAfterText),t.discountIsOn=!0,t.discountedFrom.push(e.id),t.notStackableDiscount=!0),void 0!==t.discountScore&&t.discountScore!==r?(t.tmpDisScore=r-t.discountScore,t.isChangeDiscount=!0):t.isChangeDiscount=!1}}function Io(e,t){t.discountTextA??(t.discountTextA=[]),t.discountTextB??(t.discountTextB=[]),t.dupTextA??(t.dupTextA={}),t.dupTextB??(t.dupTextB={}),e.discountTextDuplicated?(void 0!==e.discountAfterText&&(-1!==t.discountTextA.indexOf(e.discountAfterText)?t.dupTextA[e.discountAfterText]=(t.dupTextA[e.discountAfterText]??0)+1:(t.dupTextA[e.discountAfterText]=1,t.discountTextA.push(e.discountAfterText))),void 0!==e.discountBeforeText&&(-1!==t.discountTextB.indexOf(e.discountBeforeText)?t.dupTextB[e.discountBeforeText]=(t.dupTextB[e.discountBeforeText]??0)+1:(t.dupTextB[e.discountBeforeText]=1,t.discountTextB.push(e.discountBeforeText)))):(void 0!==e.discountAfterText&&t.discountTextA.push(e.discountAfterText),void 0!==e.discountBeforeText&&t.discountTextB.push(e.discountBeforeText))}function To(e,t){let o=!1,i=new Map;for(let r=0;r<e.scores.length;r++){let n=e.scores[r],l=n.discountIsOn&&void 0!==n.discountScore?n.discountScore:n.value;if(n.multiplyByTimes&&(l*=Math.abs(e.multipleUseVariable)+1),co(n.requireds)&&!n.isActive){let e=Ct.get(n.id);if(void 0!==e&&e.belowZeroNotAllowed){let r=i.get(n.id);void 0!==r?(i.set(n.id,r-n.value),o=t?r-l<0:r+l<0):(i.set(n.id,e.startingSum-l),o=t?e.startingSum-l<0:e.startingSum+l<0)}}}return!o}function yo(){var e,t,o,i;const r=new Set;function n(e){if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.activatedRandom){if(e.isSelectableMultiple){for(let o=0;o<e.multipleUseVariable;o++)if(void 0!==e.activatedRandomMul)for(var t=0;t<e.activatedRandomMul[t].length;t++){const i=e.activatedRandomMul[o][t].split("/ON#"),l=Bt.get(i[0]);if(void 0!==l){const t=l.choice;if(yt.has(t.id))e.isAllowDeselect||(r.add(t.id),i.length>1&&t.isSelectableMultiple&&(void 0===t.tempMultipleValue?t.tempMultipleValue=parseInt(i[1]):t.tempMultipleValue+=parseInt(i[1])),n(t));else{const e=xt.get(t.id);void 0!==e?i.length>1&&(e.multiple+=parseInt(i[1])):xt.set(t.id,{multiple:i.length>1?parseInt(i[1]):0,isAllowDeselect:t.isAllowDeselect??!1})}}}}else if(void 0!==e.activatedRandom)for(let o=0;o<e.activatedRandom.length;o++){const t=e.activatedRandom[o].split("/ON#"),i=Bt.get(t[0]);if(void 0!==i){const o=i.choice;if(yt.has(o.id))e.isAllowDeselect||(r.add(o.id),t.length>1&&o.isSelectableMultiple&&(void 0===o.tempMultipleValue?o.tempMultipleValue=parseInt(t[1]):o.tempMultipleValue+=parseInt(t[1])),n(o));else{const e=xt.get(o.id);void 0!==e?t.length>1&&(e.multiple+=parseInt(t[1])):xt.set(o.id,{multiple:t.length>1?parseInt(t[1]):0,isAllowDeselect:o.isAllowDeselect??!1})}}}}else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),l=Bt.get(i[0]);if(void 0!==l){const t=l.choice;if(yt.has(t.id))e.isAllowDeselect||(r.add(t.id),i.length>1&&t.isSelectableMultiple&&(void 0===t.tempMultipleValue?t.tempMultipleValue=parseInt(i[1]):t.tempMultipleValue+=parseInt(i[1])),n(t));else{const e=xt.get(t.id);void 0!==e?i.length>1&&(e.multiple+=parseInt(i[1])):xt.set(t.id,{multiple:i.length>1?parseInt(i[1]):0,isAllowDeselect:t.isAllowDeselect??!1})}}}}}xt.clear(),Array.from(yt.entries()).forEach(([e])=>{const t=Bt.get(e);if(void 0!==t){const e=t.choice;e.notDeselectedByClean&&(r.add(e.id),n(e))}else yt.delete(e)});let l=[...yt.keys()];for(let a=l.length-1;a>=0;a--){const e=Bt.get(l[a]);if(void 0!==e){const t=e.choice;if(!r.has(t.id)){delete t.multiplyPointtypeIsOnCheck,delete t.startingSumAtMultiply,delete t.multiplyPointtypeIsOnCheck,delete t.startingSumAtDivide,delete t.activatedRandom,delete t.activatedRandomMul;for(let e=0;e<t.scores.length;e++){const o=t.scores[e];t.isSelectableMultiple?(delete o.isActiveMul,delete o.isActiveMulMinus):delete o.isActive,fo(o)}if(t.addToAllowChoice&&void 0!==t.idOfAllowChoice&&void 0!==t.numbAddToAllowChoice)for(let e=0;e<t.idOfAllowChoice.length;e++){const o=$t.get(t.idOfAllowChoice[e]);void 0!==o&&(o.allowedChoices-=t.numbAddToAllowChoice)}if(t.isChangeVariables&&void 0!==t.changedVariables)for(let e=0;e<t.changedVariables.length;e++){const o=Rt.get(t.changedVariables[e]);void 0!==o&&("1"===t.changeType?o.isTrue=!0:"2"===t.changeType?o.isTrue=!1:"3"===t.changeType&&(o.isTrue=!o.isTrue))}if(t.textfieldIsOn&&void 0!==t.idOfTheTextfieldWord&&void 0!==t.wordChangeSelect){const e=At.get(t.idOfTheTextfieldWord);void 0!==e&&(e.replaceText=void 0===t.wordChangeDeselect?"":t.wordChangeDeselect)}if(t.changeBackground&&(t.changeBgImage?void 0!==t.bgImage&&(app.styling.backgroundImage=t.bgImage):void 0!==t.changedBgColorCode&&(app.styling.backgroundColor=t.changedBgColorCode)),t.changePointBar&&(t.changeBarBgColorIsOn&&void 0!==t.changedBarBgColor&&(app.styling.barBackgroundColor=t.changedBarBgColor),t.changeBarIconColorIsOn&&void 0!==t.changedBarIconColor&&(app.styling.barIconColor=t.changedBarIconColor),t.changeBarTextColorIsOn&&void 0!==t.changedBarTextColor&&(app.styling.barTextColor=t.changedBarTextColor)),t.isImageUpload&&void 0!==t.defaultImage&&(t.image=t.defaultImage),t.setBgmIsOn&&qt&&void 0!==t.bgmId&&t.bgmId.length>0){const e=$(qt);if(e&&void 0!==e.playerInfo.videoData){const o=e.playerInfo.videoData.video_id;t.bgmId===o&&(e.stopVideo(),Vt.bgmIsPlaying=!1)}}if(t.muteBgm&&qt){const e=$(qt);e&&"function"==typeof e.unMute&&(app.isMute=!1,e.unMute())}if(t.isContentHidden&&void 0!==t.hiddenContentsRow&&void 0!==t.hiddenContentsType)for(let e=0;e<t.hiddenContentsRow.length;e++){const o=$t.get(t.hiddenContentsRow[e]);if(void 0!==o)for(let e=0;e<t.hiddenContentsType.length;e++)switch(t.hiddenContentsType[e]){case"1":delete o.objectTitleRemoved;break;case"2":delete o.objectImageRemoved;break;case"3":delete o.objectTextRemoved;break;case"4":delete o.objectScoreRemoved;break;case"5":delete o.objectRequirementRemoved;break;case"6":delete o.addonTitleRemoved;break;case"7":delete o.addonImageRemoved;break;case"8":delete o.addonTextRemoved}}t.multipleUseVariable=0,t.isActive=!1,yt.delete(t.id)}}else yt.delete(l[a])}for(let a=0;a<app.pointTypes.length;a++){const e=app.pointTypes[a];e.startingSum=e.initValue}for(let a=0;a<app.rows.length;a++){const e=app.rows[a];e.isEditModeOn=!1,e.currentChoices=0}for(let a=0;a<app.backpack.length;a++){const e=app.backpack[a];e.isEditModeOn=!1,e.currentChoices=0}jt.splice(0),l=[...yt.keys()];for(let a=0;a<l.length;a++){const r=Bt.get(l[a]);if(void 0!==r){const n=r.row,l=r.choice;if(co(l.requireds)&&To(l,!0)){if(l.discountOther&&void 0!==l.discountOperator&&void 0!==l.discountValue)if(l.isDisChoices){if(void 0!==l.discountChoices)for(let o=0;o<l.discountChoices.length;o++){const i=Bt.get(l.discountChoices[o]);if(void 0!==i)for(let o=0;o<i.choice.scores.length;o++){const r=i.choice.scores[o];r.isNotDiscountable||0!==(null==(e=l.discountPointTypes)?void 0:e.length)&&-1===(null==(t=l.discountPointTypes)?void 0:t.indexOf(r.id))||wo(l,r)}}}else if(void 0!==l.discountGroups)for(let e=0;e<l.discountGroups.length;e++){const t=St.get(l.discountGroups[e]);if(void 0!==t)for(let e=0;e<t.elements.length;e++){const r=Bt.get(t.elements[e]);if(void 0!==r)for(let t=0;t<r.choice.scores.length;t++){const t=r.choice.scores[e];t.isNotDiscountable||0!==(null==(o=l.discountPointTypes)?void 0:o.length)&&-1===(null==(i=l.discountPointTypes)?void 0:i.indexOf(t.id))||wo(l,t)}}}if(l.addToAllowChoice&&void 0!==l.idOfAllowChoice&&void 0!==l.numbAddToAllowChoice)for(let e=0;e<l.idOfAllowChoice.length;e++){const t=$t.get(l.idOfAllowChoice[e]);void 0!==t&&(t.allowedChoices+=l.numbAddToAllowChoice)}n.currentChoices+=1}}}for(let a=0;a<l.length;a++){const e=Bt.get(l[a]);if(void 0!==e){const t=e.choice;if(co(t.requireds)&&To(t,!0)){for(let e=0;e<t.scores.length;e++){const o=t.scores[e],i=Ct.get(o.id);if(void 0!==i)if(t.isSelectableMultiple&&t.isMultipleUseVariableultiple)for(let e=0;e<t.multipleUseVariable;e++)co(o.requireds)&&(void 0===o.isActiveMul&&(o.isActiveMul=[]),o.isActiveMul[e]||(o.multiplyByTimes?i.startingSum-=o.discountIsOn&&void 0!==o.discountScore?o.discountScore*(e+1):o.value*(e+1):i.startingSum-=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value,o.isActiveMul[e]=!0));else t.isSelectableMultiple||co(o.requireds)&&!o.isActive&&(i.startingSum-=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value,o.isActive=!0)}if(t.multiplyPointtypeIsOn&&void 0!==t.pointTypeToMultiply&&void 0!==t.multiplyWithThis){let e=0;t.multiplyPointtypeIsOnCheck=!0,"object"!=typeof t.startingSumAtMultiply&&(t.startingSumAtMultiply=[]);for(let o=0;o<t.pointTypeToMultiply.length;o++){let i=Ct.get(t.pointTypeToMultiply[o]);if(void 0!==i)if(t.multiplyPointtypeIsId&&"string"==typeof t.multiplyWithThis){let r=Ct.get(t.multiplyWithThis);void 0!==r?(t.startingSumAtMultiply[o]={value:i.startingSum,calcVal:r.startingSum},i.startingSum*=r.startingSum):e++}else"number"==typeof t.multiplyWithThis&&(t.startingSumAtMultiply[o]={value:i.startingSum,calcVal:t.multiplyWithThis},i.startingSum*=t.multiplyWithThis);else e++}e===t.pointTypeToMultiply.length&&delete t.multiplyPointtypeIsOnCheck,t.multiplyPointtypeIsOnCheck&&jt.push(t)}if(t.dividePointtypeIsOn&&void 0!==t.pointTypeToDivide&&void 0!==t.divideWithThis){let e=0;t.dividePointtypeIsOnCheck=!0,"object"!=typeof t.startingSumAtDivide&&(t.startingSumAtDivide=[]);for(let o=0;o<t.pointTypeToDivide.length;o++){let i=Ct.get(t.pointTypeToDivide[o]);if(void 0!==i)if(t.dividePointtypeIsId&&"string"==typeof t.divideWithThis){let r=Ct.get(t.divideWithThis);void 0!==r?0===r.startingSum?e++:(t.startingSumAtDivide[o]={value:i.startingSum,calcVal:r.startingSum},i.startingSum/=r.startingSum):e++}else"number"==typeof t.divideWithThis&&(0===t.dividedWithThis?e++:(t.startingSumAtDivide[o]={value:i.startingSum,calcVal:t.divideWithThis},i.startingSum/=t.divideWithThis));else e++}e===t.pointTypeToDivide.length&&delete t.dividePointtypeIsOnCheck,!t.multiplyPointtypeIsOnCheck&&t.dividePointtypeIsOnCheck&&jt.push(t)}}else t.forcedActivated&&(yt.delete(t.id),xt.set(t.id,{multiple:t.multipleUseVariable}))}else yt.delete(l[a])}}function xo(e,t,o){Array.from(yt.entries()).forEach(([o,i])=>{const r=Bt.get(o);if(void 0!==r){const o=r.row,i=r.choice,n=new I;let l=!1;for(let r=0;r<i.scores.length;r++){const a=i.scores[r];if(!a.isNotRecalculatable){const r=Ct.get(a.id);if(void 0!==r){if(e.discountOther&&a.isChangeDiscount&&void 0!==a.tmpDisScore){const e=i.multipleUseVariable;if(i.isSelectabeleMultiple&&i.isMultipleUseVariable&&void 0!==i.numMultipleTimesMinus){for(let t=e-1;t>=0;t--)i.isActive&&(r.startingSum+=a.tmpDisScore);i.isActive&&(n.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore)}else i.isSelectableMultiple||(r.startingSum+=a.tmpDisScore,n.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore)}const s=t.get(a.id)??0;if(i.isActive){const t=co(a.requireds),d=new I(JSON.parse(JSON.stringify([...yt])));d.delete(e.id),o.currentChoices-=1,r.startingSum+=s;const c=co(a.requireds,d);if(o.currentChoices+=1,r.startingSum-=s,c!==t){let e=a.discountIsOn&&void 0!==a.discountScore?a.discountScore:a.value;if(c)if(i.isSelectableMultiple&&i.isMultipleUseVariable&&void 0!==i.numMultipleTimesMinus){for(let t=i.multipleUseVariable-1;t>=0;t--)void 0!==a.isActiveMul&&a.isActiveMul[t]&&(r.startingSum+=e,n.set(a.id,e),a.isActiveMul[t]=!1)}else i.isSelectableMultiple||a.isActive&&(l=!0,r.startingSum+=e,n.set(a.id,e),delete a.isActive);else a.isActive||(l=!0,r.startingSum-=e,n.set(a.id,e),a.isActive=!0)}}}}}l&&xo(i,n)}})}function Co(e,t){var o,i,r,n;let l=e.split("/IMG#");const a=l.length>1?l[1]:"";l=l[0].split("/WORD#");const s=l.length>1?l[1].replaceAll("/CHAR#",","):"";l=l[0].split("/RND#");const d=l.length>1?l[1].split("/AND#"):"",c=l[0],u=Bt.get(c);if(void 0!==u){const e=u.row,l=u.choice;for(let t=0;t<l.scores.length;t++){const e=l.scores[t];e.isRandom&&!e.setValue&&void 0!==e.maxValue&&void 0!==e.minValue&&(e.value=Math.floor(Math.random()*(e.maxValue-e.minValue+1))+e.minValue,e.setValue=!0)}const c=new I;if(l.isActive=!0,yt.set(l.id,{multiple:0}),e.currentChoices+=1,l.discountOther&&void 0!==l.discountOperator&&void 0!==l.discountValue)if(l.isDisChoices){if(void 0!==l.discountChoices)for(let t=0;t<l.discountChoices.length;t++){const e=Bt.get(l.discountChoices[t]);if(void 0!==e)for(let t=0;t<e.choice.scores.length;t++){const r=e.choice.scores[t];r.isNotDiscountable||0!==(null==(o=l.discountPointTypes)?void 0:o.length)&&-1===(null==(i=l.discountPointTypes)?void 0:i.indexOf(r.id))||wo(l,r)}}}else if(void 0!==l.discountGroups)for(let t=0;t<l.discountGroups.length;t++){const e=St.get(l.discountGroups[t]);if(void 0!==e)for(let t=0;t<e.elements.length;t++){const o=Bt.get(e.elements[t]);if(void 0!==o)for(let e=0;e<o.choice.scores.length;e++){const e=o.choice.scores[t];e.isNotDiscountable||0!==(null==(r=l.discountPointTypes)?void 0:r.length)&&-1===(null==(n=l.discountPointTypes)?void 0:n.indexOf(e.id))||wo(l,e)}}}for(let t=0;t<l.scores.length;t++){const e=l.scores[t];if(co(e.requireds)&&!e.isActive){const t=Ct.get(e.id);if(void 0!==t){const o=e.discountIsOn&&void 0!==e.discountScore?e.discountScore:e.value;t.startingSum-=o,e.isActive=!0;let i=c.get(e.id);void 0!==i?c.set(e.id,o+i):c.set(e.id,o)}}}if(l.duplicateRow&&void 0!==l.duplicateRowId&&l.duplicateRowPlace,l.activateOtherChoice&&void 0!==l.activateThisChoice){const e=new Set(t.map(e=>e.split("/ON#")[0]));if(l.isActivateRandom&&void 0!==l.numActivateRandom)if(""===d){let t=l.activateThisChoice.split(",").filter(t=>e.has(t.split("/ON#")[0]));const o=l.numActivateRandom>t.length?t.length:l.numActivateRandom;let i=new Set;for(let e=0;e<t.length;e++){const o=Bt.get(t[e]);if(void 0!==o){if(!co(o.choice.requireds)){const o=t[e];t.splice(e,1),t.push(o)}}}for(let e=t.length-1;e>=0;e--)i.add(t[e]);t=[...i].reverse(),l.activatedRandom=t.slice(0,o);for(let e=0;e<o;e++){const t=l.activatedRandom[e].split("/ON#"),o=Bt.get(t[0]);if(void 0!==o){const e=o.choice;if(!l.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable){const o=parseInt(t[1]);for(let t=0;t<Math.abs(o);t++)o>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:o<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--}e.forcedActivated=!0}}}}else{let t=d.filter(t=>e.has(t.split("/RON#")[0]));l.activatedRandom=t;for(let e=0;e<t.length;e++){const t=l.activatedRandom[e].split("/RON#"),o=Bt.get(t[0]);if(void 0!==o){const e=o.choice;if(!l.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable){const o=parseInt(t[1]);for(let t=0;t<Math.abs(o);t++)o>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:o<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--}e.forcedActivated=!0}}}}else{const t=l.activateThisChoice.split(",").filter(t=>e.has(t.split("/ON#")[0]));l.activateThisChoice.split(",").filter(t=>!e.has(t.split("/ON#")[0]));for(let e=0;e<t.length;e++){const o=t[e].split("/ON#"),i=o.length>1?parseInt(o[1]):0,r=Bt.get(o[0]);if(void 0!==r){const e=r.choice;if(!l.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable)if(l.isSelectableMultiple&&l.isMultipleUseVariable)for(let t=0;t<Math.abs(l.multipleUseVariable);t++)for(let o=0;o<Math.abs(i);o++)i>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:i<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;else for(let t=0;t<Math.abs(i);t++)i>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:i<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;e.forcedActivated=!0}}else{const e=St.get(o[0]);if(void 0!==e){const t=e.elements;for(let e=0;e<t.length;e++){const o=Bt.get(t[e]);if(void 0!==o){o.row;const e=o.choice;if(!l.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable)if(l.isSelectableMultiple&&l.isMultipleUseVariable)for(let t=0;t<Math.abs(l.multipleUseVariable);t++)for(let o=0;o<Math.abs(i);o++)i>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:i<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;else for(let t=0;t<Math.abs(i);t++)i>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:i<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;e.forcedActivated=!0}}}}}}}}if(l.multiplyPointtypeIsOn&&void 0!==l.pointTypeToMultiply&&void 0!==l.multiplyWithThis){let e=0;l.multiplyPointtypeIsOnCheck=!0,"object"!=typeof l.startingSumAtMultiply&&(l.startingSumAtMultiply=[]);for(let t=0;t<l.pointTypeToMultiply.length;t++){let o=Ct.get(l.pointTypeToMultiply[t]);if(void 0!==o)if(l.multiplyPointtypeIsId&&"string"==typeof l.multiplyWithThis){let i=Ct.get(l.multiplyWithThis);void 0!==i?(l.startingSumAtMultiply[t]={value:o.startingSum,calcVal:i.startingSum},o.startingSum*=i.startingSum):e++}else"number"==typeof l.multiplyWithThis&&(l.startingSumAtMultiply[t]={value:o.startingSum,calcVal:l.multiplyWithThis},o.startingSum*=l.multiplyWithThis);else e++}e===l.pointTypeToMultiply.length&&delete l.multiplyPointtypeIsOnCheck,l.multiplyPointtypeIsOnCheck&&jt.push(l)}if(l.dividePointtypeIsOn&&void 0!==l.pointTypeToDivide&&void 0!==l.divideWithThis){let e=0;l.dividePointtypeIsOnCheck=!0,"object"!=typeof l.startingSumAtDivide&&(l.startingSumAtDivide=[]);for(let t=0;t<l.pointTypeToDivide.length;t++){let o=Ct.get(l.pointTypeToDivide[t]);if(void 0!==o)if(l.dividePointtypeIsId&&"string"==typeof l.divideWithThis){let i=Ct.get(l.divideWithThis);void 0!==i?0===i.startingSum?e++:(l.startingSumAtDivide[t]={value:o.startingSum,calcVal:i.startingSum},o.startingSum/=i.startingSum):e++}else"number"==typeof l.divideWithThis&&(0===l.dividedWithThis?e++:(l.startingSumAtDivide[t]={value:o.startingSum,calcVal:l.divideWithThis},o.startingSum/=l.divideWithThis));else e++}e===l.pointTypeToDivide.length&&delete l.dividePointtypeIsOnCheck,!l.multiplyPointtypeIsOnCheck&&l.dividePointtypeIsOnCheck&&jt.push(l)}if(l.isChangeVariables&&void 0!==l.changedVariables)for(let t=0;t<l.changedVariables.length;t++){const e=Rt.get(l.changedVariables[t]);void 0!==e&&("1"===l.changeType?e.isTrue=!0:"2"===l.changeType?e.isTrue=!1:"3"===l.changeType&&(e.isTrue=!e.isTrue))}if(l.addToAllowChoice&&void 0!==l.idOfAllowChoice&&void 0!==l.numbAddToAllowChoice)for(let t=0;t<l.idOfAllowChoice.length;t++){const e=$t.get(l.idOfAllowChoice[t]);void 0!==e&&(e.allowedChoices+=l.numbAddToAllowChoice)}if(l.textfieldIsOn&&void 0!==l.idOfTheTextfieldWord&&void 0!==l.wordChangeSelect){const e=At.get(l.idOfTheTextfieldWord);void 0!==e&&(l.customTextfieldIsOn?e.replaceText=s:e.replaceText=l.wordChangeSelect)}if(l.isImageUpload&&(l.defaultImage=l.image,l.image=a),l.backpackBtnRequirement&&(app.btnBackpackIsOn??(app.btnBackpackIsOn=0),app.btnBackpackIsOn+=1),l.changeBackground)if(l.changeBgImage){if(void 0!==l.bgImage){const e=app.styling.backgroundImage??"";app.styling.backgroundImage=l.bgImage,l.bgImage=e}}else if(void 0!==l.changedBgColorCode){const e=app.styling.backgroundColor??"";app.styling.backgroundColor=l.changedBgColorCode,l.changedBgColorCode=e}if(l.changePointBar){if(l.changeBarBgColorIsOn&&void 0!==l.changedBarBgColor){const e=app.styling.barBackgroundColor??"";app.styling.barBackgroundColor=l.changedBarBgColor,l.changedBarBgColor=e}if(l.changeBarIconColorIsOn&&void 0!==l.changedBarIconColor){const e=app.styling.barIconColor??"";app.styling.barIconColor=l.changedBarIconColor,l.changedBarIconColor=e}if(l.changeBarTextColorIsOn&&void 0!==l.changedBarTextColor){const e=app.styling.barTextColor??"";app.styling.barTextColor=l.changedBarTextColor,l.changedBarTextColor=e}}if(l.setBgmIsOn&&void 0!==l.bgmId&&l.bgmId.length>0&&(Vt.bgmIsPlaying=!0,Vt.isBgmInit?mo(l,l.bgmId,0):(po(l),Vt.isBgmInit=!0)),l.muteBgm&&qt){const e=$(qt);e&&"function"==typeof e.mute&&(app.isMute=!0,e.mute())}if(l.isContentHidden&&void 0!==l.hiddenContentsRow&&void 0!==l.hiddenContentsType)for(let t=0;t<l.hiddenContentsRow.length;t++){const e=$t.get(l.hiddenContentsRow[t]);if(void 0!==e){e.textIsRemoved||(e.textIsRemoved=!0);for(let t=0;t<l.hiddenContentsType.length;t++)switch(l.hiddenContentsType[t]){case"1":e.objectTitleRemoved=!0;break;case"2":e.objectImageRemoved=!0;break;case"3":e.objectTextRemoved=!0;break;case"4":e.objectScoreRemoved=!0;break;case"5":e.objectRequirementRemoved=!0;break;case"6":e.addonTitleRemoved=!0;break;case"7":e.addonImageRemoved=!0;break;case"8":e.addonTextRemoved=!0}}}xo(l,c)}}function $o(e,t){var o,i,r,n;const l=e.length>1?e[1].split("/AND#"):"",a=e[0].split("/ON#"),s=Bt.get(a[0]);if(void 0!==s){const e=s.choice,a=s.row;for(let t=0;t<e.scores.length;t++){const o=e.scores[t];o.isRandom&&!o.setValue&&void 0!==o.maxValue&&void 0!==o.minValue&&(o.value=Math.floor(Math.random()*(o.maxValue-o.minValue+1))+o.minValue,o.setValue=!0)}const d=new I,c=e.isActive,u=e.multipleUseVariable>=0,g=Math.abs(e.multipleUseVariable);if(e.isActive||(e.isActive=!0,a.currentChoices+=1),e.multipleUseVariable++,yt.set(e.id,{multiple:e.multipleUseVariable}),u&&e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){if(void 0!==e.discountChoices)for(let t=0;t<e.discountChoices.length;t++){const r=Bt.get(e.discountChoices[t]);if(void 0!==r)for(let t=0;t<r.choice.scores.length;t++){const n=r.choice.scores[t];n.isNotDiscountable||0!==(null==(o=e.discountPointTypes)?void 0:o.length)&&-1===(null==(i=e.discountPointTypes)?void 0:i.indexOf(n.id))||wo(e,n)}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=St.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=Bt.get(o.elements[t]);if(void 0!==i)for(let o=0;o<i.choice.scores.length;o++){const o=i.choice.scores[t];o.isNotDiscountable||0!==(null==(r=e.discountPointTypes)?void 0:r.length)&&-1===(null==(n=e.discountPointTypes)?void 0:n.indexOf(o.id))||wo(e,o)}}}for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(void 0===o.isActiveMul&&(o.isActiveMul=[]),co(o.requireds)&&!o.isActiveMul[g]){const e=Ct.get(o.id);if(void 0!==e){let t=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;o.multiplyByTimes&&(t*=g+1),e.startingSum-=t,o.isActiveMul[g]=!0;let i=d.get(o.id);void 0!==i?d.set(o.id,t+i):d.set(o.id,t)}}}if(u&&(e.duplicateRow&&void 0!==e.duplicateRowId&&e.duplicateRowPlace,e.activateOtherChoice&&void 0!==e.activateThisChoice)){const o=new Set(t.map(e=>e.split("/ON#")[0]));if(e.isActivateRandom&&void 0!==e.numActivateRandom)if(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),""===l){if(1===e.multipleUseVariable){let t=e.activateThisChoice.split(",").filter(e=>o.has(e.split("/ON#")[0]));e.numActivateRandom>t.length?t.length:e.numActivateRandom;let i=new Set;for(let e=0;e<t.length;e++){const o=Bt.get(t[e]);if(void 0!==o){if(!co(o.choice.requireds)){const o=t[e];t.splice(e,1),t.push(o)}}}for(let e=t.length-1;e>=0;e--)i.add(t[e]);t=[...i].reverse();let r=0,n=[];for(let o=0;o<e.numActivateRandom;o++){n[o]=t.length/(e.numActivateRandom*(o+1))<1?t.length%(e.numActivateRandom*(o+1)):e.numActivateRandom,e.activatedRandomMul.push(t.slice(r,n[o]+r));for(let t=0;t<n[o]-r;t++){const i=e.activatedRandomMul[o][t].split("/ON#"),r=i.length>1?parseInt(i[1]):0,n=Bt.get(i[0]);if(void 0!==n){const t=n.choice;if(!e.isAllowDeselect){if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let e=0;e<Math.abs(r);e++)r>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:r<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}}r+=n[o]}}}else{const t=(e.multipleUseVariable-1)*e.numActivateRandom,i=l.splice(t,t+e.numActivateRandom);e.activatedRandomMul.push(i);for(let r=0;r<e.activatedRandomMul[e.multipleUseVariable-1].length;r++){const t=e.activatedRandomMul[e.multipleUseVariable-1][r].split("/RON#"),i=t.length>1?parseInt(t[1]):0,n=Bt.get(t[0]);if(void 0!==n){const t=n.choice;if(!e.isAllowDeselect&&o.has(t.id)){if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let e=0;e<Math.abs(i);e++)i>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:i<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}}}else{const t=e.activateThisChoice.split(",").filter(e=>o.has(e.split("/ON#")[0]));e.activateThisChoice.split(",").filter(e=>!o.has(e.split("/ON#")[0]));for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),r=i.length>1?parseInt(i[1]):0,n=Bt.get(i[0]);if(void 0!==n){const t=n.choice;if(!e.isAllowDeselect){if(t.isSelectableMultiple&&t.isMultipleUseVariable)if(e.isSelectableMultiple&&e.isMultipleUseVariable)for(let o=0;o<Math.abs(e.multipleUseVariable);o++)for(let e=0;e<Math.abs(r);e++)r>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:r<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;else for(let e=0;e<Math.abs(r);e++)r>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:r<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}else{const t=St.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Bt.get(o[t]);if(void 0!==i){i.row;const t=i.choice;if(!e.isAllowDeselect){if(t.isSelectableMultiple&&t.isMultipleUseVariable)if(e.isSelectableMultiple&&e.isMultipleUseVariable)for(let o=0;o<Math.abs(e.multipleUseVariable);o++)for(let e=0;e<Math.abs(r);e++)r>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:r<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;else for(let e=0;e<Math.abs(r);e++)r>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:r<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}}}}}}}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const o=$t.get(e.idOfAllowChoice[t]);void 0!==o&&(o.allowedChoices+=e.numbAddToAllowChoice)}if(!c){if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!0:"2"===e.changeType?o.isTrue=!1:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.changeBackground)if(e.changeBgImage){if(void 0!==e.bgImage){const t=app.styling.backgroundImage??"";app.styling.backgroundImage=e.bgImage,e.bgImage=t}}else if(void 0!==e.changedBgColorCode){const t=app.styling.backgroundColor??"";app.styling.backgroundColor=e.changedBgColorCode,e.changedBgColorCode=t}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor){const t=app.styling.barBackgroundColor??"";app.styling.barBackgroundColor=e.changedBarBgColor,e.changedBarBgColor=t}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor){const t=app.styling.barIconColor??"";app.styling.barIconColor=e.changedBarIconColor,e.changedBarIconColor=t}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor){const t=app.styling.barTextColor??"";app.styling.barTextColor=e.changedBarTextColor,e.changedBarTextColor=t}}if(e.setBgmIsOn&&void 0!==e.bgmId&&e.bgmId.length>0&&(Vt.bgmIsPlaying=!0,Vt.isBgmInit?mo(e,e.bgmId,0):(po(e),Vt.isBgmInit=!0)),e.muteBgm&&qt){const e=$(qt);e&&"function"==typeof e.mute&&(app.isMute=!0,e.mute())}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=$t.get(e.hiddenContentsRow[t]);if(void 0!==o){o.textIsRemoved||(o.textIsRemoved=!0);for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!0;break;case"2":o.objectImageRemoved=!0;break;case"3":o.objectTextRemoved=!0;break;case"4":o.objectScoreRemoved=!0;break;case"5":o.objectRequirementRemoved=!0;break;case"6":o.addonTitleRemoved=!0;break;case"7":o.addonImageRemoved=!0;break;case"8":o.addonTextRemoved=!0}}}}xo(e,d)}}function Bo(e,t){const o=new I,i=e.multipleUseVariable-1;for(let n=0;n<e.scores.length;n++){const t=e.scores[n];if(void 0===t.isActiveMulMinus&&(t.isActiveMulMinus=[]),co(t.requireds)&&!t.isActiveMulMinus[i]){const e=Ct.get(t.id);if(void 0!==e){let r=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value;t.multiplyByTimes&&(r*=Math.abs(i)),e.startingSum+=r;let n=o.get(t.id);void 0!==n?o.set(t.id,-r+n):o.set(t.id,-r),t.isActiveMulMinus[i]=!0}}}const r=yt.get(e.id);if(void 0!==r?(r.multiple--,e.multipleUseVariable--,0===r.multiple&&(e.isActive=!1,t.currentChoices-=1,yt.delete(e.id))):(yt.set(e.id,{multiple:-1}),e.isActive=!0,t.currentChoices+=1),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let n=0;n<e.idOfAllowChoice.length;n++){const t=$t.get(e.idOfAllowChoice[n]);void 0!==t&&(t.allowedChoices-=e.numbAddToAllowChoice)}xo(e,o)}function So(e){yo();const t=e.split(",");for(let o=0;o<t.length;o++){const e=t[o].split(/\/(IMG|WORD|RND)#/)[0].split("/ON#"),i=e.length>1?parseInt(e[1]):0,r=Bt.get(e[0]);if(void 0!==r){const e=r.choice;if(e.isSelectableMultiple&&e.isMultipleUseVariable)for(let n=0;n<Math.abs(i);n++){const n=t[o].split("/RND#");i>0?$o(n,t):Bo(e,r.row)}else Co(t[o],t)}}}function Oo(e,t){if(void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace){const t=e.duplicateRowId;let o=0;Array.from($t.entries()).forEach(([e])=>{e.split("/D#")[0]===t.split("/D#")[0]&&o++});const i=$t.get(e.duplicateRowId),r=$t.get(e.duplicateRowPlace),n=`/D#${o}`;if(void 0!==i&&void 0!==r){const t=JSON.parse(JSON.stringify(i));if(t.id=`${t.id.split("/D#")[0]}${n}`,r.isBackpack){app.backpack.splice(r.index+1,0,t);for(let e=r.index+1;e<app.backpack.length;e++)app.backpack[e].index=e}else{app.rows.splice(r.index+1,0,t);for(let e=r.index+1;e<app.rows.length;e++)app.rows[e].index=e}$t.set(t.id,t);for(let o=0;o<t.objects.length;o++){const i=t.objects[o];i.id=`${i.id.split("/D#")[0]}${n}`,i.isActive=!1,delete i.forcedActivated;for(let e=0;e<i.scores.length;e++){const t=i.scores[e];delete t.isActive,delete t.setValue,delete t.discountIsOn,delete t.discountShow,delete t.discountBeforeText,delete t.discountAfterText,delete t.discountScore,delete t.discountScoreCal,delete t.isChangeDiscount,delete t.tmpDisScore,delete t.tmpDiscount,delete t.discountedFrom,delete t.dupTextA,delete t.dupTextB,delete t.discountTextA,delete t.discountTextB,delete t.notStackableDiscount}for(let e=0;e<i.addons.length;e++){i.addons[e].parentId=i.id}if(!e.dRowAddSufReq){for(let e=0;e<i.requireds.length;e++){const t=i.requireds[e];if("id"===t.type){const e=t.reqId.split("/ON#"),o=`${e[0].split("/D#")[0]}${n}`;e.length>1?t.reqId=`${o}/ON#${e[1]}`:t.reqId=o}else if("or"===t.type)for(let e=0;e<t.orRequired.length;e++){const o=t.orRequired[e];if(void 0!==o.req){const e=o.req.split("/ON#"),t=`${e[0].split("/D#")[0]}${n}`;e.length>1?o.req=`${t}/ON#${e[1]}`:o.req=t}}if(void 0!==t.requireds)for(let o=0;o<t.requireds.length;o++){const t=i.requireds[e];if("id"===t.type){const e=t.reqId.split("/ON#"),o=`${e[0].split("/D#")[0]}${n}`;e.length>1?t.reqId=`${o}/ON#${e[1]}`:t.reqId=o}else if("or"===t.type)for(let e=0;e<t.orRequired.length;e++){const o=t.orRequired[e];if(void 0!==o.req){const e=o.req.split("/ON#"),t=`${e[0].split("/D#")[0]}${n}`;e.length>1?o.req=`${t}/ON#${e[1]}`:o.req=t}}}}for(let e=0;e<i.scores.length;e++){const t=i.scores[e];if(void 0!==t.requireds)for(let e=0;e<t.requireds.length;e++){const o=t.requireds[e];if("id"===o.type){const e=o.reqId.split("/ON#"),t=`${e[0].split("/D#")[0]}${n}`;e.length>1?o.reqId=`${t}/ON#${e[1]}`:o.reqId=t}else if("or"===o.type)for(let e=0;e<o.orRequired.length;e++){const t=o.orRequired[e];if(void 0!==t.req){const e=t.req.split("/ON#"),o=`${e[0].split("/D#")[0]}${n}`;e.length>1?t.req=`${o}/ON#${e[1]}`:t.req=o}}}}for(let e=0;e<i.addons.length;e++){const t=i.addons[e];if(void 0!==t.requireds)for(let e=0;e<t.requireds.length;e++){const o=t.requireds[e];if("id"===o.type){const e=o.reqId.split("/ON#"),t=`${e[0].split("/D#")[0]}${n}`;e.length>1?o.reqId=`${t}/ON#${e[1]}`:o.reqId=t}else if("or"===o.type)for(let e=0;e<o.orRequired.length;e++){const t=o.orRequired[e];if(void 0!==t.req){const e=t.req.split("/ON#"),o=`${e[0].split("/D#")[0]}${n}`;e.length>1?t.req=`${o}/ON#${e[1]}`:t.req=o}}}}}if(!e.dRowAddSufFunc){if(i.activateOtherChoice&&void 0!==i.activateThisChoice){const e=i.activateThisChoice.split(",");let t="";for(let o=0;o<e.length;o++){const i=e[o].split("/ON#"),r=`${i[0].split("/D#")[0]}${n}`;i.length>1?t+=`${r}/ON#${i[1]},`:t+=`${r},`}i.activateThisChoice=t}if(i.deactivateOtherChoice&&void 0!==i.deactivateThisChoice){const e=i.deactivateThisChoice.split(",");let t="";for(let o=0;o<e.length;o++){const i=e[o].split("/ON#"),r=`${i[0].split("/D#")[0]}${n}`;i.length>1?t+=`${r}/ON#${i[1]},`:t+=`${r},`}i.deactivateThisChoice=t}if(i.duplicateRow&&void 0!==i.duplicateRowId&&void 0!==i.duplicateRowPlace){const e=i.duplicateRowId,t=i.duplicateRowPlace;i.duplicateRowId=`${e.split("/D")[0]}${n}`,i.duplicateRowPlace=`${t.split("/D")[0]}${n}`}}i.backpackBtnRequirement&&(void 0!==app.hideBackpackBtn?app.hideBackpackBtn+=1:delete i.backpackBtnRequirement),Bt.set(i.id,{choice:i,row:t})}}}}function Ao(e){return/^data:[a-zA-Z]+\/[a-zA-Z]+;base64,/.test(e)}function Ro(e){const t=e.match(/^data:(image\/[a-zA-Z0-9.+-]+);base64,/);if(!t)return!1;return"image/avif"===t[1].toLowerCase()}const Mo=T({selFilterBlur:y.number().optional(),selFilterBright:y.number().optional(),selFilterCont:y.number().optional(),selFilterGray:y.number().optional(),selFilterHue:y.number().optional(),selFilterInvert:y.number().optional(),selFilterOpac:y.number().optional(),selFilterSatur:y.number().optional(),selFilterSepia:y.number().optional(),reqFilterBlur:y.number().optional(),reqFilterBright:y.number().optional(),reqFilterCont:y.number().optional(),reqFilterGray:y.number().optional(),reqFilterHue:y.number().optional(),reqFilterInvert:y.number().optional(),reqFilterOpac:y.number().optional(),reqFilterSatur:y.number().optional(),reqFilterSepia:y.number().optional(),unselFilterBlur:y.number().optional(),unselFilterBright:y.number().optional(),unselFilterCont:y.number().optional(),unselFilterGray:y.number().optional(),unselFilterHue:y.number().optional(),unselFilterInvert:y.number().optional(),unselFilterOpac:y.number().optional(),unselFilterSatur:y.number().optional(),unselFilterSepia:y.number().optional()}).passthrough(),ko=T({rowTitleTextSize:y.number().optional(),rowTextTextSize:y.number().optional(),objectTitleTextSize:y.number().optional(),objectTextTextSize:y.number().optional(),addonTitleTextSize:y.number().optional(),addonTextTextSize:y.number().optional(),scoreTextSize:y.number().optional()}).passthrough(),Fo=T({objectImgBorderWidth:y.number().optional(),objectImageWidth:y.number().optional(),objectImageMarginTop:y.number().optional(),objectImageMarginBottom:y.number().optional(),objectImgBorderRadiusTopLeft:y.number().optional(),objectImgBorderRadiusTopRight:y.number().optional(),objectImgBorderRadiusBottomRight:y.number().optional(),objectImgBorderRadiusBottomLeft:y.number().optional(),objectImageBoxWidth:y.number().optional()}).passthrough(),jo=T({rowImgBorderWidth:y.number().optional(),rowImageWidth:y.number().optional(),rowImageMarginTop:y.number().optional(),rowImageMarginBottom:y.number().optional(),rowImgBorderRadiusTopLeft:y.number().optional(),rowImgBorderRadiusTopRight:y.number().optional(),rowImgBorderRadiusBottomRight:y.number().optional(),rowImgBorderRadiusBottomLeft:y.number().optional(),rowImageBoxWidth:y.number().optional()}).passthrough(),Do=T({addonImgBorderWidth:y.number().optional(),addonImageWidth:y.number().optional(),addonImageMarginTop:y.number().optional(),addonImageMarginBottom:y.number().optional(),addonImgBorderRadiusTopLeft:y.number().optional(),addonImgBorderRadiusTopRight:y.number().optional(),addonImgBorderRadiusBottomRight:y.number().optional(),addonImgBorderRadiusBottomLeft:y.number().optional(),addonImageBoxWidth:y.number().optional()}).passthrough(),Po=T({objectMargin:y.number().optional(),objectTextPadding:y.number().optional(),objectBorderWidth:y.number().optional(),objectDropShadowH:y.number().optional(),objectDropShadowV:y.number().optional(),objectDropShadowBlur:y.number().optional(),objectDropShadowSpread:y.number().optional(),objectBorderRadiusTopLeft:y.number().optional(),objectBorderRadiusTopRight:y.number().optional(),objectBorderRadiusBottomRight:y.number().optional(),objectBorderRadiusBottomLeft:y.number().optional(),objectBorderImageWidth:y.number().optional(),objectBorderImageSliceTop:y.number().optional(),objectBorderImageSliceBottom:y.number().optional(),objectBorderImageSliceLeft:y.number().optional(),objectBorderImageSliceRight:y.number().optional()}).passthrough(),qo=T({rowMargin:y.number().optional(),rowBodyMarginSides:y.number().optional(),rowBodyMarginTop:y.number().optional(),rowBodyMarginBottom:y.number().optional(),rowTextPaddingY:y.number().optional(),rowTextPaddingX:y.number().optional(),rowDropShadowH:y.number().optional(),rowDropShadowV:y.number().optional(),rowDropShadowBlur:y.number().optional(),rowDropShadowSpread:y.number().optional(),rowButtonXPadding:y.number().optional(),rowButtonYPadding:y.number().optional(),rowBorderRadiusTopLeft:y.number().optional(),rowBorderRadiusTopRight:y.number().optional(),rowBorderRadiusBottomRight:y.number().optional(),rowBorderRadiusBottomLeft:y.number().optional(),rowBorderWidth:y.number().optional(),rowBorderImageWidth:y.number().optional(),rowBorderImageSliceTop:y.number().optional(),rowBorderImageSliceBottom:y.number().optional(),rowBorderImageSliceLeft:y.number().optional(),rowBorderImageSliceRight:y.number().optional()}).passthrough(),Vo=T({addonMargin:y.number().optional(),addonTextPadding:y.number().optional(),addonBorderWidth:y.number().optional(),addonDropShadowH:y.number().optional(),addonDropShadowV:y.number().optional(),addonDropShadowBlur:y.number().optional(),addonDropShadowSpread:y.number().optional(),addonBorderRadiusTopLeft:y.number().optional(),addonBorderRadiusTopRight:y.number().optional(),addonBorderRadiusBottomRight:y.number().optional(),addonBorderRadiusBottomLeft:y.number().optional(),addonBorderImageWidth:y.number().optional(),addonBorderImageSliceTop:y.number().optional(),addonBorderImageSliceBottom:y.number().optional(),addonBorderImageSliceLeft:y.number().optional(),addonBorderImageSliceRight:y.number().optional()}).passthrough(),Lo=T({multiChoiceCounterPosition:y.number().optional(),multiChoiceCounterSize:y.number().optional(),multiChoiceTextSize:y.number().optional()}).passthrough(),No=T({barTextPadding:y.number().optional(),barTextMargin:y.number().optional(),barPadding:y.number().optional(),barMargin:y.number().optional(),barTextSize:y.number().optional()}).passthrough(),Uo=T({backPackWidth:y.number().optional()}).passthrough(),Eo=Mo.merge(ko).merge(Fo).merge(jo).merge(Do).merge(Po).merge(qo).merge(Vo).merge(Lo).merge(No).merge(Uo).passthrough(),Wo=T({template:y.number().optional()}).passthrough(),zo=T({value:y.number().optional(),minValue:y.number().optional(),maxValue:y.number().optional(),discountScore:y.number().optional(),discountScoreCal:y.number().optional(),tmpDisScore:y.number().optional()}).passthrough(),Go=T({index:y.number().optional(),template:y.number().optional(),multipleUseVariable:y.number().optional(),initMultipleTimesMinus:y.number().optional(),selectedThisManyTimesProp:y.number().optional(),defaultAspectWidth:y.number().optional(),defaultAspectHeight:y.number().optional(),addons:x(Wo).optional(),scores:x(zo).optional(),styling:Eo.optional().optional(),numMultipleTimesMinus:y.number().optional(),numMultipleTimesPluss:y.number().optional(),numActivateRandom:y.number().optional(),discountLowLimit:y.number().optional(),discountValue:y.number().optional(),numbAddToAllowChoice:y.number().optional(),bgmFadeInSec:y.number().optional(),bgmFadeOutSec:y.number().optional(),fadeTransitionTime:y.number().optional(),divideWithThis:y.number().optional(),activatedFrom:y.number().optional()}).passthrough(),Ho=T({index:y.number().optional(),template:y.number().optional(),buttonRandomNumber:y.number().optional(),defaultAspectWidth:y.number().optional(),defaultAspectHeight:y.number().optional(),allowedChoices:y.number().optional(),currentChoices:y.number().optional(),objects:x(Go).optional(),styling:Eo.optional(),objectImgObjectFillHeight:y.number().optional(),randomMin:y.number().optional(),randomMax:y.number().optional()}).passthrough(),_o=T({startingSum:y.number(),initValue:y.number(),iconWidth:y.number().optional(),iconHeight:y.number().optional(),negativeIconWidth:y.number().optional(),negativeIconHeight:y.number().optional()}).passthrough(),Yo=T({styling:Eo.optional()}).passthrough(),Xo=T({styling:Eo.optional()}).passthrough();T({curVolume:y.number().optional(),fadeTransitionTime:y.number().optional(),hideBackpackBtn:y.number().optional(),btnBackpackIsOn:y.number().optional(),rowIdLength:y.number().optional(),objectIdLength:y.number().optional(),rowDesignGroups:x(Yo).optional(),objectDesignGroups:x(Xo).optional(),rows:x(Ho).optional(),pointTypes:x(_o).optional(),backpack:x(Ho).optional(),styling:Eo.optional()}).passthrough();const Zo=["autoSaveInterval","bgmFadeInterval","bgmFadeTimer","bgmIsPlaying","bgmObjectId","bgmPlayInterval","bgmTitle","bgmTitleInterval","cancelForcedActivated","comp","compG","compODG","compR","compRDG","curBgmTime","curBgmLength","isSeeking","isFadingOut","lastFadeTime","objectMap","pointTypeMap","wordMap"];function Jo(e){e.isPrivateStyling&&e.privateFilterIsOn&&void 0!==e.styling&&(void 0===e.styling.unselFilterBlurIsOn&&(e.styling.unselFilterBlurIsOn=!1),void 0===e.styling.unselFilterBlur&&(e.styling.unselFilterBlur=0),void 0===e.styling.unselFilterBrightIsOn&&(e.styling.unselFilterBrightIsOn=!1),void 0===e.styling.unselFilterBright&&(e.styling.unselFilterBright=100),void 0===e.styling.unselFilterCont&&(e.styling.unselFilterCont=100),void 0===e.styling.unselFilterGrayIsOn&&(e.styling.unselFilterGrayIsOn=!1),void 0===e.styling.unselFilterGray&&(e.styling.unselFilterGray=0),void 0===e.styling.unselFilterHueIsOn&&(e.styling.unselFilterHueIsOn=!1),void 0===e.styling.unselFilterHue&&(e.styling.unselFilterHue=0),void 0===e.styling.unselFilterInvertIsOn&&(e.styling.unselFilterInvertIsOn=!1),void 0===e.styling.unselFilterInvert&&(e.styling.unselFilterInvert=0),void 0===e.styling.unselFilterOpacIsOn&&(e.styling.unselFilterOpacIsOn=!1),void 0===e.styling.unselFilterOpac&&(e.styling.unselFilterOpac=100),void 0===e.styling.unselFilterSaturIsOn&&(e.styling.unselFilterSaturIsOn=!1),void 0===e.styling.unselFilterSatur&&(e.styling.unselFilterSatur=0),void 0===e.styling.unselFilterSepiaIsOn&&(e.styling.unselFilterSepiaIsOn=!1),void 0===e.styling.unselFilterSepia&&(e.styling.unselFilterSepia=0))}function Ko(e,t){e.isPrivateStyling&&void 0===e.privateFilterIsOn&&void 0!==e.styling&&Object.keys(dt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateFilterIsOn=!0:e.privateFilterIsOn=!1}),e.isPrivateStyling&&void 0===e.privateTextIsOn&&void 0!==e.styling&&Object.keys(ct).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateTextIsOn=!0:e.privateTextIsOn=!1}),e.isPrivateStyling&&void 0===e.privateObjectImageIsOn&&void 0!==e.styling&&Object.keys(ut).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateObjectImageIsOn=!0:e.privateObjectImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateObjectIsOn&&void 0!==e.styling&&Object.keys(ht).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateObjectIsOn=!0:e.privateObjectIsOn=!1}),e.isPrivateStyling&&void 0===e.privateAddonImageIsOn&&void 0!==e.styling&&Object.keys(mt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateAddonImageIsOn=!0:e.privateAddonImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateAddonIsOn&&void 0!==e.styling&&Object.keys(ft).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateAddonIsOn=!0:e.privateAddonIsOn=!1}),e.isPrivateStyling&&void 0===e.privateBackgroundIsOn&&void 0!==e.styling&&Object.keys(pt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateBackgroundIsOn=!0:e.privateBackgroundIsOn=!1}),t&&(e.isPrivateStyling&&void 0===e.privateRowImageIsOn&&void 0!==e.styling&&Object.keys(gt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateRowImageIsOn=!0:e.privateRowImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateRowIsOn&&void 0!==e.styling&&Object.keys(vt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateRowIsOn=!0:e.privateRowIsOn=!1})),Jo(e),e.isPrivateStyling||void 0===e.styling||(void 0!==e.styling.objectImgObjectFillHeight&&(e.objectImgObjectFillHeight=e.styling.objectImgObjectFillHeight),delete e.styling)}function Qo(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const o=t[r];if(-1!==Zo.indexOf(o))delete e[o];else if(Array.isArray(e[o])){if("rows"===o||"backpack"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];if(i.index=t,"backpack"===o&&(i.isBackpack=!0),Ko(i,!0),void 0!==i.styling&&ho(i.styling,void 0===typeof e.version),void 0!==i.rowDesignGroups)for(let e=0;e<i.rowDesignGroups.length;e++)"object"==typeof i.rowDesignGroups[e]&&(i.rowDesignGroups[e]=i.rowDesignGroups[e].id);if(void 0!==i.globalRequirements)for(let e=0;e<i.globalRequirements.length;e++)"object"==typeof i.globalRequirements[e]&&(i.globalRequirements[e]=i.globalRequirements[e].id);if(void 0!==i.image&&i.image.length>0&&(Ao(i.image)?zt.value||(zt.value=Ro(i.image)):Wt.add(i.image)),void 0!==i.objects)for(let t=0;t<i.objects.length;t++){const o=i.objects[t];if(o.index=t,Ko(o,!1),void 0!==o.styling&&ho(o.styling,void 0===typeof e.version),o.multiplyPointtypeIsOn&&("string"==typeof o.pointTypeToMultiply&&(o.pointTypeToMultiply=[o.pointTypeToMultiply]),"number"==typeof o.startingSumAtMultiply&&(o.startingSumAtMultiply=[o.startingSumAtMultiply])),o.dividePointtypeIsOn&&("string"==typeof o.pointTypeToDivide&&(o.pointTypeToDivide=[o.pointTypeToDivide]),"number"==typeof o.startingSumAtDivide&&(o.startingSumAtDivide=[o.startingSumAtDivide])),o.fadeTransitionIsOn&&void 0!==o.fadeTransitionTime&&(o.fadeInTransitionTime=o.fadeTransitionTime,o.fadeOutTransitionTime=o.fadeTransitionTime,delete o.fadeTransitionTime),void 0!==o.groups)for(let e=0;e<o.groups.length;e++)"object"==typeof o.groups[e]&&(o.groups[e]=o.groups[e].id);if(void 0!==o.objectDesignGroups)for(let e=0;e<o.objectDesignGroups.length;e++)"object"==typeof o.objectDesignGroups[e]&&(o.objectDesignGroups[e]=o.objectDesignGroups[e].id);if(void 0!==o.globalRequirements)for(let e=0;e<o.globalRequirements.length;e++)"object"==typeof o.globalRequirements[e]&&(o.globalRequirements[e]=i.globalRequirements[e].id);void 0!==o.image&&o.image.length>0&&(Ao(o.image)?zt.value||(zt.value=Ro(o.image)):Wt.add(o.image));for(let e=0;e<o.addons.length;e++){const t=o.addons[e];if(void 0!==t.template&&0!==t.template||(t.template=1),t.parentId=o.id,void 0!==t.globalRequirements)for(let e=0;e<t.globalRequirements.length;e++)"object"==typeof t.globalRequirements[e]&&(t.globalRequirements[e]=t.globalRequirements[e].id);void 0!==t.image&&t.image.length>0&&(Ao(t.image)?zt.value||(zt.value=Ro(t.image)):Wt.add(t.image))}}}else if("objectDesignGroups"===o||"rowDesignGroups"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];void 0===i.activatedId&&(i.activatedId=""),void 0===i.elements&&(i.elements=[]),void 0===i.backpackElements&&(i.backpackElements=[]);for(let e=0;e<i.elements.length;e++)"object"==typeof i.elements[e]&&(i.elements[e]=i.elements[e].id);for(let e=0;e<i.backpackElements.length;e++)"object"==typeof i.backpackElements[e]&&(i.backpackElements[e]=i.backpackElements[e].id);Jo(i),ho(i.styling,void 0===typeof e.version)}else if("pointTypes"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];void 0===i.initValue&&(i.initValue=i.startingSum)}else if("groups"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];void 0===i.elements&&(i.elements=[]),void 0===i.rowElements&&(i.rowElements=[])}}else"object"==typeof e[o]&&"styling"===o&&ho(e[o],void 0===typeof e.version)}yt.clear(),Ct.clear(),$t.clear(),Bt.clear(),Mt.clear(),St.clear(),Ot.clear(),At.clear(),Rt.clear(),kt.clear(),Ft.clear(),jt.splice(0);const o=Object.keys(Tt);for(let r=0;r<o.length;r++){const e=o[r];Tt.hasOwnProperty(e)?app[e]=Tt[e]:delete app[e]}const i=Object.keys(e);for(let r=0;r<i.length;r++){const t=i[r];app[t]=e[t]}for(let r=0;r<app.googleFonts.length;r++){const e=app.googleFonts[r].replaceAll(" ","+"),t=`https://fonts.googleapis.com/css2?family=${e}&display=swap`,o=document.createElement("link");o.id=e,o.rel="stylesheet",o.href=t,o.crossOrigin="anonymous",document.head.appendChild(o)}for(let r=0;r<app.customFonts.length;r++){const e=app.customFonts[r],t=document.createElement("link");t.id=e,t.rel="stylesheet",t.href=e,t.crossOrigin="anonymous",document.head.appendChild(t)}for(let r=0;r<app.pointTypes.length;r++){const e=app.pointTypes[r];void 0!==e.id&&""!==e.id||(e.id=io(0,4)),e.id=ao(e.id,Ct),void 0===e.initValue&&(e.initValue=e.startingSum),void 0===e.isNotShownObjects&&""!==e.activatedId&&(e.isNotShownObjects=!0),void 0===e.isNotShownPointBar&&""!==e.activatedId&&(e.isNotShownPointBar=!0),Ct.set(e.id,e)}for(let r=0;r<app.rows.length;r++){const e=app.rows[r];void 0!==e.id&&""!==e.id||(e.id=Kt(0,4)),e.id=ao(e.id,$t),$t.set(e.id,e);for(let t=0;t<e.objects.length;t++){const o=e.objects[t];void 0!==o.id&&""!==o.id||(o.id=eo(0,4)),o.id=ao(o.id,Bt),Bt.set(o.id,{choice:o,row:e}),o.isSelectableMultiple&&o.isMultipleUseVariable&&Mt.set(o.id,o.multipleUseVariable)}}for(let r=0;r<app.backpack.length;r++){const e=app.backpack[r];void 0!==e.id&&""!==e.id||(e.id=Kt(0,4)),e.id=ao(e.id,$t),$t.set(e.id,e);for(let t=0;t<e.objects.length;t++){const o=e.objects[t];void 0!==o.id&&""!==o.id||(o.id=eo(0,4)),o.id=ao(o.id,Bt),Bt.set(o.id,{choice:o,row:e}),o.isSelectableMultiple&&o.isMultipleUseVariable&&Mt.set(o.id,o.multipleUseVariable)}}for(let r=0;r<app.groups.length;r++){const e=app.groups[r];void 0!==e.id&&""!==e.id||(e.id=oo(0,4)),e.id=ao(e.id,St),St.set(e.id,app.groups[r])}for(let r=0;r<app.words.length;r++){const e=app.words[r];void 0!==e.id&&""!==e.id||(e.id=Qt(0,4)),e.id=ao(e.id,At),At.set(e.id,app.words[r])}for(let r=0;r<app.variables.length;r++){const e=app.variables[r];void 0!==e.id&&""!==e.id||(e.id=ro(0,4)),e.id=ao(e.id,Rt),Rt.set(e.id,app.variables[r])}if(void 0!==app.rowDesignGroups)for(let r=0;r<app.rowDesignGroups.length;r++){const e=app.rowDesignGroups[r];void 0!==e.id&&""!==e.id||(e.id=to(0,4,!0)),e.id=ao(e.id,kt),kt.set(e.id,e)}if(void 0!==app.objectDesignGroups)for(let r=0;r<app.objectDesignGroups.length;r++){const e=app.objectDesignGroups[r];void 0!==e.id&&""!==e.id||(e.id=to(0,4,!1)),e.id=ao(e.id,Ft),Ft.set(app.objectDesignGroups[r].id,app.objectDesignGroups[r])}if(app.activated.length>0)for(let r=0;r<app.activated.length;r++){const t=e.activated[r].split("/ON#"),o=t[0],i=t.length>0?t[1]:0;yt.set(o,{multiple:i})}app.buildAutoSaveIsOn&&(_t&&_t.abort(),Xt())}async function ei(e){const t=e.querySelectorAll("img"),o=Array.from(t).map(e=>e.complete?Promise.resolve():new Promise(t=>{e.onload=t,e.onerror=t}));return Promise.all(o).then(()=>{})}function ti(e){e.querySelectorAll("img").forEach(e=>{"lazy"===e.loading&&(e.loading="eager")})}function oi(e,t){!function(e,t){const o=window.getComputedStyle(e);for(const r of o)try{t.style.setProperty(r,o.getPropertyValue(r),o.getPropertyPriority(r))}catch(i){console.error(i)}}(e,t);const o=e.children,i=t.children;for(let r=0;r<o.length;r++)oi(o[r],i[r])}async function ii(e){const t=e.querySelectorAll("*"),o=[];t.forEach(e=>{const t=getComputedStyle(e).borderImageSource.match(/url\(["']?(.*?)["']?\)/);t&&t[1]&&o.push(t[1])});const i=o.map(e=>new Promise(t=>{const o=new Image;o.src=e,o.onload=t,o.onerror=t}));await Promise.all(i)}function ri(e=2){return new Promise(t=>{let o=0;requestAnimationFrame(function i(){if(++o>=e)return t();requestAnimationFrame(i)})})}var ni=l("<input/>");function li(e,t){i(t,!0);let n,l=v(t,"use",19,()=>[]),a=v(t,"class",3,""),u=v(t,"type",3,"text"),g=v(t,"placeholder",3," "),m=v(t,"value",15),p=v(t,"files",15,null),h=v(t,"dirty",15,!1),b=v(t,"invalid",15,!1),w=v(t,"updateInvalid",3,!0),I=v(t,"initialInvalid",3,!1),T=v(t,"emptyValueNull",19,()=>null===m()),y=v(t,"emptyValueUndefined",19,()=>void 0===m()),x=M(t,["$$slots","$$events","$$legacy","use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","initialInvalid","emptyValueNull","emptyValueUndefined"]),C=o({}),$=o({});function B(e){return""===e?Number.NaN:+e}function S(e){if("file"!==u())if(""===e.currentTarget.value&&T())m(null);else if(""===e.currentTarget.value&&y())m(void 0);else switch(u()){case"number":m(B(e.currentTarget.value)),""!==e.currentTarget.value&&"0"!==e.currentTarget.value||("-"===e.data?(m("-0"),e.target.value="-0"):"deleteContentBackward"===e.inputType||"insertFromPaste"!==e.inputType||isNaN(parseInt(e.data))?(m("0"),e.target.value="0"):(m(parseInt(e.data)),e.target.value=parseInt(e.data)));break;case"range":m(B(e.currentTarget.value));break;default:m(e.currentTarget.value)}else p(e.currentTarget.files)}function O(){return n}r(()=>{"file"===u()?delete $.value:$.value=null==m()?"":m()}),f(()=>{w()&&I()&&b(O().matches(":invalid"))});var A=ni(),R=e=>{var o;"file"!==u()&&S(e),null==(o=t.oninput)||o.call(t,e)},P=e=>{var o;!function(e){"file"!==u()&&"range"!==u()||S(e),h(!0),w()&&b(O().matches(":invalid"))}(e),null==(o=t.onchange)||o.call(t,e)};return k(A,e=>({class:e,type:u(),placeholder:g(),...$,...C,...x,oninput:R,onchange:P}),[()=>F({[a()]:!0,"mdc-text-field__input":!0})]),s(A,e=>n=e,()=>n),j(A,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},l),d(e,A),c({getAttr:function(e){return e in C?C[e]??null:O().getAttribute(e)},addAttr:function(e,t){C[e]!==t&&(C[e]=t)},removeAttr:function(e){e in C&&null==C[e]||(C[e]=void 0)},focus:function(){O().focus()},blur:function(){O().blur()},getElement:O})}var ai=l("<textarea></textarea>");function si(e,t){i(t,!0);let r,n=v(t,"use",19,()=>[]),l=v(t,"class",3,""),a=v(t,"style",3,""),u=v(t,"value",15,""),g=v(t,"dirty",15,!1),m=v(t,"invalid",15,!1),p=v(t,"updateInvalid",3,!0),h=v(t,"initialInvalid",3,!1),b=v(t,"resizable",3,!0),w=M(t,["$$slots","$$events","$$legacy","use","class","style","value","dirty","invalid","updateInvalid","initialInvalid","resizable"]),I=o({});function T(){return r}f(()=>{p()&&h()&&m(T().matches(":invalid"))});var y=ai(),x=e=>{var o;g(!0),p()&&m(T().matches(":invalid")),null==(o=t.onchange)||o.call(t,e)};return k(y,e=>({class:e,style:`${b()?"":"resize: none; "}${a()}`,...I,...w,onchange:x}),[()=>F({[l()]:!0,"mdc-text-field__input":!0})]),s(y,e=>r=e,()=>r),j(y,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},n),P(()=>q(y,u)),d(e,y),c({getAttr:function(e){return e in I?I[e]??null:T().getAttribute(e)},addAttr:function(e,t){I[e]!==t&&(I[e]=t)},removeAttr:function(e){e in I&&null==I[e]||(I[e]=void 0)},focus:function(){T().focus()},blur:function(){T().blur()},getElement:T})}var di=l('<span class="mdc-text-field__ripple"></span>'),ci=l("<!> <!>",1),ui=l("<span><!> <!></span>"),gi=l("<!> <!> <!>",1),mi=l("<label><!> <!> <!> <!> <!> <!> <!></label>"),pi=l("<div><!> <!> <!> <!> <!></div>"),hi=l("<!> <!>",1);function vi(e,t){i(t,!0);const{applyPassive:l}=E;let a=()=>{};function m(e){return e===a}let I=v(t,"use",19,()=>[]),T=v(t,"class",3,""),y=v(t,"style",3,""),x=v(t,"ripple",3,!0),C=v(t,"disabled",3,!1),$=v(t,"required",3,!1),B=v(t,"textarea",3,!1),P=v(t,"variant",19,()=>B()?"outlined":"standard"),q=v(t,"noLabel",3,!1),le=v(t,"type",3,"text"),ae=v(t,"value",15),se=v(t,"files",15,a),de=v(t,"invalid",15,a),ce=v(t,"updateInvalid",19,()=>m(de())),ue=v(t,"initialInvalid",3,!1),ge=v(t,"dirty",15,!1),me=v(t,"validateOnValueChange",19,ce),pe=v(t,"useNativeValidation",19,ce),he=v(t,"withLeadingIcon",3,a),ve=v(t,"withTrailingIcon",3,a),fe=v(t,"input",7),be=v(t,"floatingLabel",7),we=v(t,"lineRipple",7),Ie=v(t,"notchedOutline",7),Te=v(t,"alwaysFloat",3,!1),ye=M(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","initialInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","children","leadingIcon","trailingIcon","internalCounter","line","helper","alwaysFloat"]);const xe=void 0!==ae()||void 0===ae()&&t.input$emptyValueUndefined||!m(se());m(se())&&se(null),m(de())&&de(!1);let Ce,$e,Be,Se,Oe,Ae,Re=g(o(document.createElement("div"))),Me=g(void 0),ke=new U,Fe=o({}),je=o({}),De=g(void 0),Pe=g(!1),qe=g(o(ue())),Ve=V("SMUI:addLayoutListener"),Le=new Promise(e=>$e=e);const Ne=Y(()=>fe()&&fe().getElement());r(()=>{(ge()||u(qe)||!ce())&&u(Me)&&u(Me).isValid()!==!de()&&(ce()?de(!u(Me).isValid()):u(Me).setValid(!de()))}),r(()=>{u(Me)&&u(Me).getValidateOnValueChange()!==me()&&u(Me).setValidateOnValueChange(!m(me())&&me())}),r(()=>{u(Me)&&u(Me).setUseNativeValidation(!!m(pe())||pe())}),r(()=>{u(Me)&&u(Me).setDisabled(C())});let Ue=ae();function Ee(e){return e in Fe?Fe[e]??null:_e().classList.contains(e)}function We(e){Fe[e]||(Fe[e]=!0)}function ze(e){e in Fe&&!Fe[e]||(Fe[e]=!1)}function Ge(e,t){je[e]!=t&&(""===t||null==t?delete je[e]:je[e]=t)}function He(){if(u(Me)){const e=u(Me).shouldFloat;u(Me).notchOutline(e)}}function _e(){return u(Re)}r(()=>{if(u(Me)&&xe&&Ue!==ae()){Ue=ae();const e=`${null==ae()?"":ae()}`;u(Me).getValue()!==e&&u(Me).setValue(e)}}),Ve&&(Ce=Ve(He)),L("SMUI:textfield:leading-icon:mount",e=>{Be=e}),L("SMUI:textfield:leading-icon:unmount",()=>{Be=void 0}),L("SMUI:textfield:trailing-icon:mount",e=>{Se=e}),L("SMUI:textfield:trailing-icon:unmount",()=>{Se=void 0}),L("SMUI:textfield:helper-text:id",e=>{p(De,e,!0)}),L("SMUI:textfield:helper-text:mount",e=>{Oe=e}),L("SMUI:textfield:helper-text:unmount",()=>{p(De,void 0),Oe=void 0}),L("SMUI:textfield:character-counter:mount",e=>{Ae=e}),L("SMUI:textfield:character-counter:unmount",()=>{Ae=void 0}),f(()=>{var e;if(p(Me,new N({addClass:We,removeClass:ze,hasClass:Ee,registerTextFieldInteractionHandler:(e,t)=>ke.on(_e(),e,t),deregisterTextFieldInteractionHandler:(e,t)=>ke.off(_e(),e,t),registerValidationAttributeChangeHandler:e=>{const t=new MutationObserver(t=>{pe()&&e((e=>e.map(e=>e.attributeName).filter(e=>e))(t))}),o={attributes:!0};return fe()&&t.observe(fe().getElement(),o),t},deregisterValidationAttributeChangeHandler:e=>{e.disconnect()},getNativeInput:()=>{var e;return(null==(e=fe())?void 0:e.getElement())??null},setInputAttr:(e,t)=>{var o;null==(o=fe())||o.addAttr(e,t)},removeInputAttr:e=>{var t;null==(t=fe())||t.removeAttr(e)},isFocused:()=>{var e;return document.activeElement===(null==(e=fe())?void 0:e.getElement())},registerInputInteractionHandler:(e,t)=>{var o;const i=null==(o=fe())?void 0:o.getElement();if(i){const o=l();ke.on(i,e,t,"boolean"==typeof o?{capture:o}:o)}},deregisterInputInteractionHandler:(e,t)=>{var o;const i=null==(o=fe())?void 0:o.getElement();i&&ke.off(i,e,t)},floatLabel:e=>be()&&be().float(e||Te()),getLabelWidth:()=>be()?be().getWidth():0,hasLabel:()=>!!be(),shakeLabel:e=>be()&&be().shake(e),setLabelRequired:e=>be()&&be().setRequired(e),activateLineRipple:()=>we()&&we().activate(),deactivateLineRipple:()=>we()&&we().deactivate(),setLineRippleTransformOrigin:e=>we()&&we().setRippleCenter(e),closeOutline:()=>Ie()&&Ie().closeNotch(),hasOutline:()=>!!Ie(),notchOutline:e=>Ie()&&Ie().notch(e)},{get helperText(){return Oe},get characterCounter(){return Ae},get leadingIcon(){return Be},get trailingIcon(){return Se}}),!0),xe){if(null==fe())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null==(e=u(Me))||e.init()}else W().then(()=>{var e;if(null==fe())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null==(e=u(Me))||e.init()});return $e(),()=>{var e;null==(e=u(Me))||e.destroy(),ke.clear()}}),n(()=>{Ce&&Ce()});var Ye=hi(),Xe=R(Ye),Ze=e=>{var o=mi();k(o,(e,t,o)=>({class:e,style:t,for:void 0,...o}),[()=>F({[T()]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":C(),"mdc-text-field--textarea":B(),"mdc-text-field--filled":"filled"===P(),"mdc-text-field--outlined":"outlined"===P(),"smui-text-field--standard":"standard"===P()&&!B(),"mdc-text-field--no-label":q()||null==t.label,"mdc-text-field--label-floating":u(Pe)||null!=ae()&&""!==ae(),"mdc-text-field--with-leading-icon":m(he())?t.leadingIcon:he(),"mdc-text-field--with-trailing-icon":m(ve())?t.trailingIcon:ve(),"mdc-text-field--with-internal-counter":B()&&t.internalCounter,"mdc-text-field--invalid":de(),...Fe}),()=>Object.entries(je).map(([e,t])=>`${e}: ${t};`).concat([y()]).join(" "),()=>H(ye,["input$","label$","ripple$","outline$","helperLine$"])]);var r=h(o),n=e=>{var o=ci(),i=R(o),r=e=>{var t=di();d(e,t)};z(i,e=>{"filled"===P()&&e(r)});var n=G(i,2),l=e=>{const o=Y(()=>u(Pe)||Te()||null!=ae()&&""!==ae()&&("number"!=typeof ae()||!isNaN(ae())));var i=Y(()=>Z(ye,"label$"));s(K(e,O({get floatAbove(){return u(o)},get required(){return $()},wrapped:!0},()=>u(i),{children:(e,o)=>{var i=A(),r=R(i),n=e=>{},l=(e,o)=>{var i=e=>{var o=Q();ee(()=>te(o,t.label)),d(e,o)},r=e=>{var o=A(),i=R(o);b(i,()=>t.label),d(e,o)};z(e,e=>{"string"==typeof t.label?e(i):e(r,!1)},o)};z(r,e=>{null==t.label?e(n):e(l,!1)}),d(e,i)},$$slots:{default:!0}})),e=>be(e),()=>be())};z(n,e=>{q()||null==t.label||e(l)}),d(e,o)};z(r,e=>{"outlined"!==P()&&e(n)});var l=G(r,2),a=e=>{const o=Y(()=>q()||null==t.label);var i=Y(()=>Z(ye,"outline$"));s(J(e,O({get noLabel(){return u(o)}},()=>u(i),{children:(e,o)=>{var i=A(),r=R(i),n=e=>{const o=Y(()=>u(Pe)||Te()||null!=ae()&&""!==ae()&&("number"!=typeof ae()||!isNaN(ae())));var i=Y(()=>Z(ye,"label$"));s(K(e,O({get floatAbove(){return u(o)},get required(){return $()},wrapped:!0},()=>u(i),{children:(e,o)=>{var i=A(),r=R(i),n=e=>{},l=(e,o)=>{var i=e=>{var o=Q();ee(()=>te(o,t.label)),d(e,o)},r=e=>{var o=A(),i=R(o);b(i,()=>t.label),d(e,o)};z(e,e=>{"string"==typeof t.label?e(i):e(r,!1)},o)};z(r,e=>{null==t.label?e(n):e(l,!1)}),d(e,i)},$$slots:{default:!0}})),e=>be(e),()=>be())};z(r,e=>{q()||null==t.label||e(n)}),d(e,i)},$$slots:{default:!0}})),e=>Ie(e),()=>Ie())};z(l,e=>{"outlined"===P()&&e(a)});var g=G(l,2);_(g,{key:"SMUI:textfield:icon:leading",value:!0,children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.leadingIcon??w),d(e,i)},$$slots:{default:!0}});var v=G(g,2);b(v,()=>t.children??w);var f=G(v,2),V=e=>{var o=ui(),i=h(o),r=Y(()=>Z(ye,"input$"));s(si(i,O({get disabled(){return C()},get required(){return $()},get updateInvalid(){return ce()},get initialInvalid(){return u(qe)},get"aria-controls"(){return u(De)},get"aria-describedby"(){return u(De)}},()=>u(r),{onblur:e=>{var o;p(Pe,!1),p(qe,!0),oe(_e(),"blur",e),null==(o=t.input$onblur)||o.call(t,e)},onfocus:e=>{var o;p(Pe,!0),oe(_e(),"focus",e),null==(o=t.input$onfocus)||o.call(t,e)},get value(){return ae()},set value(e){ae(e)},get dirty(){return ge()},set dirty(e){ge(e)},get invalid(){return de()},set invalid(e){de(e)}})),e=>fe(e),()=>fe());var n=G(i,2);b(n,()=>t.internalCounter??w),ee(e=>re(o,1,e),[()=>ie(F({"mdc-text-field__resizer":!("input$resizable"in ye)||t.input$resizable}))]),d(e,o)},L=e=>{var o=gi(),r=R(o),n=e=>{var o=A(),r=R(o),n=e=>{!function(e,t){i(t,!0);let o,r=M(t,["$$slots","$$events","$$legacy","children"]);s(S(e,O({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--prefix",tag:"span"},()=>r,{children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.children??w),d(e,i)},$$slots:{default:!0}})),e=>o=e,()=>o),c({getElement:function(){return o.getElement()}})}(e,{children:(e,o)=>{var i=Q();ee(()=>te(i,t.prefix)),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=A(),i=R(o);b(i,()=>t.prefix??w),d(e,o)};z(r,e=>{"string"==typeof t.prefix?e(n):e(l,!1)}),d(e,o)};z(r,e=>{null!=t.prefix&&e(n)});var l=G(r,2),a=Y(()=>Z(ye,"input$"));s(li(l,O({get type(){return le()},get disabled(){return C()},get required(){return $()},get updateInvalid(){return ce()},get initialInvalid(){return u(qe)},get"aria-controls"(){return u(De)},get"aria-describedby"(){return u(De)}},()=>q()&&null!=t.label&&"string"==typeof t.label?{placeholder:t.label}:{},()=>u(a),{onblur:e=>{var o;p(Pe,!1),p(qe,!0),oe(_e(),"blur",e),null==(o=t.input$onblur)||o.call(t,e)},onfocus:e=>{var o;p(Pe,!0),oe(_e(),"focus",e),null==(o=t.input$onfocus)||o.call(t,e)},get value(){return ae()},set value(e){ae(e)},get files(){return se()},set files(e){se(e)},get dirty(){return ge()},set dirty(e){ge(e)},get invalid(){return de()},set invalid(e){de(e)}})),e=>fe(e),()=>fe());var g=G(l,2),m=e=>{var o=A(),r=R(o),n=e=>{!function(e,t){i(t,!0);let o,r=M(t,["$$slots","$$events","$$legacy","children"]);s(S(e,O({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--suffix",tag:"span"},()=>r,{children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.children??w),d(e,i)},$$slots:{default:!0}})),e=>o=e,()=>o),c({getElement:function(){return o.getElement()}})}(e,{children:(e,o)=>{var i=Q();ee(()=>te(i,t.suffix)),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=A(),i=R(o);b(i,()=>t.suffix??w),d(e,o)};z(r,e=>{"string"==typeof t.suffix?e(n):e(l,!1)}),d(e,o)};z(g,e=>{null!=t.suffix&&e(m)}),d(e,o)};z(f,e=>{B()&&"string"==typeof ae()?e(V):e(L,!1)});var N=G(f,2);_(N,{key:"SMUI:textfield:icon:leading",value:!1,children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.trailingIcon??w),d(e,i)},$$slots:{default:!0}});var U=G(N,2),E=e=>{var t=Y(()=>Z(ye,"ripple$"));s(ne(e,O(()=>u(t))),e=>we(e),()=>we())};z(U,e=>{"outlined"!==P()&&x()&&e(E)}),s(o,e=>p(Re,e),()=>u(Re)),j(o,(e,t)=>{var o;return null==(o=X)?void 0:o(e,t)},()=>({ripple:"filled"===P(),unbounded:!1,addClass:We,removeClass:ze,addStyle:Ge,eventTarget:u(Ne),activeTarget:u(Ne),initPromise:Le})),j(o,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},I),d(e,o)},Je=e=>{var o=pi();k(o,(e,t,o)=>({class:e,style:t,...o}),[()=>F({[T()]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":C(),"mdc-text-field--textarea":B(),"mdc-text-field--filled":"filled"===P(),"mdc-text-field--outlined":"outlined"===P(),"smui-text-field--standard":"standard"===P()&&!B(),"mdc-text-field--no-label":q()||null==t.label,"mdc-text-field--with-leading-icon":t.leadingIcon,"mdc-text-field--with-trailing-icon":t.trailingIcon,"mdc-text-field--invalid":de(),...Fe}),()=>Object.entries(je).map(([e,t])=>`${e}: ${t};`).concat([y()]).join(" "),()=>H(ye,["input$","label$","ripple$","outline$","helperLine$"])]);var i=h(o),r=e=>{var o=A(),i=R(o);b(i,()=>t.label??w),d(e,o)};z(i,e=>{"string"!=typeof t.label&&e(r)});var n=G(i,2);_(n,{key:"SMUI:textfield:icon:leading",value:!0,children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.leadingIcon??w),d(e,i)},$$slots:{default:!0}});var l=G(n,2);b(l,()=>t.children??w);var a=G(l,2);_(a,{key:"SMUI:textfield:icon:leading",value:!1,children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.trailingIcon??w),d(e,i)},$$slots:{default:!0}});var c=G(a,2);b(c,()=>t.line??w),s(o,e=>p(Re,e),()=>u(Re)),j(o,(e,t)=>{var o;return null==(o=X)?void 0:o(e,t)},()=>({ripple:x(),unbounded:!1,addClass:We,removeClass:ze,addStyle:Ge})),j(o,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},I),d(e,o)};z(Xe,e=>{xe?e(Ze):e(Je,!1)});var Ke=G(Xe,2),Qe=e=>{var o=Y(()=>Z(ye,"helperLine$"));!function(e,t){i(t,!0);let o,r=M(t,["$$slots","$$events","$$legacy","children"]);s(S(e,O({_smuiClass:"mdc-text-field-helper-line",tag:"div"},()=>r,{children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.children??w),d(e,i)},$$slots:{default:!0}})),e=>o=e,()=>o),c({getElement:function(){return o.getElement()}})}(e,O(()=>u(o),{children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.helper??w),d(e,i)},$$slots:{default:!0}}))};return z(Ke,e=>{t.helper&&e(Qe)}),d(e,Ye),c({focus:function(){var e;null==(e=fe())||e.focus()},blur:function(){var e;null==(e=fe())||e.blur()},layout:He,getElement:_e})}var fi=l('<div class="col-12"><!></div>'),bi=l('<div class="row pt-4"><div class="col-12"><!></div> <!></div>'),wi=l('<div class="container-fluid pa-0"><div class="row"><div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),Ii=l("<!> <!> <!>",1);function Ti(e,t){i(t,!0);let r=v(t,"open",7),n=g(o(t.isWord&&t.prevText?t.prevText:""));le(e,{surface$style:"width: 400px; max-width: calc(100vw - 32px);",onSMUIDialogClosed:function(e){t.isWord?t.closeHandler(e,u(n)):t.closeHandler(e),t.onclose()},get open(){return r()},set open(e){r(e)},children:(e,o)=>{var i=Ii(),r=R(i);ae(r,{class:"px-3 pb-0 toolbar toolbar__dialog",children:(e,o)=>{var i=A(),r=R(i);a(r,()=>t.title),d(e,i)},$$slots:{default:!0}});var l=G(r,2);se(l,{children:(e,o)=>{var i=bi(),r=h(i),l=h(r);a(l,()=>t.context);var s=G(r,2),c=e=>{var t=fi();vi(h(t),{textarea:!0,label:"",variant:"filled",input$rows:5,get value(){return u(n)},set value(e){p(n,e,!0)}}),d(e,t)};z(s,e=>{t.isWord&&e(c)}),d(e,i)},$$slots:{default:!0}});var s=G(l,2);de(s,{children:(e,t)=>{var o=wi(),i=h(o),r=h(i),n=h(r);ce(n,{action:"close",children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q("Cancel");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var l=G(r,2),a=h(l);ce(a,{action:"accept",children:(e,t)=>{ue(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=Q("OK");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),d(e,i)},$$slots:{default:!0}}),c()}var yi=l('<div class="row gy-4"><div class="col-sm-6 col-12"><!></div> <div class="col-sm-6 col-12"><!></div> <div class="col-12"><!> <!></div></div>'),xi=l("<!> <!> <!>",1);var Ci=l('<i class="mdi mdi-alpha-a-box-outline"></i>'),$i=l('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12 pt-1"><div> </div> <div> </div></div></div></div>'),Bi=l('<i class="mdi mdi-play"></i>'),Si=l('<i class="mdi mdi-trash-can"></i>'),Oi=l('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),Ai=l('<i class="mdi mdi-content-save"></i>'),Ri=l('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12"><!></div></div></div>'),Mi=l('<i class="mdi mdi-menu-left"></i>'),ki=l('<i class="mdi mdi-menu-right"></i>'),Fi=l('<div class="container-fluid pb-2 mb-2" style="border: 1px solid"><!> <!></div> <div class="row gy-2"><div class="col-12 pb-2"><div class="d-row align-items-center justify-end"><!> <span class="list-text px-2"> </span> <!></div></div></div> <div class="row gy-2"><div class="col-12"><!></div></div>',1),ji=l("<!> <!> <!>",1),Di=l("<!> <!>",1);function Pi(e,t){i(t,!0);let o=v(t,"open",7);const r={action:()=>{},title:"Warning",context:""};let n=g("none"),l=g(1),a=Y(()=>9*(u(l)-1)),m=Y(()=>Math.min(u(a)+9-1,99)),f=Y(()=>Array.from({length:u(m)-u(a)+1},(e,t)=>Et[u(a)+t]));function b(e){const t=`${location.pathname.replace(/\/index\.html$/,"/")}slot-${e}`,o=navigator.language,i=new Date,r=new Intl.DateTimeFormat(o,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(i),n={stored:!0,name:Et[e].name,time:r,app:Zt()};console.log(n),async function(e,t,o,i,r){const n=(await Ht()).transaction(i,"readwrite").objectStore(i);try{await new Promise((o,i)=>{const r=n.put(e,t);r.onsuccess=()=>o(),r.onerror=()=>i(r.error)}),r&&(Et[o].stored=!0,Et[o].time=e.time,Et[o].name=e.name,Et[o].app=e.app)}catch(l){console.log(l)}}(n,t,e,"buildStore",!0)}function w(e){!async function(e,t,o,i){const r=(await Ht()).transaction(o,"readwrite").objectStore(o);try{await new Promise((t,o)=>{const i=r.delete(e);i.onsuccess=()=>t(),i.onerror=()=>o(i.error)}),i&&(Et[t].stored=!1,Et[t].name=`Slot ${t+1}`,Et[t].time="",Et[t].app="")}catch(n){console.log(n)}}(`${location.pathname.replace(/\/index\.html$/,"/")}slot-${e}`,e,"buildStore",!0)}var I=Di(),T=R(I);le(T,{surface$style:"width: 700px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},id:"dialog",get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=ji(),i=R(o);ae(i,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:(e,t)=>{var o=Q("Save/Load Project");d(e,o)},$$slots:{default:!0}});var a=G(i,2);se(a,{class:"pt-3",children:(e,t)=>{var o=Fi(),i=R(o),a=h(i),s=e=>{var t=$i(),o=h(t),i=h(o);me(i,{onclick:()=>{r.action=()=>{So(Ut.app)},r.context="Are you sure you want to load this project?<br>Any unsaved changes will be lost.",p(n,"dlgCommon")},children:(e,t)=>{var o=Ci();d(e,o)},$$slots:{default:!0}});var l=G(o,2),a=h(l),s=h(a),c=h(s),u=G(s,2),g=h(u);ee(()=>{te(c,Ut.name),te(g,Ut.time)}),d(e,t)};z(a,e=>{Ut.stored&&e(s)});var c=G(a,2);ge(c,17,()=>u(f),pe,(e,t,o)=>{var i=A(),l=R(i),a=e=>{var i=Oi(),l=h(i),a=h(l);me(a,{onclick:()=>{r.action=()=>{So(Et[o].app)},r.context="Are you sure you want to load this project?<br>Any unsaved changes will be lost.",p(n,"dlgCommon")},children:(e,t)=>{var o=Bi();d(e,o)},$$slots:{default:!0}});var s=G(l,2),c=h(s),g=h(c),m=h(g),v=G(g,2),f=h(v),b=G(s,2),I=h(b);me(I,{onclick:()=>{r.action=()=>w(o),r.context="Are you sure you want to delete this project?<br>This action cannot be undone.",p(n,"dlgCommon")},children:(e,t)=>{var o=Si();d(e,o)},$$slots:{default:!0}}),ee(()=>{te(m,u(t).name),te(f,u(t).time)}),d(e,i)},s=e=>{var i=Ri(),r=h(i),n=h(r);me(n,{onclick:()=>b(o),children:(e,t)=>{var o=Ai();d(e,o)},$$slots:{default:!0}});var l=G(r,2),a=h(l);vi(h(a),{onclick:()=>u(t).name="",input$onkeydown:e=>{"Enter"===e.key&&b(o)},class:"textbox-mini",variant:"standard",get value(){return u(t).name},set value(e){u(t).name=e}}),d(e,i)};z(l,e=>{u(t).stored?e(a):e(s,!1)}),d(e,i)});var g=G(i,2),m=h(g),v=h(m),I=h(v);me(I,{onclick:()=>u(l)>1?p(l,u(l)-1):p(l,11),children:(e,t)=>{var o=Mi();d(e,o)},$$slots:{default:!0}});var T=G(I,2),y=h(T),x=G(T,2);me(x,{onclick:()=>u(l)<11?p(l,u(l)+1):p(l,1),children:(e,t)=>{var o=ki();d(e,o)},$$slots:{default:!0}});var C=G(g,2),$=h(C),B=h($);ce(B,{onclick:()=>p(n,"appBuildForm"),variant:"raised",children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q("Open Build Form");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),ee(()=>te(y,`Page ${u(l)??""}`)),d(e,o)},$$slots:{default:!0}});var s=G(a,2);de(s,{children:(e,t)=>{ce(e,{action:"close",children:(e,t)=>{ue(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=Q("Close");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var y=G(T,2),x=e=>{const t=Y(()=>"dlgCommon"===u(n));Ti(e,{get open(){return u(t)},onclose:()=>p(n,"none"),get title(){return r.title},get context(){return r.context},closeHandler:e=>{"accept"===e.detail.action&&r.action()}})},C=(e,t)=>{var o=e=>{const t=Y(()=>"appBuildForm"===u(n));!function(e,t){i(t,!0);let o=v(t,"open",7),r=g(void 0),n=g(void 0),l=g("");function a(){let e=[],t=Array.from(yt.keys());t.sort((e,t)=>{let o=Bt.get(e),i=Bt.get(t);return void 0!==o&&void 0!==i?o.row.index!==i.row.index?o.row.index-i.row.index:o.choice.index-i.choice.index:0});for(let o=0;o<t.length;o++){let i=Bt.get(t[o]);void 0!==i&&e.push(i.choice.title)}return e.join(", ")}le(e,{surface$style:"width: 1920px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=xi(),i=R(o);ae(i,{class:"px-3 pb-0 toolbar toolbar__dialog",tabindex:0,autofocus:!0,children:(e,t)=>{var o=Q("Build Form");d(e,o)},$$slots:{default:!0}});var c=G(i,2);se(c,{children:(e,t)=>{var o=yi(),i=h(o),c=h(i);const g=Y(a);s(vi(c,{textarea:!0,get value(){return u(g)},label:"Current Activated Choices Titles",variant:"filled",input$rows:5}),e=>p(r,e,!0),()=>u(r));var m=G(i,2),v=h(m);const f=Y(Zt);s(vi(v,{textarea:!0,get value(){return u(f)},label:"Current Activated Choices ID's",variant:"filled",input$rows:5}),e=>p(n,e,!0),()=>u(n));var b=G(m,2),w=h(b);vi(w,{textarea:!0,label:"Area To Import Activated Choices With Lists Of Id's",variant:"filled",input$rows:5,get value(){return u(l)},set value(e){p(l,e,!0)}});var I=G(w,2);ce(I,{onclick:()=>So(u(l)),variant:"raised",children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q("Import Choices/Clean if empty");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var g=G(c,2);de(g,{children:(e,t)=>{ce(e,{action:"close",children:(e,t)=>{ue(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=Q("Cancel");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),c()}(e,{get open(){return u(t)},onclose:()=>p(n,"none")})};z(e,e=>{"appBuildForm"===u(n)&&e(o)},t)};z(y,e=>{"dlgCommon"===u(n)?e(x):e(C,!1)}),d(e,I),c()}var qi=l('<div class="col"><!></div>'),Vi=l('<div class="col"><!></div>');function Li(e,t){i(t,!0);let o=Y(()=>{let e=Ot.get(t.required.reqId);return void 0!==e&&void 0!==app.globalRequirements?e.requireds:[]});function r(e){let o=!0;if(e.hideRequired&&(o=!t.isEnabled),e.showRequired&&o){if(e.customTextIsOn)return void 0!==e.customText?e.customText:"";switch(e.type){case"id":{let t=e.reqId.split("/ON#"),o=Bt.get(t[0]);if(void 0!==o){let i=o.choice;return`${e.beforeText} ${t.length>1?`${t[1]} `:""} ${i.title} ${e.afterText}`}break}case"point":{let t=Ct.get(e.reqId);if(void 0!==t)return`${e.beforeText} ${e.reqPoints} ${t.name} ${e.afterText}`;break}case"or":{let t=[];for(let o=0;o<e.orRequired.length;o++){let i=e.orRequired[o].req;if(void 0!==i){let o=i.split("/ON#"),r=Bt.get(o[0]),n="";if(void 0!==r){let e=r.choice;n=o.length>1?`${o[1]} `:"",t.push(`${n}${e.title}`)}return"1"===app.orderOrReqText?`${e.beforeText} ${t.join(", ")} ${void 0!==e.orNum?`${app.defaultOrReq} ${e.orNum}`:`${app.defaultOrReq} 1`} ${e.afterText}`:`${e.beforeText} ${void 0!==e.orNum?`${e.orNum} ${app.defaultOrReq}`:`1 ${app.defaultOrReq}`} ${t.join(", ")} ${e.afterText}`}}}case"selFromGroups":if(void 0!==e.selGroups){let t=[];for(let o=0;o<e.selGroups.length;o++){let i=e.selGroups[o],r=St.get(i);void 0!==r&&t.push(r.name)}return"1"===app.orderSelReqText?`${e.beforeText} ${t.join(", ")} ${app.defaultOrReq} ${e.selNum} ${e.afterText}`:`${e.beforeText} ${e.selNum} ${app.defaultOrReq} ${t.join(", ")} ${e.afterText}`}case"selFromRows":if(void 0!==e.selRows){let t=[];for(let o=0;o<e.selRows.length;o++){let i=e.selRows[o],r=$t.get(i);void 0!==r&&t.push(r.title)}return"1"===app.orderSelReqText?`${e.beforeText} ${t.join(", ")} ${app.defaultOrReq} ${e.selNum} ${e.afterText}`:`${e.beforeText} ${e.selNum} ${app.defaultOrReq} ${t.join(", ")} ${e.afterText}`}case"selFromWhole":return"1"===app.orderSelReqText?`${e.beforeText} ${app.defaultOrReq} ${e.selNum} ${e.afterText}`:`${e.beforeText} ${e.selNum} ${app.defaultOrReq} ${e.afterText}`}}return`${e.beforeText} ${e.afterText}`}var n=A(),l=R(n),s=e=>{var i=A(),n=R(i),l=e=>{var i=A(),n=R(i);ge(n,17,()=>u(o),pe,(e,o)=>{var i=A(),n=R(i),l=e=>{var i=qi(),n=h(i);a(n,()=>he.sanitize(no(r(u(o))),Pt)),ee(()=>ve(i,t.scoreText)),d(e,i)};z(n,e=>{u(o).showRequired&&e(l)}),d(e,i)}),d(e,i)},s=e=>{var o=Vi(),i=h(o);a(i,()=>he.sanitize(no(r(t.required)),Pt)),ee(()=>ve(o,t.scoreText)),d(e,o)};z(n,e=>{"gid"===t.required.type?e(l):e(s,!1)}),d(e,i)};z(l,e=>{t.required.showRequired&&!t.isRemoved&&e(s)}),d(e,n),c()}var Ni=l('<img alt="" crossorigin="anonymous"/>'),Ui=l('<img alt="" crossorigin="anonymous"/>'),Ei=l('<h3 class="m-0"><!></h3>'),Wi=l('<img alt="" crossorigin="anonymous"/>'),zi=l('<img alt="" crossorigin="anonymous"/>'),Gi=l("<p><!></p>"),Hi=l('<img alt="" crossorigin="anonymous"/>'),_i=l('<img alt="" crossorigin="anonymous"/>'),Yi=l('<span class="d-column w-100 p-0 align-items-center"><!> <!> <!> <!> <!> <!></span>'),Xi=l('<img alt="" crossorigin="anonymous"/>'),Zi=l('<img alt="" crossorigin="anonymous"/>'),Ji=l('<h2 class="mb-0"><!></h2>'),Ki=l("<p><!></p>"),Qi=l("<div><!></div> <div><!> <!> <!></div>",1),er=l('<h2 class="mb-0"><!></h2>'),tr=l("<p><!></p>"),or=l('<img alt="" crossorigin="anonymous"/>'),ir=l('<img alt="" crossorigin="anonymous"/>'),rr=l("<div><!> <!> <!></div> <div><!></div>",1),nr=l("<div><!></div>");function lr(e,t){i(t,!0);let o=v(t,"windowWidth",3,0),r=v(t,"preloadImages",3,!1),n=Y(()=>lo("privateAddonImageIsOn",t.row,t.choice)),l=Y(()=>lo("privateAddonIsOn",t.row,t.choice)),s=Y(()=>lo("privateFilterIsOn",t.row,t.choice)),g=Y(()=>lo("privateObjectImageIsOn",t.row,t.choice)),m=Y(()=>lo("privateObjectIsOn",t.row,t.choice)),p=Y(()=>lo("privateTextIsOn",t.row,t.choice)),f=Y(()=>co(t.addon.requireds)),b=Y(()=>u(n).addonImageBoxWidth??50),w=Y(()=>{let e=u(l).useAddonDesign,o=(e?u(l).addonBorderRadiusIsPixels:u(m).objectBorderRadiusIsPixels)?"px":"%",i=0,r=0,n=0,a=[];if(e){if(u(l).addonBorderImage&&a.push(`border-image: url('${u(l).addonBorderImage}') ${u(l).addonBorderImageSliceTop} ${u(l).addonBorderImageSliceRight} ${u(l).addonBorderImageSliceBottom} ${u(l).addonBorderImageSliceLeft} / ${u(l).addonBorderImageWidth}px ${u(l).addonBorderImageRepeat}; border-style: solid; padding: ${u(l).addonBorderImageWidth}px;`),u(l).useAddonBackgroundImage&&u(l).addonBackgroundImage&&(a.push(`background-image: url('${u(l).addonBackgroundImage}'); ${u(l).isObjectBackgroundRepeat?"background-repeat: repeat;":u(l).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;"}`),i=a.length),u(l).addonBgColorIsOn&&(a.push(`background-color: ${u(l).addonBgColor};`),r=a.length),a.push(`margin: ${u(l).addonMargin}px;`),a.push(`border-radius: ${u(l).addonBorderRadiusTopLeft}${o} ${u(l).addonBorderRadiusTopRight}${o} ${u(l).addonBorderRadiusBottomRight}${o} ${u(l).addonBorderRadiusBottomLeft}${o};`),u(l).addonOverflowIsOn&&a.push("overflow: hidden;"),u(l).addonBorderIsOn||t.isActive&&u(s).selBorderColorIsOn||!t.isEnabled&&u(s).reqBorderColorIsOn){let e=u(l).addonBorderColor;!t.isEnabled&&u(s).reqBorderColorIsOn?e=u(s).reqFilterBorderColor:t.isActive&&u(s).selBorderColorIsOn&&(e=u(s).selFilterBorderColor),a.push(`border: ${u(l).addonBorderWidth}px ${u(l).addonBorderStyle} ${e};`)}u(l).addonDropShadowIsOn&&(u(l).addonUseBoxShadowIsOn?a.push(`box-shadow: ${u(l).addonDropShadowH}px ${u(l).addonDropShadowV}px ${u(l).addonDropShadowBlur}px ${u(l).addonDropShadowColor};`):(n=a.length,a.push(`filter: drop-shadow(${u(l).addonDropShadowH}px ${u(l).addonDropShadowV}px ${u(l).addonDropShadowBlur}px ${u(l).addonDropShadowColor})`))),0===n&&(a.push("filter:"),n=a.length),t.isEnabled&&u(f)&&(t.isActive?(u(s).selFilterBlurIsOn&&a.push(` blur(${u(s).selFilterBlur}px)`),u(s).selFilterBrightIsOn&&a.push(` brightness(${u(s).selFilterBright}%)`),u(s).selFilterContIsOn&&a.push(` contrast(${u(s).selFilterCont}%)`),u(s).selFilterGrayIsOn&&a.push(` grayscale(${u(s).selFilterGray}%)`),u(s).selFilterHueIsOn&&a.push(` hue-rotate(${u(s).selFilterHue}deg)`),u(s).selFilterInvertIsOn&&a.push(` invert(${u(s).selFilterInvert}%)`),u(s).selFilterOpacIsOn&&a.push(` opacity(${u(s).selFilterOpac}%)`),u(s).selFilterSaturIsOn&&a.push(` saturate(${u(s).selFilterSatur})`),u(s).selFilterSepiaIsOn&&a.push(` sepia(${u(s).selFilterGray}%)`)):(u(s).unselFilterBlurIsOn&&a.push(` blur(${u(s).unselFilterBlur}px)`),u(s).unselFilterBrightIsOn&&a.push(` brightness(${u(s).unselFilterBright}%)`),u(s).unselFilterContIsOn&&a.push(` contrast(${u(s).unselFilterCont}%)`),u(s).unselFilterGrayIsOn&&a.push(` grayscale(${u(s).unselFilterGray}%)`),u(s).unselFilterHueIsOn&&a.push(` hue-rotate(${u(s).unselFilterHue}deg)`),u(s).unselFilterInvertIsOn&&a.push(` invert(${u(s).unselFilterInvert}%)`),u(s).unselFilterOpacIsOn&&a.push(` opacity(${u(s).unselFilterOpac}%)`),u(s).unselFilterSaturIsOn&&a.push(` saturate(${u(s).unselFilterSatur})`),u(s).unselFilterSepiaIsOn&&a.push(` sepia(${u(s).unselFilterGray}%)`)),a.length===n?a.splice(n-1,1):a.push(";")),u(l).addonGradientIsOn&&a.push(`background-image: linear-gradient('${u(l).addonGradient}');`)}return t.addon.showAddon&&t.isEnabled&&!u(f)&&(0===n&&(a.push("filter:"),n=a.length),u(s).reqFilterBlurIsOn&&a.push(` blur(${u(s).reqFilterBlur}px)`),u(s).reqFilterBrightIsOn&&a.push(` brightness(${u(s).reqFilterBright}%)`),u(s).reqFilterContIsOn&&a.push(` contrast(${u(s).reqFilterCont}%)`),u(s).reqFilterGrayIsOn&&a.push(` grayscale(${u(s).reqFilterGray}%)`),u(s).reqFilterHueIsOn&&a.push(` hue-rotate(${u(s).reqFilterHue}deg)`),u(s).reqFilterInvertIsOn&&a.push(` invert(${u(s).reqFilterInvert}%)`),u(s).reqFilterOpacIsOn&&a.push(` opacity(${u(s).reqFilterOpac}%)`),u(s).reqFilterSaturIsOn&&a.push(` saturate(${u(s).reqFilterSatur})`),u(s).reqFilterSepiaIsOn&&a.push(` sepia(${u(s).reqFilterGray}%)`),a.length===n?a.splice(n-1,1):a.push(";"),u(s).reqBgColorIsOn&&(u(s).reqOverlayOnImage||(0!==r&&a.splice(r-1,1),0!==i&&a.splice(i-1,1)),a.push(`background-color: ${u(s).reqFilterBgColor};`)),u(l).addonGradientIsOn&&a.push(`background-image: linear-gradient('${u(l).addonGradientOnReq}');`)),a.join(" ")}),I=Y(()=>{let e=[];return e.push(`font-family: ${u(p).addonTitle};font-size: ${u(p).addonTitleTextSize}%;text-align: ${u(p).addonTitleAlign};`),!t.isEnabled&&u(s).reqATitleColorIsOn?e.push(`color: ${u(s).reqFilterATitleColor};`):t.isActive&&u(s).selATitleColorIsOn?e.push(`color: ${u(s).selFilterATitleColor};`):e.push(`color: ${u(p).addonTitleColor};`),u(l).useAddonDesign?u(l).titlePaddingIsOn&&e.push(`padding: ${u(l).addonTextPadding}px;`):u(m).titlePaddingIsOn&&e.push(`padding: ${u(m).objectTextPadding}px;`),e.join(" ")}),T=Y(()=>{let e=[];return e.push(`font-family: ${u(p).addonText};text-align: ${u(p).addonTextAlign};font-size: ${u(p).addonTextTextSize}%;white-space: pre-line;`),!t.isEnabled&&u(s).reqATextColorIsOn?e.push(`color: ${u(s).reqFilterATextColor};`):t.isActive&&u(s).selATextColorIsOn?e.push(`color: ${u(s).selFilterATextColor};`):e.push(`color: ${u(p).addonTextColor};`),u(l).useAddonDesign?e.push(`padding: ${u(l).addonTextPadding}px;`):e.push(`padding: ${u(m).objectTextPadding}px;`),e.join(" ")}),y=Y(()=>{var e,o;let i=[],r=u(n).useAddonImage,l=(r?u(n).addonImgBorderRadiusIsPixels:u(g).objectImgBorderRadiusIsPixels)?"px":"%";return r?(i.push(`width: ${u(n).addonImageWidth}%; margin-top: ${u(n).addonImageMarginTop}%; margin-bottom: ${u(n).addonImageMarginBottom}%;`),u(n).addonImgObjectFillIsOn&&i.push(`object-fit: ${u(n).addonImgObjectFillStyle}; height: ${(null==(e=t.choice)?void 0:e.addonImgObjectFillHeight)??200}px;`),i.push(`border-radius: ${u(n).addonImgBorderRadiusTopLeft}${l} ${u(n).addonImgBorderRadiusTopRight}${l} ${u(n).addonImgBorderRadiusBottomRight}${l} ${u(n).addonImgBorderRadiusBottomLeft}${l};`),u(n).addonImgOverflowIsOn&&i.push("overflow: hidden;"),u(n).addonImgBorderIsOn&&i.push(`border: ${u(n).addonImgBorderWidth}px ${u(n).addonImgBorderStyle} ${u(n).addonImgBorderColor};`)):(i.push(`width: ${u(g).objectImageWidth}%; margin-top: ${u(g).objectImageMarginTop}%; margin-bottom: ${u(g).objectImageMarginBottom}%;`),u(g).objectImgObjectFillIsOn&&i.push(`object-fit: ${u(g).objectImgObjectFillStyle}; height: ${(null==(o=t.row)?void 0:o.objectImgObjectFillHeight)??200}px;`),i.push(`border-radius: ${u(g).objectImgBorderRadiusTopLeft}${l} ${u(g).objectImgBorderRadiusTopRight}${l} ${u(g).objectImgBorderRadiusBottomRight}${l} ${u(g).objectImgBorderRadiusBottomLeft}${l};`),u(g).objectImgOverflowIsOn&&i.push("overflow: hidden;"),u(g).objectImgBorderIsOn&&i.push(`border: ${u(g).objectImgBorderWidth}px ${u(g).objectImgBorderStyle} ${u(g).objectImgBorderColor};`)),i.join(" ")}),x=Y(()=>`font-family: ${u(p).scoreText}; font-size: ${u(p).scoreTextSize}%; text-align: ${u(p).scoreTextAlign}; color: ${u(p).scoreTextColor};`);var C=A(),$=R(C),B=e=>{var i=nr(),n=h(i),l=e=>{var i=Yi(),n=h(i),l=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var i=Ni();ee(()=>{fe(i,"src",t.addon.image),ve(i,u(y)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=Ui();ee(()=>{fe(o,"src",t.addon.image),ve(o,u(y)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(n,e=>{var i;(1===t.addon.template||o()<=960)&&t.addon.image&&t.addon.image.length>0&&!(null==(i=t.row)?void 0:i.addonImageRemoved)&&e(l)});var s=G(n,2),c=e=>{var o=Ei(),i=h(o);a(i,()=>he.sanitize(no(t.addon.title),Pt)),ee(()=>ve(o,u(I))),d(e,o)};z(s,e=>{var o;""===t.addon.title||(null==(o=t.row)?void 0:o.addonTitleRemoved)||e(c)});var g=G(s,2);ge(g,17,()=>t.addon.requireds,pe,(e,o)=>{const i=Y(()=>{var e;return null==(e=t.row)?void 0:e.addonRequirementRemoved});Li(e,{get isRemoved(){return u(i)},get isEnabled(){return u(f)},get required(){return u(o)},get scoreText(){return u(x)}})});var m=G(g,2),p=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var i=Wi();ee(()=>{fe(i,"src",t.addon.image),ve(i,u(y)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=zi();ee(()=>{fe(o,"src",t.addon.image),ve(o,u(y)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(m,e=>{var o;5===t.addon.template&&t.addon.image&&t.addon.image.length>0&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(p)});var v=G(m,2),b=e=>{var o=Gi(),i=h(o);a(i,()=>he.sanitize(no(t.addon.text),Pt)),ee(()=>ve(o,u(T))),d(e,o)};z(v,e=>{var o;""===t.addon.text||(null==(o=t.row)?void 0:o.addonTextRemoved)||e(b)});var w=G(v,2),C=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var i=Hi();ee(()=>{fe(i,"src",t.addon.image),ve(i,u(y)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=_i();ee(()=>{fe(o,"src",t.addon.image),ve(o,u(y)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(w,e=>{var o;4===t.addon.template&&t.addon.image&&t.addon.image.length>0&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(C)}),d(e,i)},s=e=>{var o=A(),i=R(o),n=e=>{var o=Qi(),i=R(o),n=h(i),l=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var i=Xi();ee(()=>{fe(i,"src",t.addon.image),ve(i,u(y)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=Zi();ee(()=>{fe(o,"src",t.addon.image),ve(o,u(y)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(n,e=>{var o;t.addon.image&&t.addon.image.length>0&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(l)});var s=G(i,2),c=h(s),g=e=>{var o=Ji(),i=h(o);a(i,()=>he.sanitize(no(t.addon.title),Pt)),ee(()=>ve(o,u(I))),d(e,o)};z(c,e=>{var o;""===t.addon.title||(null==(o=t.row)?void 0:o.addonTitleRemoved)||e(g)});var m=G(c,2);ge(m,17,()=>t.addon.requireds,pe,(e,o)=>{const i=Y(()=>{var e;return null==(e=t.row)?void 0:e.addonRequirementRemoved});Li(e,{get isRemoved(){return u(i)},get isEnabled(){return u(f)},get required(){return u(o)},get scoreText(){return u(x)}})});var p=G(m,2),v=e=>{var o=Ki(),i=h(o);a(i,()=>he.sanitize(no(t.addon.text),Pt)),ee(()=>ve(o,u(T))),d(e,o)};z(p,e=>{var o;""===t.addon.text||(null==(o=t.row)?void 0:o.addonTextRemoved)||e(v)}),ee(()=>{ve(i,`max-width: ${u(b)??""}%`),ve(s,`max-width: ${100-u(b)}%`)}),d(e,o)},l=(e,o)=>{var i=e=>{var o=rr(),i=R(o),n=h(i),l=e=>{var o=er(),i=h(o);a(i,()=>he.sanitize(no(t.addon.title),Pt)),ee(()=>ve(o,u(I))),d(e,o)};z(n,e=>{var o;""===t.addon.title||(null==(o=t.row)?void 0:o.addonTitleRemoved)||e(l)});var s=G(n,2);ge(s,17,()=>t.addon.requireds,pe,(e,o)=>{const i=Y(()=>{var e;return null==(e=t.row)?void 0:e.addonRequirementRemoved});Li(e,{get isRemoved(){return u(i)},get isEnabled(){return u(f)},get required(){return u(o)},get scoreText(){return u(x)}})});var c=G(s,2),g=e=>{var o=tr(),i=h(o);a(i,()=>he.sanitize(no(t.addon.text),Pt)),ee(()=>ve(o,u(T))),d(e,o)};z(c,e=>{var o;""===t.addon.text||(null==(o=t.row)?void 0:o.addonTextRemoved)||e(g)});var m=G(i,2),p=h(m),v=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var i=or();ee(()=>{fe(i,"src",t.addon.image),ve(i,u(y)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=ir();ee(()=>{fe(o,"src",t.addon.image),ve(o,u(y)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(p,e=>{var o;t.addon.image&&t.addon.image.length>0&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(v)}),ee(()=>{ve(i,`max-width: ${100-u(b)}%`),ve(m,`max-width: ${u(b)??""}%`)}),d(e,o)};z(e,e=>{3===t.addon.template&&e(i)},o)};z(i,e=>{2===t.addon.template?e(n):e(l,!1)}),d(e,o)};z(n,e=>{t.addon.template>=4||1===t.addon.template||o()<=960?e(l):e(s,!1)}),ee(()=>ve(i,u(w))),d(e,i)};z($,e=>{(t.addon.showAddon||co(t.addon.requireds))&&e(B)}),d(e,C),c()}var ar=l('<i class="mdi mdi-minus"></i>'),sr=l('<i class="mdi mdi-plus"></i>'),dr=l('<div class="d-row justify-space-around w-100"><!> <div><!></div> <!></div>');function cr(e,t){i(t,!0);var o=dr(),r=h(o);const n=Y(()=>!t.isEnabled);me(r,{class:"counter-icons",get disabled(){return u(n)},get onclick(){return t.selectedOneLess},children:(e,o)=>{var i=ar();ee(()=>ve(i,t.multiChoiceButton)),d(e,i)},$$slots:{default:!0}});var l=G(r,2),s=h(l);a(s,()=>t.choice.multipleUseVariable);var g=G(l,2);const m=Y(()=>!t.isEnabled);me(g,{class:"counter-icons",get disabled(){return u(m)},get onclick(){return t.selectedOneMore},children:(e,o)=>{var i=sr();ee(()=>ve(i,t.multiChoiceButton)),d(e,i)},$$slots:{default:!0}}),ee(()=>ve(l,t.multiChoiceText)),d(e,o),c()}var ur=l('<img class="px-1" alt=""/>'),gr=l('<img class="px-1" alt=""/>'),mr=l('<img class="px-1" alt=""/>'),pr=l('<img class="px-1" alt=""/>'),hr=l("<!> <!> <!> <!> <!> <!> <!>",1),vr=l('<div><div class="col-12"><p class="m-0 d-flex align-items-center"><!></p></div></div>');function fr(e,t){i(t,!0);let o=Y(()=>lo("privateTextIsOn",t.row,t.choice)),r=Y(()=>Ct.get(t.score.id)),n=Y(()=>{let e=[];return e.push(`${t.score.afterText}`),t.score.discountIsOn&&t.score.discountShow&&void 0!==t.score.discountAfterText&&e.push(`${t.score.discountAfterText}`),e.join(" ")}),l=Y(()=>{let e=[];return e.push(`${t.score.beforeText}`),t.score.discountIsOn&&t.score.discountShow&&void 0!==t.score.discountBeforeText&&e.push(`${t.score.discountBeforeText}`),e.join(" ")}),s=Y(()=>t.score.hideValue?"":t.score.isRandom&&!t.score.setValue&&void 0!==t.score.maxValue?t.score.maxValue<0?`${u(m)} ~ ${u(p)}`:`${u(p)} ~ ${u(m)}`:`${u(g)}`),g=Y(()=>{var e;let o=t.score.discountShow?t.score.discountScore??t.score.value:t.score.value;if(o=Math.abs(o),null==(e=u(r))?void 0:e.plussOrMinusAdded){return`${u(r).plussOrMinusInverted?u(v)?"-":"+":u(v)?"+":"-"}${o}`}return`${o}`}),m=Y(()=>{var e;if(void 0!==t.score.maxValue){let o=t.score.maxValue<0,i=Math.abs(t.score.maxValue);if(null==(e=u(r))?void 0:e.plussOrMinusAdded){return`${u(r).plussOrMinusInverted?o?"-":"+":o?"+":"-"}${i}`}return`${i}`}return""}),p=Y(()=>{var e;if(void 0!==t.score.minValue){let o=t.score.minValue<0,i=Math.abs(t.score.minValue);if(null==(e=u(r))?void 0:e.plussOrMinusAdded){return`${u(r).plussOrMinusInverted?o?"-":"+":o?"+":"-"}${i}`}return`${i}`}return""}),v=Y(()=>t.score.discountShow?(t.score.discountScore??t.score.value)<0:t.score.value<0),f=Y(()=>{var e;let t=[];return t.push(`font-family: ${u(o).scoreText}; font-size: ${u(o).scoreTextSize}%; text-align: ${u(o).scoreTextAlign};`),(null==(e=u(r))?void 0:e.pointColorsIsOn)?u(v)?t.push(`color: ${u(r).positiveColor};`):t.push(`color: ${u(r).negativeColor};`):t.push(`color: ${u(o).scoreTextColor};`),t.join(" ")}),b=Y(()=>{var e;return(null==(e=u(r))?void 0:e.negativeIconIsOn)&&u(v)}),w=Y(()=>{var e,t;return u(b)?null==(e=u(r))?void 0:e.negativeImageSidePlacement:null==(t=u(r))?void 0:t.imageSidePlacement}),I=Y(()=>{var e,t;return u(b)?null==(e=u(r))?void 0:e.negativeImageOnSide:null==(t=u(r))?void 0:t.imageOnSide}),T=Y(()=>{var e,t;return(u(b)?null==(e=u(r))?void 0:e.negativeImage:null==(t=u(r))?void 0:t.image)??""}),y=Y(()=>{var e,t;return(u(b)?null==(e=u(r))?void 0:e.negativeIconWidth:null==(t=u(r))?void 0:t.iconWidth)??0}),x=Y(()=>{var e,t;return(u(b)?null==(e=u(r))?void 0:e.negativeIconHeight:null==(t=u(r))?void 0:t.iconHeight)??0}),C=Y(()=>!u(w)&&!u(I)),$=Y(()=>!u(w)&&u(I)),B=Y(()=>u(w)&&!u(I)),S=Y(()=>u(w)&&u(I));var O=A(),M=R(O),k=e=>{var o=vr(),i=h(o),c=h(i),g=h(c),m=e=>{var t=hr(),o=R(t),i=e=>{var t=ur();ee(()=>{fe(t,"src",u(T)),ve(t,`width: ${u(y)??""}px; height: ${u(x)??""}px;`)}),d(e,t)};z(o,e=>{u(C)&&e(i)});var r=G(o,2);a(r,()=>he.sanitize(u(l),Pt));var c=G(r,2),g=e=>{var t=gr();ee(()=>{fe(t,"src",u(T)),ve(t,`width: ${u(y)??""}px; height: ${u(x)??""}px;`)}),d(e,t)};z(c,e=>{u($)&&e(g)});var m=G(c,2);a(m,()=>he.sanitize(u(s),Pt));var p=G(m,2),h=e=>{var t=mr();ee(()=>{fe(t,"src",u(T)),ve(t,`width: ${u(y)??""}px; height: ${u(x)??""}px;`)}),d(e,t)};z(p,e=>{u(B)&&e(h)});var v=G(p,2);a(v,()=>he.sanitize(u(n),Pt));var f=G(v,2),b=e=>{var t=pr();ee(()=>{fe(t,"src",u(T)),ve(t,`width: ${u(y)??""}px; height: ${u(x)??""}px;`)}),d(e,t)};z(f,e=>{u(S)&&e(b)}),d(e,t)},p=e=>{var t=A(),o=R(t);a(o,()=>he.sanitize(`${u(l)} ${u(s)} ${u(n)}`,Pt)),d(e,t)};z(g,e=>{var t;(null==(t=u(r))?void 0:t.iconIsOn)?e(m):e(p,!1)}),ee(e=>{re(o,1,`row m-0 ${e??""}`),ve(i,u(f))},[()=>co(t.score.requireds)]),d(e,o)};z(M,e=>{(function(){if(t.score.showScore){if(void 0!==u(r)){if(u(r).isNotShownObjects)return!1;if(void 0!==t.score.activatedId&&""!==t.score.activatedId)return void 0!==Ot.get(t.score.activatedId)?co(t.score.requireds):so(t.score.activatedId)}return!0}return!1})()&&co(t.score.requireds)&&e(k)}),d(e,O),c()}var br=l('<div class="col"><!></div>'),wr=l('<img alt="" crossorigin="anonymous"/>'),Ir=l('<img alt="" crossorigin="anonymous"/>'),Tr=l('<h3 class="m-0"><!></h3>'),yr=l('<img alt="" crossorigin="anonymous"/>'),xr=l('<img alt="" crossorigin="anonymous"/>'),Cr=l("<p><!></p>"),$r=l('<img alt="" crossorigin="anonymous"/>'),Br=l('<img alt="" crossorigin="anonymous"/>'),Sr=l('<span class="d-column w-100 p-0 align-items-center"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></span>'),Or=l('<img alt="" crossorigin="anonymous"/>'),Ar=l('<img alt="" crossorigin="anonymous"/>'),Rr=l('<h2 class="mb-0"><!></h2>'),Mr=l("<p><!></p>"),kr=l('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div>',1),Fr=l('<h2 class="mb-0"><!></h2>'),jr=l("<p><!></p>"),Dr=l('<img alt="" crossorigin="anonymous"/>'),Pr=l('<img alt="" crossorigin="anonymous"/>'),qr=l('<div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div>',1),Vr=l('<div class="row m-0 p-0 w-100"><!></div>'),Lr=l("<div><span><span><!></span></span></div>"),Nr=l("<!> <!>",1);function Ur(e,t){i(t,!0);const o=v(t,"preloadImages",3,!1),r=[],n={choice:null,row:null,context:"",prevText:""};let l=g(void 0),m=Y(()=>lo("privateBackgroundIsOn",t.row,t.choice)),f=Y(()=>lo("privateFilterIsOn",t.row,t.choice)),b=Y(()=>lo("privateMultiChoiceIsOn",t.row,t.choice)),w=Y(()=>lo("privateObjectImageIsOn",t.row,t.choice)),T=Y(()=>lo("privateObjectIsOn",t.row,t.choice)),y=Y(()=>lo("privateTextIsOn",t.row,t.choice)),x=Y(()=>u(w).objectImageBoxWidth??0),C=g("none"),B=!1,S=Y(()=>co(t.choice.requireds)),O=Y(()=>t.choice.isActive),M=Y(()=>u(T).objectHeight),k=Y(()=>{let e=[];return e.push(`font-family: ${u(y).objectTitle};font-size: ${u(y).objectTitleTextSize}%;text-align: ${u(y).objectTitleAlign};`),!u(S)&&u(f).reqCTitleColorIsOn?e.push(`color: ${u(f).reqFilterCTitleColor};`):u(O)&&u(f).selCTitleColorIsOn?e.push(`color: ${u(f).selFilterCTitleColor};`):e.push(`color: ${u(y).objectTitleColor};`),u(T).titlePaddingIsOn&&e.push(`padding: ${u(T).objectTextPadding}px;`),e.join(" ")}),F=Y(()=>`font-family: ${u(b).multiChoiceTextFont}; color: ${u(y).scoreTextColor}; font-size: ${u(b).multiChoiceTextSize}%; align-content: center;`),j=Y(()=>`font-size: ${u(b).multiChoiceCounterSize}%; color: ${u(y).scoreTextColor};`),D=Y(()=>!t.choice.hideMultipleCounter||u(S)),P=Y(()=>{let e=[];return e.push(`font-family: ${u(y).objectText};text-align: ${u(y).objectTextAlign};font-size: ${u(y).objectTextTextSize}%;white-space: pre-line;`),!u(S)&&u(f).reqCTextColorIsOn?e.push(`color: ${u(f).reqFilterCTextColor};`):u(O)&&u(f).selCTextColorIsOn?e.push(`color: ${u(f).selFilterCTextColor};`):e.push(`color: ${u(y).objectTextColor};`),e.push(`padding: ${u(T).objectTextPadding}px;`),e.join(" ")}),q=Y(()=>{const e=u(T).objectBorderRadiusIsPixels?"px":"%";let o=0,i=0,r=0,n=[];if(u(T).objectBorderImage&&n.push(`border-image: url('${u(T).objectBorderImage}') ${u(T).objectBorderImageSliceTop} ${u(T).objectBorderImageSliceRight} ${u(T).objectBorderImageSliceBottom} ${u(T).objectBorderImageSliceLeft} / ${u(T).objectBorderImageWidth}px ${u(T).objectBorderImageRepeat}; border-style: solid; padding: ${u(T).objectBorderImageWidth}px;`),u(m).objectBackgroundImage&&(n.push(`background-image: url('${u(m).objectBackgroundImage}'); ${u(m).isObjectBackgroundRepeat?"background-repeat: repeat;":u(m).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;"}`),o=n.length),u(m).objectBgColorIsOn&&(n.push(`background-color: ${u(m).objectBgColor};`),i=n.length),n.push(`margin: ${u(T).objectMargin}px;`),n.push(`border-radius: ${u(T).objectBorderRadiusTopLeft}${e} ${u(T).objectBorderRadiusTopRight}${e} ${u(T).objectBorderRadiusBottomRight}${e} ${u(T).objectBorderRadiusBottomLeft}${e};`),u(T).objectOverflowIsOn&&n.push("overflow: hidden;"),u(T).objectBorderIsOn||u(O)&&u(f).selBorderColorIsOn||!u(S)&&u(f).reqBorderColorIsOn){let e=u(T).objectBorderColor;!u(S)&&u(f).reqBorderColorIsOn?e=u(f).reqFilterBorderColor:u(O)&&u(f).selBorderColorIsOn&&(e=u(f).selFilterBorderColor),n.push(`border: ${u(T).objectBorderWidth}px ${u(T).objectBorderStyle} ${e};`)}return u(T).objectDropShadowIsOn&&(u(T).objectUseBoxShadowIsOn?n.push(`box-shadow: ${u(T).objectDropShadowH}px ${u(T).objectDropShadowV}px ${u(T).objectDropShadowBlur}px ${u(T).objectDropShadowColor};`):(r=n.length,n.push(`filter: drop-shadow(${u(T).objectDropShadowH}px ${u(T).objectDropShadowV}px ${u(T).objectDropShadowBlur}px ${u(T).objectDropShadowColor})`))),0===r&&(n.push("filter:"),r=n.length),u(S)?(u(O)?(u(f).selFilterBlurIsOn&&n.push(` blur(${u(f).selFilterBlur}px)`),u(f).selFilterBrightIsOn&&n.push(` brightness(${u(f).selFilterBright}%)`),u(f).selFilterContIsOn&&n.push(` contrast(${u(f).selFilterCont}%)`),u(f).selFilterGrayIsOn&&n.push(` grayscale(${u(f).selFilterGray}%)`),u(f).selFilterHueIsOn&&n.push(` hue-rotate(${u(f).selFilterHue}deg)`),u(f).selFilterInvertIsOn&&n.push(` invert(${u(f).selFilterInvert}%)`),u(f).selFilterOpacIsOn&&n.push(` opacity(${u(f).selFilterOpac}%)`),u(f).selFilterSaturIsOn&&n.push(` saturate(${u(f).selFilterSatur})`),u(f).selFilterSepiaIsOn&&n.push(` sepia(${u(f).selFilterGray}%)`),n.length===r?n.splice(r-1,1):n.push(";"),u(f).selBgColorIsOn&&(0!==i&&n.splice(i-1,1),u(f).selOverlayOnImage||0!==o&&n.splice(o-1,1),n.push(`background-color: ${u(f).selFilterBgColor};`)),u(T).objectGradientIsOn&&n.push(`background-image: linear-gradient('${u(T).objectGradientOnSelect}');`)):(u(f).unselFilterBlurIsOn&&n.push(` blur(${u(f).unselFilterBlur}px)`),u(f).unselFilterBrightIsOn&&n.push(` brightness(${u(f).unselFilterBright}%)`),u(f).unselFilterContIsOn&&n.push(` contrast(${u(f).unselFilterCont}%)`),u(f).unselFilterGrayIsOn&&n.push(` grayscale(${u(f).unselFilterGray}%)`),u(f).unselFilterHueIsOn&&n.push(` hue-rotate(${u(f).unselFilterHue}deg)`),u(f).unselFilterInvertIsOn&&n.push(` invert(${u(f).unselFilterInvert}%)`),u(f).unselFilterOpacIsOn&&n.push(` opacity(${u(f).unselFilterOpac}%)`),u(f).unselFilterSaturIsOn&&n.push(` saturate(${u(f).unselFilterSatur})`),u(f).unselFilterSepiaIsOn&&n.push(` sepia(${u(f).unselFilterGray}%)`),n.length===r?n.splice(r-1,1):n.push(";"),u(T).objectGradientIsOn&&n.push(`background-image: linear-gradient('${u(T).objectGradient}');`)),!app.isPointerCursor||t.choice.isNotSelectable||t.choice.isSelectableMultiple||n.push("cursor: pointer;")):(u(f).reqFilterBlurIsOn&&n.push(` blur(${u(f).reqFilterBlur}px)`),u(f).reqFilterBrightIsOn&&n.push(` brightness(${u(f).reqFilterBright}%)`),u(f).reqFilterContIsOn&&n.push(` contrast(${u(f).reqFilterCont}%)`),u(f).reqFilterGrayIsOn&&n.push(` grayscale(${u(f).reqFilterGray}%)`),u(f).reqFilterHueIsOn&&n.push(` hue-rotate(${u(f).reqFilterHue}deg)`),u(f).reqFilterInvertIsOn&&n.push(` invert(${u(f).reqFilterInvert}%)`),u(f).reqFilterOpacIsOn&&n.push(` opacity(${u(f).reqFilterOpac}%)`),u(f).reqFilterSaturIsOn&&n.push(` saturate(${u(f).reqFilterSatur})`),u(f).reqFilterSepiaIsOn&&n.push(` sepia(${u(f).reqFilterGray}%)`),n.length===r?n.splice(r-1,1):n.push(";"),u(f).reqBgColorIsOn&&(0!==i&&n.splice(i-1,1),u(f).reqOverlayOnImage||0!==o&&n.splice(o-1,1),n.push(`background-color: ${u(f).reqFilterBgColor};`)),u(T).objectGradientIsOn&&n.push(`background-image: linear-gradient('${u(T).objectGradientOnReq}');`)),n.join(" ")}),V=Y(()=>{let e=[];const o=u(w).objectImgBorderRadiusIsPixels?"px":"%";return e.push(`width: ${u(w).objectImageWidth}%; margin-top: ${u(w).objectImageMarginTop}%; margin-bottom: ${u(w).objectImageMarginBottom}%;`),u(w).objectImgObjectFillIsOn&&e.push(`object-fit: ${u(w).objectImgObjectFillStyle}; height: ${t.row.objectImgObjectFillHeight}px;`),e.push(`border-radius: ${u(w).objectImgBorderRadiusTopLeft}${o} ${u(w).objectImgBorderRadiusTopRight}${o} ${u(w).objectImgBorderRadiusBottomRight}${o} ${u(w).objectImgBorderRadiusBottomLeft}${o};`),u(w).objectImgOverflowIsOn&&e.push("overflow: hidden;"),u(w).objectImgBorderIsOn&&e.push(`border: ${u(w).objectImgBorderWidth}px ${u(w).objectImgBorderStyle} ${u(w).objectImgBorderColor};`),e.join(" ")}),L=Y(()=>`font-family: ${u(y).scoreText}; font-size: ${u(y).scoreTextSize}%; text-align: ${u(y).scoreTextAlign}; color: ${u(y).scoreTextColor};`),N=[];function U(e,t,o,i){let n=!1;if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===r.indexOf(e.id)&&t.activateThisChoice.split(",").some(t=>t.split("/ON#")[0]===e.id)&&(r.push(e.id),n=!0),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss){let r=t.multipleUseVariable;if(i>0)for(let n=0;n<i;n++)Q(t,o),r++,e.isAllowDeselect||(t.numMultipleTimesMinus+=1);else if(i<0)for(let n=0;n>-1*i;n++)te(t,o),r--,e.isAllowDeselect||(t.numMultipleTimesPluss-=1);if(t.multipleUseVariable!==r){const o=Math.abs(t.numMultipleTimesMinus-t.numMultipleTimesPluss);if(t.numMultipleTimesMinus>t.numMultipleTimePluss){const r=xt.get(t.id);i>0?(t.numMultipleTimesMinus-=o,void 0!==r?r.multiple+=o:xt.set(t.id,{multiple:o,isAllowDeselect:e.isAllowDeselect??!1})):i<0&&(void 0!==r?r.multiple-=o:xt.set(t.id,{multiple:-o,isAllowDeselect:e.isAllowDeselect??!1}))}}}}else t.isActive||Z(t,o),e.isAllowDeselect||(t.forcedActivated=!0),t.activatedFrom??(t.activatedFrom=0),n||t.activatedFrom++;t.isActive||(delete t.forcedActivated,xt.set(t.id,{multiple:i,isAllowDeselect:e.isAllowDeselect??!1}))}function E(e,t,o,i){if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===r.indexOf(e.id)&&t.activateThisChoice.split(",").some(t=>t.split("/ON#")[0]===e.id)&&r.push(e.id),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss)if(t.isActive){if(i>0)for(let r=0;r<i;r++)e.isAllowDeselect||(t.numMultipleTimesMinus-=1),e.isNotDeactivate||te(t,o);else if(i<0)for(let r=0;r>-1*i;r++)e.isAllowDeselect||(t.numMultipleTimesPluss+=1),e.isNotDeactivate||Q(t,o)}else{const o=xt.get(t.id);let r=0;void 0!==o?(r=o.multiple-i,0===r?xt.delete(t.id):xt.set(t.id,{multiple:r,isAllowDeselect:e.isAllowDeselect??!1})):xt.delete(t.id)}}else void 0!==t.activatedFrom?(t.activatedFrom--,t.activatedFrom<=0&&(t.isActive?(delete t.activatedFrom,delete t.forcedActivated,e.isNotDeactivate||J(t,o)):xt.delete(t.id))):(delete t.forcedActivated,!e.isNotDeactivate&&t.isActive&&J(t,o))}function W(e){if(void 0!==e.activateThisChoice){let t=e.activateThisChoice.split(","),o=new Map;for(let e=0;e<t.length;e++){let[i,r="0"]=t[e].split("/ON#"),n=parseInt(r),l=St.get(i);if(void 0!==l)for(let e=0;e<l.elements.length;e++)yt.has(l.elements[e])||o.set(l.elements[e],n);else yt.has(i)||o.set(i,n)}let i=[...o.keys()],r=Math.min(i.length,e.numActivateRandom??0),n=r;for(let e=i.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[i[e],i[t]]=[i[t],i[e]]}let l=[];for(let a=0;a<r;){let t=i[a],s=Bt.get(t);if(void 0!==s){let d=s.row,c=s.choice;if(U(e,c,d,o.get(t)??0),!c.isActive){if(l.length<r&&i.length>n){i[a]=i[n++],void 0!==c.activatedFrom&&(c.activatedFrom--,0===c.activatedFrom&&xt.delete(c.id));continue}break}l.push(t)}a++}e.isSelectableMultiple?(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),e.activatedRandomMul[e.multipleUseVariable-1]=[...l]):e.activatedRandom=[...l]}}function H(e,t,o){Array.from(yt.entries()).forEach(([o,i])=>{const r=Bt.get(o);if(void 0!==r){const o=r.row,i=r.choice,n=new I;let l=!1;for(let r=0;r<i.scores.length;r++){const a=i.scores[r];if(!a.isNotRecalculatable){const r=Ct.get(a.id);if(void 0!==r){if(e.discountOther&&a.isChangeDiscount&&void 0!==a.tmpDisScore){if(r.belowZeroNotAllowed&&r.startingSum+a.tmpDisScore<0)if(i.forcedActivated&&(delete i.forcedActivated,i.isAllowDeselect||xt.set(i.id,{multiple:i.multipleUseVariable})),i.isSelectableMultiple&&i.isMultipleUseVariable)for(let e=0;e<i.multipleUseVariable;e++)i.isActive&&te(i,o);else i.isActive&&J(i,o);else r.startingSum+=a.tmpDisScore,n.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore;0===N.length?N.push(`Scores Updated On: ${i.title}`):N.push(`, ${i.title}`),l=!0}const s=t.get(a.id)??0;if(i.isActive){const t=co(a.requireds),d=new I(JSON.parse(JSON.stringify([...yt])));d.delete(e.id),o.currentChoices-=1,r.startingSum+=s;const c=co(a.requireds,d);if(o.currentChoices+=1,r.startingSum-=s,c!==t){let e=a.discountIsOn&&void 0!==a.discountScore?a.discountScore:a.value;if(c)if(i.isSelectableMultiple&&i.isMultipleUseVariable&&void 0!==i.numMultipleTimesMinus){for(let t=i.multipleUseVariable-1;t>=0;t--)void 0!==a.isActiveMul&&a.isActiveMul[t]&&(r.belowZeroNotAllowed&&r.startingSum+e<0?i.forcedActivated&&i.isActive?(i.forcedActivated=!1,i.numMultipleTimesMinus--,te(i,o),i.forcedActivated=!0):te(i,o):(r.startingSum+=e,n.set(a.id,e),a.isActiveMul[t]=!1))}else i.isSelectableMultiple||a.isActive&&(r.belowZeroNotAllowed&&r.startingSum+e<0?(i.forcedActivated&&delete i.forcedActivated,J(i,o)):(l=!0,r.startingSum+=e,n.set(a.id,e),delete a.isActive));else a.isActive||(r.belowZeroNotAllowed&&r.startingSum-e<0?(i.forcedActivated&&delete i.forcedActivated,J(i,o)):(l=!0,r.startingSum-=e,n.set(a.id,e),a.isActive=!0));0===N.length?N.push(`Scores Updated On: ${i.title}`):N.push(`, ${i.title}`),l=!0}}}}}l&&H(i,n)}}),N.length>0&&!app.hideScoresUpdated&&(Nt.labelText=N.join(""),Nt.isOpen=!0),N.splice(0)}function _(e,t,o){Array.from(yt.entries()).forEach(([o,i])=>{const r=Bt.get(o);if(void 0!==r){const o=r.row,i=r.choice,n=new I;let l=!1;for(let r=0;r<i.scores.length;r++){const a=i.scores[r];if(!a.isNotRecalculatable){const r=Ct.get(a.id);if(void 0!==r){if(e.discountOther&&a.isChangeDiscount&&void 0!==a.tmpDisScore){const e=i.multipleUseVariable;if(i.isSelectabeleMultiple&&i.isMultipleUseVariable&&void 0!==i.numMultipleTimesMinus){for(let t=e-1;t>=0;t--)i.isActive&&(r.belowZeroNotAllowed&&r.startingSum+a.tmpDisScore<0?i.forcedActivated&&i.isActive?(i.forcedActivated=!1,i.numMultipleTimesMinus--,te(i,o),i.forcedActivated=!0):te(i,o):r.startingSum+=a.tmpDisScore);i.isActive&&(n.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore)}else i.isSelectableMultiple||(r.belowZeroNotAllowed&&r.startingSum+a.tmpDisScore<0?(i.forcedActivated&&delete i.forcedActivated,J(i,o)):(r.startingSum+=a.tmpDisScore,n.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore));0===N.length?N.push(`Scores Updated On: ${i.title}`):N.push(`, ${i.title}`),l=!0}const s=t.get(a.id)??0;if(i.isActive){const t=co(a.requireds),d=new I(JSON.parse(JSON.stringify([...yt])));d.delete(e.id),o.currentChoices-=1,r.startingSum+=s;const c=co(a.requireds,d);if(o.currentChoices+=1,r.startingSum-=s,c!==t){let e=a.discountIsOn&&void 0!==a.discountScore?a.discountScore:a.value;if(c)if(i.isSelectableMultiple&&i.isMultipleUseVariable&&void 0!==i.numMultipleTimesMinus){for(let t=i.multipleUseVariable-1;t>=0;t--)void 0!==a.isActiveMul&&a.isActiveMul[t]&&(r.belowZeroNotAllowed&&r.startingSum+e<0?i.forcedActivated&&i.isActive?(i.forcedActivated=!1,i.numMultipleTimesMinus--,te(i,o),i.forcedActivated=!0):te(i,o):(r.startingSum+=e,n.set(a.id,e),a.isActiveMul[t]=!1))}else i.isSelectableMultiple||a.isActive&&(r.belowZeroNotAllowed&&r.startingSum+e<0?(i.forcedActivated&&delete i.forcedActivated,J(i,o)):(l=!0,r.startingSum+=e,n.set(a.id,e),delete a.isActive));else a.isActive||(r.belowZeroNotAllowed&&r.startingSum-e<0?(i.forcedActivated&&delete i.forcedActivated,J(i,o)):(l=!0,r.startingSum-=e,n.set(a.id,e),a.isActive=!0));0===N.length?N.push(`Scores Updated On: ${i.title}`):N.push(`, ${i.title}`),l=!0}}}}}l&&_(i,n)}}),N.length>0&&!app.hideScoresUpdated&&(Nt.labelText=N.join(""),Nt.isOpen=!0),N.splice(0)}function X(){let e=!1;Array.from(xt.entries()).forEach(([t,o])=>{const i=Bt.get(t);if(void 0!==i){const r=i.row,n=i.choice;n.isActive||(Z(n,r),n.isActive&&(xt.delete(t),e=!0,o.isAllowDeselect||(n.forcedActivated=!0)))}}),e&&X()}function Z(e,o){!co(e.requireds)||o.isInfoRow||e.isNotSelectable||e.isSelectableMultiple||e.forcedActivated||e.isButtonObject||t.resultRow&&t.resultRow.isInfoRow||(e.isActive?e.selectOnce||J(e,o):K(e,o))}function J(e,t){if(To(e,!1)){const o=()=>{var o,i,r,n;const l=new I;for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(co(o.requireds)&&o.isActive||o.isActive){const e=Ct.get(o.id);if(void 0!==e){const t=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;e.startingSum+=t;let i=l.get(o.id);void 0!==i?l.set(o.id,-t+i):l.set(o.id,-t),delete o.isActive,delete o.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandom){for(let t=0;t<e.activatedRandom.length;t++){const o=Bt.get(e.activatedRandom[t]);if(void 0!==o){const t=o.row,i=o.choice;E(e,i,t,0)}}delete e.activatedRandom}else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),r=i.length>1?parseInt(i[1]):0,n=Bt.get(i[0]);if(void 0!==n){const t=n.row,o=n.choice;E(e,o,t,r)}else{const t=St.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Bt.get(o[t]);if(void 0!==i){const t=i.row,o=i.choice;E(e,o,t,r)}}}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){if(void 0!==e.discountChoices)for(let t=0;t<e.discountChoices.length;t++){const r=Bt.get(e.discountChoices[t]);if(void 0!==r)for(let t=0;t<r.choice.scores.length;t++){const n=r.choice.scores[t];n.isNotDiscountable||0!==(null==(o=e.discountPointTypes)?void 0:o.length)&&-1===((null==(i=e.discountPointTypes)?void 0:i.indexOf(n.id))??-1)||bo(e,n)}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=St.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=Bt.get(o.elements[t]);if(void 0!==i)for(let o=0;o<i.choice.scores.length;o++){const o=i.choice.scores[t];o.isNotDiscountable||0!==(null==(r=e.discountPointTypes)?void 0:r.length)&&-1===((null==(n=e.discountPointTypes)?void 0:n.indexOf(o.id))??-1)||bo(e,o)}}}if(e.isActive=!1,t.currentChoices-=1,yt.delete(e.id),Array.from(yt.entries()).forEach(([t,o])=>{const i=Bt.get(t);if(void 0!==i){const t=i.row,r=i.choice;if(r.id!==e.id&&!co(r.requireds))if(r.forcedActivated&&(delete r.forcedActivated,r.isAllowDeselect||xt.set(r.id,{multiple:o.multiple})),0===o.multiple)r.isActive&&J(r,t);else if(o.multiple>0)for(let e=0;e<o.multiple;e++)r.isActive&&te(r,t)}}),e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply){let t=0;for(let o=0;o<e.pointTypeToMultiply.length;o++){let i=Ct.get(e.pointTypeToMultiply[o]);if(void 0!==i){for(let r=jt.length-1;r>=0;r--){let n=jt[r];if(n.multiplyPointtypeIsOnCheck&&void 0!==n.startingSumAtMultiply&&(i.startingSum-=n.startingSumAtMultiply[o].value*n.startingSumAtMultiply[o].calcVal,i.startingSum+=n.startingSumAtMultiply[o].value),n.dividePointtypeIsOnCheck&&void 0!==n.startingSumAtDivide&&(i.startingSum-=n.startingSumAtDivide[o].value/n.startingSumAtDivide[o].calcVal,i.startingSum+=n.startingSumAtDivide[o].value),n.id===e.id){t=r;break}}for(let e=t+1;e<jt.length;e++){let t=jt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(t.startingSumAtMultiply[o].value=i.startingSum,i.startingSum*=t.startingSumAtMultiply[o].calcVal),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(t.startingSumAtDivide[o].value=i.startingSum,i.startingSum/=t.startingSumAtDivide[o].calcVal)}}}delete e.multiplyPointtypeIsOnCheck,delete e.startingSumAtMultiply,e.dividePointtypeIsOnCheck||jt.splice(t,1)}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide){let t=0;for(let o=0;o<e.pointTypeToDivide.length;o++){let i=Ct.get(e.pointTypeToDivide[o]);if(void 0!==i){for(let r=jt.length-1;r>=0;r--){let n=jt[r];if(n.multiplyPointtypeIsOnCheck&&void 0!==n.startingSumAtMultiply&&(i.startingSum-=n.startingSumAtMultiply[o].value*n.startingSumAtMultiply[o].calcVal,i.startingSum+=n.startingSumAtMultiply[o].value),n.dividePointtypeIsOnCheck&&void 0!==n.startingSumAtDivide&&(i.startingSum-=n.startingSumAtDivide[o].value/n.startingSumAtDivide[o].calcVal,i.startingSum+=n.startingSumAtDivide[o].value),n.id===e.id){t=r;break}}for(let e=t+1;e<jt.length;e++){let t=jt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(t.startingSumAtMultiply[o].value=i.startingSum,i.startingSum*=t.startingSumAtMultiply[o].calcVal),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(t.startingSumAtDivide[o].value=i.startingSum,i.startingSum/=t.startingSumAtDivide[o].calcVal)}}}delete e.dividePointtypeIsOnCheck,delete e.startingSumAtDivide,jt.splice(t,1)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!1:"2"===e.changeType?o.isTrue=!0:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const o=$t.get(e.idOfAllowChoice[t]);if(void 0!==o&&(o.allowedChoices-=e.numbAddToAllowChoice,o.allowedChoices>0&&o.currentChoices>=o.allowedChoices))for(let e=0;e<o.objects.length;e++){const t=o.objects[e];if(t.isActive&&!t.forcedActivated)if(t.isSelectableMultiple){let e=t.multipleUseVariable;for(let i=0;i<e;i++)te(t,o)}else J(t,o);if(o.allowedChoices>=o.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){const t=At.get(e.idOfTheTextfieldWord);void 0!==t&&(t.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(app.styling.barTextColor=e.changedBarTextColor)),e.setBgmIsOn&&qt&&void 0!==e.bgmId&&e.bgmId.length>0&&(Vt.bgmIsPlaying=!1,mo(e,e.bgmId,0)),e.muteBgm&&qt){const e=$(qt);app.isMute=!1,e&&"function"==typeof e.unMute&&e.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=$t.get(e.hiddenContentsRow[t]);if(void 0!==o)for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":delete o.objectTitleRemoved;break;case"2":delete o.objectImageRemoved;break;case"3":delete o.objectTextRemoved;break;case"4":delete o.objectScoreRemoved;break;case"5":delete o.objectRequirementRemoved;break;case"6":delete o.addonTitleRemoved;break;case"7":delete o.addonImageRemoved;break;case"8":delete o.addonTextRemoved}}H(e,l),X()};-1===r.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,o()},1e3*app.fadeTransitionTime)):o()),0===r.indexOf(e.id)&&r.splice(0)}}function K(e,t){let o=!0;if(t.allowedChoices>0&&t.currentChoices>=t.allowedChoices){let e=0;for(let o=0;o<t.objects.length;o++){const i=t.objects[o];if(i.isActive){if(!i.forcedActivated){if(i.isSelectableMultiple){let e=i.multipleUseVariable;for(let o=0;o<e;o++)Z(i,t)}else Z(i,t);break}e++}}e>=t.allowedChoices&&(o=!1)}if(o){for(let t=0;t<e.scores.length;t++){const o=e.scores[t];o.isRandom&&!o.setValue&&void 0!==o.maxValue&&void 0!==o.minValue&&(o.value=Math.floor(Math.random()*(o.maxValue-o.minValue+1))+o.minValue,o.setValue=!0)}if(To(e,!0)){const o=()=>{var o,i,r,n,a,s,d,c,g,m,p;const h=new I;if(e.isActive=!0,yt.set(e.id,{multiple:0}),t.currentChoices+=1,e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){if(void 0!==e.discountChoices)for(let t=0;t<e.discountChoices.length;t++){const r=Bt.get(e.discountChoices[t]);if(void 0!==r)for(let t=0;t<r.choice.scores.length;t++){const n=r.choice.scores[t];n.isNotDiscountable||0!==(null==(o=e.discountPointTypes)?void 0:o.length)&&-1===(null==(i=e.discountPointTypes)?void 0:i.indexOf(n.id))||wo(e,n)}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=St.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=Bt.get(o.elements[t]);if(void 0!==i)for(let o=0;o<i.choice.scores.length;o++){const o=i.choice.scores[t];o.isNotDiscountable||0!==(null==(r=e.discountPointTypes)?void 0:r.length)&&-1===(null==(n=e.discountPointTypes)?void 0:n.indexOf(o.id))||wo(e,o)}}}for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(co(o.requireds)&&!o.isActive){const e=Ct.get(o.id);if(void 0!==e){const t=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;e.startingSum-=t,o.isActive=!0;let i=h.get(o.id);void 0!==i?h.set(o.id,t+i):h.set(o.id,t)}}}if(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&Oo(e),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom)W(e);else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),r=i.length>1?parseInt(i[1]):0,n=Bt.get(i[0]);if(void 0!==n){const t=n.row,o=n.choice;U(e,o,t,r)}else{const t=St.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Bt.get(o[t]);if(void 0!==i){const t=i.row,o=i.choice;U(e,o,t,r)}}}}}}if(e.deactivateOtherChoice&&void 0!==e.deactivateThisChoice){const t=e.deactivateThisChoice.split(",");for(let e=0;e<t.length;e++){const o=t[e].split("/ON#"),i=o.length>1?parseInt(o[1]):0,r=Bt.get(o[0]);if(void 0!==r){const e=r.row,t=r.choice;if(t.isActive)if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let o=0;o<i;o++)te(t,e);else J(t,e)}else{const e=St.get(o[0]);if(void 0!==e){const t=e.elements;for(let e=0;e<t.length;e++){const o=Bt.get(t[e]);if(void 0!==o){const e=o.row,t=o.choice;if(t.isActive)if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let o=0;o<i;o++)te(t,e);else J(t,e)}}}}}}if(Array.from(yt.entries()).forEach(([t,o])=>{const i=Bt.get(t);if(void 0!==i){const t=i.row,r=i.choice;if(r.id!==e.id&&!co(r.requireds))if(r.forcedActivated&&(delete r.forcedActivated,r.isAllowDeselect||xt.set(r.id,{multiple:o.multiple})),0===o.multiple)r.isActive&&J(r,t);else if(o.multiple>0)for(let e=0;e<o.multiple;e++)r.isActive&&te(r,t)}}),e.multiplyPointtypeIsOn&&void 0!==e.pointTypeToMultiply&&void 0!==e.multiplyWithThis){let t=0;e.multiplyPointtypeIsOnCheck=!0,"object"!=typeof e.startingSumAtMultiply&&(e.startingSumAtMultiply=[]);for(let o=0;o<e.pointTypeToMultiply.length;o++){let i=Ct.get(e.pointTypeToMultiply[o]);if(void 0!==i)if(e.multiplyPointtypeIsId&&"string"==typeof e.multiplyWithThis){let r=Ct.get(e.multiplyWithThis);void 0!==r?(e.startingSumAtMultiply[o]={value:i.startingSum,calcVal:r.startingSum},i.startingSum*=r.startingSum):t++}else"number"==typeof e.multiplyWithThis&&(e.startingSumAtMultiply[o]={value:i.startingSum,calcVal:e.multiplyWithThis},i.startingSum*=e.multiplyWithThis);else t++}t===e.pointTypeToMultiply.length&&delete e.multiplyPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck&&jt.push(e)}if(e.dividePointtypeIsOn&&void 0!==e.pointTypeToDivide&&void 0!==e.divideWithThis){let t=0;e.dividePointtypeIsOnCheck=!0,"object"!=typeof e.startingSumAtDivide&&(e.startingSumAtDivide=[]);for(let o=0;o<e.pointTypeToDivide.length;o++){let i=Ct.get(e.pointTypeToDivide[o]);if(void 0!==i)if(e.dividePointtypeIsId&&"string"==typeof e.divideWithThis){let r=Ct.get(e.divideWithThis);void 0!==r?0===r.startingSum?t++:(e.startingSumAtDivide[o]={value:i.startingSum,calcVal:r.startingSum},i.startingSum/=r.startingSum):t++}else"number"==typeof e.divideWithThis&&(0===e.dividedWithThis?t++:(e.startingSumAtDivide[o]={value:i.startingSum,calcVal:e.divideWithThis},i.startingSum/=e.divideWithThis));else t++}t===e.pointTypeToDivide.length&&delete e.dividePointtypeIsOnCheck,!e.multiplyPointtypeIsOnCheck&&e.dividePointtypeIsOnCheck&&jt.push(e)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!0:"2"===e.changeType?o.isTrue=!1:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const o=$t.get(e.idOfAllowChoice[t]);if(void 0!==o&&(o.allowedChoices+=e.numbAddToAllowChoice,o.allowedChoices>0&&o.currentChoices>=o.allowedChoices))for(let e=0;e<o.objects.length;e++){const t=o.objects[e];if(t.isActive&&!t.forcedActivated)if(t.isSelectableMultiple){let e=t.multipleUseVariable;for(let i=0;i<e;i++)te(t,o)}else J(t,o);if(o.allowedChoices>=o.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){const t=At.get(e.idOfTheTextfieldWord);void 0!==t&&(t.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,Lt.currentDialog="appImageUpload",Lt.data=e,Lt.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn??(app.btnBackpackIsOn=0),app.btnBackpackIsOn+=1),e.changeBackground)if(e.changeBgImage){if(void 0!==e.bgImage){const t=app.styling.backgroundImage??"";app.styling.backgroundImage=e.bgImage,e.bgImage=t}}else if(void 0!==e.changedBgColorCode){const t=app.styling.backgroundColor??"";app.styling.backgroundColor=e.changedBgColorCode,e.changedBgColorCode=t}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor){const t=app.styling.barBackgroundColor??"";app.styling.barBackgroundColor=e.changedBarBgColor,e.changedBarBgColor=t}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor){const t=app.styling.barIconColor??"";app.styling.barIconColor=e.changedBarIconColor,e.changedBarIconColor=t}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor){const t=app.styling.barTextColor??"";app.styling.barTextColor=e.changedBarTextColor,e.changedBarTextColor=t}}if(e.scrollToRow){const t=window;if(e.scrollToObject){if(void 0!==e.scrollObjectId&&e.scrollObjectId.length>0){const o=Bt.get(e.scrollObjectId);if(void 0!==o){const e=o.choice,i=null==(s=null==(a=u(l))?void 0:a.parentElement)?void 0:s.children;void 0!==i&&t.scrollTo({top:i[e.index].getBoundingClientRect().top+t.scrollY,behavior:"smooth"})}}}else if(void 0!==e.scrollRowId&&e.scrollRowId.length>0){const o=$t.get(e.scrollRowId);if(void 0!==o){const e=null==(p=null==(m=null==(g=null==(c=null==(d=u(l))?void 0:d.parentElement)?void 0:c.parentElement)?void 0:g.parentElement)?void 0:m.parentElement)?void 0:p.children;void 0!==e&&t.scrollTo({top:e[o.index].getBoundingClientRect().top+t.scrollY,behavior:"smooth"})}}}if(e.setBgmIsOn&&void 0!==e.bgmId&&e.bgmId.length>0&&(Vt.bgmIsPlaying=!0,Vt.isBgmInit?mo(e,e.bgmId,0):(po(e),Vt.isBgmInit=!0)),e.muteBgm&&qt){const e=$(qt);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=$t.get(e.hiddenContentsRow[t]);if(void 0!==o){o.textIsRemoved||(o.textIsRemoved=!0);for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!0;break;case"2":o.objectImageRemoved=!0;break;case"3":o.objectTextRemoved=!0;break;case"4":o.objectScoreRemoved=!0;break;case"5":o.objectRequirementRemoved=!0;break;case"6":o.addonTitleRemoved=!0;break;case"7":o.addonImageRemoved=!0;break;case"8":o.addonTextRemoved=!0}}}e.cleanACtivatedOnSelect&&yo(),_(e,h),X()};if(e.customTextfieldIsOn&&!B)return n.choice=e,n.row=t,n.context=void 0!==e.wordPromptText?e.wordPromptText:"",n.prevText=e.wordChangeSelect??"",void p(C,"dlgCommon");-1===r.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,o()},1e3*app.fadeTransitionTime)):o()),0===r.indexOf(e.id)&&r.splice(0)}}}function Q(e,o){const i=co(e.requireds)&&!o.isInfoRow&&!e.isNotSelectable&&!(t.resultRow&&t.resultRow.isInfoRow);let n=!0;if(i&&e.isMultipleUseVariable&&o.allowedChoices>0&&o.currentChoices>=o.allowedChoices){let e=0;for(let t=0;t<o.objects.length;t++){const i=o.objects[t];if(i.isActive){if(!i.forcedActivated){if(i.isSelectableMultiple){let e=i.multipleUseVariable;for(let t=0;t<e;t++)te(i,o)}else Z(i,o);break}e++}}e>=o.allowedChoices&&(n=!1)}if(n){for(let t=0;t<e.scores.length;t++){const o=e.scores[t];o.isRandom&&!o.setValue&&void 0!==o.maxValue&&void 0!==o.minValue&&(o.value=Math.floor(Math.random()*(o.maxValue-o.minValue+1))+o.minValue,o.setValue=!0)}if(To(e,!0)){const t=()=>{var t,i,r,n,a,s,d,c,g,m,p;const h=new I,v=e.isActive,f=e.multipleUseVariable>=0,b=Math.abs(e.multipleUseVariable),w=yt.get(e.id);if(e.isActive||(e.isActive=!0),e.multipleUseVariable++,void 0!==w?(w.multiple++,0===w.multiple&&(yt.delete(e.id),e.isActive=!1,o.currentChoices-=1)):(yt.set(e.id,{multiple:e.multipleUseVariable}),o.currentChoices+=1),f&&e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++){const r=Bt.get(e.discountChoices[o]);if(void 0!==r)for(let o=0;o<r.choice.scores.length;o++){const n=r.choice.scores[o];n.isNotDiscountable||0!==(null==(t=e.discountPointTypes)?void 0:t.length)&&-1===(null==(i=e.discountPointTypes)?void 0:i.indexOf(n.id))||wo(e,n)}}}else if(void 0!==e.discountGroups)for(let o=0;o<e.discountGroups.length;o++){const t=St.get(e.discountGroups[o]);if(void 0!==t)for(let o=0;o<t.elements.length;o++){const i=Bt.get(t.elements[o]);if(void 0!==i)for(let t=0;t<i.choice.scores.length;t++){const t=i.choice.scores[o];t.isNotDiscountable||0!==(null==(r=e.discountPointTypes)?void 0:r.length)&&-1===(null==(n=e.discountPointTypes)?void 0:n.indexOf(t.id))||wo(e,t)}}}for(let o=0;o<e.scores.length;o++){const t=e.scores[o];if(void 0===t.isActiveMul&&(t.isActiveMul=[]),co(t.requireds)&&!t.isActiveMul[b]){const e=Ct.get(t.id);if(void 0!==e){let o=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value;t.multiplyByTimes&&(o*=b+1),e.startingSum-=o,t.isActiveMul[b]=!0;let i=h.get(t.id);void 0!==i?h.set(t.id,o+i):h.set(t.id,o)}}}if(f&&(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&Oo(e),e.activateOtherChoice&&void 0!==e.activateThisChoice))if(e.isActivateRandom)W(e);else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),r=i.length>1?parseInt(i[1]):0,n=Bt.get(i[0]);if(void 0!==n){const t=n.row,o=n.choice;!o.isSelectableMultiple&&v||U(e,o,t,r)}else{const t=St.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Bt.get(o[t]);if(void 0!==i){const t=i.row,o=i.choice;!o.isSelectableMultiple&&v||U(e,o,t,r)}}}}}}if(Array.from(yt.entries()).forEach(([t,o])=>{const i=Bt.get(t);if(void 0!==i){const t=i.row,r=i.choice;if(r.id!==e.id&&!co(r.requireds))if(r.forcedActivated&&(delete r.forcedActivated,r.isAllowDeselect||xt.set(r.id,{multiple:o.multiple})),0===o.multiple)r.isActive&&J(r,t);else if(o.multiple>0)for(let e=0;e<o.multiple;e++)r.isActive&&te(r,t)}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let o=0;o<e.idOfAllowChoice.length;o++){const t=$t.get(e.idOfAllowChoice[o]);if(void 0!==t&&(t.allowedChoices+=e.numbAddToAllowChoice,t.allowedChoices>0&&t.currentChoices>=t.allowedChoices))for(let e=0;e<t.objects.length;e++){const o=t.objects[e];if(o.isActive&&!o.forcedActivated)if(o.isSelectableMultiple){let e=o.multipleUseVariable;for(let i=0;i<e;i++)te(o,t)}else o.isActive&&J(o,t);if(t.allowedChoices>=t.currentChoices)break}}if(!v){if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!0:"2"===e.changeType?o.isTrue=!1:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.changeBackground)if(e.changeBgImage){if(void 0!==e.bgImage){const t=app.styling.backgroundImage??"";app.styling.backgroundImage=e.bgImage,e.bgImage=t}}else if(void 0!==e.changedBgColorCode){const t=app.styling.backgroundColor??"";app.styling.backgroundColor=e.changedBgColorCode,e.changedBgColorCode=t}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor){const t=app.styling.barBackgroundColor??"";app.styling.barBackgroundColor=e.changedBarBgColor,e.changedBarBgColor=t}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor){const t=app.styling.barIconColor??"";app.styling.barIconColor=e.changedBarIconColor,e.changedBarIconColor=t}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor){const t=app.styling.barTextColor??"";app.styling.barTextColor=e.changedBarTextColor,e.changedBarTextColor=t}}if(e.scrollToRow){const t=window;if(e.scrollToObject){if(void 0!==e.scrollObjectId&&e.scrollObjectId.length>0){const o=Bt.get(e.scrollObjectId);if(void 0!==o){const e=o.choice,i=null==(s=null==(a=u(l))?void 0:a.parentElement)?void 0:s.children;void 0!==i&&t.scrollTo({top:i[e.index].getBoundingClientRect().top+t.scrollY,behavior:"smooth"})}}}else if(void 0!==e.scrollRowId&&e.scrollRowId.length>0){const o=$t.get(e.scrollRowId);if(void 0!==o){const e=null==(p=null==(m=null==(g=null==(c=null==(d=u(l))?void 0:d.parentElement)?void 0:c.parentElement)?void 0:g.parentElement)?void 0:m.parentElement)?void 0:p.children;void 0!==e&&t.scrollTo({top:e[o.index].getBoundingClientRect().top+t.scrollY,behavior:"smooth"})}}}if(e.setBgmIsOn&&void 0!==e.bgmId&&e.bgmId.length>0&&(Vt.bgmIsPlaying=!0,Vt.isBgmInit?mo(e,e.bgmId,0):(po(e),Vt.isBgmInit=!0)),e.muteBgm&&qt){const e=$(qt);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=$t.get(e.hiddenContentsRow[t]);if(void 0!==o){o.textIsRemoved||(o.textIsRemoved=!0);for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!0;break;case"2":o.objectImageRemoved=!0;break;case"3":o.objectTextRemoved=!0;break;case"4":o.objectScoreRemoved=!0;break;case"5":o.objectRequirementRemoved=!0;break;case"6":o.addonTitleRemoved=!0;break;case"7":o.addonImageRemoved=!0;break;case"8":o.addonTextRemoved=!0}}}}_(e,h),X()};i&&e.isMultipleUseVariable&&(void 0===e.multipleUseVariable&&(e.multipleUseVariable=0),void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>e.multipleUseVariable&&(-1===r.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,t()},1e3*app.fadeTransitionTime)):t()),0===r.indexOf(e.id)&&r.splice(0)))}}}function te(e,o){if(To(e,!1)&&(!t.resultRow||!t.resultRow.isInfoRow)){const t=()=>{var t,i,r,n;const l=new I,a=e.multipleUseVariable>0,s=e.multipleUseVariable-1;if(a){for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(void 0!==o.isActiveMul&&(co(o.requireds)&&o.isActiveMul[s]||o.isActiveMul[s])){const e=Ct.get(o.id);if(void 0!==e){let t=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;o.multiplyByTimes&&(t*=s+1),e.startingSum+=t;let i=l.get(o.id);void 0!==i?l.set(o.id,-t+i):l.set(o.id,-t),delete o.isActiveMul[s],0===s&&delete o.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandomMul&&void 0!==e.activatedRandomMul[s]){for(let t=0;t<e.activatedRandomMul[s].length;t++){const o=Bt.get(e.activatedRandomMul[s][t]);if(void 0!==o){const t=o.row,i=o.choice;E(e,i,t,0)}}e.activatedRandomMul.splice(s,1)}else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),r=i.length>1?parseInt(i[1]):0,n=Bt.get(i[0]);if(void 0!==n){const t=n.row,o=n.choice;E(e,o,t,r)}else{const t=St.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Bt.get(o[t]);if(void 0!==i){const t=i.row,o=i.choice;E(e,o,t,r)}}}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++){const r=Bt.get(e.discountChoices[o]);if(void 0!==r)for(let o=0;o<r.choice.scores.length;o++){const n=r.choice.scores[o];n.isNotDiscountable||0!==(null==(t=e.discountPointTypes)?void 0:t.length)&&-1===((null==(i=e.discountPointTypes)?void 0:i.indexOf(n.id))??-1)||bo(e,n)}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=St.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=Bt.get(o.elements[t]);if(void 0!==i)for(let o=0;o<i.choice.scores.length;o++){const o=i.choice.scores[t];o.isNotDiscountable||0!==(null==(r=e.discountPointTypes)?void 0:r.length)&&-1===((null==(n=e.discountPointTypes)?void 0:n.indexOf(o.id))??-1)||bo(e,o)}}}}else for(let o=0;o<e.scores.length;o++){const t=e.scores[o];if(void 0===t.isActiveMulMinus&&(t.isActiveMulMinus=[]),co(t.requireds)&&!t.isActiveMulMinus[s]){const e=Ct.get(t.id);if(void 0!==e){let o=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value;t.multiplyByTimes&&(o*=Math.abs(s)),e.startingSum+=o;let i=l.get(t.id);void 0!==i?l.set(t.id,-o+i):l.set(t.id,-o),t.isActiveMulMinus[s]=!0}}}const d=yt.get(e.id);if(e.multipleUseVariable--,void 0!==d?(d.multiple--,0===d.multiple&&(e.isActive=!1,o.currentChoices-=1,yt.delete(e.id))):(e.isActive=!0,o.currentChoices+=1,yt.set(e.id,{multiple:e.multipleUseVariable})),Array.from(yt.entries()).forEach(([t,o])=>{const i=Bt.get(t);if(void 0!==i){const t=i.row,r=i.choice;if(r.id!==e.id&&!co(r.requireds))if(r.forcedActivated&&(delete r.forcedActivated,r.isAllowDeselect||xt.set(r.id,{multiple:o.multiple})),0===o.multiple)r.forcedActivated&&delete r.forcedActivated,r.isActive&&J(r,t);else if(o.multiple>0)for(let e=0;e<o.multiple;e++)r.isActive&&te(r,t)}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let o=0;o<e.idOfAllowChoice.length;o++){const t=$t.get(e.idOfAllowChoice[o]);if(void 0!==t&&(t.allowedChoices-=e.numbAddToAllowChoice,t.allowedChoices>0&&t.currentChoices>=t.allowedChoices))for(let e=0;e<t.objects.length;e++){const o=t.objects[e];if(o.isActive&&!o.forcedActivated)if(o.isSelectableMultiple){let e=o.multipleUseVariable;for(let i=0;i<e;i++)te(o,t)}else o.isActive&&J(o,t);if(t.allowedChoices>=t.currentChoices)break}}if(0===s){if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!1:"2"===e.changeType?o.isTrue=!0:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(app.styling.barTextColor=e.changedBarTextColor)),e.setBgmIsOn&&qt&&void 0!==e.bgmId&&e.bgmId.length>0&&(Vt.bgmIsPlaying=!1,mo(e,e.bgmId,0)),e.muteBgm&&qt){const e=$(qt);app.isMute=!1,e&&"function"==typeof e.unMute&&e.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=$t.get(e.hiddenContentsRow[t]);if(void 0!==o)for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!1;break;case"2":o.objectImageRemoved=!1;break;case"3":o.objectTextRemoved=!1;break;case"4":o.objectScoreRemoved=!1;break;case"5":o.objectRequirementRemoved=!1;break;case"6":o.addonTitleRemoved=!1;break;case"7":o.addonImageRemoved=!1;break;case"8":o.addonTextRemoved=!1}}}H(e,l),X()};o.isInfoRow||e.isNotSelectable||e.selectOnce||e.isMultipleUseVariable&&(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),e.multipleUseVariable>e.numMultipleTimesMinus&&(-1===r.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,t()},1e3*app.fadeTransitionTime)):t()),0===r.indexOf(e.id)&&r.splice(0)))}}var oe=Nr(),ne=R(oe),le=e=>{var i=Lr(),r=h(i);let n;var c=h(r);c.__click=()=>Z(t.choice,t.row);var g=h(c),m=e=>{var i=Sr(),r=h(i),n=e=>{var o=br(),i=h(o);a(i,()=>he.sanitize(no(t.row.title),Pt)),ee(()=>ve(o,u(L))),d(e,o)};z(r,e=>{t.row.resultShowRowTitle&&e(n)});var l=G(r,2),s=e=>{var i=A(),r=R(i),n=e=>{et(e,{get text(){return t.choice.imageSourceTooltip},children:(e,i)=>{var r=wr();ee(()=>{fe(r,"src",t.choice.image),ve(r,u(V)),fe(r,"loading",o()?"eager":"lazy")}),d(e,r)},$$slots:{default:!0}})},l=e=>{var i=Ir();ee(()=>{fe(i,"src",t.choice.image),ve(i,u(V)),fe(i,"loading",o()?"eager":"lazy")}),d(e,i)};z(r,e=>{t.choice.imageSourceTooltip?e(n):e(l,!1)}),d(e,i)};z(l,e=>{(1===t.choice.template||t.windowWidth<=960||t.row.choicesShareTemplate)&&t.choice.image&&t.choice.image.length>0&&!t.row.objectImageRemoved&&e(s)});var c=G(l,2),g=e=>{var o=Tr(),i=h(o);a(i,()=>he.sanitize(no(t.choice.title),Pt)),ee(()=>ve(o,u(k))),d(e,o)};z(c,e=>{""===t.choice.title||t.row.objectTitleRemoved||e(g)});var m=G(c,2),p=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(m,e=>{t.choice.isSelectableMultiple&&u(D)&&0===u(b).multiChoiceCounterPosition&&e(p)});var v=G(m,2);ge(v,17,()=>t.choice.scores,pe,(e,o)=>{fr(e,{get score(){return u(o)},get row(){return t.row},get choice(){return t.choice}})});var f=G(v,2),w=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(f,e=>{t.choice.isSelectableMultiple&&u(D)&&1===u(b).multiChoiceCounterPosition&&e(w)});var I=G(f,2);ge(I,17,()=>t.choice.requireds,pe,(e,o)=>{const i=Y(()=>t.row.objectRequirementRemoved||!1);Li(e,{get isRemoved(){return u(i)},get isEnabled(){return u(S)},get required(){return u(o)},get scoreText(){return u(L)}})});var T=G(I,2),y=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(T,e=>{t.choice.isSelectableMultiple&&u(D)&&2===u(b).multiChoiceCounterPosition&&e(y)});var x=G(T,2),C=e=>{var i=A(),r=R(i),n=e=>{et(e,{get text(){return t.choice.imageSourceTooltip},children:(e,i)=>{var r=yr();ee(()=>{fe(r,"src",t.choice.image),ve(r,u(V)),fe(r,"loading",o()?"eager":"lazy")}),d(e,r)},$$slots:{default:!0}})},l=e=>{var i=xr();ee(()=>{fe(i,"src",t.choice.image),ve(i,u(V)),fe(i,"loading",o()?"eager":"lazy")}),d(e,i)};z(r,e=>{t.choice.imageSourceTooltip?e(n):e(l,!1)}),d(e,i)};z(x,e=>{5===t.choice.template&&t.choice.image&&t.choice.image.length>0&&!t.row.objectImageRemoved&&e(C)});var $=G(x,2),B=e=>{var o=Cr(),i=h(o);a(i,()=>he.sanitize(no(t.choice.text),Pt)),ee(()=>ve(o,u(P))),d(e,o)};z($,e=>{""===t.choice.text||t.row.objectTextRemoved||e(B)});var O=G($,2),M=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(O,e=>{t.choice.isSelectableMultiple&&u(D)&&3===u(b).multiChoiceCounterPosition&&e(M)});var q=G(O,2),N=e=>{var i=A(),r=R(i),n=e=>{et(e,{get text(){return t.choice.imageSourceTooltip},children:(e,i)=>{var r=$r();ee(()=>{fe(r,"src",t.choice.image),ve(r,u(V)),fe(r,"loading",o()?"eager":"lazy")}),d(e,r)},$$slots:{default:!0}})},l=e=>{var i=Br();ee(()=>{fe(i,"src",t.choice.image),ve(i,u(V)),fe(i,"loading",o()?"eager":"lazy")}),d(e,i)};z(r,e=>{t.choice.imageSourceTooltip?e(n):e(l,!1)}),d(e,i)};z(q,e=>{4===t.choice.template&&t.choice.image&&t.choice.image.length>0&&!t.row.objectImageRemoved&&e(N)});var U=G(q,2);ge(U,17,()=>t.choice.addons,pe,(e,i)=>{lr(e,{get addon(){return u(i)},get isEnabled(){return u(S)},get windowWidth(){return t.windowWidth},get preloadImages(){return o()}})});var E=G(U,2),W=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(E,e=>{t.choice.isSelectableMultiple&&u(D)&&4===u(b).multiChoiceCounterPosition&&e(W)}),d(e,i)},v=e=>{var i=Vr(),r=h(i),n=e=>{var i=kr(),r=R(i),n=h(r),l=e=>{var i=A(),r=R(i),n=e=>{et(e,{get text(){return t.choice.imageSourceTooltip},children:(e,i)=>{var r=Or();ee(()=>{fe(r,"src",t.choice.image),ve(r,u(V)),fe(r,"loading",o()?"eager":"lazy")}),d(e,r)},$$slots:{default:!0}})},l=e=>{var i=Ar();ee(()=>{fe(i,"src",t.choice.image),ve(i,u(V)),fe(i,"loading",o()?"eager":"lazy")}),d(e,i)};z(r,e=>{t.choice.imageSourceTooltip?e(n):e(l,!1)}),d(e,i)};z(n,e=>{t.choice.image&&t.choice.image.length>0&&!t.row.objectImageRemoved&&e(l)});var s=G(r,2),c=h(s),g=e=>{var o=Rr(),i=h(o);a(i,()=>he.sanitize(no(t.choice.title),Pt)),ee(()=>ve(o,u(k))),d(e,o)};z(c,e=>{""===t.choice.title||t.row.objectTitleRemoved||e(g)});var m=G(c,2),p=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(m,e=>{t.choice.isSelectableMultiple&&u(D)&&0===u(b).multiChoiceCounterPosition&&e(p)});var v=G(m,2);ge(v,17,()=>t.choice.scores,pe,(e,o)=>{fr(e,{get score(){return u(o)},get row(){return t.row},get choice(){return t.choice}})});var f=G(v,2),w=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(f,e=>{t.choice.isSelectableMultiple&&u(D)&&1===u(b).multiChoiceCounterPosition&&e(w)});var I=G(f,2);ge(I,17,()=>t.choice.requireds,pe,(e,o)=>{const i=Y(()=>t.row.objectRequirementRemoved||!1);Li(e,{get isRemoved(){return u(i)},get isEnabled(){return u(S)},get required(){return u(o)},get scoreText(){return u(L)}})});var T=G(I,2),y=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(T,e=>{t.choice.isSelectableMultiple&&u(D)&&2===u(b).multiChoiceCounterPosition&&e(y)});var C=G(T,2),$=e=>{var o=Mr(),i=h(o);a(i,()=>he.sanitize(no(t.choice.text),Pt)),ee(()=>ve(o,u(P))),d(e,o)};z(C,e=>{""===t.choice.text||t.row.objectTextRemoved||e($)});var B=G(C,2),O=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(B,e=>{t.choice.isSelectableMultiple&&u(D)&&3===u(b).multiChoiceCounterPosition&&e(O)});var M=G(B,2);ge(M,17,()=>t.choice.addons,pe,(e,i)=>{lr(e,{get addon(){return u(i)},get isEnabled(){return u(S)},get windowWidth(){return t.windowWidth},get preloadImages(){return o()}})});var q=G(M,2),N=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(q,e=>{t.choice.isSelectableMultiple&&u(D)&&4===u(b).multiChoiceCounterPosition&&e(N)}),ee(()=>{ve(r,`max-width: ${u(x)??""}%`),ve(s,`max-width: ${100-u(x)}%`)}),d(e,i)},l=(e,i)=>{var r=e=>{var i=qr(),r=R(i),n=h(r),l=e=>{var o=Fr(),i=h(o);a(i,()=>he.sanitize(no(t.choice.title),Pt)),ee(()=>ve(o,u(k))),d(e,o)};z(n,e=>{""===t.choice.title||t.row.objectTitleRemoved||e(l)});var s=G(n,2),c=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(s,e=>{t.choice.isSelectableMultiple&&u(D)&&0===u(b).multiChoiceCounterPosition&&e(c)});var g=G(s,2);ge(g,17,()=>t.choice.scores,pe,(e,o)=>{fr(e,{get score(){return u(o)},get row(){return t.row},get choice(){return t.choice}})});var m=G(g,2),p=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(m,e=>{t.choice.isSelectableMultiple&&u(D)&&1===u(b).multiChoiceCounterPosition&&e(p)});var v=G(m,2);ge(v,17,()=>t.choice.requireds,pe,(e,o)=>{const i=Y(()=>t.row.objectRequirementRemoved||!1);Li(e,{get isRemoved(){return u(i)},get isEnabled(){return u(S)},get required(){return u(o)},get scoreText(){return u(L)}})});var f=G(v,2),w=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(f,e=>{t.choice.isSelectableMultiple&&u(D)&&2===u(b).multiChoiceCounterPosition&&e(w)});var I=G(f,2),T=e=>{var o=jr(),i=h(o);a(i,()=>he.sanitize(no(t.choice.text),Pt)),ee(()=>ve(o,u(P))),d(e,o)};z(I,e=>{""===t.choice.text||t.row.objectTextRemoved||e(T)});var y=G(I,2),C=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(y,e=>{t.choice.isSelectableMultiple&&u(D)&&3===u(b).multiChoiceCounterPosition&&e(C)});var $=G(y,2);ge($,17,()=>t.choice.addons,pe,(e,i)=>{lr(e,{get addon(){return u(i)},get isEnabled(){return u(S)},get windowWidth(){return t.windowWidth},get preloadImages(){return o()}})});var B=G($,2),O=e=>{cr(e,{get isEnabled(){return u(S)},get multiChoiceButton(){return u(j)},get multiChoiceText(){return u(F)},get choice(){return t.choice},selectedOneMore:()=>Q(t.choice,t.row),selectedOneLess:()=>te(t.choice,t.row)})};z(B,e=>{t.choice.isSelectableMultiple&&u(D)&&4===u(b).multiChoiceCounterPosition&&e(O)});var M=G(r,2),q=h(M),N=e=>{var i=A(),r=R(i),n=e=>{et(e,{get text(){return t.choice.imageSourceTooltip},children:(e,i)=>{var r=Dr();ee(()=>{fe(r,"src",t.choice.image),ve(r,u(V)),fe(r,"loading",o()?"eager":"lazy")}),d(e,r)},$$slots:{default:!0}})},l=e=>{var i=Pr();ee(()=>{fe(i,"src",t.choice.image),ve(i,u(V)),fe(i,"loading",o()?"eager":"lazy")}),d(e,i)};z(r,e=>{t.choice.imageSourceTooltip?e(n):e(l,!1)}),d(e,i)};z(q,e=>{t.choice.image&&t.choice.image.length>0&&!t.row.objectImageRemoved&&e(N)}),ee(()=>{ve(r,`max-width: ${100-u(x)}%`),ve(M,`max-width: ${u(x)??""}%`)}),d(e,i)};z(e,e=>{3===t.choice.template&&e(r)},i)};z(r,e=>{2===t.choice.template?e(n):e(l,!1)}),d(e,i)};z(g,e=>{t.choice.template>=4||1===t.choice.template||t.windowWidth<=960||t.row.choicesShareTemplate?e(m):e(v,!1)}),s(i,e=>p(l,e),()=>u(l)),ee((e,o)=>{re(i,1,e),n=re(r,1,"d-flex",null,n,o),re(c,1,`row row-${t.row.id??""} choice-${t.choice.id??""} ${u(O)?"choice-selected":"choice-unselected"} ${u(S)?"choice-enabled":"choice-disabled"} ${u(O)&&u(f).selOverlayOnImage||!u(S)&&u(f).reqOverlayOnImage?"bg-overlay":""} w-100`),ve(c,u(q))},[()=>ie(function(){let e=t.choice.objectWidth||t.row.objectWidth,o=function(e){switch(e){case"col-sm-6":case"col-sm-5":return 2;case"col-md-4":return 3;case"col-md-3":return 4;case"w-20":return 5;case"col-lg-2":return 6;case"w-14":return 7;case"w-12":return 8;case"w-11":return 9;case"w-10":return 10;case"w-9":return 11;case"col-xl-1":return 12;default:return 1}}(e),i="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(t.windowWidth>1280)return e;if(!(t.windowWidth>960))return t.windowWidth>480?1===o?"col-12":"col-6":"col-12";switch(o){case 1:return"col-12";case 2:return"col-6";case 3:return i>2?"col-4":app.objectsPerRow;case 4:return i>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}()),()=>({fullHeight:u(M)})]),d(e,i)};z(ne,e=>{!u(S)&&u(f).reqFilterVisibleIsOn||e(le)});var ae=G(ne,2),se=e=>{const t=Y(()=>"dlgCommon"===u(C));Ti(e,{get open(){return u(t)},onclose:()=>p(C,"none"),title:"",get context(){return n.context},closeHandler:(e,t)=>{"accept"===e.detail.action&&n.choice&&n.row?(B=!0,n.choice.wordChangeSelect=t,K(n.choice,n.row),B=!1):B=!1},isWord:!0,get prevText(){return n.prevText}})};return z(ae,e=>{"dlgCommon"===u(C)&&e(se)}),d(e,oe),c({activateObject:Z})}be(["click"]);var Er=l('<img alt="" crossorigin="anonymous"/>'),Wr=l('<img alt="" crossorigin="anonymous"/>'),zr=l('<h2 class="mb-0"><!></h2>'),Gr=l('<img alt="" crossorigin="anonymous"/>'),Hr=l('<img alt="" crossorigin="anonymous"/>'),_r=l('<p class="mb-0"><!></p>'),Yr=l('<img alt="" crossorigin="anonymous"/>'),Xr=l('<img alt="" crossorigin="anonymous"/>'),Zr=l("<!> <!> <!> <!> <!>",1),Jr=l('<h2 class="mb-0"><!></h2>'),Kr=l("<p><!></p>"),Qr=l('<img alt="" crossorigin="anonymous"/>'),en=l('<img alt="" crossorigin="anonymous"/>'),tn=l("<div><!> <!></div> <div><!></div>",1),on=l('<img alt="" crossorigin="anonymous"/>'),rn=l('<img alt="" crossorigin="anonymous"/>'),nn=l('<h2 class="mb-0"><!></h2>'),ln=l("<p><!></p>"),an=l("<div><!></div> <div><!> <!></div>",1),sn=l("<div><!></div>"),dn=l("<div><!></div>"),cn=l("<div><!> <!></div>");function un(e,t){i(t,!0);const r=v(t,"preloadImages",3,!1);let n=g(void 0),l=g(void 0),m=Y(()=>lo("privateBackgroundIsOn",t.row)),f=Y(()=>lo("privateRowImageIsOn",t.row)),b=Y(()=>lo("privateRowIsOn",t.row)),w=Y(()=>lo("privateTextIsOn",t.row)),I=g(0),T=o(lo("privateRowImageIsOn",t.row).rowImageBoxWidth||0),y=Y(()=>co(t.row.requireds)),x=Y(()=>t.row.onlyIfNoChoices&&0!==t.row.currentChoices),C=Y(()=>{const e=[];if(void 0!==t.row.resultGroupId&&""!==t.row.resultGroupId&&t.row.resultGroupId)for(const[o]of yt){const i=Bt.get(o);if(void 0!==i){const o=i.choice,r=i.row;if(!o.isNotResult)if(t.row.resultGroupId===r.resultGroupId)e.push({choice:o,row:r});else if(void 0!==o.groups)for(let i=0;i<o.groups.length;i++)if(o.groups[i]===t.row.resultGroupId){e.push({choice:o,row:r});break}}}else for(const[t]of yt){const o=Bt.get(t);void 0!==o&&e.push({choice:o.choice,row:o.row})}return e.sort((e,t)=>e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index),e}),$=Y(()=>{if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.backgroundImage)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(let e=0;e<t.row.rowDesignGroups.length;e++){let o=kt.get(t.row.rowDesignGroups[e]);if(void 0!==o&&o.privateBackgroundIsOn&&o.styling.backgroundImage){let e=o.activatedId,t=Ot.get(e);if(""===e||so(o.activatedId))return o.styling;if(void 0!==app.globalRequirements&&void 0!==t&&co(t.requireds))return o.styling}}return!1}),B=Y(()=>{if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.backgroundColor)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(let e=0;e<t.row.rowDesignGroups.length;e++){let o=kt.get(t.row.rowDesignGroups[e]);if(void 0!==o&&o.privateBackgroundIsOn&&o.styling.backgroundColor){let e=o.activatedId,t=Ot.get(e);if(""===e||so(o.activatedId))return o.styling;if(void 0!==app.globalRequirements&&void 0!==t&&co(t.requireds))return o.styling}}return!1}),S=Y(()=>{let e=[];return e.push(`margin: ${u(b).rowBodyMarginTop}px ${u(b).rowBodyMarginSides}% ${u(b).rowBodyMarginBottom}px ${u(b).rowBodyMarginSides}%;`),u($)&&e.push(`background-image: url('${u($).backgroundImage}'); ${u($).isBackgroundRepeat?"background-repeat: repeat;":u($).isBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;"}`),u(B)&&e.push(`background-color: ${u(B).backgroundColor};`),e.join(" ")}),O=Y(()=>{let e=u(b).rowBorderRadiusIsPixels?"px":"%",t=[];return u(b).rowBorderImage&&t.push(`border-image: url('${u(b).rowBorderImage}') ${u(b).rowBorderImageSliceTop} ${u(b).rowBorderImageSliceRight} ${u(b).rowBorderImageSliceBottom} ${u(b).rowBorderImageSliceLeft} / ${u(b).rowBorderImageWidth}px ${u(b).rowBorderImageRepeat}; border-style: solid; padding: ${u(b).rowBorderImageWidth}px;`),u(m).rowBackgroundImage&&t.push(`background-image: url('${u(m).rowBackgroundImage}'); ${u(m).isRowBackgroundRepeat?"background-repeat: repeat;":u(m).isRowBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;"}`),u(m).rowBgColorIsOn&&t.push(`background-color: ${u(m).rowBgColor};`),t.push(`margin-left: ${u(b).rowMargin}%; margin-right: ${u(b).rowMargin}%;`),u(b).rowGradientIsOn&&t.push(`background-image: linear-gradient('${u(b).rowGradient}');`),t.push(`border-radius: ${u(b).rowBorderRadiusTopLeft}${e} ${u(b).rowBorderRadiusTopRight}${e} ${u(b).rowBorderRadiusBottomRight}${e} ${u(b).rowBorderRadiusBottomLeft}${e};`),u(b).rowOverflowIsOn&&t.push("overflow: hidden;"),u(b).rowBorderIsOn&&t.push(`border: ${u(b).rowBorderWidth}px ${u(b).rowBorderStyle} ${u(b).rowBorderColor};`),u(b).rowDropShadowIsOn&&(u(b).rowUseBoxShadowIsOn?t.push(`box-shadow: ${u(b).rowDropShadowH}px ${u(b).rowDropShadowV}px ${u(b).rowDropShadowBlur}px ${u(b).rowDropShadowColor};`):t.push(`filter: drop-shadow(${u(b).rowDropShadowH}px ${u(b).rowDropShadowV}px ${u(b).rowDropShadowBlur}px ${u(b).rowDropShadowColor});`)),t.join(" ")}),M=Y(()=>`white-space: pre-wrap;font-family: ${u(w).rowTitle}; font-size: ${u(w).rowTitleTextSize}%; text-align: ${u(w).rowTitleAlign}; color: ${u(w).rowTitleColor}`),k=Y(()=>`white-space: pre-wrap; font-family: ${u(w).rowText}; font-size: ${u(w).rowTextTextSize}%; text-align: ${u(w).rowTextAlign}; color: ${u(w).rowTextColor}; padding: ${u(b).rowTextPaddingX}px ${u(b).rowTextPaddingY}% ${u(b).rowTextPaddingX}px ${u(b).rowTextPaddingY}%;`),F=Y(()=>{let e=u(f).rowImgBorderRadiusIsPixels?"px":"%",t=[];return t.push(`width: ${u(f).rowImageWidth}%; margin-top: ${u(f).rowImageMarginTop}%; margin-bottoom: ${u(f).rowImageMarginBottom}%;`),t.push(`border-radius: ${u(f).rowImgBorderRadiusTopLeft}${e} ${u(f).rowImgBorderRadiusTopRight}${e} ${u(f).rowImgBorderRadiusBottomRight}${e} ${u(f).rowImgBorderRadiusBottomLeft}${e};`),u(f).rowImgOverflowIsOn&&t.push("overflow: hidden;"),u(f).rowImgBorderIsOn&&t.push(`border: ${u(f).rowImgBorderWidth}px ${u(f).rowImgBorderStyle} ${u(f).rowImgBorderColor};`),t.join(" ")}),j=Y(()=>`padding-left: ${u(b).rowButtonYPadding}px; padding-right: ${u(b).rowButtonYPadding}px; padding-top: ${u(b).rowButtonXPadding}px; padding-bottom: ${u(b).rowButtonXPadding}px;`);function D(){if(t.row.btnPointAddon&&"sumaddon"===t.row.buttonTypeRaido&&void 0!==t.row.pointTypeRandom){const e=t.row.randomMax??0,o=t.row.randomMin??0,i=Math.floor(Math.random()*(e-o)+o),r=Ct.get(t.row.pointTypeRandom);return void(void 0!==r&&(r.startingSum+=i))}if(t.row.buttonRandom){const e=[],o=t.row.objects.filter(e=>co(e.requireds)&&!e.isNotSelectable);if(t.row.isWeightedRandom){let e=0;for(let t=0;t<o.length;t++){e+=o[t].randomWeight||100}if(void 0!==t.row.buttonRandomNumber)for(let i=0;i<t.row.buttonRandomNumber;i++){const i=Math.floor(Math.random()*e);let r=0;for(let e=0;e<o.length;e++){const n=o[e];if(r+=n.randomWeight||100,i<r){u(l).activateObject(n,t.row);break}}}}else if(void 0!==t.row.buttonRandomNumber)for(let i=0;i<t.row.buttonRandomNumber;i++){let i,r,n=0,a=100;do{r=Math.floor(Math.random()*o.length),i=o[r],n++}while(t.row.onlyUnselectedChoices&&(-1!==e.indexOf(r)||yt.has(i.id))&&n<a);i&&-1===e.indexOf(r)&&(e.push(r),u(l).activateObject(i,t.row))}}else if(void 0!==t.row.buttonId){const e=Rt.get(t.row.buttonId);void 0!==e&&(yt.has(e.id)?t.row.buttonType&&(e.isTrue=!1,yt.delete(e.id)):(e.isTrue=!0,yt.set(e.id,{multiple:0,isVariable:!0})))}}var P=cn(),q=h(P),V=e=>{var o=sn(),i=h(o),n=e=>{var o=Zr(),i=R(o),n=e=>{var o=A(),i=R(o),n=e=>{const o=Y(()=>!t.row.buttonType&&yt.has(t.row.buttonId??"")||u(x));ce(e,{onclick:D,get disabled(){return u(o)},get style(){return u(j)},variant:"raised",children:(e,o)=>{ue(e,{children:(e,o)=>{var i=A(),r=R(i);a(r,()=>t.row.buttonText??"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},l=(e,o)=>{var i=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.row.imageSourceTooltip},children:(e,o)=>{var i=Er();ee(()=>{fe(i,"src",t.row.image),ve(i,u(F)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=Wr();ee(()=>{fe(o,"src",t.row.image),ve(o,u(F)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.row.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(e,e=>{t.row.image&&t.row.image.length>0&&e(i)},o)};z(i,e=>{t.row.isButtonRow?e(n):e(l,!1)}),d(e,o)};z(i,e=>{(1===t.row.template||t.windowWidth<=960)&&e(n)});var l=G(i,2),s=e=>{var o=zr(),i=h(o);a(i,()=>he.sanitize(no(t.row.title),Pt)),ee(()=>ve(o,u(M))),d(e,o)};z(l,e=>{""!==t.row.title&&e(s)});var c=G(l,2),g=e=>{var o=A(),i=R(o),n=e=>{const o=Y(()=>!t.row.buttonType&&yt.has(t.row.buttonId??"")||u(x));ce(e,{onclick:D,get disabled(){return u(o)},get style(){return u(j)},variant:"raised",children:(e,o)=>{ue(e,{children:(e,o)=>{var i=A(),r=R(i);a(r,()=>t.row.buttonText??"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},l=(e,o)=>{var i=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.row.imageSourceTooltip},children:(e,o)=>{var i=Gr();ee(()=>{fe(i,"src",t.row.image),ve(i,u(F)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=Hr();ee(()=>{fe(o,"src",t.row.image),ve(o,u(F)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.row.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(e,e=>{t.row.image&&t.row.image.length>0&&e(i)},o)};z(i,e=>{t.row.isButtonRow?e(n):e(l,!1)}),d(e,o)};z(c,e=>{5===t.row.template&&e(g)});var m=G(c,2),p=e=>{var o=_r(),i=h(o);a(i,()=>he.sanitize(no(t.row.titleText),Pt)),ee(()=>ve(o,u(k))),d(e,o)};z(m,e=>{""!==t.row.titleText&&e(p)});var v=G(m,2),f=e=>{var o=A(),i=R(o),n=e=>{const o=Y(()=>!t.row.buttonType&&yt.has(t.row.buttonId??"")||u(x));ce(e,{onclick:D,get disabled(){return u(o)},get style(){return u(j)},variant:"raised",children:(e,o)=>{ue(e,{children:(e,o)=>{var i=A(),r=R(i);a(r,()=>t.row.buttonText??"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},l=(e,o)=>{var i=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.row.imageSourceTooltip},children:(e,o)=>{var i=Yr();ee(()=>{fe(i,"src",t.row.image),ve(i,u(F)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=Xr();ee(()=>{fe(o,"src",t.row.image),ve(o,u(F)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.row.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(e,e=>{t.row.image&&t.row.image.length>0&&e(i)},o)};z(i,e=>{t.row.isButtonRow?e(n):e(l,!1)}),d(e,o)};z(v,e=>{4===t.row.template&&e(f)}),d(e,o)},l=e=>{var o=A(),i=R(o),n=e=>{var o=tn(),i=R(o),n=h(i),l=e=>{var o=Jr(),i=h(o);a(i,()=>he.sanitize(no(t.row.title),Pt)),ee(()=>ve(o,u(M))),d(e,o)};z(n,e=>{""!==t.row.title&&e(l)});var s=G(n,2),c=e=>{var o=Kr(),i=h(o);a(i,()=>he.sanitize(no(t.row.titleText),Pt)),ee(()=>ve(o,u(k))),d(e,o)};z(s,e=>{""!==t.row.titleText&&e(c)});var g=G(i,2),m=h(g),p=e=>{const o=Y(()=>!t.row.buttonType&&yt.has(t.row.buttonId??"")||u(x));ce(e,{onclick:D,get disabled(){return u(o)},get style(){return u(j)},variant:"raised",children:(e,o)=>{ue(e,{children:(e,o)=>{var i=A(),r=R(i);a(r,()=>t.row.buttonText??"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},v=(e,o)=>{var i=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.row.imageSourceTooltip},children:(e,o)=>{var i=Qr();ee(()=>{fe(i,"src",t.row.image),ve(i,u(F)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=en();ee(()=>{fe(o,"src",t.row.image),ve(o,u(F)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.row.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(e,e=>{t.row.image&&t.row.image.length>0&&e(i)},o)};z(m,e=>{t.row.isButtonRow?e(p):e(v,!1)}),ee(()=>{ve(i,`max-width: ${100-T}%`),ve(g,`max-width: ${T??""}%`)}),d(e,o)},l=(e,o)=>{var i=e=>{var o=an(),i=R(o),n=h(i),l=e=>{const o=Y(()=>!t.row.buttonType&&yt.has(t.row.buttonId??"")||u(x));ce(e,{onclick:D,get disabled(){return u(o)},get style(){return u(j)},variant:"raised",children:(e,o)=>{ue(e,{children:(e,o)=>{var i=A(),r=R(i);a(r,()=>t.row.buttonText??"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},s=(e,o)=>{var i=e=>{var o=A(),i=R(o),n=e=>{et(e,{get text(){return t.row.imageSourceTooltip},children:(e,o)=>{var i=on();ee(()=>{fe(i,"src",t.row.image),ve(i,u(F)),fe(i,"loading",r()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=rn();ee(()=>{fe(o,"src",t.row.image),ve(o,u(F)),fe(o,"loading",r()?"eager":"lazy")}),d(e,o)};z(i,e=>{t.row.imageSourceTooltip?e(n):e(l,!1)}),d(e,o)};z(e,e=>{t.row.image&&t.row.image.length>0&&e(i)},o)};z(n,e=>{t.row.isButtonRow?e(l):e(s,!1)});var c=G(i,2),g=h(c),m=e=>{var o=nn(),i=h(o);a(i,()=>he.sanitize(no(t.row.title),Pt)),ee(()=>ve(o,u(M))),d(e,o)};z(g,e=>{""!==t.row.title&&e(m)});var p=G(g,2),v=e=>{var o=ln(),i=h(o);a(i,()=>he.sanitize(no(t.row.titleText),Pt)),ee(()=>ve(o,u(k))),d(e,o)};z(p,e=>{""!==t.row.titleText&&e(v)}),ee(()=>{ve(i,`max-width: ${T??""}%`),ve(c,`max-width: ${100-T}%`)}),d(e,o)};z(e,e=>{3===t.row.template&&e(i)},o)};z(i,e=>{2===t.row.template?e(n):e(l,!1)}),d(e,o)};z(i,e=>{t.row.template>=4||1===t.row.template||t.windowWidth<=960?e(n):e(l,!1)}),ee(()=>{re(o,1,`row gx-0 row-${t.row.id??""}`),ve(o,u(O))}),d(e,o)};z(q,e=>{u(y)&&""!==t.row.title&&e(V)});var L=G(q,2),N=e=>{var o=dn(),i=h(o),a=e=>{var o=A(),i=R(o);ge(i,17,()=>u(C),pe,(e,o,i)=>{s(Ur(e,{get row(){return u(o).row},get choice(){return u(o).choice},index:i,get windowWidth(){return t.windowWidth},get rowDiv(){return u(n)},get preloadImages(){return r()},get resultRow(){return t.row}}),e=>p(l,e,!0),()=>u(l))}),d(e,o)},c=e=>{var o=A(),i=R(o);ge(i,17,()=>t.row.objects,pe,(e,o,i)=>{s(Ur(e,{get row(){return t.row},get choice(){return u(o)},index:i,get windowWidth(){return t.windowWidth},get rowDiv(){return u(n)},get preloadImages(){return r()}}),e=>p(l,e,!0),()=>u(l))}),d(e,o)};z(i,e=>{t.row.isResultRow?e(a):e(c,!1)}),ee(()=>re(o,1,`row gx-0 m-0 p-0 justify-${t.row.rowJustify??""}`)),d(e,o)};z(L,e=>{u(y)&&e(N)}),s(P,e=>p(n,e),()=>u(n)),ee(()=>{re(P,1,`row-${t.row.id??""}-bg`),ve(P,u(S))}),we(P,"clientWidth",e=>p(I,e)),d(e,P),c()}var gn=l('<div><span><!> <!> <span class="notranslate"> </span> <!> <!></span></div>');var mn=l("<!> <!>",1),pn=l('<div class="p-0 col-12"><!></div>'),hn=l("<div><!></div>"),vn=l('<div class="container-fluid p-0"><div class="row gx-0"></div></div>'),fn=l("<!> <!> <!>",1);function bn(e,t){i(t,!0);let o=v(t,"open",7),r=g(0),n=g(void 0),l=Y(()=>{let e=[];return e.push("overflow-wrap: break-word;"),e.push("white-space: normal;"),app.styling.useBackpackDesign?(app.styling.backpackBgImage&&e.push(`background-image: url('${app.styling.backpackBgImage}');`),e.push(`background-color: ${app.styling.backpackBgColor};`),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackpackBgFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")):(app.styling.backgroundImage&&e.push(`background-image: url('${app.styling.backgroundImage}');`),e.push(`background-color: ${app.styling.backgroundColor};`),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")),e.join(" ")});const a=Y(()=>"dlgBackpack"!==Lt.currentDialog?"close":""),m=Y(()=>"dlgBackpack"!==Lt.currentDialog?"close":""),f=Y(()=>app.styling.backPackWidth??1200);le(e,{get escapeKeyAction(){return u(a)},get scrimClickAction(){return u(m)},get surface$style(){return`width: ${u(f)??""}px; max-width: calc(100vw - 32px);`},get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=fn(),i=R(o);ae(i,{class:"p-0 m-0 row",tabindex:0,autofocus:!0,children:(e,t)=>{var o=pn(),i=h(o);ce(i,{onclick:()=>async function(e){if(e)try{ti(e),await ei(e);const o=(await at.maxArea({usePromise:!0})).height,i=e.offsetHeight,r=e.offsetWidth;if(i>o){let n=0,l=1;for(;n<i;){const a=Math.min(o,i-n),s=document.createElement("div");s.style.width=`${r}px`,s.style.height=`${a}px`,s.style.overflow="hidden",s.style.position="absolute",s.style.display="block",s.style.top="0",s.style.left="0",s.style.zIndex="-9999",s.style.pointerEvents="none";const d=e.cloneNode(!0);oi(e,d),ti(d),d.style.transform=`translateY(-${n}px)`,d.style.willChange="transform",d.style.backfaceVisibility="hidden",s.appendChild(d),document.body.appendChild(s),await ei(d),await ii(d),await ri(5);try{const e=await B(s,{filter:e=>{var t;return!(null==(t=e.classList)?void 0:t.contains("mdc-top-app-bar"))}});if(!e)throw new Error("blob creation failed");const t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=`Build_${Jt()}_part${l++}.png`,o.click(),URL.revokeObjectURL(t)}catch(t){Nt.labelText="Failed to download the image. Please try again with a different browser.",Nt.isOpen=!0,console.error(t)}finally{document.body.removeChild(s)}n+=o}}else{const t=await B(e,{filter:e=>{var t;return!(null==(t=e.classList)?void 0:t.contains("mdc-top-app-bar"))}});if(!t)throw new Error("blob creation failed");const o=URL.createObjectURL(t),i=document.createElement("a");i.href=o,i.download=`Build_${Jt()}.png`,i.click(),URL.revokeObjectURL(o)}}catch(t){Nt.labelText="Failed to download the image. Please try again with a different browser.",Nt.isOpen=!0,console.error(t)}else Nt.labelText="Failed to download the image. Please try again with a different browser.",Nt.isOpen=!0}(u(n)),class:"h-100",children:(e,t)=>{var o=mn(),i=R(o);Ie(i,{class:"mdi mdi-file-image"});var r=G(i,2);ue(r,{children:(e,t)=>{var o=Q("Download Image");d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var a=G(i,2);se(a,{class:"p-0",children:(e,t)=>{var o=vn(),i=h(o);ge(i,21,()=>app.backpack,pe,(e,t)=>{var o=hn();un(h(o),{get row(){return u(t)},get windowWidth(){return u(r)},get preloadImages(){return app.preloadImages}}),ee(()=>re(o,1,ie(u(t).width?"col-6":"col-12"))),d(e,o)}),s(o,e=>p(n,e),()=>u(n)),ee(()=>ve(o,u(l))),we(o,"clientWidth",e=>p(r,e)),d(e,o)},$$slots:{default:!0}});var c=G(a,2);de(c,{children:(e,t)=>{ce(e,{action:"close",children:(e,t)=>{ue(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=Q("Close");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),c()}var wn=l("<div><!></div>"),In=(e,t)=>{e.preventDefault(),t()},Tn=l('<span class="picture-inner-text svelte-k98dno"><!></span>'),yn=l('<span class="picture-inner-text svelte-k98dno"><!></span>'),xn=l('<div class="picture-inner svelte-k98dno"><!></div>'),Cn=l('<div class="preview-container svelte-k98dno"><canvas tabindex="0"></canvas> <!></div> <!> <!> <!>',1),$n=l("<div><!></div> <!> <!>",1),Bn=l("<div><!></div>"),Sn=l('<div id="picture-input" class="picture-input svelte-k98dno"><!> <input type="file" class="svelte-k98dno"/></div>');function On(e,l){i(l,!0);let m,b,w=v(l,"width",19,()=>Number.MAX_SAFE_INTEGER),I=v(l,"height",19,()=>Number.MAX_SAFE_INTEGER),T=v(l,"margin",3,0),y=v(l,"accept",3,"image/*, image/avif"),x=v(l,"capture",3,null),C=v(l,"size",19,()=>Number.MAX_SAFE_INTEGER),$=v(l,"name",3,null),B=v(l,"id",3,null),S=v(l,"buttonClass",3,""),O=v(l,"removeButtonClass",3,""),A=v(l,"aspectButtonClass",3,""),M=v(l,"prefill",11,""),k=v(l,"prefillOptions",19,()=>({})),F=v(l,"crop",3,!0),j=v(l,"radius",3,0),D=v(l,"removable",3,!1),P=v(l,"hideChangeButton",3,!1),q=v(l,"autoToggleAspectRatio",3,!1),V=v(l,"toggleAspectRatio",3,!1),L=v(l,"changeOnClick",3,!0),N=v(l,"plain",3,!1),U=v(l,"zIndex",3,1e4),E=v(l,"alertOnError",3,!0),H=v(l,"customStrings",19,()=>({})),_=g(!1),X=g(0),Z=g(0),J=g(!1),K=g(0),oe=g(0),ie=g(1),ne=g(0),le=g(""),ae=g(null),se=g(null),de=g(""),ge=g(0),me=g(0),pe=g(""),he=g(!1),be=g(0),we=g(0),Ie=g(0),ye=g(null),xe=g(o([])),Ce={upload:"<p>Your device does not support file uploading.</p>",drag:"Drag an image or <br>click here to select a file",tap:"Tap here to select a photo <br>from your gallery",change:"Change Photo",aspect:"Landscape/Portrait",remove:"Remove Photo",select:"Select a Photo",selected:"<p>Photo successfully selected!</p>",fileSize:"The file size exceeds the limit",fileType:"This file type is not supported."},$e=g(void 0);const Be=Y(()=>{if(navigator.userAgent.match(/(Android (1\.0|1\.1|1\.5|1\.6|2\.0|2\.1))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.0|2\.5|3\.0))/))return!1;const e=document.createElement("input");return e.type="file",!e.disabled}),Se=Y(()=>!(!window.FileReader||!window.CanvasRenderingContext2D)),Oe=Y(()=>{const e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!("ontouchstart"in window||navigator.maxTouchPoints)}),Ae=Y(()=>u(J)?"dragging-over":""),Re=Y(()=>`${Math.min(.04*u(Z),21)}px`);function Me(){u(_)&&!L()||qe(),l.onclick&&l.onclick()}function ke(){Ne()&&u(ae)&&Pe(u(ae))}function Fe(){u(Oe)&&p(J,!1)}function je(e,t=!1){var o;const i=e.target,r="drop"===e.type?null==(o=e.dataTransfer)?void 0:o.files:i.files;if(r&&0!==r.length){if(r[0].size<=0||r[0].size>1024*Number(C())*1024)return l.onerror&&l.onerror({type:"fileSize",fileSize:r[0].size,fileType:r[0].type,fileName:r[0].name,message:`${Ce.fileSize} (${C()}MB)`}),void(E()&&alert(`${Ce.fileSize} (${C()}MB)`));if(r[0].name!==u(de)||r[0].size!==u(ge)||u(me)!==r[0].lastModified){if(p(se,r[0],!0),p(de,r[0].name,!0),p(ge,r[0].size,!0),p(me,r[0].lastModified,!0),p(pe,r[0].type.split(";")[0],!0),"image/*, image/avif"===y()){if(!u(pe).startsWith("image/"))return}else if(-1===u(xe).indexOf(u(pe)))return l.onerror&&l.onerror({type:"fileType",fileSize:u(ge),fileType:u(pe),fileName:u(de),message:Ce.fileType}),void(E()&&alert(Ce.fileType));p(_,!0),p(le,""),u(Se)&&u(se)?De(u(se)):t?l.onprefill&&l.onprefill():l.onchange&&l.onchange(u(le))}}}function De(e,t){!function(e,t){const o=new FileReader;o.onload=e=>{const o=new DataView(e.target.result);if(65496!==o.getUint16(0,!1))return t(-2);const i=o.byteLength;let r=2;for(;r<i;){const e=o.getUint16(r,!1);if(r+=2,65505===e){if(1165519206!==o.getUint32(r+=2,!1))return t(-1);const e=18761===o.getUint16(r+=6,!1);r+=o.getUint32(r+4,e);const i=o.getUint16(r,e);r+=2;for(let n=0;n<i;n++)if(274===o.getUint16(r+12*n,e))return t(o.getUint16(r+12*n+8,e))}else{if(65280&~e)break;r+=o.getUint16(r,!1)}}return t(-1)},o.readAsArrayBuffer(e.slice(0,65536))}(e,t=>{!function(e){p(he,!1),8===e?p(he,-Math.PI/2):6===e?p(he,Math.PI/2):3===e&&p(he,-Math.PI)}(t);const o=new FileReader;o.onload=e=>{p(le,e.target.result,!0),p(ae,new Image,!0),u(ae).onload=()=>{if(q()){Ue(u(K),u(oe))!==Ue(u(ae).width,u(ae).height)&&Ee()}Pe(u(ae))},u(ae).src=u(le),l.onchange&&l.onchange(u(le))},o.readAsDataURL(e)})}function Pe(e){p(be,e.width,!0),p(we,e.height,!0),p(Ie,e.width/e.height);let t=0,o=0,i=u(Z),r=u(X);const n=u(Z)/u(X);F()?u(Ie)>=n?(i=r*u(Ie),t=(u(Z)-i)/2):(r=i/u(Ie),o=(u(X)-r)/2):u(Ie)>=n?(r=i/u(Ie),o=(u(X)-r)/2):(i=r*u(Ie),t=(u(Z)-i)/2),u($e)&&(u($e).style.background="none",u($e).width=u(Z)*u(ie),u($e).height=u(X)*u(ie),u(ye)&&(u(ye).setTransform(1,0,0,1,0,0),u(ye).clearRect(0,0,u($e).width,u($e).height),u(he)&&void 0===e.style.imageOrientation&&(u(ye).translate(t*u(ie),o*u(ie)),u(ye).translate(i/2*u(ie),r/2*u(ie)),u(ye).rotate(u(he)),t=-i/2,o=-r/2),u(ye).drawImage(e,t*u(ie),o*u(ie),i*u(ie),r*u(ie))))}function qe(){b.click()}function Ve(){b.value="",b.type="",b.type="file",p(de,""),p(pe,""),p(ge,0),p(me,0),p(_,!1),p(le,""),p(se,null),p(ae,null),u($e)&&(u($e).style.backgroundColor="rgba(200,200,200,.25)",u($e).width=u(Z)*u(ie)),l.onremove&&l.onremove()}function Le(){Ee(),u(ae)&&Pe(u(ae));const e=Ue(u(K),u(oe));l.onaspectratiochange&&l.onaspectratiochange(e)}function Ne(){const e=u(K)/u(oe),t=m.clientWidth;return!!t&&(!(!V()&&!q()&&t===u(ne))&&(p(ne,t,!0),p(Z,Math.min(u(ne)-2*Number(T()),u(K)),!0),p(X,u(Z)/e),!0))}function Ue(e,t){return e>t?"landscape":e<t?"portrait":"square"}function Ee(){!function(){const e=u(K);p(K,u(oe),!0),p(oe,e,!0)}(),Ne()}function We(e,o){let i=window.File;try{new i([],"")}catch(n){i=class extends Blob{constructor(e,o,i={}){super(e,i),t(this,"lastModifiedDate",new Date),t(this,"lastModified",+this.lastModifiedDate),t(this,"name"),this.name=o}}}if(o=Object.assign({},o),"object"==typeof e)return p(_,!0),p(le,""),void(u(Se)?De(e):l.onprefill&&l.onprefill());-1===e.indexOf("data:")&&(e+=-1!==e.indexOf("?")?"&_="+(new Date).getTime():"?_="+(new Date).getTime());const r=new Headers;r.append("Accept","image/*, image/avif"),fetch(e,{method:"GET",mode:"cors",headers:r}).then(e=>e.blob()).then(t=>{const r={target:{files:[]}},n=o.fileName||e.split("/").slice(-1)[0];let l=o.mediaType||t.type||"image/"+(o.fileType||n.split("?")[0].split(".").slice(-1)[0]);l=l.replace("jpg","jpeg").replace("image/svg","image/svg+xml"),"image/svg"===l&&(l="image/svg+xml"),r.target.files[0]=new i([t],n,{type:l}),je(r,!0)}).catch(e=>{l.onerror&&l.onerror({type:"failedPrefill",message:"Failed loading prefill image: "+e}),E()&&alert("Failed loading prefill image: "+e)})}r(()=>{M()&&We(M(),k())}),f(async()=>{await W(),function(){if(H())for(const e in H())e in Ce&&"string"==typeof H()[e]&&(Ce[e]=H()[e])}(),M()&&We(M(),k()),window.addEventListener("resize",ke),ke(),u(Se)&&u($e)&&(p(ie,Math.round(window.devicePixelRatio||1),!0),u($e).getContext&&(p(ye,u($e).getContext("2d"),!0),u(ye)&&u(ye).scale(u(ie),u(ie)))),"image/*, image/avif"!==y()&&p(xe,y().split(",").map(e=>e.trim()),!0),p(K,w()!=Number.MAX_SAFE_INTEGER?Number(w()):m.clientWidth,!0),p(oe,I()!=Number.MAX_SAFE_INTEGER?Number(I()):u(K),!0),p(Z,u(K),!0),p(X,u(oe),!0)}),n(()=>{window.removeEventListener("resize",ke)});var ze=Sn(),Ge=h(ze),He=e=>{var t=wn(),o=h(t);a(o,()=>Ce.upload),d(e,t)},_e=(e,t)=>{var o=e=>{var t=Cn(),o=R(t),i=h(o);i.__click=[In,Me],s(i,e=>p($e,e),()=>u($e));var r=G(i,2),n=e=>{var t=xn(),o=h(t),i=e=>{var t=Tn(),o=h(t);a(o,()=>Ce.drag),d(e,t)},r=e=>{var t=yn(),o=h(t);a(o,()=>Ce.tap),d(e,t)};z(o,e=>{u(Oe)?e(i):e(r,!1)}),ee(e=>ve(t,`top: -${u(X)??""}px; margin-bottom: -${u(X)??""}px; font-size: ${u(Re)??""}; border-radius: ${j()??""}%; z-index: ${e??""};`),[()=>parseInt(U()+"")+2]),d(e,t)};z(r,e=>{u(_)||N()||e(n)});var l=G(o,2),c=e=>{ce(e,{variant:"raised",onclick:qe,get class(){return S()},children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q();ee(()=>te(o,Ce.change)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};z(l,e=>{u(_)&&!P()&&e(c)});var g=G(l,2),m=e=>{ce(e,{variant:"raised",onclick:Ve,get class(){return O()},children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q();ee(()=>te(o,Ce.remove)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};z(g,e=>{u(_)&&D()&&e(m)});var v=G(g,2),f=e=>{ce(e,{variant:"raised",onclick:Le,get class(){return A()},children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q();ee(()=>te(o,Ce.aspect)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};z(v,e=>{u(_)&&V()&&w()!==I()&&e(f)}),ee(e=>{ve(o,`max-width: ${u(Z)??""}px; height: ${u(X)??""}px; border-radius: ${j()??""}%;`),re(i,1,`picture-preview ${u(Ae)??""}`,"svelte-k98dno"),ve(i,`height: ${u(X)??""}px; z-index: ${e??""};`)},[()=>parseInt(U()+"")+1]),Te("drag",i,e=>{e.stopPropagation(),e.preventDefault()}),Te("dragover",i,e=>{e.stopPropagation(),e.preventDefault()}),Te("dragstart",i,e=>{e.stopPropagation(),e.preventDefault()}),Te("dragend",i,e=>{e.stopPropagation(),e.preventDefault()}),Te("dragenter",i,e=>{e.stopPropagation(),e.preventDefault(),u(Oe)&&p(J,!0)}),Te("dragleave",i,e=>{e.stopPropagation(),e.preventDefault(),Fe()}),Te("drop",i,e=>{e.stopPropagation(),e.preventDefault(),function(e){Fe(),je(e)}(e)}),d(e,t)},i=e=>{var t=Bn(),o=h(t),i=e=>{ce(e,{variant:"raised",onclick:qe,get class(){return S()},children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q();ee(()=>te(o,Ce.select)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},r=e=>{var t=$n(),o=R(t),i=h(o);a(i,()=>Ce.selected);var r=G(o,2),n=e=>{ce(e,{variant:"raised",onclick:qe,get class(){return S()},children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q();ee(()=>te(o,Ce.change)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};z(r,e=>{P()||e(n)});var l=G(r,2),s=e=>{ce(e,{variant:"raised",onclick:Ve,get class(){return O()},children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q();ee(()=>te(o,Ce.remove)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};z(l,e=>{D()&&e(s)}),d(e,t)};z(o,e=>{u(_)?e(r,!1):e(i)}),d(e,t)};z(e,e=>{u(Se)?e(o):e(i,!1)},t)};z(Ge,e=>{u(Be)?e(_e,!1):e(He)});var Ye=G(Ge,2);Ye.__change=je,s(Ye,e=>b=e,()=>b),s(ze,e=>m=e,()=>m),ee(()=>{fe(Ye,"name",$()),fe(Ye,"id",B()),fe(Ye,"accept",y()),fe(Ye,"capture",x())}),d(e,ze),c()}be(["click","change"]);var An=l('<div class="mb-4 text-left"><!></div>'),Rn=l('<img alt="Converted" loading="lazy" class="svelte-1br61l5"/> <!> <!>',1),Mn=l('<div class="col col-lg-4"><!> <!></div> <div class="col col-lg-8"><!></div>',1),kn=l('<div><img alt="Cropper" loading="lazy" class="cropper-image svelte-1br61l5"/></div>'),Fn=l('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div> <div class="mt-2"><!></div> <!>',1),jn=l('<div class="pt-3 col col-12"><img alt="Compress" loading="lazy" class="svelte-1br61l5"/></div>'),Dn=l('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div> <!></div>'),Pn=l('<div class="col col-lg-4"><div><!></div> <div><b>Before:</b> <b>After:</b> </div> <!></div> <div class="col-lg-8"><!> <!> <!></div>',1),qn=l('<div class="container"><!> <div class="row"><!></div></div>'),Vn=l("<!> <!> <!>",1);function Ln(e,t){i(t,!0);let o,n=v(t,"open",7),l=v(t,"imgObject",7),a=v(t,"canHaveURL",3,!0),m=g("Cropper"),f=g(100),b=g(90),I=!1,T=g(1),y=g(1),x=g(void 0),C=g(void 0),$=g(void 0),B=g(!1),S=0,O=Y(()=>{if(u(C)){const e=function(e){const t=e.match(/^data:.+;base64,(.+)$/);return t?t[1]:e}(u(C)).length*(3/4)-2;return Math.round(e/1024)}return 0}),A=Y(()=>{if(u($)){const e=u($).split(",")[1].length*(3/4)-2;return Math.round(e/1024)}return 0});function M(){const e=q(l(),t.imgProp);e&&D(e)}function k(){u($)&&P(l(),t.imgProp,u($),!1)}function F(){o&&o.setAspectRatio(u(y)/u(T))}function j(){if(o&&u(x)){const e=o.getCroppedCanvas().toDataURL("image/webp");u(x).src=e,P(l(),t.imgProp,e)}}function D(e){const t=document.createElement("canvas"),o=t.getContext("2d"),i=new Image;i.crossOrigin="anonymous",i.onload=()=>{const e=u(f)/100,r=i.width*e,n=i.height*e;t.setAttribute("width",r.toString()),t.setAttribute("height",n.toString()),null==o||o.drawImage(i,0,0,r,n),p($,t.toDataURL("image/webp",u(b)),!0),S++,I&&S>1&&(I=!1,k(),S=0)},i.src=e}function P(e,t,i,r=!0){e&&(e[t]=i,p(C,i,!0),o&&o.replace(i),r&&D(i))}function q(e,t){return e&&e[t]?e[t]:""}r(()=>(u(x)?o=new ye(u(x),{aspectRatio:u(y)/u(T),viewMode:3,dragMode:"move"}):o&&o.destroy(),()=>{o&&o.destroy()})),le(e,{surface$style:"width: 1200px; max-width: calc(100vw - 32px);",style:"text-align: center",get onSMUIDialogClosed(){return t.onclose},get open(){return n()},set open(e){n(e)},children:(e,o)=>{var i=Vn(),r=R(i);ae(r,{tabindex:0,autofocus:!0,children:(e,t)=>{var o=Q("Image");d(e,o)},$$slots:{default:!0}});var c=G(r,2);se(c,{children:(e,o)=>{var i=qn(),r=h(i),c=e=>{var t=An(),o=h(t);xe(o,{label:e=>{var t=Q("Uploaded Image or External URL.");d(e,t)},children:(e,t)=>{Ce(e,{color:"secondary",class:"switch-scale",get checked(){return u(B)},set checked(e){p(B,e,!0)}})},$$slots:{label:!0,default:!0}});d(e,t)};z(r,e=>{a()&&e(c)});var g=G(r,2),v=h(g),C=e=>{var o=Mn(),i=R(o),r=h(i);vi(r,{get value(){return(null==(e=l())?void 0:e.imageLink)??"";var e},set value(e){var t;t=e,l().imageLink=t},label:"External Image URL",variant:"filled"});var n=G(r,2);ce(n,{onclick:()=>{P(l(),t.imgProp,l().imageLink)},variant:"raised",children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q("Convert URL to Image");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=G(i,2),s=h(a),c=e=>{var o=Rn(),i=R(o),r=G(i,2);ce(r,{onclick:()=>{P(l(),t.imgProp,""),delete l().imageLink},variant:"raised",class:"my-3",children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q("Remove Photo");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var n=G(r,2);vi(n,{get value(){return(null==(e=l())?void 0:e.imageSourceTooltip)??"";var e},set value(e){var t;t=e,l().imageSourceTooltip=t},label:"Tooltip That Shows When Hovering over it",variant:"filled"}),ee(e=>fe(i,"src",e),[()=>q(l(),t.imgProp)]),d(e,o)};z(s,e=>{void 0!==q(l(),t.imgProp)&&""!==q(l(),t.imgProp)&&e(c)}),d(e,o)},$=e=>{var o=Pn(),i=R(o),r=h(i),a=h(r),c=e=>{const o=Y(()=>Ao(q(l(),t.imgProp))?q(l(),t.imgProp):"");On(e,{hideChangeButton:!0,removable:!0,crop:!1,get prefill(){return u(o)},onchange:e=>{P(l(),t.imgProp,e)},onclick:()=>I=app.compressImageAuto,onremove:()=>P(l(),t.imgProp,"")})};z(a,e=>{n()&&e(c)});var g=G(r,2);let v;var C=G(h(g)),$=G(C,2),B=G(g,2);vi(B,{get value(){return(null==(e=l())?void 0:e.imageSourceTooltip)??"";var e},set value(e){var t;t=e,l().imageSourceTooltip=t},label:"Tooltip That Shows When Hovering over it",variant:"filled"});var S=G(i,2),D=h(S);{const e=(e,t=w)=>{Oe(e,{get tab(){return t()},children:(e,o)=>{ue(e,{children:(e,o)=>{var i=Q();ee(()=>te(i,t())),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};$e(D,{tabs:["Cropper","Compress"],get active(){return u(m)},set active(e){p(m,e,!0)},tab:e,$$slots:{tab:!0}})}var V=G(D,2);const L=Y(()=>"Cropper"!==u(m)?"display: none;":"");Be(V,{role:"tabpanel",variant:"unelevated",get style(){return u(L)},children:(e,o)=>{Se(e,{children:(e,o)=>{var i=Fn(),r=R(i),n=h(r);vi(h(n),{label:"Width Aspect",type:"number",variant:"filled",get value(){return u(y)},set value(e){p(y,e,!0)}});var a=G(n,2);vi(h(a),{label:"Height Aspect",type:"number",variant:"filled",get value(){return u(T)},set value(e){p(T,e,!0)}});var c=G(a,2),g=h(c);ce(g,{onclick:F,variant:"raised",style:"height: 100%;",children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q("Change Aspect");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var m=G(r,2),v=h(m);ce(v,{onclick:j,variant:"raised",children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q("Crop Image");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var f=G(m,2),b=e=>{var o=kn(),i=h(o);s(i,e=>p(x,e),()=>u(x)),ee(e=>fe(i,"src",e),[()=>q(l(),t.imgProp)]),d(e,o)};z(f,e=>{Ao(q(l(),t.imgProp))&&e(b)}),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var N=G(V,2);const U=Y(()=>"Compress"!==u(m)?"display: none;":"");Be(N,{role:"tabpanel",variant:"unelevated",get style(){return u(U)},children:(e,o)=>{Se(e,{children:(e,o)=>{var i=Dn(),r=h(i);vi(h(r),{onchange:M,label:"Image Scale",type:"number",variant:"filled",get value(){return u(f)},set value(e){p(f,e,!0)}});var n=G(r,2);vi(h(n),{onchange:M,label:"Image Quality",type:"number",variant:"filled",get value(){return u(b)},set value(e){p(b,e,!0)}});var a=G(n,2),s=h(a);ce(s,{onclick:k,variant:"raised",style:"height: 100%;",children:(e,t)=>{ue(e,{children:(e,t)=>{var o=Q("Compress Image");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=G(a,2),g=e=>{var o=jn(),i=h(o);ee(e=>fe(i,"src",e),[()=>q(l(),t.imgProp)]),d(e,o)};z(c,e=>{Ao(q(l(),t.imgProp))&&e(g)}),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),ee(e=>{v=re(g,1,"pa-4",null,v,e),te(C,`${u(O)??""} kB|`),te($,`${u(A)??""} kB`)},[()=>({hidden:!q(l(),t.imgProp)})]),d(e,o)};z(v,e=>{u(B)?e(C):e($,!1)}),d(e,i)},$$slots:{default:!0}});var g=G(c,2);de(g,{children:(e,t)=>{ce(e,{action:"close",children:(e,t)=>{ue(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=Q("Close");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,i)},$$slots:{default:!0}}),c()}let Nn=0;var Un=l("<div><!></div>");let En=0;var Wn=l("<input/>"),zn=l('<span class="mdc-select__ripple"></span>'),Gn=l('<div><!> <div><!> <!> <!> <!> <span><span> </span></span> <span><svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false"><polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon><polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon></svg></span> <!></div> <!></div> <!>',1);function Hn(e,t){i(t,!0);const[l,a]=Pe(),m=()=>De(Ke,"$selectedTextStore",l);let I=()=>{};function T(e){return e===I}let y=v(t,"use",19,()=>[]),x=v(t,"class",3,""),$=v(t,"style",3,""),B=v(t,"ripple",3,!0),S=v(t,"disabled",3,!1),P=v(t,"variant",3,"standard"),q=v(t,"noLabel",3,!1),N=v(t,"label",3,void 0),U=v(t,"value",15),E=v(t,"key",3,e=>e),W=v(t,"dirty",15,!1),_=v(t,"invalid",15,I),ie=v(t,"updateInvalid",19,()=>T(_())),re=v(t,"required",3,!1),le=v(t,"inputId",19,()=>"SMUI-select-"+En++),ae=v(t,"hiddenInput",3,!1),se=v(t,"withLeadingIcon",3,I),de=v(t,"anchor$use",19,()=>[]),ce=v(t,"anchor$class",3,""),ue=v(t,"selectedTextContainer$use",19,()=>[]),ge=v(t,"selectedTextContainer$class",3,""),me=v(t,"selectedText$use",19,()=>[]),pe=v(t,"selectedText$class",3,""),he=v(t,"dropdownIcon$use",19,()=>[]),ve=v(t,"dropdownIcon$class",3,""),fe=v(t,"menu$class",3,""),be=v(t,"alwaysFloat",3,!1),we=M(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","children","leadingIcon","helperText","alwaysFloat"]);const Ie=T(_());let Te;T(_())&&_(!1);let ye,xe=g(void 0),Ce=o({}),$e=o({}),Be=o({}),Se=g(-1);const Oe=Y(()=>we.menu$id??le()+"-menu");let qe,Ve,Le,Ne,Ue=g(void 0),Ee=V("SMUI:addLayoutListener"),We=g(!1),ze=o({}),Ge=g(void 0),He=g(void 0),_e=g(!1),Ye=V("SMUI:select:context"),Xe=g(void 0),Ze=g(void 0),Je=g(void 0);L("SMUI:list:role",""),L("SMUI:list:nav",!1);const Ke=C("");L("SMUI:select:selectedText",Ke);const Qe=C(U());r(()=>{Re(Qe,U())}),L("SMUI:select:value",Qe),r(()=>{u(xe)&&u(xe).getValue()!==E()(U())&&u(xe).setValue(E()(U()))});let et=u(Se);function tt(e){return e in Ce?Ce[e]:mt().classList.contains(e)}function ot(e){Ce[e]||(Ce[e]=!0)}function it(e){e in Ce&&!Ce[e]||(Ce[e]=!1)}function rt(e,t){$e[e]!=t&&(""===t||null==t?delete $e[e]:$e[e]=t)}function nt(e){ze[e]||(ze[e]=!0)}function lt(e){e in ze&&!ze[e]||(ze[e]=!1)}function at(e){return e in Be?Be[e]??null:mt().getAttribute(e)}function st(e,t){Be[e]!==t&&(Be[e]=t)}function dt(e){e in Be&&null==Be[e]||(Be[e]=void 0)}function ct(){return Ve.getOrderedList().map(e=>e.getValue())}function ut(e){var t;null==(t=u(xe))||t.setUseDefaultValidation(e)}function gt(){var e;null==(e=u(xe))||e.layout()}function mt(){return Te}r(()=>{if(et!==u(Se))if(et=u(Se),u(xe))u(xe).setSelectedIndex(u(Se),!1,!0);else{const e=ct();U()!==e[u(Se)]&&U(e[u(Se)])}}),r(()=>{u(xe)&&u(xe).getDisabled()!==S()&&u(xe).setDisabled(S())}),r(()=>{u(xe)&&W()&&u(xe).isValid()!==!_()&&(ie()?_(!u(xe).isValid()):u(xe).setValid(!_()))}),r(()=>{u(xe)&&u(xe).getRequired()!==re()&&u(xe).setRequired(re())}),Ee&&(qe=Ee(gt)),L("SMUI:select:leading-icon:mount",e=>{Le=e}),L("SMUI:select:leading-icon:unmount",()=>{Le=void 0}),L("SMUI:list:mount",e=>{Ve=e}),L("SMUI:select:helper-text:id",e=>{p(Ue,e,!0)}),L("SMUI:select:helper-text:mount",e=>{Ne=e}),L("SMUI:select:helper-text:unmount",()=>{p(Ue,void 0),Ne=void 0}),f(()=>(p(xe,new Me({setSelectedText:e=>{Re(Ke,e)},isSelectAnchorFocused:()=>document.activeElement===ye,getSelectAnchorAttr:at,setSelectAnchorAttr:st,removeSelectAnchorAttr:dt,addMenuClass:nt,removeMenuClass:lt,openMenu:()=>{p(We,!0)},closeMenu:()=>{p(We,!1)},getAnchorElement:()=>ye,setMenuAnchorElement:e=>{p(Ge,e,!0)},setMenuAnchorCorner:e=>{p(He,e,!0)},setMenuWrapFocus:e=>{p(_e,e,!0)},getSelectedIndex:()=>u(Se),setSelectedIndex:e=>{et=e,p(Se,e,!0),U(ct()[u(Se)])},focusMenuItemAtIndex:e=>{Ve.focusItemAtIndex(e)},getMenuItemCount:()=>Ve.items.length,getMenuItemValues:()=>ct().map(E()),getMenuItemTextAtIndex:e=>Ve.getPrimaryTextAtIndex(e),isTypeaheadInProgress:()=>Ve.typeaheadInProgress,typeaheadMatchItem:(e,t)=>Ve.typeaheadMatchItem(e,t),addClass:ot,removeClass:it,hasClass:tt,setRippleCenter:e=>u(Ze)&&u(Ze).setRippleCenter(e),activateBottomLine:()=>u(Ze)&&u(Ze).activate(),deactivateBottomLine:()=>u(Ze)&&u(Ze).deactivate(),notifyChange:e=>{var t;W(!0),ie()&&_(!(null==(t=u(xe))?void 0:t.isValid())),oe(mt(),"SMUISelectChange",{value:U(),index:u(Se)})},hasOutline:()=>!!u(Je),notchOutline:e=>u(Je)&&u(Je).notch(e),closeOutline:()=>u(Je)&&u(Je).closeNotch(),hasLabel:()=>!!u(Xe),floatLabel:e=>u(Xe)&&u(Xe).float(e||be()),getLabelWidth:()=>u(Xe)?u(Xe).getWidth():0,setLabelRequired:e=>u(Xe)&&u(Xe).setRequired(e)},{get helperText(){return Ne},get leadingIcon(){return Le}}),!0),p(Se,ct().indexOf(U()),!0),u(xe).init(),ut(Ie),()=>{var e;null==(e=u(xe))||e.destroy()})),n(()=>{qe&&qe()});var pt=Gn(),ht=R(pt);k(ht,(e,t,o)=>({class:e,style:t,...o}),[()=>F({[x()]:!0,"mdc-select":!0,"mdc-select--required":re(),"mdc-select--disabled":S(),"mdc-select--filled":"filled"===P(),"mdc-select--outlined":"outlined"===P(),"smui-select--standard":"standard"===P(),"mdc-select--with-leading-icon":T(se())?t.leadingIcon:se(),"mdc-select--no-label":q()||null==N(),"mdc-select--invalid":_(),"mdc-select--activated":u(We),"mdc-data-table__pagination-rows-per-page-select":"data-table:pagination"===Ye,...Ce}),()=>Object.entries($e).map(([e,t])=>`${e}: ${t};`).concat([$()]).join(" "),()=>H(we,["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])]);var vt=h(ht),ft=e=>{var t=Wn();k(t,e=>({type:"hidden",required:re(),disabled:S(),value:U(),...e}),[()=>Z(we,"input$")]),d(e,t)};z(vt,e=>{ae()&&e(ft)});var bt=G(vt,2),wt=e=>{var o;ye.focus(),u(xe)&&u(xe).handleClick(function(e){const t=e.currentTarget.getBoundingClientRect();return(function(e){return"touches"in e}(e)?e.touches[0].clientX:e.clientX)-t.left}(e)),null==(o=t.anchor$onclick)||o.call(t,e)},It=e=>{var o;u(xe)&&u(xe).handleKeydown(e),null==(o=t.onkeydown)||o.call(t,e)},Tt=e=>{var o;u(xe)&&u(xe).handleBlur(),oe(mt(),"blur",e),null==(o=t.anchor$onblur)||o.call(t,e)},yt=e=>{var o;u(xe)&&u(xe).handleFocus(),oe(mt(),"focus",e),null==(o=t.anchor$onfocus)||o.call(t,e)};k(bt,(e,t)=>({class:e,"aria-required":re()?"true":void 0,"aria-disabled":S()?"true":void 0,"aria-controls":u(Oe),"aria-expanded":u(We)?"true":"false","aria-describedby":u(Ue),role:"combobox",tabindex:"0",...Be,...t,onclick:wt,onkeydown:It,onblur:Tt,onfocus:yt}),[()=>F({[ce()]:!0,"mdc-select__anchor":!0}),()=>Z(we,"anchor$")]);var xt=h(bt),Ct=e=>{var t=zn();d(e,t)};z(xt,e=>{"filled"===P()&&e(Ct)});var $t=G(xt,2),Bt=e=>{const t=Y(()=>le()+"-smui-label"),o=Y(()=>""!==m()||be());var i=Y(()=>Z(we,"label$"));s(K(e,O({get id(){return u(t)},get floatAbove(){return u(o)},get required(){return re()}},()=>u(i),{children:(e,t)=>{var o=A(),i=R(o),r=e=>{},n=(e,t)=>{var o=e=>{var t=Q();ee(()=>te(t,N())),d(e,t)},i=e=>{var t=A(),o=R(t);b(o,N),d(e,t)};z(e,e=>{"string"==typeof N()?e(o):e(i,!1)},t)};z(i,e=>{null==N()?e(r):e(n,!1)}),d(e,o)},$$slots:{default:!0}})),e=>p(Xe,e,!0),()=>u(Xe))};z($t,e=>{"outlined"===P()||q()||null==N()||e(Bt)});var St=G($t,2),Ot=e=>{const t=Y(()=>q()||null==N());var o=Y(()=>Z(we,"outline$"));s(J(e,O({get noLabel(){return u(t)}},()=>u(o),{children:(e,t)=>{var o=A(),i=R(o),r=e=>{const t=Y(()=>le()+"-smui-label"),o=Y(()=>""!==m()||be());var i=Y(()=>Z(we,"label$"));s(K(e,O({get id(){return u(t)},get floatAbove(){return u(o)},get required(){return re()}},()=>u(i),{children:(e,t)=>{var o=A(),i=R(o),r=e=>{},n=(e,t)=>{var o=e=>{var t=Q();ee(()=>te(t,N())),d(e,t)},i=e=>{var t=A(),o=R(t);b(o,N),d(e,t)};z(e,e=>{"string"==typeof N()?e(o):e(i,!1)},t)};z(i,e=>{null==N()?e(r):e(n,!1)}),d(e,o)},$$slots:{default:!0}})),e=>p(Xe,e,!0),()=>u(Xe))};z(i,e=>{q()||null==N()||e(r)}),d(e,o)},$$slots:{default:!0}})),e=>p(Je,e,!0),()=>u(Je))};z(St,e=>{"outlined"===P()&&e(Ot)});var At=G(St,2);b(At,()=>t.leadingIcon??w);var Rt=G(At,2);k(Rt,(e,t)=>({class:e,...t}),[()=>F({[ge()]:!0,"mdc-select__selected-text-container":!0}),()=>Z(we,"selectedTextContainer$")]);var Mt=h(Rt);k(Mt,(e,t)=>({id:le()+"-smui-selected-text",class:e,role:"button","aria-haspopup":"listbox","aria-labelledby":le()+"-smui-label",...t}),[()=>F({[pe()]:!0,"mdc-select__selected-text":!0}),()=>Z(we,"selectedText$")]);var kt=h(Mt);j(Mt,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},me),j(Rt,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},ue);var Ft=G(Rt,2);k(Ft,(e,t)=>({class:e,...t}),[()=>F({[ve()]:!0,"mdc-select__dropdown-icon":!0}),()=>Z(we,"dropdownIcon$")]),j(Ft,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},he);var jt=G(Ft,2),Dt=e=>{var t=Y(()=>Z(we,"ripple$"));s(ne(e,O(()=>u(t))),e=>p(Ze,e,!0),()=>u(Ze))};z(jt,e=>{"outlined"!==P()&&B()&&e(Dt)}),s(bt,e=>ye=e,()=>ye),j(bt,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},de);var Pt=G(bt,2);const qt=Y(()=>F({[fe()]:!0,"mdc-select__menu":!0,...ze}));var Vt=Y(()=>Z(we,"menu$"));ke(Pt,O({get class(){return u(qt)},get id(){return u(Oe)},fullWidth:!0,anchor:!1,get anchorElement(){return u(Ge)},get anchorCorner(){return u(He)}},()=>u(Vt),{onSMUIMenuSelected:e=>{var o;u(xe)&&u(xe).handleMenuItemAction(e.detail.index),null==(o=t.onSMUIMenuSelected)||o.call(t,e)},onSMUIMenuSurfaceClosing:e=>{var o;u(xe)&&u(xe).handleMenuClosing(),null==(o=t.onSMUIMenuSurfaceClosing)||o.call(t,e)},onSMUIMenuSurfaceClosed:e=>{var o;u(xe)&&u(xe).handleMenuClosed(),null==(o=t.onSMUIMenuSurfaceClosed)||o.call(t,e)},onSMUIMenuSurfaceOpened:e=>{var o;u(xe)&&u(xe).handleMenuOpened(),null==(o=t.onSMUIMenuSurfaceOpened)||o.call(t,e)},get open(){return u(We)},set open(e){p(We,e,!0)},children:(e,o)=>{var i=Y(()=>Z(we,"list$"));Fe(e,O({role:"listbox",get wrapFocus(){return u(_e)}},()=>u(i),{get selectedIndex(){return u(Se)},set selectedIndex(e){p(Se,e,!0)},children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.children??w),d(e,i)},$$slots:{default:!0}}))},$$slots:{default:!0}})),s(ht,e=>Te=e,()=>Te),j(ht,(e,t)=>{var o;return null==(o=X)?void 0:o(e,t)},()=>({ripple:"filled"===P(),unbounded:!1,addClass:ot,removeClass:it,addStyle:rt})),j(ht,(e,t)=>{var o;return null==(o=je)?void 0:o(e,t)},()=>({addClass:ot,removeClass:it})),j(ht,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},y);var Lt=G(ht,2),Nt=e=>{var r=Y(()=>Z(we,"helperText$"));!function(e,t){i(t,!0);let r,n=v(t,"use",19,()=>[]),l=v(t,"class",3,""),a=v(t,"id",19,()=>"SMUI-select-helper-text-"+Nn++),m=v(t,"persistent",3,!1),I=v(t,"validationMsg",3,!1),T=M(t,["$$slots","$$events","$$legacy","use","class","id","persistent","validationMsg","children"]),y=g(void 0),x=o({}),C=o({}),$=g(void 0);const B=V("SMUI:select:helper-text:id"),S=V("SMUI:select:helper-text:mount"),O=V("SMUI:select:helper-text:unmount");function P(e){return e in x?x[e]:W().classList.contains(e)}function q(e){x[e]||(x[e]=!0)}function L(e){e in x&&!x[e]||(x[e]=!1)}function N(e){return e in C?C[e]??null:W().getAttribute(e)}function U(e,t){C[e]!==t&&(C[e]=t)}function E(e){e in C&&null==C[e]||(C[e]=void 0)}function W(){return r}f(()=>(p(y,new Ae({addClass:q,removeClass:L,hasClass:P,getAttr:N,setAttr:U,removeAttr:E,setContent:e=>{p($,e,!0)}}),!0),B&&B(a()),S&&S(u(y)),u(y).init(),()=>{var e;O&&u(y)&&O(u(y)),null==(e=u(y))||e.destroy()}));var G=Un();k(G,e=>({class:e,"aria-hidden":m()?void 0:"true",id:a(),...C,...T}),[()=>F({[l()]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":I(),"mdc-select-helper-text--validation-msg-persistent":m(),...x})]);var H=h(G),_=e=>{var o=A(),i=R(o);b(i,()=>t.children??w),d(e,o)},Y=e=>{var t=Q();ee(()=>te(t,u($))),d(e,t)};z(H,e=>{null==u($)?e(_):e(Y,!1)}),s(G,e=>r=e,()=>r),j(G,(e,t)=>{var o;return null==(o=D)?void 0:o(e,t)},n),d(e,G),c({getElement:W})}(e,O(()=>u(r),{children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.helperText??w),d(e,i)},$$slots:{default:!0}}))};z(Lt,e=>{t.helperText&&e(Nt)}),ee(()=>te(kt,m())),d(e,pt);var Ut=c({getUseDefaultValidation:function(){if(null==u(xe))throw new Error("Instance is undefined.");return u(xe).getUseDefaultValidation()},setUseDefaultValidation:ut,focus:function(){ye.focus()},layout:gt,getElement:mt});return a(),Ut}function _n(e,t){i(t,!0);const[o,r]=Pe();let l=v(t,"use",19,()=>[]);v(t,"class",3,"");let a,g=v(t,"value",3,""),m=M(t,["$$slots","$$events","$$legacy","use","class","value","children"]);const p=V("SMUI:select:selectedText"),h=V("SMUI:select:value");L("SMUI:list:item:role","option");const I=Y(()=>null!=g()&&""!==g()&&De(h,"$selectedValue",o)===g());function T(){u(I)&&a&&Re(p,a.getPrimaryText())}f(T),n(T),s(qe(e,O({get use(){return l()},get"data-value"(){return g()},get value(){return g()},get selected(){return u(I)}},()=>m,{children:(e,o)=>{var i=A(),r=R(i);b(r,()=>t.children??w),d(e,i)},$$slots:{default:!0}})),e=>a=e,()=>a);var y=c({getElement:function(){return a.getElement()}});return r(),y}var Yn=l('<div class="col-12 px-3 mt-0"><!></div>'),Xn=l('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12"><!></div> <div class="col-12"><!></div> <!> <div class="col-12"><!></div> <div class="col-12"><!></div></div></div>'),Zn=l("<b>Interactive CYOA Creator Plus</b>"),Jn=l('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12 text-right"> <br/></div></div></div>'),Kn=l("<!> <!>",1),Qn=l("<!> <!>",1),el=l("<!> <!> <!>",1);function tl(e,t){i(t,!0);let o=v(t,"open",7);const r=[{text:"2 Per Row",value:"col-6"},{text:"3 Per Row",value:"col-4"},{text:"4 Per Row",value:"col-3"}];let n=g("General");function l(){_t&&_t.abort(),Xt()}le(e,{surface$style:"width: 600px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=el(),i=R(o);ae(i,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:(e,t)=>{var o=Q("Settings");d(e,o)},$$slots:{default:!0}});var a=G(i,2);se(a,{children:(e,t)=>{var o=Qn(),i=R(o);{const e=(e,t=w)=>{Oe(e,{get tab(){return t()},children:(e,o)=>{ue(e,{children:(e,o)=>{var i=Q();ee(()=>te(i,t())),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};$e(i,{tabs:["General","About"],get active(){return u(n)},set active(e){p(n,e,!0)},tab:e,$$slots:{tab:!0}})}var a=G(i,2),s=e=>{Be(e,{role:"tabpanel",variant:"unelevated",children:(e,t)=>{Se(e,{children:(e,t)=>{var o=Xn(),i=h(o),n=h(i);{const e=e=>{var t=Q("Maximum number of choices per row for screens between 960px and 1280px.");d(e,t)};Hn(h(n),{label:"Choices Per Row",variant:"standard",alwaysFloat:!0,get value(){return app.objectsPerRow},set value(e){app.objectsPerRow=e},helperText:e,children:(e,t)=>{var o=A(),i=R(o);ge(i,17,()=>r,e=>e.text,(e,t)=>{_n(e,{get value(){return u(t).value},children:(e,o)=>{var i=Q();ee(()=>te(i,u(t).text)),d(e,i)},$$slots:{default:!0}})}),d(e,o)},$$slots:{helperText:!0,default:!0}})}var a=G(n,2),s=h(a);xe(s,{label:e=>{var t=Q("Enable Auto Save");d(e,t)},children:(e,t)=>{Ce(e,{get checked(){return app.buildAutoSaveIsOn??!1},set checked(e){var t;t=e,app.buildAutoSaveIsOn=t},onSMUISwitchChange:()=>{app.buildAutoSaveIsOn&&l()},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var c=G(a,2),g=e=>{var t=Yn(),o=h(t);vi(o,{get value(){return app.buildAutoSaveInterval??10},set value(e){var t;t=e,app.buildAutoSaveInterval=t},label:"Auto Save Interval",type:"number",suffix:"min",variant:"standard",style:"max-width: 200px",input$class:"text-right",input$min:"1",onchange:()=>{app.buildAutoSaveInterval<1&&(app.buildAutoSaveInterval=1),l()}}),d(e,t)};z(c,e=>{app.buildAutoSaveIsOn&&e(g)});var m=G(c,2),p=h(m);xe(p,{label:e=>{var t=Q("Preload Images in Backpack");d(e,t)},children:(e,t)=>{Ce(e,{get checked(){return app.preloadImages??!1},set checked(e){var t;t=e,app.preloadImages=t},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var v=G(m,2),f=h(v);xe(f,{label:e=>{var t=Q("Show Background Music Player");d(e,t)},children:(e,t)=>{Ce(e,{get checked(){return app.showMusicPlayer??!1},set checked(e){var t;t=e,app.showMusicPlayer=t},color:"secondary",class:"switch-scale",onchange:()=>{if(app.showMusicPlayer){const e=$(qt);if(e){let t=0,o=0;0!==Vt.bgmTitleInterval&&(clearInterval(Vt.bgmTitleInterval),Vt.bgmTitleInterval=0),Vt.bgmTitleInterval=window.setInterval(()=>{if(void 0!==e.playerInfo.videoData&&""!==Vt.bgmObjectId){const t=Bt.get(Vt.bgmObjectId);if(void 0!==t){const o=t.choice;e.playerInfo.videoData.video_id===o.bgmId&&void 0!==e.playerInfo.videoData.title&&""!==e.playerInfo.videoData.title&&(Vt.bgmTitle=e.playerInfo.videoData.title,Vt.curBgmLength=e.getDuration(),clearInterval(Vt.bgmTitleInterval),Vt.bgmTitleInterval=0)}}},1e3),0!==Vt.bgmPlayInterval&&(clearInterval(Vt.bgmPlayInterval),Vt.bgmPlayInterval=0),Vt.bgmPlayInterval=window.setInterval(()=>{if(void 0!==e.playerInfo.videoData&&!Vt.isSeeking&&1===e.getPlayerState()){const i=Math.floor(e.getCurrentTime());i!==Vt.curBgmTime?t!==i?Vt.curBgmTime=i:(o++,o>Vt.curBgmLength&&(o=1),Vt.curBgmTime=o):(t=i,o=i+1,Vt.curBgmTime=o)}},1e3)}}else Vt.bgmIsPlaying&&(0!==Vt.bgmTitleInterval&&(clearInterval(Vt.bgmTitleInterval),Vt.bgmTitleInterval=0),0!==Vt.bgmPlayInterval&&(clearInterval(Vt.bgmPlayInterval),Vt.bgmPlayInterval=0))}})},$$slots:{label:!0,default:!0}});d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},c=(e,t)=>{var o=e=>{Be(e,{role:"tabpanel",variant:"unelevated",children:(e,t)=>{var o=Kn(),i=R(o);Ve(i,{class:"text-center",children:(e,t)=>{var o=Zn();d(e,o)},$$slots:{default:!0}});var r=G(i,2);Se(r,{children:(e,t)=>{var o=Jn(),i=h(o),r=h(i),n=h(r);ee(()=>te(n,`v${app.version??""}`)),d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}})};z(e,e=>{"About"===u(n)&&e(o)},t)};z(a,e=>{"General"===u(n)?e(s):e(c,!1)}),d(e,o)},$$slots:{default:!0}});var s=G(a,2);de(s,{children:(e,t)=>{ce(e,{action:"close",children:(e,t)=>{ue(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=Q("Close");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),c()}var ol=l("<!> <!>",1),il=l("<!> <!>",1),rl=l("<!> <!> <!>",1),nl=l("<i></i>"),ll=l('<i class="mdi mdi-stop"></i>'),al=l("<i></i>"),sl=l('<!> <!> <!> <div class="px-1" style="max-width: 104px; width: 100%"><!></div> <div class="ps-1" style="max-width:150px; overflow: hidden;"><span class="scrolling-text"> </span></div> <div class="px-1 col"><!></div> <div class="text-center" style="width: 180px"> </div>',1),dl=l('<i class="mdi mdi-format-list-checks"></i>'),cl=l('<i class="mdi mdi-checkbox-marked-circle-outline"></i>'),ul=l("<!> <!> <!>",1),gl=l("<div><!></div>"),ml=l('<div class="ab-0 svelte-13kmv20"><div class="fadeOverlay svelte-13kmv20"></div> <!> <!> <div class="s-main svelte-13kmv20"><!> <!> <div class="container-fluid p-0"><div class="row gx-0"></div></div></div></div> <!> <!> <!> <!>',1);function pl(e,t){i(t,!0);const o=[{action:()=>{!function(){const e=localStorage.getItem("theme");Dt.value="dark"===e?"light":"dark";let t=document.head.querySelector("#theme-dark"),o=document.head.querySelector("#theme-light");"dark"===Dt.value?(t&&(t.media="screen and (prefers-color-scheme: light)"),o&&(o.media="screen and (prefers-color-scheme: dark)")):(t&&(t.media="screen and (prefers-color-scheme: dark)"),o&&(o.media="screen and (prefers-color-scheme: light)"));localStorage.setItem("theme",Dt.value)}()},text:"Toogle Dark/Light Theme",icon:"mdi mdi-theme-light-dark"},{action:()=>{p(f,!u(f))},text:"Top/Bottom Point Bar",icon:"mdi mdi-swap-vertical"},{action:()=>{yo()},text:"Clean Selected Choices",icon:"mdi mdi-select-off"},{action:()=>{p(b,"appSaveLoad"),p(v,!1)},text:"Save/Load Build",icon:"mdi mdi-content-save"},{action:()=>{p(b,"appGlobalSettings"),p(v,!1)},text:"Settings",icon:"mdi mdi-cog"}];let l,v=g(!1),f=g(!1),b=g("none"),w=Y(()=>u(f)?app.showMusicPlayer?"top: 32px;":"top: 0;":"bottom: 0;"),I=Y(()=>`opacity: ${app.fadeTransitionIsOn?1:0}; transition: opacity ${app.fadeTransitionTime}s ease-out; background-color: ${app.fadeTransitionColor}; pointer-events: ${app.fadeTransitionIsOn?"auto":"none"}; cursor: ${app.fadeTransitionIsOn?"none":"auto"};`),T=g(0),y=Y(()=>app.pointTypes.length>0||app.backpack.length>0||app.importedChoicesIsOpen),x=Y(()=>`background-color: ${app.styling.barBackgroundColor};margin:${app.styling.barMargin}px;padding:${app.styling.barPadding}px;${u(w)}`),C=Y(()=>`color: ${app.styling.barTextColor};margin: ${app.styling.barTextMargin}px;padding: ${app.styling.barTextPadding}px;font-family: "${app.styling.barTextFont}";font-size: ${app.styling.barTextSize}px`),B=Y(()=>`color: ${app.styling.barIconColor};`),S=Y(()=>{let e=[];return app.styling.backgroundImage&&e.push(`background-image: url('${app.styling.backgroundImage}');`),e.push(`background-color: ${app.styling.backgroundColor};`),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover"),u(y)&&e.push("padding-bottom: 56px;"),app.useVW&&e.push("font-size: 0.835vw;"),e.join("")}),O=Y(()=>{let e=[];return u(y)&&e.push("padding-bottom: 56px;"),app.showMusicPlayer&&e.push("padding-top: 32px;"),e.join("")}),M=Y(()=>`${D(Vt.curBgmTime)} | ${D(Vt.curBgmLength)}`),k=g(0),F=g(100),j=g(!1);function D(e){const t=Math.floor(e/3600),o=Math.floor(e%3600/60),i=Math.floor(e%60),r=String(o).padStart(2,"0"),n=String(i).padStart(2,"0");return t>0?`${t}:${r}:${n}`:`${r}:${n}`}function P(){if(qt&&0!==Vt.curBgmLength){const e=$(qt);if(e)if(Vt.bgmIsPlaying)e.pauseVideo(),Vt.bgmIsPlaying=!1,0!==Vt.bgmPlayInterval&&(clearInterval(Vt.bgmPlayInterval),Vt.bgmPlayInterval=0);else{let t=0,o=0;0!==Vt.bgmPlayInterval&&(clearInterval(Vt.bgmPlayInterval),Vt.bgmPlayInterval=0),e.playVideo(),Vt.bgmIsPlaying=!0,Vt.bgmPlayInterval=window.setInterval(()=>{if(void 0!==e.playerInfo.videoData&&!Vt.isSeeking&&1===e.getPlayerState()){const i=Math.floor(e.getCurrentTime());i!==Vt.curBgmTime?t!==i?Vt.curBgmTime=i:(o++,o>Vt.curBgmLength&&(o=1),Vt.curBgmTime=o):(t=i,o=i+1,Vt.curBgmTime=o)}},1e3)}}}function q(){if(qt&&Vt.bgmIsPlaying&&0!==Vt.curBgmLength){const e=$(qt);e&&(e.stopVideo(),Vt.bgmIsPlaying=!1,Vt.curBgmTime=0,0!==Vt.bgmPlayInterval&&(clearInterval(Vt.bgmPlayInterval),Vt.bgmPlayInterval=0))}}function V(){if(app.isMute=!app.isMute,qt){const e=$(qt);e&&(app.isMute?e.mute():e.unMute())}}function L(){qt&&Vt.bgmIsPlaying&&(Vt.isSeeking=!0)}function N(){if(qt&&Vt.bgmIsPlaying){const e=$(qt);e&&(e.seekTo(u(k),!0),Vt.curBgmTime=u(k)),Vt.isSeeking=!1}}function U(){p(j,!0)}function E(){if(app.curVolume=u(F),qt){const e=$(qt);e&&e.setVolume(u(F))}p(j,!1)}r(()=>{Nt.isOpen&&(l.close(),l.open(),Nt.isOpen=!1)}),r(()=>{Vt.isSeeking||p(k,Vt.curBgmTime,!0)}),r(()=>{u(j)||p(F,app.curVolume,!0)});var W=ml(),H=R(W),_=h(H),X=G(_,2);Le(X,{style:"top: 0;",variant:"modal",get open(){return u(v)},set open(e){p(v,e,!0)},children:(e,t)=>{Ee(e,{class:"navigation-drawer",children:(e,t)=>{Fe(e,{children:(e,t)=>{var i=rl(),r=R(i);qe(r,{onSMUIAction:()=>p(v,!1),class:"my-0",children:(e,t)=>{var o=ol(),i=R(o);We(i,{class:"mdi mdi-chevron-left"});var r=G(i,2);ze(r,{class:"w-100 list-text text-center",children:(e,t)=>{var o=Q("Close Menu");d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var n=G(r,2);Ge(n,{class:"my-3"});var l=G(n,2);ge(l,17,()=>o,pe,(e,t)=>{qe(e,{get onSMUIAction(){return u(t).action},class:"my-0",children:(e,o)=>{var i=il(),r=R(i);We(r,{get class(){return u(t).icon}});var n=G(r,2);ze(n,{class:"w-100 list-text text-center",children:(e,o)=>{var i=Q();ee(()=>te(i,u(t).text)),d(e,i)},$$slots:{default:!0}}),d(e,i)},$$slots:{default:!0}})}),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var Z=G(X,2);Ne(Z,{});var J=G(Z,2),K=h(J),oe=e=>{He(e,{class:"music-player",variant:"fixed",children:(e,t)=>{_e(e,{class:"music-player--row",children:(e,t)=>{Ye(e,{class:"px-2 justify-left",children:(e,t)=>{var o=sl(),i=R(o);me(i,{class:"music-player--button",onclick:P,size:"button","aria-label":"Play",children:(e,t)=>{var o=nl();ee(()=>re(o,1,ie(Vt.bgmIsPlaying?"mdi mdi-pause":"mdi mdi-play"))),d(e,o)},$$slots:{default:!0}});var r=G(i,2);me(r,{class:"music-player--button",onclick:q,size:"button","aria-label":"Stop",children:(e,t)=>{var o=ll();d(e,o)},$$slots:{default:!0}});var n=G(r,2);me(n,{class:"music-player--button",onclick:V,size:"button","aria-label":"Mute",children:(e,t)=>{var o=al();ee(()=>re(o,1,ie(app.isMute?"mdi mdi-volume-off":"mdi mdi-volume-high"))),d(e,o)},$$slots:{default:!0}});var l=G(n,2),a=h(l);Xe(a,{min:0,max:100,step:1,class:"mx-2",onpointerdown:U,onpointerup:E,get disabled(){return app.isMute},get value(){return u(F)},set value(e){p(F,e,!0)}});var s=G(l,2),c=h(s),g=h(c),m=G(s,2),v=h(m);const f=Y(()=>Vt.curBgmLength||1);Xe(v,{min:0,get max(){return u(f)},step:1,class:"mx-2",onpointerdown:L,onpointerup:N,get value(){return u(k)},set value(e){p(k,e,!0)}});var b=G(m,2),w=h(b);ee(()=>{te(g,Vt.bgmTitle),te(w,u(M))}),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})};z(K,e=>{app.showMusicPlayer&&e(oe)});var ne=G(K,2),le=e=>{He(e,{class:"pointBar",get style(){return u(x)},variant:"fixed",color:"secondary",children:(e,t)=>{_e(e,{children:(e,t)=>{var o=ul(),r=R(o);Ye(r,{class:"py-0 justify-center",children:(e,t)=>{me(e,{class:"pointbar-icons",onclick:()=>p(v,!0),"aria-label":"Open Import Window",get style(){return u(B)},children:(e,t)=>{var o=dl();d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var n=G(r,2);ge(n,17,()=>app.pointTypes,pe,(e,t)=>{var o=A(),r=R(o),n=e=>{Ye(e,{class:"py-0 justify-center",get style(){return u(C)},children:(e,o)=>{!function(e,t){i(t,!0);let o=Y(()=>`color: ${app.styling.barTextColor};margin: ${app.styling.barTextMargin}px;padding: ${app.styling.barTextPadding}px;font-family: "${app.styling.barTextFont}";font-size: ${app.styling.barTextSize}px`),r=Y(()=>{if(t.point.startingSum>=0){if(void 0!==app.styling.barPointPos)return`color: ${app.styling.barPointPos};`}else if(void 0!==app.styling.barPointNeg)return`color: ${app.styling.barPointNeg};`;return""});function n(e,t){const o=t?e.negativeImage:e.image,i=t?e.negativeIconWidth:e.iconWidth,r=t?e.negativeIconHeight:e.iconHeight;return o?`<img src="${o}" style="width: ${i}px; height:${r}px;" alt="">`:""}var l=gn(),s=h(l),g=h(s),m=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o);a(i,()=>n(t.point,!0)),d(e,o)};z(i,e=>{t.point.negativeImageOnSide||t.point.negativeImageSidePlacement||e(r)}),d(e,o)},l=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o);a(i,()=>n(t.point,!1)),d(e,o)};z(i,e=>{t.point.imageOnSide||t.point.imageSidePlacement||e(r)}),d(e,o)};z(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(l,!1)}),d(e,o)};z(g,e=>{t.point.iconIsOn&&e(m)});var p=G(g),v=G(p),f=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o);a(i,()=>n(t.point,!0)),d(e,o)};z(i,e=>{t.point.negativeImageOnSide&&!t.point.negativeImageSidePlacement&&e(r)}),d(e,o)},l=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o);a(i,()=>n(t.point,!1)),d(e,o)};z(i,e=>{t.point.imageOnSide&&!t.point.imageSidePlacement&&e(r)}),d(e,o)};z(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(l,!1)}),d(e,o)};z(v,e=>{t.point.iconIsOn&&e(f)});var b=G(v,2),w=h(b),I=G(b,2),T=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o);a(i,()=>n(t.point,!0)),d(e,o)};z(i,e=>{!t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),d(e,o)},l=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o);a(i,()=>n(t.point,!1)),d(e,o)};z(i,e=>{!t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),d(e,o)};z(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(l,!1)}),d(e,o)};z(I,e=>{t.point.iconIsOn&&e(T)});var y=G(I),x=G(y),C=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o);a(i,()=>n(t.point,!0)),d(e,o)};z(i,e=>{t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),d(e,o)},l=e=>{var o=A(),i=R(o),r=e=>{var o=A(),i=R(o);a(i,()=>n(t.point,!1)),d(e,o)};z(i,e=>{t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),d(e,o)};z(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(l,!1)}),d(e,o)};z(x,e=>{t.point.iconIsOn&&e(C)}),ee(e=>{ve(l,u(o)),ve(s,t.point.pointPrivateColorIsOn?`color: ${t.point.startingSum>=0?t.point.privateColor:t.point.privateNegativeColor}`:""),te(p,` ${t.point.beforeText??""} `),ve(b,u(r)),te(w,e),te(y,` ${t.point.afterText??""} `)},[()=>Math.round(t.point.startingSum)]),d(e,l),c()}(e,{get point(){return u(t)}})},$$slots:{default:!0}})};z(r,e=>{u(t).isNotShownPointBar&&void 0!==u(t).activatedId&&!yt.has(u(t).activatedId)||e(n)}),d(e,o)});var l=G(n,2);Ye(l,{class:"py-0 justify-center",children:(e,t)=>{var o=A(),i=R(o),r=e=>{me(e,{class:"pointbar-icons",onclick:()=>p(b,"dlgBackpack"),"aria-label":"Open Backpack Window",get style(){return u(B)},children:(e,t)=>{var o=cl();d(e,o)},$$slots:{default:!0}})};z(i,e=>{app.backpack.length>0&&(void 0===app.hideBackpackBtn||0===app.hideBackpackBtn||app.hideBackpackBtn>0&&app.hideBackpackBtn===app.btnBackpackIsOn)&&e(r)}),d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};z(ne,e=>{u(y)&&e(le)});var ae=G(ne,2),se=h(ae);ge(se,21,()=>app.rows,pe,(e,t)=>{var o=A(),i=R(o),r=e=>{var o=gl();un(h(o),{get row(){return u(t)},get windowWidth(){return u(T)}}),ee(()=>re(o,1,ie(u(t).width?"col-6":"col-12"))),d(e,o)};z(i,e=>{co(u(t).requireds)&&e(r)}),d(e,o)});var de=G(H,2),ce=e=>{const t=Y(()=>"appSaveLoad"===u(b));Pi(e,{get open(){return u(t)},onclose:()=>p(b,"none")})},he=(e,t)=>{var o=e=>{const t=Y(()=>"dlgBackpack"===u(b));bn(e,{get open(){return u(t)},onclose:()=>p(b,"none")})},i=(e,t)=>{var o=e=>{const t=Y(()=>"appGlobalSettings"===u(b));tl(e,{get open(){return u(t)},onclose:()=>p(b,"none")})};z(e,e=>{"appGlobalSettings"===u(b)&&e(o)},t)};z(e,e=>{"dlgBackpack"===u(b)?e(o):e(i,!1)},t)};z(de,e=>{"appSaveLoad"===u(b)?e(ce):e(he,!1)});var fe=G(de,2),be=e=>{const t=Y(()=>"appImageUpload"===Lt.currentDialog);Ln(e,{get open(){return u(t)},onclose:()=>Lt.currentDialog="none",get imgObject(){return Lt.data},get imgProp(){return Lt.imgProp}})},Ie=(e,t)=>{var o=e=>{const t=Y(()=>"dlgCommon"===Lt.currentDialog);Ti(e,{get open(){return u(t)},onclose:()=>Lt.currentDialog="none",get closeHandler(){return Lt.cFunc},get title(){return Lt.title},get context(){return Lt.context},get isWord(){return Lt.isWord}})};z(e,e=>{"dlgCommon"===Lt.currentDialog&&void 0!==Lt.cFunc&&void 0!==Lt.title&&void 0!==Lt.context&&e(o)},t)};z(fe,e=>{"appImageUpload"===Lt.currentDialog&&void 0!==Lt.data&&void 0!==Lt.imgProp?e(be):e(Ie,!1)});var Te=G(fe,2);!function(e,t){i(t,!0);let o=g(void 0),l=null;r(()=>{u(o)&&""!==Je.text&&(Je.isVisible&&Je.anchor?(null==l||l.destroy(),l=m(Je.anchor,u(o),{placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{boundary:"viewport"}},{name:"flip",options:{fallbackPlacements:["bottom","top"]}}]}),u(o).classList.add("mdc-tooltip--shown")):l&&(l.destroy(),l=null,u(o).classList.remove("mdc-tooltip--shown")))}),n(()=>{null==l||l.destroy()});var v=Ke(),f=h(v),b=h(f);a(b,()=>Je.text),s(v,e=>p(o,e),()=>u(o)),d(e,v),c()}(Te,{});var ye=G(Te,2);s(Ue(ye,{get labelText(){return Nt.labelText},get timeoutMs(){return Nt.timeoutMs},children:(e,t)=>{ue(e,{class:"text-center"})},$$slots:{default:!0}}),e=>l=e,()=>l),ee(()=>{ve(H,u(S)),ve(_,u(I)),ve(J,u(O))}),we(H,"clientWidth",e=>p(T,e)),d(e,W),c()}var hl=l('<div id="bgm-player" style="display:none"></div> <!>',1);Ze(function(e,t){let o,r,l;i(t,!0);let a="<div>Loading</div>";async function s(e){const t=Array.from(e);for(let i=0;i<t.length;i++){const e=t[i];try{await new Promise((t,o)=>{const i=new Image;i.onload=t,i.onerror=o,i.src=e})}catch(o){console.error(o)}finally{r&&(r.innerHTML=`<div>Images</div><div>${i} / ${t.length}</div>`)}}}async function u(){if(zt.value){const t="Your browser does not support the .avif format.\n Avif images may not be displayed.";try{await new Promise((e,t)=>{const o=new Image;o.onload=e,o.onerror=t,o.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="})}catch(e){console.error(e),Nt.labelText=t,Nt.isOpen=!0}}}f(()=>{!function(){if("dark"===localStorage.getItem("theme")){let e=document.head.querySelector("#theme-dark"),t=document.head.querySelector("#theme-light");e&&(e.media="screen and (prefers-color-scheme: light)"),t&&(t.media="screen and (prefers-color-scheme: dark)"),Dt.value="dark"}}(),async function(){const e=(await Ht()).transaction("buildStore","readonly").objectStore("buildStore"),t=[],o=`${location.pathname.replace(/\/index\.html$/,"/")}autoSave`,i=new Promise((t,i)=>{const r=e.get(o);r.onsuccess=()=>{const e=r.result;e&&(Ut.stored=!0,Ut.time=e.time,Ut.app=e.app),t()},r.onerror=i});t.push(i);for(let r=0;r<99;r++){const o=`${location.pathname.replace(/\/index\.html$/,"/")}slot-${r}`,i=new Promise((t,i)=>{const n=e.get(o);n.onsuccess=()=>{const e=n.result;e&&(Et[r].stored=!0,Et[r].name=e.name??`Slot ${r+1}`,Et[r].time=e.time,Et[r].app=e.app),t()},n.onerror=i});t.push(i)}await Promise.all(t)}(),async function(){o=document.getElementById("lm"),l=document.getElementById("projectSize"),r=document.getElementById("indicator");const e=l?parseInt(l.innerHTML):0,t=r?r.className:"";if(r&&(a=r.innerHTML),o&&(o.style.pointerEvents="none"),"function"==typeof window.fetch)try{const i=await fetch("project.json");if(i&&i.body){const n=i.body.getReader(),d=new TextDecoder;let c=0,g="";for(;;){const{done:o,value:i}=await n.read();if(o)break;c+=i.length,g+=d.decode(i,{stream:!0}),r&&(r.innerHTML="ind2"===t&&e>0?`${a}<div>${(c/e*100).toFixed(1)} %</div>`:"ind3"===t&&e>0?`${a}<div>${(c/1e6).toFixed(1)}/${(e/1e6).toFixed(1)} MB</div>`:`${a}<div>${(c/1e6).toFixed(1)} MB</div>`)}o&&(o.style.height="0"),Qo(JSON.parse(g)),app.preloadExternalImages&&Wt.size>0&&await s(Wt),setTimeout(()=>{o&&(o.style.height="",o.style.opacity="1",o.style.pointerEvents=""),r&&r.remove(),l&&l.remove(),document.styleSheets[0].insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3),await u()}}catch(i){console.error(i),o&&(o.style.height="0"),Qo(JSON.parse(JSON.stringify(app))),app.preloadExternalImages&&Wt.size>0&&await s(Wt),setTimeout(()=>{o&&(o.style.height="",o.style.opacity="1",o.style.pointerEvents=""),r&&r.remove(),l&&l.remove(),document.styleSheets[0].insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3),await u()}else{const i=new XMLHttpRequest;i.open("GET","project.json",!0),i.onprogress=o=>{r&&(r.innerHTML="ind2"===t&&e>0?`${a}<div>${(o.loaded/e*100).toFixed(1)} %</div>`:"ind3"===t&&e>0?`${a}<div>${(o.loaded/1e6).toFixed(1)}/${(e/1e6).toFixed(1)} MB</div>`:`${a}<div>${(o.loaded/1e6).toFixed(1)} MB</div>`)},i.onload=async()=>{o&&(o.style.height="0"),200===i.status?(Qo(JSON.parse(i.responseText)),app.preloadExternalImages&&app.externalImages.size>0&&await s(app.externalImages)):Qo(JSON.parse(JSON.stringify(app))),setTimeout(()=>{o&&(o.style.height="",o.style.opacity="1",o.style.pointerEvents=""),r&&r.remove(),l&&l.remove(),document.styleSheets[0].insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3),await u()},i.send()}}();const e=e=>{e.preventDefault(),e.returnValue=""};window.addEventListener("beforeunload",e),n(()=>{qt.update(e=>(null==e||e.destroy(),null)),window.removeEventListener("beforeunload",e)})});var g=hl();pl(G(R(g),2),{}),d(e,g),c()},{target:document.getElementById("app")});
