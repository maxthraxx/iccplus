var e=Object.defineProperty,t=(t,o,i)=>((t,o,i)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i)(t,"symbol"!=typeof o?o+"":o,i);function o(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}import{p as i,a as n,u as a,o as l,f as r,h as s,b as c,c as d,d as u,g,s as m,e as h,i as p,j as v,k as f,l as b,m as w,n as T,t as I,q as y,r as S,S as C,v as x,w as B,x as A,y as O,z as k,A as M,B as F,C as R,D,E as j,F as P,G as $,H as q,I as V,J as L,K as N,L as W,M as E,N as U,O as z,P as G,Q as H,R as _,T as Y,U as Z,V as J,W as X,X as K,Y as Q,Z as ee,_ as te,$ as oe,a0 as ie,a1 as ne,a2 as ae,a3 as le,a4 as re,a5 as se,a6 as ce,a7 as de,a8 as ue,a9 as ge,aa as me,ab as he,ac as pe,ad as ve,ae as fe,af as be,ag as we,ah as Te,ai as Ie,aj as ye,ak as Se,al as Ce,am as xe,an as Be,ao as Ae,ap as Oe,aq as ke,ar as Me,as as Fe,at as Re,au as De,av as je,aw as Pe,ax as $e,ay as qe,az as Ve,aA as Le,aB as Ne,aC as We,aD as Ee,aE as Ue,aF as ze,aG as Ge,aH as He,aI as _e,aJ as Ye,aK as Ze,aL as Je,aM as Xe,aN as Ke,aO as Qe,aP as et}from"./chunk-vendors.DQVhQrH4.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const tt=i({anchor:null,text:"",isVisible:!0});var ot=r('<div class="mdc-tooltip" role="tooltip" style="z-index: 9999;"><div class="mdc-tooltip__surface"><!></div></div>');var it=r("<div><!></div>");const nt=function(e,t){n(t,!0);let o,i=f(t,"text",3,""),a=f(t,"innerClass",3,"");function l(){tt.anchor=o,tt.text=i(),tt.isVisible=!0}function r(){tt.isVisible=!1}b(()=>(o.addEventListener("mouseenter",l),o.addEventListener("mouseleave",r),o.addEventListener("focusin",l),o.addEventListener("focusout",r),()=>{o.removeEventListener("mouseenter",l),o.removeEventListener("mouseleave",r),o.removeEventListener("focusin",l),o.removeEventListener("focusout",r)}));var s=it(),g=v(s);w(g,()=>{var e;return null!=(e=t.children)?e:T}),c(s,e=>o=e,()=>o),I(()=>y(s,1,S(a()))),d(e,s),u()};
/*!
 * canvas-size
 * v2.0.0
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function at(e){const t=e.sizes.shift(),o=Math.max(Math.ceil(t[0]),1),i=Math.max(Math.ceil(t[1]),1),n=[o-1,i-1,1,1],a=performance.now(),l="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;let r,s;l?(r=new OffscreenCanvas(1,1),s=new OffscreenCanvas(o,i)):(r=document.createElement("canvas"),r.width=1,r.height=1,s=document.createElement("canvas"),s.width=o,s.height=i);const c=r.getContext("2d"),d=s.getContext("2d");d&&(d.fillRect.apply(d,n),c.drawImage(s,o-1,i-1,1,1,0,0,1,1));const u=c&&0!==c.getImageData(0,0,1,1).data[3],g=parseInt(performance.now()-a);return[r,s].forEach(e=>{e.height=0,e.width=0}),l?(postMessage({width:o,height:i,testTime:g,isTestPass:u}),!u&&e.sizes.length&&setTimeout(()=>{at(e)},0)):u?e.onSuccess({width:o,height:i,testTime:g}):(e.onError({width:o,height:i,testTime:g}),e.sizes.length&&setTimeout(()=>{at(e)},0)),u}const lt={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},rt={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},st={};function ct(e){const t=e.width===e.height,o=1===e.height,i=1===e.width,n=[];if(e.width&&e.height){const a=e.min||rt.min,l=e.step||rt.step;let r=Math.max(e.width,e.height);for(;r>=a;){const e=t||o?r:1,a=t||i?r:1;n.push([e,a]),r-=l}}else e.sizes.forEach(e=>{const a=t||o?e:1,l=t||i?e:1;n.push([a,l])});return n}function dt(e){const t="undefined"!=typeof window,o=t&&"Promise"in window,i=t&&"HTMLCanvasElement"in window,n=t&&"OffscreenCanvas"in window,a=URL.createObjectURL(new Blob([])).slice(-36),l=performance.now(),{onError:r,onSuccess:s,...c}=e,d=()=>parseInt(performance.now()-l);let u=null;if(!i)return!1;if(e.useWorker&&n){const e="\n            var canvasTest = ".concat(at.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),t=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(t);u=new Worker(o),URL.revokeObjectURL(o),u.onmessage=function(e){const{width:t,height:o,testTime:i,isTestPass:n}=e.data,l={width:t,height:o,testTime:i,totalTime:d()};n?(st[a].onSuccess(l),delete st[a]):st[a].onError(l)}}return o?new Promise(t=>{const o={...e,onError(o){let{width:i,height:n,testTime:a}=o;const l={width:i,height:n,testTime:a,totalTime:d()};let s;if(0===e.sizes.length)s=!0;else{const[[t,o]]=e.sizes.slice(-1);s=i===t&&n===o}r(l),s&&t({...l,success:!1})},onSuccess(e){let{width:o,height:i,testTime:n}=e;const a={width:o,height:i,testTime:n,totalTime:d()};s(a),t({...a,success:!0})}};if(u){const{onError:e,onSuccess:t}=o;st[a]={onError:e,onSuccess:t},u.postMessage(c)}else at(o)}):u?(st[a]={onError:r,onSuccess:s},void u.postMessage(c)):at(e)}const ut={maxArea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=ct({width:e.max,height:e.max,min:e.min,step:e.step,sizes:[...lt.area]});return dt({...rt,...e,sizes:t})},maxHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=ct({width:1,height:e.max,min:e.min,step:e.step,sizes:[...lt.height]});return dt({...rt,...e,sizes:t})},maxWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=ct({width:e.max,height:1,min:e.min,step:e.step,sizes:[...lt.width]});return dt({...rt,...e,sizes:t})},test(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...rt,...e};return t.sizes=[...t.sizes],t.width&&t.height&&(t.sizes=[[t.width,t.height]]),dt(t)}},gt="2.1.5",mt={selFilterBlurIsOn:!1,selFilterBlur:0,selFilterBrightIsOn:!1,selFilterBright:100,selFilterContIsOn:!1,selFilterCont:100,selFilterGrayIsOn:!1,selFilterGray:0,selFilterHueIsOn:!1,selFilterHue:0,selFilterInvertIsOn:!1,selFilterInvert:0,selFilterOpacIsOn:!1,selFilterOpac:100,selFilterSaturIsOn:!1,selFilterSatur:1,selFilterSepiaIsOn:!1,selFilterSepia:0,selBgColorIsOn:!0,selOverlayOnImage:!1,selFilterBgColor:"#70FF7EFF",selBorderColorIsOn:!1,selFilterBorderColor:"#000000FF",selCTitleColorIsOn:!1,selFilterCTitleColor:"#000000FF",selCTextColorIsOn:!1,selFilterCTextColor:"#000000FF",selATitleColorIsOn:!1,selFilterATitleColor:"#000000FF",selATextColorIsOn:!1,selFilterATextColor:"#000000FF",selScoreTextColorIsOn:!1,selFilterSTextColor:"#000000FF",reqFilterBlurIsOn:!1,reqFilterBlur:0,reqFilterBrightIsOn:!1,reqFilterBright:100,reqFilterContIsOn:!1,reqFilterCont:100,reqFilterGrayIsOn:!1,reqFilterGray:0,reqFilterHueIsOn:!1,reqFilterHue:0,reqFilterInvertIsOn:!1,reqFilterInvert:0,reqFilterOpacIsOn:!0,reqFilterOpac:50,reqFilterSaturIsOn:!1,reqFilterSatur:1,reqFilterSepiaIsOn:!1,reqFilterSepia:0,reqBgColorIsOn:!1,reqOverlayOnImage:!1,reqFilterBgColor:"#FFFFFFFF",reqBorderColorIsOn:!1,reqFilterBorderColor:"#000000FF",reqCTitleColorIsOn:!1,reqFilterCTitleColor:"#000000FF",reqCTextColorIsOn:!1,reqFilterCTextColor:"#000000FF",reqATitleColorIsOn:!1,reqFilterATitleColor:"#000000FF",reqATextColorIsOn:!1,reqFilterATextColor:"#000000FF",reqScoreTextColorIsOn:!1,reqFilterSTextColor:"#000000FF",reqFilterVisibleIsOn:!1,unselFilterBlurIsOn:!1,unselFilterBlur:0,unselFilterBrightIsOn:!1,unselFilterBright:100,unselFilterContIsOn:!1,unselFilterCont:100,unselFilterGrayIsOn:!1,unselFilterGray:0,unselFilterHueIsOn:!1,unselFilterHue:0,unselFilterInvertIsOn:!1,unselFilterInvert:0,unselFilterOpacIsOn:!1,unselFilterOpac:100,unselFilterSaturIsOn:!1,unselFilterSatur:1,unselFilterSepiaIsOn:!1,unselFilterSepia:0},ht={customRowTitle:!1,rowTitle:"Times New Roman",customRowText:!1,rowText:"Times New Roman",customObjectTitle:!1,objectTitle:"Times New Roman",customObjectText:!1,objectText:"Times New Roman",customAddonTitle:!1,addonTitle:"Times New Roman",customAddonText:!1,addonText:"Times New Roman",customScoreText:!1,scoreText:"Times New Roman",rowTitleTextSize:200,rowTextTextSize:100,objectTitleTextSize:200,objectTextTextSize:100,addonTitleTextSize:200,addonTextTextSize:100,scoreTextSize:75,rowTitleColor:"#000000",rowTextColor:"#000000",objectTitleColor:"#000000",objectTextColor:"#000000",addonTitleColor:"#000000",addonTextColor:"#000000",scoreTextColor:"#000000",rowTitleAlign:"center",rowTextAlign:"center",objectTitleAlign:"center",objectTextAlign:"center",addonTitleAlign:"center",addonTextAlign:"center",scoreTextAlign:"center"},pt={objectImgBorderStyle:"solid",objectImgBorderWidth:2,objectImageWidth:100,objectImageMarginTop:0,objectImageMarginBottom:0,objectImgBorderRadiusTopLeft:0,objectImgBorderRadiusTopRight:0,objectImgBorderRadiusBottomRight:0,objectImgBorderRadiusBottomLeft:0,objectImgBorderRadiusIsPixels:!0,objectImgBorderIsOn:!1,objectImgOverflowIsOn:!1,objectImgBorderColor:"red",objectImgObjectFillStyle:"",objectImgObjectFillIsOn:!1,objectImageBoxWidth:50},vt={rowImgBorderStyle:"solid",rowImgBorderWidth:2,rowImageWidth:100,rowImageMarginTop:0,rowImageMarginBottom:0,rowImgBorderRadiusTopLeft:0,rowImgBorderRadiusTopRight:0,rowImgBorderRadiusBottomRight:0,rowImgBorderRadiusBottomLeft:0,rowImgBorderRadiusIsPixels:!0,rowImgBorderIsOn:!1,rowImgOverflowIsOn:!1,rowImgBorderColor:"red",rowImageBoxWidth:50},ft={useAddonImage:!1,addonImgBorderStyle:"solid",addonImgBorderWidth:2,addonImageWidth:100,addonImageMarginTop:0,addonImageMarginBottom:0,addonImgBorderRadiusTopLeft:0,addonImgBorderRadiusTopRight:0,addonImgBorderRadiusBottomRight:0,addonImgBorderRadiusBottomLeft:0,addonImgBorderRadiusIsPixels:!0,addonImgBorderIsOn:!1,addonImgOverflowIsOn:!1,addonImgBorderColor:"red",addonImgObjectFillStyle:"",addonImgObjectFillIsOn:!1,addonImageBoxWidth:50},bt={bgColorIsOn:!1,backgroundColor:"#FFFFFFFF",rowBgColorIsOn:!1,rowBgColor:"#FFFFFFFF",objectBgColorIsOn:!1,objectBgColor:"#FFFFFFFF",isBackgroundRepeat:!1,isBackgroundFitIn:!1,backgroundImage:"",isRowBackgroundRepeat:!1,isRowBackgroundFitIn:!1,rowBackgroundImage:"",isObjectBackgroundRepeat:!1,isObjectBackgroundFitIn:!1,objectBackgroundImage:""},wt={objectHeight:!0,objectDesignIsAdvanced:!1,objectMargin:10,objectTextPadding:10,objectBorderStyle:"solid",objectBorderWidth:2,objectBorderIsOn:!1,objectDropShadowH:0,objectDropShadowV:0,objectDropShadowBlur:0,objectDropShadowSpread:0,objectDropShadowIsOn:!1,objectUseBoxShadowIsOn:!1,objectBorderRadiusTopLeft:0,objectBorderRadiusTopRight:0,objectBorderRadiusBottomRight:0,objectBorderRadiusBottomLeft:0,objectBorderRadiusIsPixels:!0,objectOverflowIsOn:!0,objectDropShadowColor:"grey",objectGradientIsOn:!1,objectGradient:"",objectGradientOnSelect:"",objectGradientOnReq:"",objectBorderColor:"red",objectBorderImage:"",objectBorderImageRepeat:"stretch",objectBorderImageWidth:5,objectBorderImageSliceTop:5,objectBorderImageSliceBottom:5,objectBorderImageSliceLeft:5,objectBorderImageSliceRight:5,removeSpaceAddonIsOn:!1,titlePaddingIsOn:!1},Tt={rowDesignIsAdvanced:!1,rowMargin:10,rowBodyMarginSides:1,rowBodyMarginTop:25,rowBodyMarginBottom:25,rowTextPaddingY:5,rowTextPaddingX:10,rowOverflowIsOn:!0,rowDropShadowH:0,rowDropShadowV:0,rowDropShadowBlur:0,rowDropShadowSpread:0,rowDropShadowColor:"grey",rowButtonXPadding:0,rowButtonYPadding:0,rowDropShadowIsOn:!1,rowUseBoxShadowIsOn:!1,rowBorderRadiusTopLeft:0,rowBorderRadiusTopRight:0,rowBorderRadiusBottomRight:0,rowBorderRadiusBottomLeft:0,rowBorderRadiusIsPixels:!0,rowBorderStyle:"solid",rowBorderWidth:2,rowBorderIsOn:!1,rowBorderColor:"red",rowGradientIsOn:!1,rowGradient:"",rowBorderImage:"",rowBorderImageRepeat:"stretch",rowBorderImageWidth:5,rowBorderImageSliceTop:5,rowBorderImageSliceBottom:5,rowBorderImageSliceLeft:5,rowBorderImageSliceRight:5},It={useAddonDesign:!1,addonDesignIsAdvanced:!1,addonMargin:10,addonTextPadding:10,addonBorderStyle:"solid",addonBorderWidth:2,addonBorderIsOn:!1,addonDropShadowH:0,addonDropShadowV:0,addonDropShadowBlur:0,addonDropShadowSpread:0,addonDropShadowIsOn:!1,addonUseBoxShadowIsOn:!1,addonBorderRadiusTopLeft:0,addonBorderRadiusTopRight:0,addonBorderRadiusBottomRight:0,addonBorderRadiusBottomLeft:0,addonBorderRadiusIsPixels:!0,addonOverflowIsOn:!0,addonDropShadowColor:"grey",addonGradientIsOn:!1,addonGradient:"",addonGradientOnSelect:"",addonGradientOnReq:"",addonBorderColor:"red",addonBorderImage:"",addonBorderImageRepeat:"stretch",addonBorderImageWidth:5,addonBorderImageSliceTop:5,addonBorderImageSliceBottom:5,addonBorderImageSliceLeft:5,addonBorderImageSliceRight:5,useAddonBackgroundImage:!1,addonBackgroundImage:"",isAddonBackgroundFitIn:!1,isAddonBackgroundRepeat:!1,addonBgColorIsOn:!1,addonBgColor:"#FFFFFFFF",addonTitlePaddingIsOn:!1},yt={customMultiTextFont:!1,multiChoiceCounterPosition:0,multiChoiceCounterSize:170,multiChoiceTextFont:"Times New Roman",multiChoiceTextSize:100},St={barTextPadding:17,barTextMargin:0,customBarTextFont:!1,barTextFont:"Times New Roman",barPadding:0,barMargin:0,barTextSize:15,barTextColor:"#000000",barPointPos:"#FF0000FF",barPointNeg:"#FF0000FF",barIconColor:"#0000008A",barBackgroundColor:"#FFFFFFFF"},Ct={useBackpackDesign:!1,backpackBgColor:"#FFFFFF",isBackpackBgRepeat:!1,isBackpackBgFitIn:!1,backpackBgImage:"",backPackWidth:1200},app=i(

/*! Delete and replace this part with your project if you're pasting it in, leave it here if you have placed your project.json file under index.html. */
{version:gt,isEditModeOnAll:!0,isStyleOpen:!1,isPointsOpen:!1,isChoicesOpen:!1,isDesignOpen:!1,isFadingOut:!1,isPointerCursor:!1,importedChoicesIsOpen:!0,curBgmTime:0,curBgmLength:0,curVolume:100,isSeeking:!1,isMute:!1,lastFadeTime:0,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRequired:[],rowIdLength:4,objectIdLength:4,words:[],wordChangeComplete:!1,groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,checkDeleteRow:!0,checkDeleteObject:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:{...mt,...ht,...pt,...vt,...ft,...bt,...wt,...Tt,...It,...yt,...St,...Ct}}
/*! End */

),xt={version:gt,isEditModeOnAll:!0,isStyleOpen:!1,isPointsOpen:!1,isChoicesOpen:!1,isDesignOpen:!1,isFadingOut:!1,isPointerCursor:!1,importedChoicesIsOpen:!0,curBgmTime:0,curBgmLength:0,curVolume:100,isSeeking:!1,isMute:!1,lastFadeTime:0,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRequired:[],rowIdLength:4,objectIdLength:4,words:[],wordChangeComplete:!1,groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,checkDeleteRow:!0,checkDeleteObject:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:{...mt,...ht,...pt,...vt,...ft,...bt,...wt,...Tt,...It,...yt,...St,...Ct}},Bt=i(new C),At=i(new C),Ot=i(new C),kt=i(new C),Mt=i(new C),Ft=i(new C),Rt=i(new C),Dt=i(new C),jt=i(new C),Pt=i(new C),$t=i(new C),qt=i(new x),Vt=i([]),Lt=i({value:"light"}),Nt={ALLOWED_TAGS:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","font","iframe","img"],ADD_ATTR:["href","target","style"]},Wt=M(null),Et=i({isBgmInit:!1,bgmIsPlaying:!1,bgmPlayInterval:0,bgmTitleInterval:0,bgmFadeInterval:0,bgmFadeTimer:0,bgmTitle:"No Audio Title",curBgmTime:0,curBgmLength:0,isSeeking:!1,lastFadeTime:0,isFadingOut:!1,bgmObjectId:""}),Ut=i({currentDialog:"none"}),zt=i({labelText:"",timeoutMs:4e3,isOpen:!1}),Gt=i({allowDeselect:!1,isSingleFile:!1}),Ht=i({stored:!1,name:"Auto Save",time:"",app:""}),_t=i(Array.from({length:99},(e,t)=>({stored:!1,name:"Slot ".concat(t+1),time:"",app:""}))),Yt=i(Array.from({length:99},(e,t)=>({stored:!1,name:"Slot ".concat(t+1),time:"",app:""})));i({backgroundColor:"",backgroundImage:"",barBgColor:""});const Zt=new Set,Jt={value:!1},Xt=F(window.innerWidth,e=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)});let Kt=null;function Qt(){return new Promise((e,t)=>{const o=indexedDB.open("cyoaPlusDB");o.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains("cyoaStore")||t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore")},o.onsuccess=t=>{const o=t.target.result;e(o)},o.onerror=t})}function eo(){return new Promise((e,t)=>{if(Kt)return e(Kt);const o=indexedDB.open("cyoaDB");let i=!1,n=[],a=[],l=[];o.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore",{keyPath:"title"}),i=!0},o.onsuccess=o=>{const r=o.target.result;if(1===r.version)if(i)Qt().then(t=>{Kt=t,e(Kt)}).catch(t).finally(()=>{r.close()});else if(r.objectStoreNames.contains("buildStore")){const o=r.transaction(["buildStore"],"readonly").objectStore("buildStore").getAll();o.onsuccess=()=>{const i=o.result;for(let e=0;e<i.length;e++){const t=o.result[e];Yt[e].stored=!0,Yt[e].name=t.title,Yt[e].time="Unknown",Yt[e].app=Array.isArray(t.value)?t.value.join(","):t.value}Qt().then(t=>{Kt=t,e(Kt)}).catch(t).finally(()=>{r.close()})},o.onerror=o=>{console.error(o),Qt().then(t=>{Kt=t,e(Kt)}).catch(t).finally(()=>{r.close()})}}else Qt().then(t=>{Kt=t,e(Kt)}).catch(t).finally(()=>{r.close()});else{const o=[new Promise((e,t)=>{if(r.objectStoreNames.contains("cyoaStore")){const o=r.transaction("cyoaStore","readonly").objectStore("cyoaStore").openCursor();o.onsuccess=t=>{const o=t.target.result;o?(n.push({key:o.key,value:o.value}),o.continue()):e()},o.onerror=t}else e()}),new Promise((e,t)=>{if(r.objectStoreNames.contains("buildStore")){const o=r.transaction("buildStore","readonly").objectStore("buildStore").openCursor();o.onsuccess=t=>{const o=t.target.result;o?(a.push({key:o.key,value:o.value}),o.continue()):e()},o.onerror=t}else e()})];Promise.all(o).then(()=>(r.close(),new Promise((e,t)=>{const o=indexedDB.deleteDatabase("cyoaDB");o.onsuccess=()=>{const o=indexedDB.open("cyoaDB",1);o.onupgradeneeded=e=>{e.target.result.createObjectStore("buildStore",{keyPath:"title"});const t=e.target.transaction;if(t){const e=t.objectStore("buildStore");let o=0;for(let t=0;t<a.length;t++){const i=a[t];void 0!==i.value.title?(e.put(i.value),Yt[o].stored=!0,Yt[o].name=i.title,Yt[o].time="Unknown",Yt[o].app=Array.isArray(i.value)?i.value.join(","):i.value,o+=1):l.push(i)}}},o.onsuccess=t=>{t.target.result.close(),e()},o.onerror=e=>{console.error(e,"L872"),t(e)}},o.onerror=e=>{console.error(e,"L877"),t(e)}}))).catch(e=>{console.error(e),r.close()}).finally(()=>{const o=indexedDB.open("cyoaPlusDB");o.onupgradeneeded=e=>{const t=e.target.result;!t.objectStoreNames.contains("cyoaStore")&&n.length>0&&t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore");const o=e.target.transaction;if(o){if(n.length>0){const e=o.objectStore("cyoaStore");for(let t=0;t<n.length;t++){const o=n[t];e.put(o.value,o.key)}}if(l.length>0){const e=o.objectStore("buildStore");for(let t=0;t<l.length;t++){const o=l[t];e.put(o.value,o.key)}}}},o.onsuccess=t=>{const o=t.target.result;Kt=o,e(Kt)},o.onerror=e=>{t(e)}})}},o.onerror=e=>{t(e)}})}let to=null;function oo(e,t){return new Promise((o,i)=>{const n=setTimeout(()=>o(),e);t&&t.addEventListener("abort",()=>{clearTimeout(n),i(new DOMException("Aborted","AbortError"))})})}async function io(){const e=new AbortController;to=e;const t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave");for(;app.buildAutoSaveIsOn;){try{await oo(1e3*app.buildAutoSaveInterval*60,e.signal)}catch(o){break}if(!app.buildAutoSaveIsOn)break;const i=(await eo()).transaction("buildStore","readwrite").objectStore("buildStore"),n=navigator.language,a=new Date,l=new Intl.DateTimeFormat(n,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(a),r={stored:!0,name:"Auto Save",time:l,app:no()};try{await new Promise((e,o)=>{const n=i.put(r,t);n.onsuccess=()=>e(),n.onerror=()=>o(n.error)}),Ht.stored=!0,Ht.time=l,Ht.app=r.app,zt.labelText="Auto-save completed successfully.",zt.isOpen=!0}catch(o){console.error(o)}}}function no(){let e=[];return Array.from(Bt.entries()).forEach(([t,o])=>{let i=Mt.get(t);if(void 0!==i){const n=i.choice;let a=t;0===o.multiple?(n.isActivateRandom&&n.activatedRandom&&(a+="/RND#".concat(n.activatedRandom.join("/AND#").replace(/\/ON#/g,"/RON#"))),n.textfieldIsOn&&n.customTextfieldIsOn&&void 0!==n.wordChangeSelect&&(a+="/WORD#".concat(n.wordChangeSelect.replace(/,/g,"/CHAR#"))),n.isImageUpload&&n.image!==n.defaultImage&&(a+="/IMG#".concat(n.image.replace(/,/g,"/CHAR#"))),e.push(a)):(a+="/ON#".concat(o.multiple),n.isActivateRandom&&n.activatedRandomMul&&(a+="/RND#".concat(n.activatedRandomMul.flat(2).join("/AND#").replace(/\/ON#/g,"/RON#"))),e.push(a))}}),e.join(",")}function ao(){const e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),l=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(o,"-").concat(i,"_").concat(n,"-").concat(a,"-").concat(l)}function lo(e){if(e.customTextIsOn)return void 0!==e.customText?e.customText:"";switch(e.type){case"id":{let t=e.reqId.split("/ON#"),o=Mt.get(t[0]);if(void 0!==o){let i=o.choice;return"".concat(e.beforeText," ").concat(t.length>1?"".concat(t[1]," "):""," ").concat(i.title," ").concat(e.afterText)}break}case"point":{let t=Ot.get(e.reqId);if(void 0!==t)return"".concat(e.beforeText," ").concat(e.reqPoints," ").concat(t.name," ").concat(e.afterText);break}case"or":{let t=[];for(let o=0;o<e.orRequired.length;o++){let i=e.orRequired[o].req;if(void 0!==i){let e=i.split("/ON#"),o=Mt.get(e[0]),n="";if(void 0!==o){let i=o.choice;n=e.length>1?"".concat(e[1]," "):"",t.push("".concat(n).concat(i.title))}}}return"1"===app.orderOrReqText?"".concat(e.beforeText," ").concat(t.join(", ")," ").concat(void 0!==e.orNum?"".concat(app.defaultOrReq," ").concat(e.orNum):"".concat(app.defaultOrReq," 1")," ").concat(e.afterText):"".concat(e.beforeText," ").concat(void 0!==e.orNum?"".concat(e.orNum," ").concat(app.defaultOrReq):"1 ".concat(app.defaultOrReq)," ").concat(t.join(", ")," ").concat(e.afterText)}case"selFromGroups":if(void 0!==e.selGroups){let t=[];for(let o=0;o<e.selGroups.length;o++){let i=e.selGroups[o],n=Ft.get(i);void 0!==n&&t.push(n.name)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(t.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(t.join(", ")," ").concat(e.afterText)}case"selFromRows":if(void 0!==e.selRows){let t=[];for(let o=0;o<e.selRows.length;o++){let i=e.selRows[o],n=kt.get(i);void 0!==n&&t.push(n.title)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(t.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(t.join(", ")," ").concat(e.afterText)}case"selFromWhole":return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(e.afterText)}return"".concat(e.beforeText," ").concat(e.afterText)}function ro(e){return kt.has(e)||Mt.has(e)||Dt.has(e)||Ot.has(e)||Pt.has(e)||$t.has(e)||Ft.has(e)||jt.has(e)}function so(e,t){let o=app.addPrefix?"row-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return ro(o)?e>2?so(0,++t):so(++e,t):o}function co(e,t){let o=app.addPrefix?"word-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return ro(o)?e>2?co(0,++t):co(++e,t):o}function uo(e,t){let o=app.addPrefix?"choice-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return ro(o)?e>2?uo(0,++t):uo(++e,t):o}function go(e,t,o){let i=app.addPrefix?"design-":"",n="abcdefghijklmnopqrstuvwxyz0123456789";for(var a=0;a<t;a++)i+=n.charAt(Math.floor(36*Math.random()));return ro(i)?e>2?go(0,++t):go(++e,t):i}function mo(e,t){let o=app.addPrefix?"group-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return ro(o)?e>2?mo(0,++t):mo(++e,t):o}function ho(e,t){let o=app.addPrefix?"point-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return ro(o)?e>2?ho(0,++t):ho(++e,t):o}function po(e,t){let o=app.addPrefix?"variable-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return ro(o)?e>2?po(0,++t):po(++e,t):o}function vo(e,t){let o="s-",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return qt.has(o)?e>2?vo(0,++t):vo(++e,t):o}let fo,bo=[];function wo(){return function(){if(bo.length!==app.words.length)return!0;for(let e=0;e<bo.length;e++){if(bo[e].id!==app.words[e].id)return!0;if(bo[e].replaceText!==app.words[e].replaceText)return!0}return!1}()&&(bo=JSON.parse(JSON.stringify(app.words)),fo=new RegExp(app.words.map(e=>e.id).sort((e,t)=>t.length-e.length).map(e=>e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")).join("|"),"g")),fo}function To(e){let t=e;return app.words&&(t=t.replace(wo(),e=>{const t=Ot.get(e);if(void 0!==t){return(t.startingSum%1==0?t.startingSum:parseFloat(t.startingSum.toFixed(void 0!==t.decimalPlaces?t.decimalPlaces:2))).toString()}{const t=Mt.get(e);if(void 0!==t){const e=t.choice;if(e.isSelectableMultiple&&e.isMultipleUseVariable)return e.multipleUseVariable.toString()}else{const t=Dt.get(e);if(void 0!==t)return t.replaceText}}return e})),t}function Io(e,t,o){if(void 0!==o){if(void 0!==o.styling&&o.isPrivateStyling&&o[e])return o.styling;if(void 0!==app.objectDesignGroups&&o.objectDesignGroups)for(let t=0;t<o.objectDesignGroups.length;t++){let i=$t.get(o.objectDesignGroups[t]);if(void 0!==i&&i[e]){let e=i.activatedId,t=Rt.get(e);if(""===e||So(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==t&&xo(t.requireds))return i.styling}}}if(void 0!==t){if(void 0!==t.styling&&t.isPrivateStyling&&t[e])return t.styling;if(void 0!==app.rowDesignGroups&&t.rowDesignGroups)for(let o=0;o<t.rowDesignGroups.length;o++){let i=Pt.get(t.rowDesignGroups[o]);if(void 0!==i&&i[e]){let e=i.activatedId,t=Rt.get(e);if(""===e||So(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==t&&xo(t.requireds))return i.styling}}}return app.styling}function yo(e,t){if(t.has(e)){return yo("".concat(e,"_dup"),t)}return e}function So(e,t=Bt){var o;const[i,n="0"]=e.split("/ON#"),a=parseInt(n);if(a>0){return((null==(o=t.get(i))?void 0:o.multiple)||0)>=a}return t.has(i)}function Co(e,t=Bt){if(e.required)switch(e.type){case"id":return So(e.reqId,t);case"points":const o=Ot.get(e.reqId);if(void 0!==o){if(void 0===e.operator)return o.startingSum>e.reqPoints;switch(e.operator){case"1":return o.startingSum>e.reqPoints;case"2":return o.startingSum>=e.reqPoints;case"3":return o.startingSum==e.reqPoints;case"4":return o.startingSum<=e.reqPoints;case"5":return o.startingSum<e.reqPoints}}return!1;case"or":let i=void 0===e.orNum?1:e.orNum,n=0;for(let g=0;g<e.orRequired.length;g++){let o=e.orRequired[g].req;void 0!==o&&So(o,t)&&n++}return n>=i;case"pointCompare":const a=Ot.get(e.reqId),l=Ot.get(e.reqId1);if(void 0!==a&&void 0!==l){let t=l.startingSum;if(e.more)for(let o=0;o<e.more.length;o++){let i=0,n=e.more[o].id,a=e.more[o].points;if(void 0!==n){let e=Ot.get(n);void 0!==e&&(i=e.startingSum)}else void 0!==a&&(i=a);switch(e.more[o].operator){case"1":t+=i;break;case"2":t-=i;break;case"3":t*=i;break;case"4":t/=i;break;case"5":t%=i}}switch(e.operator){case"1":return a.startingSum>t;case"2":return a.startingSum>=t;case"3":return a.startingSum==t;case"4":return a.startingSum<=t;case"5":return a.startingSum<t;default:return!1}}return!1;case"selFromGroups":if(e.selGroups){let t=0,o=void 0===e.selFromOperators?"1":e.selFromOperators,i=void 0===e.selNum?1:e.selNum;for(let n=0;n<e.selGroups.length;n++){const o=Ft.get(e.selGroups[n]);if(void 0!==o){const e=o.elements;for(let o=0;o<e.length;o++)Bt.has(e[o])&&t++}}switch(o){case"1":return!(i>t||0===i&&t>0);case"2":return i===t;case"3":return!(i<t||0===i&&t>0);default:return!1}}case"selFromRows":if(e.selRows){let t=0,o=void 0===e.selFromOperators?"1":e.selFromOperators,i=void 0===e.selNum?1:e.selNum;for(let n=0;n<e.selRows.length;n++){const o=kt.get(e.selRows[n]);void 0!==o&&(t+=o.currentChoices)}switch(o){case"1":return!(i>t||0===i&&t>0);case"2":return i===t;case"3":return!(i<t||0===i&&t>0);default:return!1}}case"selFromWhole":let r=0,s=void 0===e.selFromOperators?"1":e.selFromOperators,c=void 0===e.selNum?1:e.selNum;for(let e=0;e<app.rows.length;e++)r+=app.rows[e].currentChoices;switch(s){case"1":return!(c>r||0===c&&r>0);case"2":return c===r;case"3":return!(c<r||0===c&&r>0);default:return!1}case"gid":const d=Rt.get(e.reqId);return void 0!==d&&void 0!==app.globalRequirements&&xo(d.requireds,t);case"word":const u=Dt.get(e.reqId);if(void 0!==u){let t=0;for(let o=0;o<e.orRequired.length;o++){let i=e.orRequired[o].req;void 0!==i&&u.replaceText===i&&t++}return t>=1}return!1}else switch(e.type){case"id":return!So(e.reqId,t);case"or":let o=void 0===e.orNum?1:e.orNum,i=0;for(let a=0;a<e.orRequired.length;a++){let o=e.orRequired[a].req;(""===o||void 0!==o&&So(o,t))&&i++}return i<e.orRequired.length-o+1;case"gid":const n=Rt.get(e.reqId);return void 0!==n&&void 0!==app.globalRequirements&&!xo(n.requireds,t)}return!1}function xo(e,t=Bt){let o=!0;if(void 0!==e)for(let i=0;i<e.length;i++){const n=e[i];let a=!0;if(void 0!==n.requireds)for(let e=0;e<n.requireds.length;e++)a=a&&Co(n.requireds[e],t);a&&(o=o&&Co(e[i],t))}return o}function Bo(e,t,o,i){function n(){let n=0,a=0,l=0;if(o&&(i.loadVideoById(t),e.bgmNoLoop?i.setLoop(!1):(i.loadPlaylist(t),i.setLoop(!0))),e.bgmFadeIn&&void 0!==e.bgmFadeInSec&&e.bgmFadeInSec>0){const t=e.bgmFadeInSec/20;Et.lastFadeTime=e.bgmFadeInSec,i.setVolume(0),i.playVideo(),0!==Et.bgmFadeInterval&&(window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.isFadingOut&&(Et.isFadingOut=!1),Et.bgmFadeInterval=window.setInterval(()=>{1===i.getPlayerState()&&(n<app.curVolume?(n+=5,i.setVolume(n),Et.lastFadeTime=Et.lastFadeTime-t):(i.setVolume(app.curVolume),window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0,Et.lastFadeTime=0))},t)}else Et.isFadingOut&&(Et.isFadingOut=!1,window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0),i.playVideo(),i.setVolume(app.curVolume);Et.bgmObjectId=e.id,app.showMusicPlayer&&(0!==Et.bgmTitleInterval&&(window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),Et.bgmTitleInterval=window.setInterval(()=>{if(void 0!==i.playerInfo.videoData){let e=i.playerInfo.videoData;e.video_id===t&&void 0!==e.title&&""!==e.title&&(Et.bgmTitle=e.title,Et.curBgmLength=i.getDuration(),window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0)}},1e3),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.bgmPlayInterval=window.setInterval(()=>{if(void 0!==i.playerInfo.videoData&&!Et.isSeeking&&1===i.getPlayerState()){const e=Math.floor(i.getCurrentTime());e!==Et.curBgmTime?a!==e?Et.curBgmTime=e:(l++,l>Et.curBgmLength&&(l=1),Et.curBgmTime=l):(a=e,l=e+1,Et.curBgmTime=l)}},1e3))}if(Et.isFadingOut){const e=Et.lastFadeTime;0!==Et.bgmFadeTimer&&(window.clearTimeout(Et.bgmFadeTimer),Et.bgmFadeTimer=0),Et.bgmFadeTimer=window.setTimeout(()=>{n()},e)}else n()}function Ao(e,t){const o=app.curVolume/5;if(e.bgmFadeOut&&void 0!==e.bgmFadeOutSec&&e.bgmFadeOutSec>0&&o>0){const i=e.bgmFadeOutSec/o;let n=app.curVolume;Et.lastFadeTime=e.bgmFadeOutSec,Et.isFadingOut=!0,0!==Et.bgmFadeInterval&&(window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0),Et.bgmFadeInterval=window.setInterval(()=>{void 0!==t.setVolume&&(n>0?(n-=5,t.setVolume(n),Et.lastFadeTime-=i):Et.isFadingOut&&(t.pauseVideo(),t.setVolume(app.curVolume),window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0,Et.lastFadeTime=0,Et.isFadingOut=!1,0!==Et.bgmTitleInterval&&(window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.bgmTitle="No Audio Title",Et.curBgmTime=0,Et.curBgmLength=0))},i)}else t.pauseVideo(),0!==Et.bgmTitleInterval&&(window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.bgmTitle="No Audio Title",Et.curBgmTime=0,Et.curBgmLength=0}function Oo(e,t,o){const i=k(Wt);if(i&&void 0!==i.playerInfo.videoData){const o=Et.bgmIsPlaying,n=i.playerInfo.videoData.video_id,a=i.getPlayerState();n===t?Et.bgmObjectId===e.id?o?(2===a||i.stopVideo(),Bo(e,t,!1,i)):Ao(e,i):o?(i.stopVideo(),Bo(e,t,!1,i)):Ao(e,i):o&&Bo(e,t,!0,i)}else o<10?window.setTimeout(()=>{Oo(e,t,++o)},200):console.log("Failed to play bgm")}async function ko(e){const t=new((await new Promise(e=>{if(window.YT&&window.YT.Player)e(window.YT);else{const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t),window.onYouTubeIframeAPIReady=()=>e(window.YT)}})).Player)("bgm-player",{width:0,height:0,events:{onReady:()=>{Wt.set(t),Oo(e,e.bgmId||"",0),app.isMute&&!t.isMuted()&&t.mute()}}})}function Mo(e,t,o=!1){if(void 0!==e){if(t){const t=["addonBorderRadiusTopLeft","addonBorderRadiusTopRight","addonBorderRadiusBottomLeft","addonBorderRadiusBottomRight","addonImgBorderRadiusTopLeft","addonImgBorderRadiusTopRight","addonImgBorderRadiusBottomLeft","addonImgBorderRadiusBottomRight","objectBorderRadiusTopLeft","objectBorderRadiusTopRight","objectBorderRadiusBottomLeft","objectBorderRadiusBottomRight","objectImgBorderRadiusTopLeft","objectImgBorderRadiusTopRight","objectImgBorderRadiusBottomLeft","objectImgBorderRadiusBottomRight","rowBorderRadiusTopLeft","rowBorderRadiusTopRight","rowBorderRadiusBottomLeft","rowBorderRadiusBottomRight","rowImgBorderRadiusTopLeft","rowImgBorderRadiusTopRight","rowImgBorderRadiusBottomLeft","rowImgBorderRadiusBottomRight"];for(let o=0;o<t.length;o++){const i=t[o];void 0!==e[i]&&(e[i]=10*e[i])}}const i=["selFilterBgColor","selFilterBorderColor","selFilterCTitleColor","selFilterCTextColor","selFilterATitleColor","selFilterATextColor","selFilterSTextColor","reqFilterBgColor","reqFilterBorderColor","reqFilterCTitleColor","reqFilterCTextColor","reqFilterATitleColor","reqFilterATextColor","reqFilterSTextColor","rowTitleColor","rowTextColor","objectTitleColor","objectTextColor","addonTitleColor","addonTextColor","scoreTextColor","objectImgBorderColor","rowImgBorderColor","addonImgBorderColor","backgroundColor","rowBgColor","objectBgColor","objectDropShadowColor","objectBorderColor","rowDropShadowColor","rowBorderColor","addonDropShadowColor","addonBorderColor","addonBgColor","barTextColor","barIconColor","barBackgroundColor","backpackBgColor","barPointNeg","barPointPos"];for(let t=0;t<i.length;t++){const o=i[t];"object"==typeof e[o]&&(e[o]=e[o].hexa)}o&&(void 0===e.customMultiTextFont&&(e.customMultiTextFont=!1),void 0===e.multiChoiceCounterPosition&&(e.multiChoiceCounterPosition=0),void 0===e.multiChoiceCounterSize&&(e.multiChoiceCounterSize=170),void 0===e.multiChoiceTextFont&&(e.multiChoiceTextFont="Times New Roman"),void 0===e.multiChoiceTextSize&&(e.multiChoiceTextSize=100))}}function Fo(e,t,o){switch(t){case"1":return e-o;case"2":return e+o;case"3":return e*o;case"4":return e/o;default:return e}}function Ro(e){delete e.tmpDiscount,delete e.discountTextA,delete e.discountTextB,delete e.dupTextA,delete e.dupTextB,delete e.discountedFrom,delete e.discountIsOn,delete e.discountScore,delete e.discountScoreCal,delete e.notStackableDiscount}function Do(e,t){var o,i,n,a,l,r;const s=Ot.get(t.id);if(void 0!==s&&void 0!==e.discountOperator&&void 0!==e.discountValue){let c=s.allowFloat?t.value:Math.floor(t.value),d=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value;d=s.allowFloat?d:Math.floor(d);let u=0,g=0,m=[],h=!1,p=0;if(e.stackableDiscount){if(t.notStackableDiscount){if(void 0!==t.tmpDiscount){for(let e=0;e<t.tmpDiscount.length;e++)t.tmpDiscount[e].isStackable&&(m=t.tmpDiscount[e].discountedFrom,c=t.tmpDiscount[e].discountedValue,p=e);t.tmpDiscount.splice(p,1)}}else if(void 0!==t.discountedFrom){let n=t.discountedFrom.indexOf(e.id);if(t.discountedFrom.splice(n,1),void 0!==t.discountedFrom&&t.discountedFrom.length>0){u=c;for(let e=0;e<t.discountedFrom.length;e++){const o=Mt.get(t.discountedFrom[e]);if(void 0!==o){const e=o.choice;void 0!==e.discountOperator&&void 0!==e.discountValue&&(u=Fo(u,e.discountOperator,e.discountValue),u=s.allowFloat?u:Math.floor(u),g=u,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(u=Math.max(u,e.discountLowLimit)))}}if(e.discountShow){let n=void 0!==e.discountAfterText&&void 0!==t.discountTextA?t.discountTextA.indexOf(e.discountAfterText):-1,a=void 0!==e.discountBeforeText&&void 0!==t.discountTextB?t.discountTextB.indexOf(e.discountBeforeText):-1;e.discountTextDuplicated?(-1!==n&&void 0!==t.dupTextA&&void 0!==e.discountAfterText&&(t.dupTextA[e.discountAfterText]-=1,0===t.dupTextA[e.discountAfterText]&&(null==(o=t.discountTextA)||o.splice(n,1),delete t.dupTextA[e.discountAfterText])),-1!==a&&void 0!==t.dupTextB&&void 0!==e.discountBeforeText&&(t.dupTextB[e.discountBeforeText]-=1,0===t.dupTextB[e.discountBeforeText]&&(null==(i=t.discountTextB)||i.splice(n,1),delete t.dupTextB[e.discountBeforeText]))):(-1!==n&&void 0!==t.discountTextA&&(t.discountTextA.splice(n,1),t.discountAfterText=t.discountTextA.join("")),-1!==a&&void 0!==t.discountTextB&&(t.discountTextB.splice(a,1),t.discountBeforeText=t.discountTextB.join("")))}t.discountScore=u,t.discountScoreCal=g}else{if(void 0!==t.tmpDiscount)for(let e=0;e<t.tmpDiscount.length;e++)t.tmpDiscount[e].isStackable||u>t.tmpDiscount[e].discountedValue&&(m=t.tmpDiscount[e].discountedFrom,g=t.tmpDiscount[e].calcValue,u=t.tmpDiscount[e].discountedValue,p=e,h=!0);h&&void 0!==t.tmpDiscount?0===m.length?t.tmpDiscount.splice(p,1):(t.discountedFrom=m,t.tmpDiscount[p].showDiscount&&(t.discountBeforeText=t.tmpDiscount[p].beforeText,t.discountAfterText=t.tmpDiscount[p].afterText),t.tmpDiscount.splice(p,1),t.notStackableDiscount=!0):Ro(t)}}}else if(t.notStackableDiscount)if(void 0!==t.discountedFrom&&t.discountedFrom.length>0&&void 0!==t.tmpDiscount){if(-1!==t.discountedFrom.indexOf(e.id)){if(t.tmpDiscount.length>0){c=t.tmpDiscount[0].discountedValue,h=!0;for(let e=1;e<t.tmpDiscount.length;e++)c>t.tmpDiscount[e].discountedValue&&(c=t.tmpDiscount[e].discountedValue,p=e)}h?(t.discountScore=c,t.discountScoreCal=t.tmpDiscount[p].calcValue,t.discountedFrom=t.tmpDiscount[p].discountedFrom,t.notStackableDiscount=!t.tmpDiscount[p].isStackable,t.discountShow=t.tmpDiscount[p].showDiscount,t.tmpDiscount[p].isStackable&&t.tmpDiscount[p].showDiscount?(t.discountBeforeText=null==(n=t.discountTextB)?void 0:n.join(""),t.discountAfterText=null==(a=t.discountTextA)?void 0:a.join("")):t.tmpDiscount[p].showDiscount?(t.discountBeforeText=t.tmpDiscount[p].beforeText,t.discountAfterText=t.tmpDiscount[p].afterText):(t.discountBeforeText="",t.discountAfterText=""),t.tmpDiscount.splice(p,1)):Ro(t)}else for(let o=0;o<t.tmpDiscount.length;o++)if(-1!==t.tmpDiscount[o].discountedFrom.indexOf(e.id)){t.tmpDiscount.splice(o,1);break}}else Ro(t);else if(void 0!==t.tmpDiscount){if(t.tmpDiscount=t.tmpDiscount.filter(t=>-1!==t.discountedFrom.indexOf(e.id)),t.tmpDiscount.length>0){c=t.tmpDiscount[0].discountedValue,h=!0;for(let e=1;e<t.tmpDiscount.length;e++)c>t.tmpDiscount[e].discountedValue&&(c=t.tmpDiscount[e].discountedValue,p=e)}h?(t.discountScore=c,t.discountScoreCal=t.tmpDiscount[p].calcValue,t.discountedFrom=t.tmpDiscount[p].discountedFrom,t.notStackableDiscount=!t.tmpDiscount[p].isStackable,t.notStackableDiscount?t.tmpDiscount[p].showDiscount?(t.discountBeforeText=t.tmpDiscount[p].beforeText,t.discountAfterText=t.tmpDiscount[p].afterText):(t.discountBeforeText="",t.discountAfterText=""):(t.discountBeforeText=null==(l=t.discountTextB)?void 0:l.join(""),t.discountAfterText=null==(r=t.discountTextA)?void 0:r.join("")),t.tmpDiscount.splice(p,1)):Ro(t)}else Ro(t);let v=void 0!==t.discountScore?t.discountScore:t.value;v=s.allowFloat?v:Math.floor(v),v!==d?(t.tmpDisScore=d-v,t.isChangeDiscount=!0):delete t.isChangeDiscount}}function jo(e,t){const o=Ot.get(t.id);if(void 0!==o&&void 0!==e.discountOperator&&void 0!==e.discountValue){let i,n=o.allowFloat?t.value:Math.floor(t.value),a=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:n,l=0,r=0,s=[],c=!1,d=0;if(void 0===t.discountedFrom&&(t.discountedFrom=[]),e.stackableDiscount)if(t.notStackableDiscount){if(void 0!==t.tmpDiscount){for(let o=0;o<t.tmpDiscount.length;o++)t.tmpDiscount[o].isStackable&&(s=t.tmpDiscount[o].discountedFrom,s.push(e.id),n=t.tmpDiscount[o].discountedValue,c=!0,d=o);l=Fo(n,e.discountOperator,e.discountValue),l=o.allowFloat?l:Math.floor(l),r=l,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(l=Math.max(l,e.discountLowLimit)),void 0!==t.discountScore&&t.discountScore>l?(t.tmpDisScore=t.discountScore-l,t.isChangeDiscount=!0,i={isStackable:!1,discountedFrom:t.discountedFrom,calcValue:void 0!==t.discountScoreCal?t.discountScoreCal:t.discountScore,discountedValue:t.discountScore,showDiscount:!1},t.discountShow&&(i.showDiscount=!0,i.beforeText=e.discountBeforeText,i.afterText=e.discountAfterText),t.discountScore=l,t.discountScoreCal=r,e.discountShow&&(t.discountShow=!0,Po(e,t)),void 0!==t.discountTextA&&(t.discountAfterText=t.discountTextA.join("")),void 0!==t.discountTextB&&(t.discountBeforeText=t.discountTextB.join("")),t.discountedFrom.push(...s),c&&t.tmpDiscount.splice(d,1),t.tmpDiscount.push(i),t.notStackableDiscount=!1):(t.isChangeDiscount=!1,s.push(e.id),e.discountShow&&Po(e,t),c?(t.tmpDiscount[d].discountedFrom=s,t.tmpDiscount[d].calcValue=r,t.tmpDiscount[d].discountedValue=l):(i={isStackable:e.stackableDiscount||!1,discountedFrom:s,calcValue:r,discountedValue:l,showDiscount:e.discountShow||!1},t.tmpDiscount.push(i)))}}else n=t.discountIsOn&&void 0!==t.discountScoreCal?t.discountScoreCal:t.value,n=o.allowFloat?n:Math.floor(n),a=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value,a=o.allowFloat?a:Math.floor(a),l=Fo(n,e.discountOperator,e.discountValue),l=o.allowFloat?l:Math.floor(l),r=l,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(l=Math.max(l,e.discountLowLimit)),Array.isArray(t.discountedFrom)||(t.discountedFrom=[]),t.discountScore=l,t.discountScoreCal=r,t.discountedFrom.push(e.id),t.discountScore!==a?(t.tmpDisScore=a-t.discountScore,t.isChangeDiscount=!0):t.isChangeDiscount=!1,t.discountIsOn||(t.discountIsOn=!0),e.discountShow&&(t.discountShow=!0,Po(e,t)),void 0!==t.discountTextA&&(t.discountAfterText=t.discountTextA.join("")),void 0!==t.discountTextB&&(t.discountBeforeText=t.discountTextB.join(""));else void 0===t.tmpDiscount&&(t.tmpDiscount=[]),l=Fo(n,e.discountOperator,e.discountValue),l=o.allowFloat?l:Math.floor(l),r=l,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(l=Math.max(l,e.discountLowLimit)),t.discountIsOn?void 0!==t.discountScore&&(t.discountScore>l?(i={isStackable:!t.notStackableDiscount,discountedFrom:t.discountedFrom,calcValue:void 0!==t.discountScoreCal?t.discountScoreCal:t.discountScore,discountedValue:t.discountScore,showDiscount:t.discountShow||!1},t.discountShow&&(i.showDiscount=!0,i.beforeText=t.discountBeforeText,i.afterText=t.discountAfterText),t.discountScore=l,t.discountScoreCal=r,t.discountShow=e.discountShow,t.discountBeforeText=e.discountBeforeText,t.discountAfterText=e.discountAfterText,t.discountedFrom=[e.id],t.notStackableDiscount=!0):(i={isStackable:void 0!==e.stackableDiscount&&e.stackableDiscount,discountedFrom:[e.id],calcValue:r,discountedValue:l,showDiscount:void 0!==e.discountShow&&e.discountShow},e.discountShow&&(i.showDiscount=!0,i.beforeText=e.discountBeforeText,i.afterText=e.discountAfterText)),t.tmpDiscount.push(i)):(t.discountScore=l,t.discountScoreCal=r,e.discountShow&&(t.discountShow=e.discountShow,t.discountBeforeText=e.discountBeforeText,t.discountAfterText=e.discountAfterText),Array.isArray(t.discountedFrom)||(t.discountedFrom=[]),t.discountIsOn=!0,t.discountedFrom.push(e.id),t.notStackableDiscount=!0),void 0!==t.discountScore&&t.discountScore!==a?(t.tmpDisScore=a-t.discountScore,t.isChangeDiscount=!0):t.isChangeDiscount=!1}}function Po(e,t){void 0===t.discountTextA&&(t.discountTextA=[]),void 0===t.discountTextB&&(t.discountTextB=[]),void 0===t.dupTextA&&(t.dupTextA={}),void 0===t.dupTextB&&(t.dupTextB={}),e.discountTextDuplicated?(void 0!==e.discountAfterText&&(-1!==t.discountTextA.indexOf(e.discountAfterText)?t.dupTextA[e.discountAfterText]=(t.dupTextA[e.discountAfterText]||0)+1:(t.dupTextA[e.discountAfterText]=1,t.discountTextA.push(e.discountAfterText))),void 0!==e.discountBeforeText&&(-1!==t.discountTextB.indexOf(e.discountBeforeText)?t.dupTextB[e.discountBeforeText]=(t.dupTextB[e.discountBeforeText]||0)+1:(t.dupTextB[e.discountBeforeText]=1,t.discountTextB.push(e.discountBeforeText)))):(void 0!==e.discountAfterText&&t.discountTextA.push(e.discountAfterText),void 0!==e.discountBeforeText&&t.discountTextB.push(e.discountBeforeText))}function $o(e,t){let o=!0,i=new Map;for(let n=0;n<e.scores.length;n++){let a=e.scores[n],l=a.discountIsOn&&void 0!==a.discountScore?a.discountScore:a.value;if(a.multiplyByTimes&&(l*=Math.abs(e.multipleUseVariable)+1),xo(a.requireds)&&!a.isActive){let e=Ot.get(a.id);if(void 0!==e&&e.belowZeroNotAllowed){let n=i.get(a.id);void 0!==n?(o=o&&(t?n-l>=0:n+l>=0),i.set(a.id,n-a.value)):(o=o&&(t?e.startingSum-l>=0:e.startingSum+l>=0),i.set(a.id,e.startingSum-l))}}}return o}function qo(){var e,t,o,i,n,a,l,r;const s=new Set;function c(e){if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.activatedRandom){if(e.isSelectableMultiple){for(let o=0;o<e.multipleUseVariable;o++)if(void 0!==e.activatedRandomMul)for(var t=0;t<e.activatedRandomMul[t].length;t++){const i=e.activatedRandomMul[o][t].split("/ON#"),n=Mt.get(i[0]);if(void 0!==n){const t=n.choice;if(Bt.has(t.id))e.isAllowDeselect||(s.add(t.id),i.length>1&&t.isSelectableMultiple&&(void 0===t.tempMultipleValue?t.tempMultipleValue=parseInt(i[1]):t.tempMultipleValue+=parseInt(i[1])),c(t));else{const e=At.get(t.id);void 0!==e?i.length>1&&(e.multiple+=parseInt(i[1])):At.set(t.id,{multiple:i.length>1?parseInt(i[1]):0,isAllowDeselect:t.isAllowDeselect||!1})}}}}else if(void 0!==e.activatedRandom)for(let o=0;o<e.activatedRandom.length;o++){const t=e.activatedRandom[o].split("/ON#"),i=Mt.get(t[0]);if(void 0!==i){const o=i.choice;if(Bt.has(o.id))e.isAllowDeselect||(s.add(o.id),t.length>1&&o.isSelectableMultiple&&(void 0===o.tempMultipleValue?o.tempMultipleValue=parseInt(t[1]):o.tempMultipleValue+=parseInt(t[1])),c(o));else{const e=At.get(o.id);void 0!==e?t.length>1&&(e.multiple+=parseInt(t[1])):At.set(o.id,{multiple:t.length>1?parseInt(t[1]):0,isAllowDeselect:o.isAllowDeselect||!1})}}}}else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),n=Mt.get(i[0]);if(void 0!==n){const t=n.choice;if(Bt.has(t.id))e.isAllowDeselect||(s.add(t.id),i.length>1&&t.isSelectableMultiple&&(void 0===t.tempMultipleValue?t.tempMultipleValue=parseInt(i[1]):t.tempMultipleValue+=parseInt(i[1])),c(t));else{const e=At.get(t.id);void 0!==e?i.length>1&&(e.multiple+=parseInt(i[1])):At.set(t.id,{multiple:i.length>1?parseInt(i[1]):0,isAllowDeselect:t.isAllowDeselect||!1})}}}}}At.clear(),Array.from(Bt.entries()).forEach(([e])=>{const t=Mt.get(e);if(void 0!==t){const e=t.choice;e.notDeselectedByClean&&(s.add(e.id),c(e))}else Bt.delete(e)});let d=[...Bt.keys()],u=Array.from(Mt.entries()).filter(([e,t])=>!0===t.choice.isActive).map(([e])=>e),g=Array.from(new Set([...d,...u]));for(let m=g.length-1;m>=0;m--){const e=Mt.get(g[m]);if(void 0!==e){const t=e.choice;if(!s.has(t.id)){if(delete t.multiplyPointtypeIsOnCheck,delete t.startingSumAtMultiply,delete t.multiplyPointtypeIsOnCheck,delete t.startingSumAtDivide,delete t.activatedRandom,delete t.activatedRandomMul,t.addToAllowChoice&&void 0!==t.idOfAllowChoice&&void 0!==t.numbAddToAllowChoice)for(let e=0;e<t.idOfAllowChoice.length;e++){const o=kt.get(t.idOfAllowChoice[e]);void 0!==o&&(o.allowedChoices-=t.numbAddToAllowChoice)}if(t.isChangeVariables&&void 0!==t.changedVariables)for(let e=0;e<t.changedVariables.length;e++){const o=jt.get(t.changedVariables[e]);void 0!==o&&("1"===t.changeType?o.isTrue=!0:"2"===t.changeType?o.isTrue=!1:"3"===t.changeType&&(o.isTrue=!o.isTrue))}if(t.textfieldIsOn&&void 0!==t.idOfTheTextfieldWord&&void 0!==t.wordChangeSelect){const e=Dt.get(t.idOfTheTextfieldWord);void 0!==e&&(e.replaceText=void 0===t.wordChangeDeselect?"":t.wordChangeDeselect)}if(t.isImageUpload&&void 0!==t.defaultImage&&(t.image=t.defaultImage),t.setBgmIsOn&&Wt&&t.bgmId){const e=k(Wt);if(e&&void 0!==e.playerInfo.videoData){const o=e.playerInfo.videoData.video_id;t.bgmId===o&&(e.stopVideo(),Et.bgmIsPlaying=!1,0!==Et.bgmFadeInterval&&(window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0),0!==Et.bgmTitleInterval&&(window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.lastFadeTime=0,Et.isFadingOut=!1,Et.bgmTitle="No Audio Title",Et.curBgmTime=0,Et.curBgmLength=0)}}if(t.isContentHidden&&void 0!==t.hiddenContentsRow&&void 0!==t.hiddenContentsType)for(let e=0;e<t.hiddenContentsRow.length;e++){const o=kt.get(t.hiddenContentsRow[e]);if(void 0!==o)for(let e=0;e<t.hiddenContentsType.length;e++)switch(t.hiddenContentsType[e]){case"1":delete o.objectTitleRemoved;break;case"2":delete o.objectImageRemoved;break;case"3":delete o.objectTextRemoved;break;case"4":delete o.objectScoreRemoved;break;case"5":delete o.objectRequirementRemoved;break;case"6":delete o.addonTitleRemoved;break;case"7":delete o.addonImageRemoved;break;case"8":delete o.addonTextRemoved}}t.multipleUseVariable=0,t.isActive=!1,Bt.delete(t.id)}}else Bt.delete(g[m])}for(let m=0;m<app.pointTypes.length;m++){const e=app.pointTypes[m];e.startingSum=e.initValue}for(let m=0;m<app.rows.length;m++){const e=app.rows[m];e.isEditModeOn=!1,e.currentChoices=0,e.index=m;for(let t=0;t<e.objects.length;t++){const o=e.objects[t];o.index=t,void 0!==o.defaultTemplate&&(o.template=o.defaultTemplate),void 0!==o.defaultWidth&&(o.width=o.defaultWidth),o.isActive||(delete o.forcedActivated,delete o.activatedFrom),delete o.templateStack,delete o.widthStack;for(let e=0;e<o.scores.length;e++){const t=o.scores[e];o.isSelectableMultiple?(delete t.isActiveMul,delete t.isActiveMulMinus):delete t.isActive,Ro(t)}}}for(let m=0;m<app.backpack.length;m++){const e=app.backpack[m];e.isEditModeOn=!1,e.currentChoices=0,e.index=m;for(let t=0;t<e.objects.length;t++){const o=e.objects[t];o.index=t,void 0!==o.defaultTemplate&&(o.template=o.defaultTemplate),void 0!==o.defaultWidth&&(o.width=o.defaultWidth),o.isActive||(delete o.forcedActivated,delete o.activatedFrom),delete o.templateStack,delete o.widthStack;for(let e=0;e<o.scores.length;e++){const t=o.scores[e];o.isSelectableMultiple?(delete t.isActiveMul,delete t.isActiveMulMinus):delete t.isActive,Ro(t)}}}if(void 0!==app.defaultBgColor&&(app.styling.backgroundColor=app.defaultBgColor,delete app.defaultBgColor),void 0!==app.defaultBgImage&&(app.styling.backgroundImage=app.defaultBgImage,delete app.defaultBgImage),void 0!==app.defaultBarBgColor&&(app.styling.barBackgroundColor=app.defaultBarBgColor,delete app.defaultBarBgColor),void 0!==app.defaultBarIconColor&&(app.styling.barIconColor=app.defaultBarIconColor,delete app.defaultBarIconColor),void 0!==app.defaultBarTextColor&&(app.styling.barTextColor=app.defaultBarTextColor,delete app.defaultBarTextColor),delete app.bgColorStack,delete app.bgImageStack,delete app.barBgColorStack,delete app.barIconColorStack,delete app.barTextColorStack,app.btnBackpackIsOn=0,app.showAllAddons=0,app.isMute=!1,app.curVolume=100,Wt){const e=k(Wt);e&&"function"==typeof e.unMute&&e.unMute()}Vt.splice(0),g=[...Bt.keys()];for(let m=0;m<g.length;m++){const n=Mt.get(g[m]);if(void 0!==n){const a=n.choice;if(xo(a.requireds)&&$o(a,!0)){if(a.discountOther&&void 0!==a.discountOperator&&void 0!==a.discountValue)if(a.isDisChoices){if(void 0!==a.discountChoices)for(let o=0;o<a.discountChoices.length;o++){const i=Mt.get(a.discountChoices[o]);if(void 0!==i)for(let o=0;o<i.choice.scores.length;o++){const n=i.choice.scores[o];n.isNotDiscountable||0!==(null==(e=a.discountPointTypes)?void 0:e.length)&&-1===(null==(t=a.discountPointTypes)?void 0:t.indexOf(n.id))||jo(a,n)}}}else if(void 0!==a.discountGroups)for(let e=0;e<a.discountGroups.length;e++){const t=Ft.get(a.discountGroups[e]);if(void 0!==t)for(let e=0;e<t.elements.length;e++){const n=Mt.get(t.elements[e]);if(void 0!==n)for(let e=0;e<n.choice.scores.length;e++){const t=n.choice.scores[e];t.isNotDiscountable||0!==(null==(o=a.discountPointTypes)?void 0:o.length)&&-1===(null==(i=a.discountPointTypes)?void 0:i.indexOf(t.id))||jo(a,t)}}}if(a.addToAllowChoice&&void 0!==a.idOfAllowChoice&&void 0!==a.numbAddToAllowChoice)for(let e=0;e<a.idOfAllowChoice.length;e++){const t=kt.get(a.idOfAllowChoice[e]);void 0!==t&&(t.allowedChoices+=a.numbAddToAllowChoice)}}}}for(let m=0;m<g.length;m++){const e=Mt.get(g[m]);if(void 0!==e){const t=e.choice,o=e.row;if(xo(t.requireds)&&$o(t,!0)){for(let e=0;e<t.scores.length;e++){const o=t.scores[e],i=Ot.get(o.id);if(void 0!==i)if(t.isSelectableMultiple&&t.isMultipleUseVariableultiple)for(let e=0;e<t.multipleUseVariable;e++)xo(o.requireds)&&(void 0===o.isActiveMul&&(o.isActiveMul=[]),o.isActiveMul[e]||(o.multiplyByTimes?i.startingSum-=o.discountIsOn&&void 0!==o.discountScore?o.discountScore*(e+1):o.value*(e+1):i.startingSum-=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value,o.isActiveMul[e]=!0));else t.isSelectableMultiple||xo(o.requireds)&&!o.isActive&&(i.startingSum-=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value,o.isActive=!0)}if(t.multiplyPointtypeIsOn&&void 0!==t.pointTypeToMultiply&&void 0!==t.multiplyWithThis){let e=0;t.multiplyPointtypeIsOnCheck=!0,"object"!=typeof t.startingSumAtMultiply&&(t.startingSumAtMultiply=[]);for(let o=0;o<t.pointTypeToMultiply.length;o++){let i=Ot.get(t.pointTypeToMultiply[o]);if(void 0!==i)if(t.multiplyPointtypeIsId&&"string"==typeof t.multiplyWithThis){let n=Ot.get(t.multiplyWithThis);void 0!==n?(t.startingSumAtMultiply[o]={value:i.startingSum,calcVal:n.startingSum},i.startingSum*=n.startingSum):e++}else"number"==typeof t.multiplyWithThis&&(t.startingSumAtMultiply[o]={value:i.startingSum,calcVal:t.multiplyWithThis},i.startingSum*=t.multiplyWithThis);else e++}e===t.pointTypeToMultiply.length&&delete t.multiplyPointtypeIsOnCheck,t.multiplyPointtypeIsOnCheck&&Vt.push(t)}if(t.dividePointtypeIsOn&&void 0!==t.pointTypeToDivide&&void 0!==t.divideWithThis){let e=0;t.dividePointtypeIsOnCheck=!0,"object"!=typeof t.startingSumAtDivide&&(t.startingSumAtDivide=[]);for(let o=0;o<t.pointTypeToDivide.length;o++){let i=Ot.get(t.pointTypeToDivide[o]);if(void 0!==i)if(t.dividePointtypeIsId&&"string"==typeof t.divideWithThis){let n=Ot.get(t.divideWithThis);void 0!==n?0===n.startingSum?e++:(t.startingSumAtDivide[o]={value:i.startingSum,calcVal:n.startingSum},i.startingSum/=n.startingSum):e++}else"number"==typeof t.divideWithThis&&(0===t.dividedWithThis?e++:(t.startingSumAtDivide[o]={value:i.startingSum,calcVal:t.divideWithThis},i.startingSum/=t.divideWithThis));else e++}e===t.pointTypeToDivide.length&&delete t.dividePointtypeIsOnCheck,!t.multiplyPointtypeIsOnCheck&&t.dividePointtypeIsOnCheck&&Vt.push(t)}if(t.changeBackground&&(t.changeBgImage?void 0!==t.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:t.id,data:t.bgImage}),app.styling.backgroundImage=t.bgImage):void 0!==t.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:t.id,data:t.changedBgColorCode}),app.styling.backgroundColor=t.changedBgColorCode)),t.changePointBar&&(t.changeBarBgColorIsOn&&void 0!==t.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:t.id,data:t.changedBarBgColor}),app.styling.barBackgroundColor=t.changedBarBgColor),t.changeBarIconColorIsOn&&void 0!==t.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:t.id,data:t.changedBarIconColor}),app.styling.barIconColor=t.changedBarIconColor),t.changeBarTextColorIsOn&&void 0!==t.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:t.id,data:t.changedBarTextColor}),app.styling.barTextColor=t.changedBarTextColor)),t.changeTemplates&&t.changeTemplatesList&&t.changeToThisTemplate){const e=t.changeTemplatesList.split(",");for(let o=0;o<e.length;o++){const i=e[o],n=Mt.get(i);if(void 0!==n){const e=n.choice;if(Ii(e,t.id,t.changeToThisTemplate),t.changeAddonTemplate)for(let o=0;o<e.addons.length;o++){Ii(e.addons[o],t.id,t.changeToThisTemplate)}continue}const a=kt.get(i);if(void 0!==a){Ii(a,t.id,t.changeToThisTemplate);continue}const l=Ft.get(i[0]);if(void 0!==l){const e=l.rowElements;for(let i=0;i<e.length;i++){const o=kt.get(e[i]);void 0!==o&&Ii(o,t.id,t.changeToThisTemplate)}const o=l.elements;for(let i=0;i<o.length;i++){const e=Mt.get(o[i]);if(void 0!==e){Ii(e.choice,t.id,t.changeToThisTemplate)}}continue}}}if(t.changeWidth&&t.changeWidthList&&t.changeToThisWidth){const e=t.changeWidthList.split(",");for(let o=0;o<e.length;o++){const i=e[o],n=Mt.get(i);if(void 0!==n){Si(n.choice,t.id,t.changeToThisWidth);continue}const a=kt.get(i);if(void 0!==a){Si(a,t.id,t.changeToThisWidth);continue}const l=Ft.get(i[0]);if(void 0!==l){const e=l.rowElements;for(let i=0;i<e.length;i++){const o=kt.get(e[i]);void 0!==o&&Si(o,t.id,t.changeToThisWidth)}const o=l.elements;for(let i=0;i<o.length;i++){const e=Mt.get(o[i]);if(void 0!==e){Si(e.choice,t.id,t.changeToThisWidth)}}continue}}}if(t.muteBgm&&Wt){const e=k(Wt);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}t.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),t.showAllAddons&&(app.showAllAddons+=1),o.currentChoices+=1}else{if(t.discountOther&&void 0!==t.discountOperator&&void 0!==t.discountValue)if(t.isDisChoices){if(void 0!==t.discountChoices)for(let e=0;e<t.discountChoices.length;e++){const o=Mt.get(t.discountChoices[e]);if(void 0!==o)for(let e=0;e<o.choice.scores.length;e++){const i=o.choice.scores[e];i.isNotDiscountable||0!==(null==(n=t.discountPointTypes)?void 0:n.length)&&-1===(null==(a=t.discountPointTypes)?void 0:a.indexOf(i.id))||Do(t,i)}}}else if(void 0!==t.discountGroups)for(let e=0;e<t.discountGroups.length;e++){const o=Ft.get(t.discountGroups[e]);if(void 0!==o)for(let e=0;e<o.elements.length;e++){const i=Mt.get(o.elements[e]);if(void 0!==i)for(let e=0;e<i.choice.scores.length;e++){const o=i.choice.scores[e];o.isNotDiscountable||0!==(null==(l=t.discountPointTypes)?void 0:l.length)&&-1===(null==(r=t.discountPointTypes)?void 0:r.indexOf(o.id))||Do(t,o)}}}if(t.addToAllowChoice&&void 0!==t.idOfAllowChoice&&void 0!==t.numbAddToAllowChoice)for(let e=0;e<t.idOfAllowChoice.length;e++){const o=kt.get(t.idOfAllowChoice[e]);void 0!==o&&(o.allowedChoices-=t.numbAddToAllowChoice)}Bt.delete(t.id),t.forcedActivated&&At.set(t.id,{multiple:t.multipleUseVariable})}}else Bt.delete(g[m])}}function Vo(e,t,o,i=new Set){Array.from(Bt.entries()).forEach(([n])=>{const a=Mt.get(n);if(void 0!==a){const n=a.row,l=a.choice,r=new C;let s=!1;for(let o=0;o<l.scores.length;o++){const a=l.scores[o];if(!a.isNotRecalculatable){const o=Ot.get(a.id);if(void 0!==o){if(e.discountOther&&a.isChangeDiscount&&void 0!==a.tmpDisScore){const e=l.multipleUseVariable;if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){for(let t=e-1;t>=0;t--)l.isActive&&(o.startingSum+=a.tmpDisScore);l.isActive&&(r.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore)}else l.isSelectableMultiple||(o.startingSum+=a.tmpDisScore,r.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore)}if(!i.has(a.idx))for(let c=0;c<e.scores.length;c++){const d=e.scores[c],u=t.get(d.id)||0,g=Ot.get(d.id);if(void 0!==g&&l.isActive){const t=xo(a.requireds),c=new C(JSON.parse(JSON.stringify([...Bt])));c.delete(e.id),n.currentChoices-=1,g.startingSum+=u;const d=xo(a.requireds,c);if(n.currentChoices+=1,g.startingSum-=u,d!==t){let e=a.discountIsOn&&void 0!==a.discountScore?a.discountScore:a.value;if(d)if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){for(let t=l.multipleUseVariable-1;t>=0;t--)void 0!==a.isActiveMul&&a.isActiveMul[t]&&(o.startingSum+=e,r.set(a.id,e),a.isActiveMul[t]=!1)}else l.isSelectableMultiple||a.isActive&&(o.startingSum+=e,r.set(a.id,e),delete a.isActive);else if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){const t=l.multipleUseVariable;void 0===a.isActiveMul&&(a.isActiveMul=[]);for(let i=t-1;i>=0;i--)a.isActiveMul[i]||(o.startingSum-=e,r.set(a.id,e),a.isActiveMul[i]=!0)}else l.isSelectableMultiple||a.isActive||(o.startingSum-=e,r.set(a.id,e),a.isActive=!0);s=!0,i.add(a.idx)}}}}}}s&&Vo(l,r,++o,i)}})}function Lo(e,t){var o,i,n,a,l,r;let s=e.split("/IMG#");const c=s.length>1?s[1]:"";s=s[0].split("/WORD#");const d=s.length>1?s[1].replace(/\/CHAR#/g,","):"";s=s[0].split("/RND#");const u=s.length>1?s[1].split("/AND#"):"",g=s[0],m=Mt.get(g);if(void 0!==m){const e=m.row,s=m.choice;for(let t=0;t<s.scores.length;t++){const e=s.scores[t],o=Ot.get(e.id);void 0!==o&&e.isRandom&&!e.setValue&&void 0!==e.maxValue&&void 0!==e.minValue&&(e.value=Math.floor(Math.random()*(e.maxValue-e.minValue+1))+e.minValue,e.value=o.allowFloat?e.value:Math.floor(e.value),e.setValue=!0)}const g=new C;if(s.isActive=!0,Bt.set(s.id,{multiple:0}),e.currentChoices+=1,s.discountOther&&void 0!==s.discountOperator&&void 0!==s.discountValue)if(s.isDisChoices){const e=new Set;if(void 0!==s.discountRows)for(let t=0;t<s.discountRows.length;t++){const n=kt.get(s.discountRows[t]);if(void 0!==n)for(let t=0;t<n.objects.length;t++){const a=n.objects[t];for(let e=0;e<a.scores.length;e++){const t=a.scores[e];t.isNotDiscountable||0!==(null==(o=s.discountPointTypes)?void 0:o.length)&&-1===(null==(i=s.discountPointTypes)?void 0:i.indexOf(t.id))||jo(s,t)}e.add(a.id)}}if(void 0!==s.discountChoices)for(let t=0;t<s.discountChoices.length;t++)if(!e.has(s.discountChoices[t])){const e=Mt.get(s.discountChoices[t]);if(void 0!==e){const t=e.choice;for(let e=0;e<t.scores.length;e++){const o=t.scores[e];o.isNotDiscountable||0!==(null==(n=s.discountPointTypes)?void 0:n.length)&&-1===(null==(a=s.discountPointTypes)?void 0:a.indexOf(o.id))||jo(s,o)}}}}else if(void 0!==s.discountGroups)for(let t=0;t<s.discountGroups.length;t++){const e=Ft.get(s.discountGroups[t]);if(void 0!==e)for(let t=0;t<e.elements.length;t++){const o=Mt.get(e.elements[t]);if(void 0!==o)for(let e=0;e<o.choice.scores.length;e++){const t=o.choice.scores[e];t.isNotDiscountable||0!==(null==(l=s.discountPointTypes)?void 0:l.length)&&-1===(null==(r=s.discountPointTypes)?void 0:r.indexOf(t.id))||jo(s,t)}}}for(let t=0;t<s.scores.length;t++){const e=s.scores[t];if(xo(e.requireds)&&!e.isActive){const t=Ot.get(e.id);if(void 0!==t){let o=e.discountIsOn&&void 0!==e.discountScore?e.discountScore:e.value;o=t.allowFloat?o:Math.floor(o),t.startingSum-=o,e.isActive=!0;let i=g.get(e.id);void 0!==i?g.set(e.id,o+i):g.set(e.id,o)}}}if(s.duplicateRow&&void 0!==s.duplicateRowId&&void 0!==s.duplicateRowPlace&&Uo(s),s.activateOtherChoice&&void 0!==s.activateThisChoice){const e=new Set(t.map(e=>e.split("/ON#")[0]));if(s.isActivateRandom&&void 0!==s.numActivateRandom)if(""===u){let t=s.activateThisChoice.split(",").filter(t=>e.has(t.split("/ON#")[0]));const o=s.numActivateRandom>t.length?t.length:s.numActivateRandom;let i=new Set;for(let e=0;e<t.length;e++){const o=Mt.get(t[e]);if(void 0!==o){if(!xo(o.choice.requireds)){const o=t[e];t.splice(e,1),t.push(o)}}}for(let e=t.length-1;e>=0;e--)i.add(t[e]);t=[...i].reverse(),s.activatedRandom=t.slice(0,o);for(let e=0;e<o;e++){const t=s.activatedRandom[e].split("/ON#"),o=Mt.get(t[0]);if(void 0!==o){const e=o.choice;if(!s.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable){const o=parseInt(t[1]);for(let t=0;t<Math.abs(o);t++)o>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:o<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--}e.forcedActivated=!0}}}}else{let t=u.filter(t=>e.has(t.split("/RON#")[0]));s.activatedRandom=t;for(let e=0;e<t.length;e++){const t=s.activatedRandom[e].split("/RON#"),o=Mt.get(t[0]);if(void 0!==o){const e=o.choice;if(!s.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable){const o=parseInt(t[1]);for(let t=0;t<Math.abs(o);t++)o>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:o<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--}e.forcedActivated=!0}}}}else{const t=s.activateThisChoice.split(",").filter(t=>e.has(t.split("/ON#")[0]));for(let e=0;e<t.length;e++){const o=t[e].split("/ON#"),i=o.length>1?parseInt(o[1]):0,n=Mt.get(o[0]);if(void 0!==n){const e=n.choice;if(!s.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(let t=0;t<Math.abs(s.multipleUseVariable);t++)for(let o=0;o<Math.abs(i);o++)i>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:i<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;else for(let t=0;t<Math.abs(i);t++)i>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:i<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;e.forcedActivated=!0}}else{const e=Ft.get(o[0]);if(void 0!==e){const t=e.elements;for(let e=0;e<t.length;e++){const o=Mt.get(t[e]);if(void 0!==o){const e=o.choice;if(!s.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(let t=0;t<Math.abs(s.multipleUseVariable);t++)for(let o=0;o<Math.abs(i);o++)i>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:i<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;else for(let t=0;t<Math.abs(i);t++)i>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:i<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;e.forcedActivated=!0}}}}}}}}if(s.multiplyPointtypeIsOn&&void 0!==s.pointTypeToMultiply&&void 0!==s.multiplyWithThis){let e=0;s.multiplyPointtypeIsOnCheck=!0,"object"!=typeof s.startingSumAtMultiply&&(s.startingSumAtMultiply=[]);for(let t=0;t<s.pointTypeToMultiply.length;t++){let o=Ot.get(s.pointTypeToMultiply[t]);if(void 0!==o)if(s.multiplyPointtypeIsId&&"string"==typeof s.multiplyWithThis){let i=Ot.get(s.multiplyWithThis);void 0!==i?(s.startingSumAtMultiply[t]={value:o.startingSum,calcVal:i.startingSum},o.startingSum*=i.startingSum,o.startingSum=o.allowFloat?o.startingSum:Math.floor(o.startingSum)):e++}else"number"==typeof s.multiplyWithThis&&(s.startingSumAtMultiply[t]={value:o.startingSum,calcVal:s.multiplyWithThis},o.startingSum*=s.multiplyWithThis,o.startingSum=o.allowFloat?o.startingSum:Math.floor(o.startingSum));else e++}e===s.pointTypeToMultiply.length&&delete s.multiplyPointtypeIsOnCheck,s.multiplyPointtypeIsOnCheck&&Vt.push(s)}if(s.dividePointtypeIsOn&&void 0!==s.pointTypeToDivide&&void 0!==s.divideWithThis){let e=0;s.dividePointtypeIsOnCheck=!0,"object"!=typeof s.startingSumAtDivide&&(s.startingSumAtDivide=[]);for(let t=0;t<s.pointTypeToDivide.length;t++){let o=Ot.get(s.pointTypeToDivide[t]);if(void 0!==o)if(s.dividePointtypeIsId&&"string"==typeof s.divideWithThis){let i=Ot.get(s.divideWithThis);void 0!==i?0===i.startingSum?e++:(s.startingSumAtDivide[t]={value:o.startingSum,calcVal:i.startingSum},o.startingSum/=i.startingSum,o.startingSum=o.allowFloat?o.startingSum:Math.floor(o.startingSum)):e++}else"number"==typeof s.divideWithThis&&(0===s.dividedWithThis?e++:(s.startingSumAtDivide[t]={value:o.startingSum,calcVal:s.divideWithThis},o.startingSum/=s.divideWithThis,o.startingSum=o.allowFloat?o.startingSum:Math.floor(o.startingSum)));else e++}e===s.pointTypeToDivide.length&&delete s.dividePointtypeIsOnCheck,!s.multiplyPointtypeIsOnCheck&&s.dividePointtypeIsOnCheck&&Vt.push(s)}if(s.isChangeVariables&&void 0!==s.changedVariables)for(let t=0;t<s.changedVariables.length;t++){const e=jt.get(s.changedVariables[t]);void 0!==e&&("1"===s.changeType?e.isTrue=!0:"2"===s.changeType?e.isTrue=!1:"3"===s.changeType&&(e.isTrue=!e.isTrue))}if(s.addToAllowChoice&&void 0!==s.idOfAllowChoice&&void 0!==s.numbAddToAllowChoice)for(let t=0;t<s.idOfAllowChoice.length;t++){const e=kt.get(s.idOfAllowChoice[t]);void 0!==e&&(e.allowedChoices+=s.numbAddToAllowChoice)}if(s.textfieldIsOn&&void 0!==s.idOfTheTextfieldWord&&void 0!==s.wordChangeSelect){const e=Dt.get(s.idOfTheTextfieldWord);void 0!==e&&(s.customTextfieldIsOn?e.replaceText=d:e.replaceText=s.wordChangeSelect)}if(s.isImageUpload&&(s.defaultImage=s.image,s.image=c),s.backpackBtnRequirement&&(void 0===app.btnBackpackIsOn&&(app.btnBackpackIsOn=0),app.btnBackpackIsOn+=1),s.showAllAddons&&(void 0===app.showAllAddons&&(app.showAllAddons=0),app.showAllAddons+=1),s.changeBackground&&(s.changeBgImage?void 0!==s.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:s.id,data:s.bgImage}),app.styling.backgroundImage=s.bgImage):void 0!==s.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:s.id,data:s.bgColor}),app.styling.backgroundColor=s.bgColor)),s.changePointBar&&(s.changeBarBgColorIsOn&&void 0!==s.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:s.id,data:s.changedBarBgColor}),app.styling.barBackgroundColor=s.changedBarBgColor),s.changeBarIconColorIsOn&&void 0!==s.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:s.id,data:s.changedBarIconColor}),app.styling.barIconColor=s.changedBarIconColor),s.changeBarTextColorIsOn&&void 0!==s.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:s.id,data:s.changedBarTextColor}),app.styling.barTextColor=s.changedBarTextColor)),s.changeTemplates&&s.changeTemplatesList&&s.changeToThisTemplate){const e=s.changeTemplatesList.split(",");for(let t=0;t<e.length;t++){const o=e[t],i=Mt.get(o);if(void 0!==i){const e=i.choice;if(Ii(e,s.id,s.changeToThisTemplate),s.changeAddonTemplate)for(let t=0;t<e.addons.length;t++){Ii(e.addons[t],s.id,s.changeToThisTemplate)}continue}const n=kt.get(o);if(void 0!==n){Ii(n,s.id,s.changeToThisTemplate);continue}const a=Ft.get(o[0]);if(void 0!==a){const e=a.rowElements;for(let o=0;o<e.length;o++){const t=kt.get(e[o]);void 0!==t&&Ii(t,s.id,s.changeToThisTemplate)}const t=a.elements;for(let o=0;o<t.length;o++){const e=Mt.get(t[o]);if(void 0!==e){Ii(e.choice,s.id,s.changeToThisTemplate)}}continue}}}if(s.changeWidth&&s.changeWidthList&&s.changeToThisWidth){const e=s.changeWidthList.split(",");for(let t=0;t<e.length;t++){const o=e[t],i=Mt.get(o);if(void 0!==i){Si(i.choice,s.id,s.changeToThisWidth);continue}const n=kt.get(o);if(void 0!==n){Si(n,s.id,s.changeToThisWidth);continue}const a=Ft.get(o[0]);if(void 0!==a){const e=a.rowElements;for(let o=0;o<e.length;o++){const t=kt.get(e[o]);void 0!==t&&Si(t,s.id,s.changeToThisWidth)}const t=a.elements;for(let o=0;o<t.length;o++){const e=Mt.get(t[o]);if(void 0!==e){Si(e.choice,s.id,s.changeToThisWidth)}}continue}}}if(s.setBgmIsOn&&s.bgmId&&(Et.bgmIsPlaying=!0,Et.isBgmInit?Oo(s,s.bgmId,0):(ko(s),Et.isBgmInit=!0)),s.muteBgm&&Wt){const e=k(Wt);e&&"function"==typeof e.mute&&(app.isMute=!0,e.mute())}if(s.isContentHidden&&void 0!==s.hiddenContentsRow&&void 0!==s.hiddenContentsType)for(let t=0;t<s.hiddenContentsRow.length;t++){const e=kt.get(s.hiddenContentsRow[t]);if(void 0!==e){e.textIsRemoved||(e.textIsRemoved=!0);for(let t=0;t<s.hiddenContentsType.length;t++)switch(s.hiddenContentsType[t]){case"1":e.objectTitleRemoved=!0;break;case"2":e.objectImageRemoved=!0;break;case"3":e.objectTextRemoved=!0;break;case"4":e.objectScoreRemoved=!0;break;case"5":e.objectRequirementRemoved=!0;break;case"6":e.addonTitleRemoved=!0;break;case"7":e.addonImageRemoved=!0;break;case"8":e.addonTextRemoved=!0}}}Vo(s,g,0)}}function No(e,t){var o,i,n,a,l,r;const s=e.length>1?e[1].split("/AND#"):"",c=e[0].split("/ON#"),d=Mt.get(c[0]);if(void 0!==d){const e=d.choice,c=d.row;for(let t=0;t<e.scores.length;t++){const o=e.scores[t],i=Ot.get(o.id);void 0!==i&&o.isRandom&&!o.setValue&&void 0!==o.maxValue&&void 0!==o.minValue&&(o.value=Math.floor(Math.random()*(o.maxValue-o.minValue+1))+o.minValue,o.value=i.allowFloat?o.value:Math.floor(o.value),o.setValue=!0)}const u=new C,g=e.isActive,m=e.multipleUseVariable>=0,h=Math.abs(e.multipleUseVariable);if(e.isActive||(e.isActive=!0,c.currentChoices+=1),e.multipleUseVariable+=1,Bt.set(e.id,{multiple:e.multipleUseVariable}),m&&e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let n=0;n<e.discountRows.length;n++){const a=kt.get(e.discountRows[n]);if(void 0!==a)for(let n=0;n<a.objects.length;n++){const l=a.objects[n];for(let t=0;t<l.scores.length;t++){const n=l.scores[t];n.isNotDiscountable||0!==(null==(o=e.discountPointTypes)?void 0:o.length)&&-1===(null==(i=e.discountPointTypes)?void 0:i.indexOf(n.id))||jo(e,n)}t.add(l.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++){const i=Mt.get(e.discountChoices[o]);if(void 0!==i){const o=i.choice;if(!t.has(o.id))for(let t=0;t<o.scores.length;t++){const i=o.scores[t];i.isNotDiscountable||0!==(null==(n=e.discountPointTypes)?void 0:n.length)&&-1===(null==(a=e.discountPointTypes)?void 0:a.indexOf(i.id))||jo(e,i)}}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=Ft.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=Mt.get(o.elements[t]);if(void 0!==i)for(let t=0;t<i.choice.scores.length;t++){const o=i.choice.scores[t];o.isNotDiscountable||0!==(null==(l=e.discountPointTypes)?void 0:l.length)&&-1===(null==(r=e.discountPointTypes)?void 0:r.indexOf(o.id))||jo(e,o)}}}for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(void 0===o.isActiveMul&&(o.isActiveMul=[]),xo(o.requireds)&&!o.isActiveMul[h]){const e=Ot.get(o.id);if(void 0!==e){let t=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;t=e.allowFloat?t:Math.floor(t),o.multiplyByTimes&&(t*=h+1),e.startingSum-=t,o.isActiveMul[h]=!0;let i=u.get(o.id);void 0!==i?u.set(o.id,t+i):u.set(o.id,t)}}}if(m&&(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&Uo(e),e.activateOtherChoice&&void 0!==e.activateThisChoice)){const o=new Set(t.map(e=>e.split("/ON#")[0]));if(e.isActivateRandom&&void 0!==e.numActivateRandom)if(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),""===s){if(1===e.multipleUseVariable){let t=e.activateThisChoice.split(",").filter(e=>o.has(e.split("/ON#")[0]));e.numActivateRandom>t.length?t.length:e.numActivateRandom;let i=new Set;for(let e=0;e<t.length;e++){const o=Mt.get(t[e]);if(void 0!==o){if(!xo(o.choice.requireds)){const o=t[e];t.splice(e,1),t.push(o)}}}for(let e=t.length-1;e>=0;e--)i.add(t[e]);t=[...i].reverse();let n=0,a=[];for(let o=0;o<e.numActivateRandom;o++){a[o]=t.length/(e.numActivateRandom*(o+1))<1?t.length%(e.numActivateRandom*(o+1)):e.numActivateRandom,e.activatedRandomMul.push(t.slice(n,a[o]+n));for(let t=0;t<a[o]-n;t++){const i=e.activatedRandomMul[o][t].split("/ON#"),n=i.length>1?parseInt(i[1]):0,a=Mt.get(i[0]);if(void 0!==a){const t=a.choice;if(!e.isAllowDeselect){if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}}n+=a[o]}}}else{const t=(e.multipleUseVariable-1)*e.numActivateRandom,i=s.splice(t,t+e.numActivateRandom);e.activatedRandomMul.push(i);for(let n=0;n<e.activatedRandomMul[e.multipleUseVariable-1].length;n++){const t=e.activatedRandomMul[e.multipleUseVariable-1][n].split("/RON#"),i=t.length>1?parseInt(t[1]):0,a=Mt.get(t[0]);if(void 0!==a){const t=a.choice;if(!e.isAllowDeselect&&o.has(t.id)){if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let e=0;e<Math.abs(i);e++)i>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:i<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}}}else{const t=e.activateThisChoice.split(",").filter(e=>o.has(e.split("/ON#")[0]));for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),n=i.length>1?parseInt(i[1]):0,a=Mt.get(i[0]);if(void 0!==a){const t=a.choice;if(!e.isAllowDeselect){if(t.isSelectableMultiple&&t.isMultipleUseVariable)if(e.isSelectableMultiple&&e.isMultipleUseVariable)for(let o=0;o<Math.abs(e.multipleUseVariable);o++)for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;else for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}else{const t=Ft.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Mt.get(o[t]);if(void 0!==i){const t=i.choice;if(!e.isAllowDeselect){if(t.isSelectableMultiple&&t.isMultipleUseVariable)if(e.isSelectableMultiple&&e.isMultipleUseVariable)for(let o=0;o<Math.abs(e.multipleUseVariable);o++)for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;else for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}}}}}}}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const o=kt.get(e.idOfAllowChoice[t]);void 0!==o&&(o.allowedChoices+=e.numbAddToAllowChoice)}if(!g){if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=jt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!0:"2"===e.changeType?o.isTrue=!1:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){const t=n.choice;if(Ii(t,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){Ii(t.addons[o],e.id,e.changeToThisTemplate)}continue}const a=kt.get(i);if(void 0!==a){Ii(a,e.id,e.changeToThisTemplate);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&Ii(o,e.id,e.changeToThisTemplate)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){Ii(t.choice,e.id,e.changeToThisTemplate)}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){Si(n.choice,e.id,e.changeToThisWidth);continue}const a=kt.get(i);if(void 0!==a){Si(a,e.id,e.changeToThisWidth);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&Si(o,e.id,e.changeToThisWidth)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){Si(t.choice,e.id,e.changeToThisWidth)}}continue}}}if(e.setBgmIsOn&&e.bgmId&&(Et.bgmIsPlaying=!0,Et.isBgmInit?Oo(e,e.bgmId,0):(ko(e),Et.isBgmInit=!0)),e.muteBgm&&Wt){const e=k(Wt);e&&"function"==typeof e.mute&&(app.isMute=!0,e.mute())}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=kt.get(e.hiddenContentsRow[t]);if(void 0!==o){o.textIsRemoved||(o.textIsRemoved=!0);for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!0;break;case"2":o.objectImageRemoved=!0;break;case"3":o.objectTextRemoved=!0;break;case"4":o.objectScoreRemoved=!0;break;case"5":o.objectRequirementRemoved=!0;break;case"6":o.addonTitleRemoved=!0;break;case"7":o.addonImageRemoved=!0;break;case"8":o.addonTextRemoved=!0}}}}Vo(e,u,0)}}function Wo(e,t){const o=new C,i=Math.abs(e.multipleUseVariable-1);for(let n=0;n<e.scores.length;n++){const t=e.scores[n];if(void 0===t.isActiveMulMinus&&(t.isActiveMulMinus=[]),xo(t.requireds)&&!t.isActiveMulMinus[i]){const e=Ot.get(t.id);if(void 0!==e){let n=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value;n=e.allowFloat?n:Math.floor(n),t.multiplyByTimes&&(n*=Math.abs(i)),e.startingSum+=n;let a=o.get(t.id);void 0!==a?o.set(t.id,-n+a):o.set(t.id,-n),t.isActiveMulMinus[i]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,t.currentChoices-=1,Bt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,t.currentChoices+=1),Bt.set(e.id,{multiple:e.multipleUseVariable})),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let n=0;n<e.idOfAllowChoice.length;n++){const t=kt.get(e.idOfAllowChoice[n]);void 0!==t&&(t.allowedChoices-=e.numbAddToAllowChoice)}Vo(e,o,0)}function Eo(e){qo();const t=e.split(",");for(let o=0;o<t.length;o++){const e=t[o].split(/\/(IMG|WORD|RND)#/)[0].split("/ON#"),i=e.length>1?parseInt(e[1]):0,n=Mt.get(e[0]);if(void 0!==n){const e=n.choice;if(e.isSelectableMultiple&&e.isMultipleUseVariable)for(let a=0;a<Math.abs(i);a++){const a=t[o].split("/RND#");i>0?No(a,t):Wo(e,n.row)}else Lo(t[o],t)}}}function Uo(e,t){if(void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace){const t=e.duplicateRowId;let o=0;Array.from(kt.entries()).forEach(([e])=>{e.split("/D#")[0]===t.split("/D#")[0]&&o++});const i=kt.get(e.duplicateRowId),n=kt.get(e.duplicateRowPlace),a="/D#".concat(o);if(void 0!==i&&void 0!==n){const t=JSON.parse(JSON.stringify(i));if(t.id="".concat(t.id.split("/D#")[0]).concat(a),n.isBackpack){app.backpack.splice(n.index+1,0,t);for(let e=n.index+1;e<app.backpack.length;e++)app.backpack[e].index=e}else{app.rows.splice(n.index+1,0,t);for(let e=n.index+1;e<app.rows.length;e++)app.rows[e].index=e}kt.set(t.id,t);for(let o=0;o<t.objects.length;o++){const i=t.objects[o];i.id="".concat(i.id.split("/D#")[0]).concat(a),i.isActive=!1,delete i.forcedActivated;for(let e=0;e<i.scores.length;e++){const t=i.scores[e];t.idx=vo(0,5),qt.add(t.idx),delete t.isActive,delete t.setValue,delete t.discountIsOn,delete t.discountShow,delete t.discountBeforeText,delete t.discountAfterText,delete t.discountScore,delete t.discountScoreCal,delete t.isChangeDiscount,delete t.tmpDisScore,delete t.tmpDiscount,delete t.discountedFrom,delete t.dupTextA,delete t.dupTextB,delete t.discountTextA,delete t.discountTextB,delete t.notStackableDiscount}for(let e=0;e<i.addons.length;e++){i.addons[e].parentId=i.id}if(!e.dRowAddSufReq){for(let e=0;e<i.requireds.length;e++){const t=i.requireds[e];if("id"===t.type){const e=t.reqId.split("/ON#"),o="".concat(e[0].split("/D#")[0]).concat(a);e.length>1?t.reqId="".concat(o,"/ON#").concat(e[1]):t.reqId=o}else if("or"===t.type)for(let e=0;e<t.orRequired.length;e++){const o=t.orRequired[e];if(void 0!==o.req){const e=o.req.split("/ON#"),t="".concat(e[0].split("/D#")[0]).concat(a);e.length>1?o.req="".concat(t,"/ON#").concat(e[1]):o.req=t}}if(void 0!==t.requireds)for(let o=0;o<t.requireds.length;o++){const t=i.requireds[e];if("id"===t.type){const e=t.reqId.split("/ON#"),o="".concat(e[0].split("/D#")[0]).concat(a);e.length>1?t.reqId="".concat(o,"/ON#").concat(e[1]):t.reqId=o}else if("or"===t.type)for(let e=0;e<t.orRequired.length;e++){const o=t.orRequired[e];if(void 0!==o.req){const e=o.req.split("/ON#"),t="".concat(e[0].split("/D#")[0]).concat(a);e.length>1?o.req="".concat(t,"/ON#").concat(e[1]):o.req=t}}}}for(let e=0;e<i.scores.length;e++){const t=i.scores[e];if(void 0!==t.requireds)for(let e=0;e<t.requireds.length;e++){const o=t.requireds[e];if("id"===o.type){const e=o.reqId.split("/ON#"),t="".concat(e[0].split("/D#")[0]).concat(a);e.length>1?o.reqId="".concat(t,"/ON#").concat(e[1]):o.reqId=t}else if("or"===o.type)for(let e=0;e<o.orRequired.length;e++){const t=o.orRequired[e];if(void 0!==t.req){const e=t.req.split("/ON#"),o="".concat(e[0].split("/D#")[0]).concat(a);e.length>1?t.req="".concat(o,"/ON#").concat(e[1]):t.req=o}}}}for(let e=0;e<i.addons.length;e++){const t=i.addons[e];if(void 0!==t.requireds)for(let e=0;e<t.requireds.length;e++){const o=t.requireds[e];if("id"===o.type){const e=o.reqId.split("/ON#"),t="".concat(e[0].split("/D#")[0]).concat(a);e.length>1?o.reqId="".concat(t,"/ON#").concat(e[1]):o.reqId=t}else if("or"===o.type)for(let e=0;e<o.orRequired.length;e++){const t=o.orRequired[e];if(void 0!==t.req){const e=t.req.split("/ON#"),o="".concat(e[0].split("/D#")[0]).concat(a);e.length>1?t.req="".concat(o,"/ON#").concat(e[1]):t.req=o}}}}}if(!e.dRowAddSufFunc){if(i.activateOtherChoice&&void 0!==i.activateThisChoice){const e=i.activateThisChoice.split(",");let t="";for(let o=0;o<e.length;o++){const i=e[o].split("/ON#"),n="".concat(i[0].split("/D#")[0]).concat(a);i.length>1?t+="".concat(n,"/ON#").concat(i[1],","):t+="".concat(n,",")}i.activateThisChoice=t}if(i.deactivateOtherChoice&&void 0!==i.deactivateThisChoice){const e=i.deactivateThisChoice.split(",");let t="";for(let o=0;o<e.length;o++){const i=e[o].split("/ON#"),n="".concat(i[0].split("/D#")[0]).concat(a);i.length>1?t+="".concat(n,"/ON#").concat(i[1],","):t+="".concat(n,",")}i.deactivateThisChoice=t}if(i.duplicateRow&&void 0!==i.duplicateRowId&&void 0!==i.duplicateRowPlace){const e=i.duplicateRowId,t=i.duplicateRowPlace;i.duplicateRowId="".concat(e.split("/D")[0]).concat(a),i.duplicateRowPlace="".concat(t.split("/D")[0]).concat(a)}}if(i.backpackBtnRequirement&&(void 0!==app.hideBackpackBtn?app.hideBackpackBtn+=1:delete i.backpackBtnRequirement),Mt.set(i.id,{choice:i,row:t}),i.groups)for(let e=0;e<i.groups.length;e++){let t=Ft.get(i.groups[e]);if(void 0!==t){-1===t.elements.indexOf(i.id)&&t.elements.push(i.id)}}if(i.objectDesignGroups)for(let e=0;e<i.objectDesignGroups.length;e++){let t=$t.get(i.objectDesignGroups[e]);if(void 0!==t){-1===t.elements.indexOf(i.id)&&t.elements.push(i.id)}}}}}}function zo(e){return/^data:[a-zA-Z]+\/[a-zA-Z]+;base64,/.test(e)}function Go(e){const t=e.match(/^data:(image\/[a-zA-Z0-9.+-]+);base64,/);if(!t)return!1;return"image/avif"===t[1].toLowerCase()}const Ho=B({selFilterBlur:A.number().optional(),selFilterBright:A.number().optional(),selFilterCont:A.number().optional(),selFilterGray:A.number().optional(),selFilterHue:A.number().optional(),selFilterInvert:A.number().optional(),selFilterOpac:A.number().optional(),selFilterSatur:A.number().optional(),selFilterSepia:A.number().optional(),reqFilterBlur:A.number().optional(),reqFilterBright:A.number().optional(),reqFilterCont:A.number().optional(),reqFilterGray:A.number().optional(),reqFilterHue:A.number().optional(),reqFilterInvert:A.number().optional(),reqFilterOpac:A.number().optional(),reqFilterSatur:A.number().optional(),reqFilterSepia:A.number().optional(),unselFilterBlur:A.number().optional(),unselFilterBright:A.number().optional(),unselFilterCont:A.number().optional(),unselFilterGray:A.number().optional(),unselFilterHue:A.number().optional(),unselFilterInvert:A.number().optional(),unselFilterOpac:A.number().optional(),unselFilterSatur:A.number().optional(),unselFilterSepia:A.number().optional()}).passthrough(),_o=B({rowTitleTextSize:A.number().optional(),rowTextTextSize:A.number().optional(),objectTitleTextSize:A.number().optional(),objectTextTextSize:A.number().optional(),addonTitleTextSize:A.number().optional(),addonTextTextSize:A.number().optional(),scoreTextSize:A.number().optional()}).passthrough(),Yo=B({objectImgBorderWidth:A.number().optional(),objectImageWidth:A.number().optional(),objectImageMarginTop:A.number().optional(),objectImageMarginBottom:A.number().optional(),objectImgBorderRadiusTopLeft:A.number().optional(),objectImgBorderRadiusTopRight:A.number().optional(),objectImgBorderRadiusBottomRight:A.number().optional(),objectImgBorderRadiusBottomLeft:A.number().optional(),objectImageBoxWidth:A.number().optional()}).passthrough(),Zo=B({rowImgBorderWidth:A.number().optional(),rowImageWidth:A.number().optional(),rowImageMarginTop:A.number().optional(),rowImageMarginBottom:A.number().optional(),rowImgBorderRadiusTopLeft:A.number().optional(),rowImgBorderRadiusTopRight:A.number().optional(),rowImgBorderRadiusBottomRight:A.number().optional(),rowImgBorderRadiusBottomLeft:A.number().optional(),rowImageBoxWidth:A.number().optional()}).passthrough(),Jo=B({addonImgBorderWidth:A.number().optional(),addonImageWidth:A.number().optional(),addonImageMarginTop:A.number().optional(),addonImageMarginBottom:A.number().optional(),addonImgBorderRadiusTopLeft:A.number().optional(),addonImgBorderRadiusTopRight:A.number().optional(),addonImgBorderRadiusBottomRight:A.number().optional(),addonImgBorderRadiusBottomLeft:A.number().optional(),addonImageBoxWidth:A.number().optional()}).passthrough(),Xo=B({objectMargin:A.number().optional(),objectTextPadding:A.number().optional(),objectBorderWidth:A.number().optional(),objectDropShadowH:A.number().optional(),objectDropShadowV:A.number().optional(),objectDropShadowBlur:A.number().optional(),objectDropShadowSpread:A.number().optional(),objectBorderRadiusTopLeft:A.number().optional(),objectBorderRadiusTopRight:A.number().optional(),objectBorderRadiusBottomRight:A.number().optional(),objectBorderRadiusBottomLeft:A.number().optional(),objectBorderImageWidth:A.number().optional(),objectBorderImageSliceTop:A.number().optional(),objectBorderImageSliceBottom:A.number().optional(),objectBorderImageSliceLeft:A.number().optional(),objectBorderImageSliceRight:A.number().optional()}).passthrough(),Ko=B({rowMargin:A.number().optional(),rowBodyMarginSides:A.number().optional(),rowBodyMarginTop:A.number().optional(),rowBodyMarginBottom:A.number().optional(),rowTextPaddingY:A.number().optional(),rowTextPaddingX:A.number().optional(),rowDropShadowH:A.number().optional(),rowDropShadowV:A.number().optional(),rowDropShadowBlur:A.number().optional(),rowDropShadowSpread:A.number().optional(),rowButtonXPadding:A.number().optional(),rowButtonYPadding:A.number().optional(),rowBorderRadiusTopLeft:A.number().optional(),rowBorderRadiusTopRight:A.number().optional(),rowBorderRadiusBottomRight:A.number().optional(),rowBorderRadiusBottomLeft:A.number().optional(),rowBorderWidth:A.number().optional(),rowBorderImageWidth:A.number().optional(),rowBorderImageSliceTop:A.number().optional(),rowBorderImageSliceBottom:A.number().optional(),rowBorderImageSliceLeft:A.number().optional(),rowBorderImageSliceRight:A.number().optional()}).passthrough(),Qo=B({addonMargin:A.number().optional(),addonTextPadding:A.number().optional(),addonBorderWidth:A.number().optional(),addonDropShadowH:A.number().optional(),addonDropShadowV:A.number().optional(),addonDropShadowBlur:A.number().optional(),addonDropShadowSpread:A.number().optional(),addonBorderRadiusTopLeft:A.number().optional(),addonBorderRadiusTopRight:A.number().optional(),addonBorderRadiusBottomRight:A.number().optional(),addonBorderRadiusBottomLeft:A.number().optional(),addonBorderImageWidth:A.number().optional(),addonBorderImageSliceTop:A.number().optional(),addonBorderImageSliceBottom:A.number().optional(),addonBorderImageSliceLeft:A.number().optional(),addonBorderImageSliceRight:A.number().optional()}).passthrough(),ei=B({multiChoiceCounterPosition:A.number().optional(),multiChoiceCounterSize:A.number().optional(),multiChoiceTextSize:A.number().optional()}).passthrough(),ti=B({barTextPadding:A.number().optional(),barTextMargin:A.number().optional(),barPadding:A.number().optional(),barMargin:A.number().optional(),barTextSize:A.number().optional()}).passthrough(),oi=B({backPackWidth:A.number().optional()}).passthrough(),ii=Ho.merge(_o).merge(Yo).merge(Zo).merge(Jo).merge(Xo).merge(Ko).merge(Qo).merge(ei).merge(ti).merge(oi).passthrough(),ni=B({template:A.number().optional()}).passthrough(),ai=B({value:A.number().optional(),minValue:A.number().optional(),maxValue:A.number().optional(),discountScore:A.number().optional(),discountScoreCal:A.number().optional(),tmpDisScore:A.number().optional()}).passthrough(),li=B({index:A.number().optional(),template:A.number().optional(),multipleUseVariable:A.number().optional(),initMultipleTimesMinus:A.number().optional(),selectedThisManyTimesProp:A.number().optional(),defaultAspectWidth:A.number().optional(),defaultAspectHeight:A.number().optional(),addons:O(ni).optional(),scores:O(ai).optional(),styling:ii.optional().optional(),numMultipleTimesMinus:A.number().optional(),numMultipleTimesPluss:A.number().optional(),numActivateRandom:A.number().optional(),discountLowLimit:A.number().optional(),discountValue:A.number().optional(),numbAddToAllowChoice:A.number().optional(),bgmFadeInSec:A.number().optional(),bgmFadeOutSec:A.number().optional(),fadeTransitionTime:A.number().optional(),divideWithThis:A.number().optional(),activatedFrom:A.number().optional()}).passthrough(),ri=B({index:A.number().optional(),template:A.number().optional(),buttonRandomNumber:A.number().optional(),defaultAspectWidth:A.number().optional(),defaultAspectHeight:A.number().optional(),allowedChoices:A.number().optional(),currentChoices:A.number().optional(),objects:O(li).optional(),styling:ii.optional(),objectImgObjectFillHeight:A.number().optional(),randomMin:A.number().optional(),randomMax:A.number().optional()}).passthrough(),si=B({startingSum:A.number().optional(),initValue:A.number().optional(),iconWidth:A.number().optional(),iconHeight:A.number().optional(),negativeIconWidth:A.number().optional(),negativeIconHeight:A.number().optional()}).passthrough(),ci=B({styling:ii.optional()}).passthrough(),di=B({styling:ii.optional()}).passthrough(),ui=B({curVolume:A.number().optional(),fadeTransitionTime:A.number().optional(),hideBackpackBtn:A.number().optional(),btnBackpackIsOn:A.number().optional(),rowIdLength:A.number().optional(),objectIdLength:A.number().optional(),rowDesignGroups:O(ci).optional(),objectDesignGroups:O(di).optional(),rows:O(ri).optional(),pointTypes:O(si).optional(),backpack:O(ri).optional(),styling:ii.optional()}).passthrough(),gi=["autoSaveInterval","bgmFadeInterval","bgmFadeTimer","bgmIsPlaying","bgmObjectId","bgmPlayInterval","bgmTitle","bgmTitleInterval","cancelForcedActivated","comp","compG","compODG","compR","compRDG","curBgmTime","curBgmLength","isSeeking","isFadingOut","lastFadeTime","objectMap","pointTypeMap","wordMap"];function mi(e){if(Array.isArray(e))return e.map(mi).filter(e=>null!==e&&!("object"==typeof e&&0===Object.keys(e).length));if(e&&"object"==typeof e){const t={},o=Object.keys(e);for(let i=0;i<o.length;i++){const n=o[i],a=mi(e[n]);null!==a&&(t[n]=a)}return Object.keys(t).length>0?t:null}return e}function hi(e){e.isPrivateStyling&&e.privateFilterIsOn&&void 0!==e.styling&&(void 0===e.styling.unselFilterBlurIsOn&&(e.styling.unselFilterBlurIsOn=!1),void 0===e.styling.unselFilterBlur&&(e.styling.unselFilterBlur=0),void 0===e.styling.unselFilterBrightIsOn&&(e.styling.unselFilterBrightIsOn=!1),void 0===e.styling.unselFilterBright&&(e.styling.unselFilterBright=100),void 0===e.styling.unselFilterCont&&(e.styling.unselFilterCont=100),void 0===e.styling.unselFilterGrayIsOn&&(e.styling.unselFilterGrayIsOn=!1),void 0===e.styling.unselFilterGray&&(e.styling.unselFilterGray=0),void 0===e.styling.unselFilterHueIsOn&&(e.styling.unselFilterHueIsOn=!1),void 0===e.styling.unselFilterHue&&(e.styling.unselFilterHue=0),void 0===e.styling.unselFilterInvertIsOn&&(e.styling.unselFilterInvertIsOn=!1),void 0===e.styling.unselFilterInvert&&(e.styling.unselFilterInvert=0),void 0===e.styling.unselFilterOpacIsOn&&(e.styling.unselFilterOpacIsOn=!1),void 0===e.styling.unselFilterOpac&&(e.styling.unselFilterOpac=100),void 0===e.styling.unselFilterSaturIsOn&&(e.styling.unselFilterSaturIsOn=!1),void 0===e.styling.unselFilterSatur&&(e.styling.unselFilterSatur=0),void 0===e.styling.unselFilterSepiaIsOn&&(e.styling.unselFilterSepiaIsOn=!1),void 0===e.styling.unselFilterSepia&&(e.styling.unselFilterSepia=0))}function pi(e,t){e.isPrivateStyling&&void 0===e.privateFilterIsOn&&void 0!==e.styling&&Object.keys(mt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateFilterIsOn=!0:e.privateFilterIsOn=!1}),e.isPrivateStyling&&void 0===e.privateTextIsOn&&void 0!==e.styling&&Object.keys(ht).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateTextIsOn=!0:e.privateTextIsOn=!1}),e.isPrivateStyling&&void 0===e.privateObjectImageIsOn&&void 0!==e.styling&&Object.keys(pt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateObjectImageIsOn=!0:e.privateObjectImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateObjectIsOn&&void 0!==e.styling&&Object.keys(wt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateObjectIsOn=!0:e.privateObjectIsOn=!1}),e.isPrivateStyling&&void 0===e.privateAddonImageIsOn&&void 0!==e.styling&&Object.keys(ft).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateAddonImageIsOn=!0:e.privateAddonImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateAddonIsOn&&void 0!==e.styling&&Object.keys(It).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateAddonIsOn=!0:e.privateAddonIsOn=!1}),e.isPrivateStyling&&void 0===e.privateBackgroundIsOn&&void 0!==e.styling&&Object.keys(bt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateBackgroundIsOn=!0:e.privateBackgroundIsOn=!1}),t&&(e.isPrivateStyling&&void 0===e.privateRowImageIsOn&&void 0!==e.styling&&Object.keys(vt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateRowImageIsOn=!0:e.privateRowImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateRowIsOn&&void 0!==e.styling&&Object.keys(Tt).forEach(t=>{e.styling.hasOwnProperty(t)?e.privateRowIsOn=!0:e.privateRowIsOn=!1})),hi(e),e.isPrivateStyling||void 0===e.styling||(void 0!==e.styling.objectImgObjectFillHeight&&(e.objectImgObjectFillHeight=e.styling.objectImgObjectFillHeight),delete e.styling)}function vi(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const o=t[n];if(-1!==gi.indexOf(o))delete e[o];else if(Array.isArray(e[o])){if("rows"===o||"backpack"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];if(i.index=t,"backpack"===o&&(i.isBackpack=!0),pi(i,!0),void 0!==i.styling&&Mo(i.styling,void 0===e.version||"2.0.0-beta"===e.version),void 0!==i.rowDesignGroups)for(let e=0;e<i.rowDesignGroups.length;e++)"object"==typeof i.rowDesignGroups[e]&&(i.rowDesignGroups[e]=i.rowDesignGroups[e].id);if(i.image,zo(i.image)?Jt.value||(Jt.value=Go(i.image)):Zt.add(i.image),void 0!==i.objects)for(let t=0;t<i.objects.length;t++){const o=i.objects[t];if(o.index=t,pi(o,!1),void 0!==o.styling&&Mo(o.styling,void 0===e.version||"2.0.0-beta"===e.version),o.multiplyPointtypeIsOn&&("string"==typeof o.pointTypeToMultiply&&(o.pointTypeToMultiply=[o.pointTypeToMultiply]),"number"==typeof o.startingSumAtMultiply&&(o.startingSumAtMultiply=[o.startingSumAtMultiply])),o.dividePointtypeIsOn&&("string"==typeof o.pointTypeToDivide&&(o.pointTypeToDivide=[o.pointTypeToDivide]),"number"==typeof o.startingSumAtDivide&&(o.startingSumAtDivide=[o.startingSumAtDivide])),o.fadeTransitionIsOn&&void 0!==o.fadeTransitionTime&&(o.fadeInTransitionTime=o.fadeTransitionTime,o.fadeOutTransitionTime=o.fadeTransitionTime,delete o.fadeTransitionTime),o.addToAllowChoice&&"string"==typeof o.idOfAllowChoice&&(o.idOfAllowChoice=[o.idOfAllowChoice]),void 0!==o.groups)for(let e=0;e<o.groups.length;e++)"object"==typeof o.groups[e]&&(o.groups[e]=o.groups[e].id);if(void 0!==o.objectDesignGroups)for(let e=0;e<o.objectDesignGroups.length;e++)"object"==typeof o.objectDesignGroups[e]&&(o.objectDesignGroups[e]=o.objectDesignGroups[e].id);o.image,zo(o.image)?Jt.value||(Jt.value=Go(o.image)):Zt.add(o.image);for(let e=0;e<o.addons.length;e++){const t=o.addons[e];void 0!==t.template&&0!==t.template||(t.template=1),t.parentId=o.id,t.image,zo(t.image)?Jt.value||(Jt.value=Go(t.image)):Zt.add(t.image)}}}else if("objectDesignGroups"===o||"rowDesignGroups"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];void 0===i.activatedId&&(i.activatedId=""),void 0===i.elements&&(i.elements=[]),void 0===i.backpackElements&&(i.backpackElements=[]);for(let e=0;e<i.elements.length;e++)"object"==typeof i.elements[e]&&(i.elements[e]=i.elements[e].id);for(let e=0;e<i.backpackElements.length;e++)"object"==typeof i.backpackElements[e]&&(i.backpackElements[e]=i.backpackElements[e].id);hi(i),Mo(i.styling,void 0===e.version||"2.0.0-beta"===e.version)}else if("pointTypes"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];void 0===i.initValue&&(i.initValue=i.startingSum),"object"==typeof i.positiveColor&&void 0!==i.positiveColor.hexa&&(i.positiveColor=i.positiveColor.hexa),"object"==typeof i.negativeColor&&void 0!==i.negativeColor.hexa&&(i.negativeColor=i.negativeColor.hexa),"object"==typeof i.privateColor&&void 0!==i.privateColor.hexa&&(i.privateColor=i.privateColor.hexa),"object"==typeof i.privateNegativeColor&&void 0!==i.privateNegativeColor.hexa&&(i.privateNegativeColor=i.privateNegativeColor.hexa)}else if("groups"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];void 0===i.elements&&(i.elements=[]),void 0===i.rowElements&&(i.rowElements=[]);for(let e=0;e<i.elements.length;e++)"object"==typeof i.elements[e]&&(i.elements[e]=i.elements[e].id);for(let e=0;e<i.rowElements.length;e++)"object"==typeof i.rowElements[e]&&(i.rowElements[e]=i.rowElements[e].id)}}else"object"==typeof e[o]&&"styling"===o&&Mo(e[o],void 0===e.version||"2.0.0-beta"===e.version,!0)}Bt.clear(),Ot.clear(),kt.clear(),Mt.clear(),Ft.clear(),Rt.clear(),Dt.clear(),jt.clear(),Pt.clear(),$t.clear(),Vt.splice(0);const o=Object.keys(xt);for(let n=0;n<o.length;n++){const e=o[n];xt.hasOwnProperty(e)?app[e]=xt[e]:delete app[e]}const i=Object.keys(e);for(let n=0;n<i.length;n++){const t=i[n];app[t]=e[t]}for(let n=0;n<app.googleFonts.length;n++){const e=app.googleFonts[n].replace(/ /g,"+"),t="https://fonts.googleapis.com/css2?family=".concat(e,"&display=swap"),o=document.createElement("link");o.id=e,o.rel="stylesheet",o.href=t,o.crossOrigin="anonymous",document.head.appendChild(o)}for(let n=0;n<app.customFonts.length;n++){const e=app.customFonts[n],t=document.createElement("link");t.id=e,t.rel="stylesheet",t.href=e,t.crossOrigin="anonymous",document.head.appendChild(t)}for(let n=0;n<app.pointTypes.length;n++){const e=app.pointTypes[n];void 0!==e.id&&""!==e.id||(e.id=ho(0,4)),e.id=yo(e.id,Ot),void 0===e.initValue&&(e.initValue=e.startingSum),void 0===e.isNotShownObjects&&""!==e.activatedId&&(e.isNotShownObjects=!0),void 0===e.isNotShownPointBar&&""!==e.activatedId&&(e.isNotShownPointBar=!0),Ot.set(e.id,e)}for(let n=0;n<app.rows.length;n++){const e=app.rows[n];void 0!==e.id&&""!==e.id||(e.id=so(0,4)),e.id=yo(e.id,kt),kt.set(e.id,e);for(let t=0;t<e.objects.length;t++){const o=e.objects[t];void 0!==o.id&&""!==o.id||(o.id=uo(0,4)),o.id=yo(o.id,Mt),Mt.set(o.id,{choice:o,row:e});for(let e=0;e<o.scores.length;e++){const t=o.scores[e];void 0!==t.idx&&""!==t.idx||(t.idx=vo(0,5)),t.idx=yo(t.idx,qt),qt.add(t.idx)}}}for(let n=0;n<app.backpack.length;n++){const e=app.backpack[n];void 0!==e.id&&""!==e.id||(e.id=so(0,4)),e.id=yo(e.id,kt),kt.set(e.id,e);for(let t=0;t<e.objects.length;t++){const o=e.objects[t];void 0!==o.id&&""!==o.id||(o.id=uo(0,4)),o.id=yo(o.id,Mt),Mt.set(o.id,{choice:o,row:e});for(let e=0;e<o.scores.length;e++){const t=o.scores[e];void 0!==t.idx&&""!==t.idx||(t.idx=vo(0,5)),t.idx=yo(t.idx,qt),qt.add(t.idx)}}}for(let n=0;n<app.groups.length;n++){const e=app.groups[n];void 0!==e.id&&""!==e.id||(e.id=mo(0,4)),e.id=yo(e.id,Ft),Ft.set(e.id,app.groups[n])}for(let n=0;n<app.words.length;n++){const e=app.words[n];void 0!==e.id&&""!==e.id||(e.id=co(0,4)),e.id=yo(e.id,Dt),Dt.set(e.id,app.words[n])}for(let n=0;n<app.variables.length;n++){const e=app.variables[n];void 0!==e.id&&""!==e.id||(e.id=po(0,4)),e.id=yo(e.id,jt),jt.set(e.id,app.variables[n])}if(void 0!==app.rowDesignGroups)for(let n=0;n<app.rowDesignGroups.length;n++){const e=app.rowDesignGroups[n];void 0!==e.id&&""!==e.id||(e.id=go(0,4)),e.id=yo(e.id,Pt),Pt.set(e.id,e)}if(void 0!==app.objectDesignGroups)for(let n=0;n<app.objectDesignGroups.length;n++){const e=app.objectDesignGroups[n];void 0!==e.id&&""!==e.id||(e.id=go(0,4)),e.id=yo(e.id,$t),$t.set(app.objectDesignGroups[n].id,app.objectDesignGroups[n])}if(void 0!==app.globalRequirements)for(let n=0;n<app.globalRequirements.length;n++){const e=app.globalRequirements[n];Rt.set(e.id,e)}app.activated.length>0&&Eo(app.activated.join(",")),void 0!==app.customCSS&&function(e){let t=document.getElementById("customCSS");t?""===e?(t.remove(),delete app.customCSS):(t.textContent=e,app.customCSS=e):(t=document.createElement("style"),t.id="customCSS",t.textContent=e,app.customCSS=e,document.head.appendChild(t))}(app.customCSS),app.buildAutoSaveIsOn&&(to&&to.abort(),io()),"boolean"!=typeof app.isMute&&(app.curVolume=100,app.isMute=!1)}async function fi(e){const t=e.querySelectorAll("img"),o=Array.from(t).map(e=>e.complete?Promise.resolve():new Promise(t=>{e.onload=t,e.onerror=t}));return Promise.all(o).then(()=>{})}function bi(e){e.querySelectorAll("img").forEach(e=>{"lazy"===e.loading&&(e.loading="eager")})}async function wi(e){const t=e.querySelectorAll("*"),o=[];t.forEach(e=>{const t=getComputedStyle(e).borderImageSource.match(/url\(["']?(.*?)["']?\)/);t&&t[1]&&o.push(t[1])});const i=o.map(e=>new Promise(t=>{const o=new Image;o.src=e,o.onload=t,o.onerror=t}));await Promise.all(i)}function Ti(e=2){return new Promise(t=>{let o=0;requestAnimationFrame(function i(){if(++o>=e)return t();requestAnimationFrame(i)})})}function Ii(e,t,o){void 0===e.templateStack&&(e.templateStack=[],e.defaultTemplate=void 0!==e.template?e.template:1),e.templateStack.push({id:t,data:o}),e.template=o}function yi(e,t){if(void 0!==e.templateStack){const o=e.templateStack.findIndex(e=>e.id===t);-1!==o&&e.templateStack.splice(o,1);const i=e.templateStack.length;i>0?e.template=e.templateStack[i-1].data:(e.template=void 0!==e.defaultTemplate?e.defaultTemplate:1,delete e.templateStack)}}function Si(e,t,o){void 0===e.widthStack&&(e.widthStack=[],e.defaultWidth=void 0!==e.width?e.width:"col-md-3"),e.widthStack.push({id:t,data:o}),e.width=o}function Ci(e,t){if(void 0!==e.widthStack){const o=e.widthStack.findIndex(e=>e.id===t);-1!==o&&e.widthStack.splice(o,1);const i=e.widthStack.length;i>0?e.width=e.widthStack[i-1].data:(e.width=void 0!==e.defaultWidth?e.defaultWidth:"col-md-3",delete e.widthStack)}}const xi=CSS.supports("color","#00000080");function Bi(e){if(void 0===e)return"";if(xi||!/^#([\da-f]{8})$/i.test(e))return e;const t=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),n=parseInt(e.slice(7,9),16)/255;return"rgba(".concat(t,", ").concat(o,", ").concat(i,", ").concat(n.toFixed(3),")")}var Ai=r("<input/>");function Oi(e,t){n(t,!0);let o,l=f(t,"use",19,()=>[]),r=f(t,"class",3,""),s=f(t,"type",3,"text"),g=f(t,"placeholder",3," "),m=f(t,"value",15),h=f(t,"files",15,null),p=f(t,"dirty",15,!1),v=f(t,"invalid",15,!1),w=f(t,"updateInvalid",3,!0),T=f(t,"initialInvalid",3,!1),I=f(t,"emptyValueNull",19,()=>null===m()),y=f(t,"emptyValueUndefined",19,()=>void 0===m()),S=f(t,"step",3,"any"),C=q(t,["$$slots","$$events","$$legacy","use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","initialInvalid","emptyValueNull","emptyValueUndefined","step"]),x=i({}),B=i({});function A(e){return""===e?Number.NaN:+e}function O(e){if("file"!==s())if(""===e.currentTarget.value&&I())m(null);else if(""===e.currentTarget.value&&y())m(void 0);else switch(s()){case"number":m(A(e.currentTarget.value)),""!==e.currentTarget.value&&"0"!==e.currentTarget.value||("-"===e.data?(m("-0"),e.target.value="-0"):"deleteContentBackward"===e.inputType||"insertFromPaste"!==e.inputType||isNaN(parseInt(e.data))?(m("0"),e.target.value="0"):(m(parseFloat(e.data)),e.target.value=parseFloat(e.data)));break;case"range":m(A(e.currentTarget.value));break;default:m(e.currentTarget.value)}else h(e.currentTarget.files)}function k(){return o}a(()=>{"file"===s()?delete B.value:B.value=null==m()?"":m()}),b(()=>{w()&&T()&&v(k().matches(":invalid"))});var M=Ai(),F=e=>{var o;"file"!==s()&&O(e),null==(o=t.oninput)||o.call(t,e)},R=e=>{var o;!function(e){"file"!==s()&&"range"!==s()||O(e),p(!0),w()&&v(k().matches(":invalid"))}(e),null==(o=t.onchange)||o.call(t,e)};return V(M,e=>({class:e,type:s(),placeholder:g(),...B,...x,step:S(),...C,oninput:F,onchange:R}),[()=>L({[r()]:!0,"mdc-text-field__input":!0})]),c(M,e=>o=e,()=>o),N(M,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},l),d(e,M),u({getAttr:function(e){return e in x?void 0!==x[e]?x[e]:null:k().getAttribute(e)},addAttr:function(e,t){x[e]!==t&&(x[e]=t)},removeAttr:function(e){e in x&&null==x[e]||(x[e]=void 0)},focus:function(){k().focus()},blur:function(){k().blur()},getElement:k})}var ki=r("<textarea></textarea>");function Mi(e,t){n(t,!0);let o,a=f(t,"use",19,()=>[]),l=f(t,"class",3,""),r=f(t,"style",3,""),s=f(t,"value",15,""),g=f(t,"dirty",15,!1),m=f(t,"invalid",15,!1),h=f(t,"updateInvalid",3,!0),p=f(t,"initialInvalid",3,!1),v=f(t,"resizable",3,!0),w=q(t,["$$slots","$$events","$$legacy","use","class","style","value","dirty","invalid","updateInvalid","initialInvalid","resizable"]),T=i({});function I(){return o}b(()=>{h()&&p()&&m(I().matches(":invalid"))});var y=ki(),S=e=>{var o;g(!0),h()&&m(I().matches(":invalid")),null==(o=t.onchange)||o.call(t,e)};return V(y,e=>({class:e,style:"".concat(v()?"":"resize: none; ").concat(r()),...T,...w,onchange:S}),[()=>L({[l()]:!0,"mdc-text-field__input":!0})]),c(y,e=>o=e,()=>o),N(y,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},a),E(()=>U(y,s)),d(e,y),u({getAttr:function(e){return e in T?void 0!==T[e]?T[e]:null:I().getAttribute(e)},addAttr:function(e,t){T[e]!==t&&(T[e]=t)},removeAttr:function(e){e in T&&null==T[e]||(T[e]=void 0)},focus:function(){I().focus()},blur:function(){I().blur()},getElement:I})}var Fi=r('<span class="mdc-text-field__ripple"></span>'),Ri=r("<!> <!>",1),Di=r("<span><!> <!></span>"),ji=r("<!> <!> <!>",1),Pi=r("<label><!> <!> <!> <!> <!> <!> <!></label>"),$i=r("<div><!> <!> <!> <!> <!></div>"),qi=r("<!> <!>",1);function Vi(e,t){n(t,!0);const{applyPassive:o}=Y;let r=()=>{};function s(e){return e===r}let h=f(t,"use",19,()=>[]),C=f(t,"class",3,""),x=f(t,"style",3,""),B=f(t,"ripple",3,!0),A=f(t,"disabled",3,!1),O=f(t,"required",3,!1),k=f(t,"textarea",3,!1),M=f(t,"variant",19,()=>k()?"outlined":"standard"),F=f(t,"noLabel",3,!1),R=f(t,"type",3,"text"),E=f(t,"value",15),U=f(t,"files",15,r),ce=f(t,"invalid",15,r),de=f(t,"updateInvalid",19,()=>s(ce())),ue=f(t,"initialInvalid",3,!1),ge=f(t,"dirty",15,!1),me=f(t,"validateOnValueChange",19,de),he=f(t,"useNativeValidation",19,de),pe=f(t,"withLeadingIcon",3,r),ve=f(t,"withTrailingIcon",3,r),fe=f(t,"input",7),be=f(t,"floatingLabel",7),we=f(t,"lineRipple",7),Te=f(t,"notchedOutline",7),Ie=f(t,"alwaysFloat",3,!1),ye=q(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","initialInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","children","leadingIcon","trailingIcon","internalCounter","line","helper","alwaysFloat"]);const Se=void 0!==E()||void 0===E()&&t.input$emptyValueUndefined||!s(U());s(U())&&U(null),s(ce())&&ce(!1);let Ce,xe,Be,Ae,Oe,ke,Me=m(i(document.createElement("div"))),Fe=m(void 0),Re=new _,De=i({}),je=i({}),Pe=m(void 0),$e=m(!1),qe=m(i(ue())),Ve=z("SMUI:addLayoutListener"),Le=new Promise(e=>xe=e);const Ne=ee(()=>fe()&&fe().getElement());a(()=>{(ge()||g(qe)||!de())&&g(Fe)&&g(Fe).isValid()!==!ce()&&(de()?ce(!g(Fe).isValid()):g(Fe).setValid(!ce()))}),a(()=>{g(Fe)&&g(Fe).getValidateOnValueChange()!==me()&&g(Fe).setValidateOnValueChange(!s(me())&&me())}),a(()=>{g(Fe)&&g(Fe).setUseNativeValidation(!!s(he())||he())}),a(()=>{g(Fe)&&g(Fe).setDisabled(A())});let We=E();function Ee(e){return e in De?void 0!==De[e]?De[e]:null:_e().classList.contains(e)}function Ue(e){De[e]||(De[e]=!0)}function ze(e){e in De&&!De[e]||(De[e]=!1)}function Ge(e,t){je[e]!=t&&(""===t||null==t?delete je[e]:je[e]=t)}function He(){if(g(Fe)){const e=g(Fe).shouldFloat;g(Fe).notchOutline(e)}}function _e(){return g(Me)}a(()=>{if(g(Fe)&&Se&&We!==E()){We=E();const e="".concat(null==E()?"":E());g(Fe).getValue()!==e&&g(Fe).setValue(e)}}),Ve&&(Ce=Ve(He)),G("SMUI:textfield:leading-icon:mount",e=>{Be=e}),G("SMUI:textfield:leading-icon:unmount",()=>{Be=void 0}),G("SMUI:textfield:trailing-icon:mount",e=>{Ae=e}),G("SMUI:textfield:trailing-icon:unmount",()=>{Ae=void 0}),G("SMUI:textfield:helper-text:id",e=>{p(Pe,e,!0)}),G("SMUI:textfield:helper-text:mount",e=>{Oe=e}),G("SMUI:textfield:helper-text:unmount",()=>{p(Pe,void 0),Oe=void 0}),G("SMUI:textfield:character-counter:mount",e=>{ke=e}),G("SMUI:textfield:character-counter:unmount",()=>{ke=void 0}),b(()=>{var e;if(p(Fe,new H({addClass:Ue,removeClass:ze,hasClass:Ee,registerTextFieldInteractionHandler:(e,t)=>Re.on(_e(),e,t),deregisterTextFieldInteractionHandler:(e,t)=>Re.off(_e(),e,t),registerValidationAttributeChangeHandler:e=>{const t=new MutationObserver(t=>{he()&&e((e=>e.map(e=>e.attributeName).filter(e=>e))(t))}),o={attributes:!0};return fe()&&t.observe(fe().getElement(),o),t},deregisterValidationAttributeChangeHandler:e=>{e.disconnect()},getNativeInput:()=>{var e;return void 0!==(null==(e=fe())?void 0:e.getElement())?fe().getElement():null},setInputAttr:(e,t)=>{var o;null==(o=fe())||o.addAttr(e,t)},removeInputAttr:e=>{var t;null==(t=fe())||t.removeAttr(e)},isFocused:()=>{var e;return document.activeElement===(null==(e=fe())?void 0:e.getElement())},registerInputInteractionHandler:(e,t)=>{var i;const n=null==(i=fe())?void 0:i.getElement();if(n){const i=o();Re.on(n,e,t,"boolean"==typeof i?{capture:i}:i)}},deregisterInputInteractionHandler:(e,t)=>{var o;const i=null==(o=fe())?void 0:o.getElement();i&&Re.off(i,e,t)},floatLabel:e=>be()&&be().float(e||Ie()),getLabelWidth:()=>be()?be().getWidth():0,hasLabel:()=>!!be(),shakeLabel:e=>be()&&be().shake(e),setLabelRequired:e=>be()&&be().setRequired(e),activateLineRipple:()=>we()&&we().activate(),deactivateLineRipple:()=>we()&&we().deactivate(),setLineRippleTransformOrigin:e=>we()&&we().setRippleCenter(e),closeOutline:()=>Te()&&Te().closeNotch(),hasOutline:()=>!!Te(),notchOutline:e=>Te()&&Te().notch(e)},{get helperText(){return Oe},get characterCounter(){return ke},get leadingIcon(){return Be},get trailingIcon(){return Ae}}),!0),Se){if(null==fe())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null==(e=g(Fe))||e.init()}else Z().then(()=>{var e;if(null==fe())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null==(e=g(Fe))||e.init()});return xe(),()=>{var e;null==(e=g(Fe))||e.destroy(),Re.clear()}}),l(()=>{Ce&&Ce()});var Ye=qi(),Ze=$(Ye),Je=e=>{var o=Pi();V(o,(e,t,o)=>({class:e,style:t,for:void 0,...o}),[()=>L({[C()]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":A(),"mdc-text-field--textarea":k(),"mdc-text-field--filled":"filled"===M(),"mdc-text-field--outlined":"outlined"===M(),"smui-text-field--standard":"standard"===M()&&!k(),"mdc-text-field--no-label":F()||null==t.label,"mdc-text-field--label-floating":g($e)||null!=E()&&""!==E(),"mdc-text-field--with-leading-icon":s(pe())?t.leadingIcon:pe(),"mdc-text-field--with-trailing-icon":s(ve())?t.trailingIcon:ve(),"mdc-text-field--with-internal-counter":k()&&t.internalCounter,"mdc-text-field--invalid":ce(),...De}),()=>Object.entries(je).map(([e,t])=>"".concat(e,": ").concat(t,";")).concat([x()]).join(" "),()=>K(ye,["input$","label$","ripple$","outline$","helperLine$"])]);var i=v(o),a=e=>{var o=Ri(),i=$(o),n=e=>{var t=Fi();d(e,t)};J(i,e=>{"filled"===M()&&e(n)});var a=X(i,2),l=e=>{const o=ee(()=>g($e)||Ie()||null!=E()&&""!==E()&&("number"!=typeof E()||!isNaN(E())));var i=ee(()=>oe(ye,"label$"));c(ne(e,j({get floatAbove(){return g(o)},get required(){return O()},wrapped:!0},()=>g(i),{children:(e,o)=>{var i=P(),n=$(i),a=e=>{},l=(e,o)=>{var i=e=>{var o=ae();I(()=>le(o,t.label)),d(e,o)},n=e=>{var o=P(),i=$(o);w(i,()=>t.label),d(e,o)};J(e,e=>{"string"==typeof t.label?e(i):e(n,!1)},o)};J(n,e=>{null==t.label?e(a):e(l,!1)}),d(e,i)},$$slots:{default:!0}})),e=>be(e),()=>be())};J(a,e=>{F()||null==t.label||e(l)}),d(e,o)};J(i,e=>{"outlined"!==M()&&e(a)});var l=X(i,2),r=e=>{const o=ee(()=>F()||null==t.label);var i=ee(()=>oe(ye,"outline$"));c(ie(e,j({get noLabel(){return g(o)}},()=>g(i),{children:(e,o)=>{var i=P(),n=$(i),a=e=>{const o=ee(()=>g($e)||Ie()||null!=E()&&""!==E()&&("number"!=typeof E()||!isNaN(E())));var i=ee(()=>oe(ye,"label$"));c(ne(e,j({get floatAbove(){return g(o)},get required(){return O()},wrapped:!0},()=>g(i),{children:(e,o)=>{var i=P(),n=$(i),a=e=>{},l=(e,o)=>{var i=e=>{var o=ae();I(()=>le(o,t.label)),d(e,o)},n=e=>{var o=P(),i=$(o);w(i,()=>t.label),d(e,o)};J(e,e=>{"string"==typeof t.label?e(i):e(n,!1)},o)};J(n,e=>{null==t.label?e(a):e(l,!1)}),d(e,i)},$$slots:{default:!0}})),e=>be(e),()=>be())};J(n,e=>{F()||null==t.label||e(a)}),d(e,i)},$$slots:{default:!0}})),e=>Te(e),()=>Te())};J(l,e=>{"outlined"===M()&&e(r)});var m=X(l,2);Q(m,{key:"SMUI:textfield:icon:leading",value:!0,children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.leadingIcon)?e:T}),d(e,i)},$$slots:{default:!0}});var f=X(m,2);w(f,()=>{var e;return null!=(e=t.children)?e:T});var b=X(f,2),z=e=>{var o=Di(),i=v(o),n=ee(()=>oe(ye,"input$"));c(Mi(i,j({get disabled(){return A()},get required(){return O()},get updateInvalid(){return de()},get initialInvalid(){return g(qe)},get"aria-controls"(){return g(Pe)},get"aria-describedby"(){return g(Pe)}},()=>g(n),{onblur:e=>{var o;p($e,!1),p(qe,!0),re(_e(),"blur",e),null==(o=t.input$onblur)||o.call(t,e)},onfocus:e=>{var o;p($e,!0),re(_e(),"focus",e),null==(o=t.input$onfocus)||o.call(t,e)},get value(){return E()},set value(e){E(e)},get dirty(){return ge()},set dirty(e){ge(e)},get invalid(){return ce()},set invalid(e){ce(e)}})),e=>fe(e),()=>fe());var a=X(i,2);w(a,()=>{var e;return null!=(e=t.internalCounter)?e:T}),I(e=>y(o,1,e),[()=>S(L({"mdc-text-field__resizer":!("input$resizable"in ye)||t.input$resizable}))]),d(e,o)},G=e=>{var o=ji(),i=$(o),a=e=>{var o=P(),i=$(o),a=e=>{!function(e,t){n(t,!0);let o,i=q(t,["$$slots","$$events","$$legacy","children"]);c(D(e,j({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--prefix",tag:"span"},()=>i,{children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.children)?e:T}),d(e,i)},$$slots:{default:!0}})),e=>o=e,()=>o),u({getElement:function(){return o.getElement()}})}(e,{children:(e,o)=>{var i=ae();I(()=>le(i,t.prefix)),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=P(),i=$(o);w(i,()=>{var e;return null!=(e=t.prefix)?e:T}),d(e,o)};J(i,e=>{"string"==typeof t.prefix?e(a):e(l,!1)}),d(e,o)};J(i,e=>{null!=t.prefix&&e(a)});var l=X(i,2),r=ee(()=>oe(ye,"input$"));c(Oi(l,j({get type(){return R()},get disabled(){return A()},get required(){return O()},get updateInvalid(){return de()},get initialInvalid(){return g(qe)},get"aria-controls"(){return g(Pe)},get"aria-describedby"(){return g(Pe)}},()=>F()&&null!=t.label&&"string"==typeof t.label?{placeholder:t.label}:{},()=>g(r),{onblur:e=>{var o;p($e,!1),p(qe,!0),re(_e(),"blur",e),null==(o=t.input$onblur)||o.call(t,e)},onfocus:e=>{var o;p($e,!0),re(_e(),"focus",e),null==(o=t.input$onfocus)||o.call(t,e)},get value(){return E()},set value(e){E(e)},get files(){return U()},set files(e){U(e)},get dirty(){return ge()},set dirty(e){ge(e)},get invalid(){return ce()},set invalid(e){ce(e)}})),e=>fe(e),()=>fe());var s=X(l,2),m=e=>{var o=P(),i=$(o),a=e=>{!function(e,t){n(t,!0);let o,i=q(t,["$$slots","$$events","$$legacy","children"]);c(D(e,j({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--suffix",tag:"span"},()=>i,{children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.children)?e:T}),d(e,i)},$$slots:{default:!0}})),e=>o=e,()=>o),u({getElement:function(){return o.getElement()}})}(e,{children:(e,o)=>{var i=ae();I(()=>le(i,t.suffix)),d(e,i)},$$slots:{default:!0}})},l=e=>{var o=P(),i=$(o);w(i,()=>{var e;return null!=(e=t.suffix)?e:T}),d(e,o)};J(i,e=>{"string"==typeof t.suffix?e(a):e(l,!1)}),d(e,o)};J(s,e=>{null!=t.suffix&&e(m)}),d(e,o)};J(b,e=>{k()&&"string"==typeof E()?e(z):e(G,!1)});var H=X(b,2);Q(H,{key:"SMUI:textfield:icon:leading",value:!1,children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.trailingIcon)?e:T}),d(e,i)},$$slots:{default:!0}});var _=X(H,2),Y=e=>{var t=ee(()=>oe(ye,"ripple$"));c(se(e,j(()=>g(t))),e=>we(e),()=>we())};J(_,e=>{"outlined"!==M()&&B()&&e(Y)}),c(o,e=>p(Me,e),()=>g(Me)),N(o,(e,t)=>{var o;return null==(o=te)?void 0:o(e,t)},()=>({ripple:"filled"===M(),unbounded:!1,addClass:Ue,removeClass:ze,addStyle:Ge,eventTarget:g(Ne),activeTarget:g(Ne),initPromise:Le})),N(o,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},h),d(e,o)},Xe=e=>{var o=$i();V(o,(e,t,o)=>({class:e,style:t,...o}),[()=>L({[C()]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":A(),"mdc-text-field--textarea":k(),"mdc-text-field--filled":"filled"===M(),"mdc-text-field--outlined":"outlined"===M(),"smui-text-field--standard":"standard"===M()&&!k(),"mdc-text-field--no-label":F()||null==t.label,"mdc-text-field--with-leading-icon":t.leadingIcon,"mdc-text-field--with-trailing-icon":t.trailingIcon,"mdc-text-field--invalid":ce(),...De}),()=>Object.entries(je).map(([e,t])=>"".concat(e,": ").concat(t,";")).concat([x()]).join(" "),()=>K(ye,["input$","label$","ripple$","outline$","helperLine$"])]);var i=v(o),n=e=>{var o=P(),i=$(o);w(i,()=>{var e;return null!=(e=t.label)?e:T}),d(e,o)};J(i,e=>{"string"!=typeof t.label&&e(n)});var a=X(i,2);Q(a,{key:"SMUI:textfield:icon:leading",value:!0,children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.leadingIcon)?e:T}),d(e,i)},$$slots:{default:!0}});var l=X(a,2);w(l,()=>{var e;return null!=(e=t.children)?e:T});var r=X(l,2);Q(r,{key:"SMUI:textfield:icon:leading",value:!1,children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.trailingIcon)?e:T}),d(e,i)},$$slots:{default:!0}});var s=X(r,2);w(s,()=>{var e;return null!=(e=t.line)?e:T}),c(o,e=>p(Me,e),()=>g(Me)),N(o,(e,t)=>{var o;return null==(o=te)?void 0:o(e,t)},()=>({ripple:B(),unbounded:!1,addClass:Ue,removeClass:ze,addStyle:Ge})),N(o,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},h),d(e,o)};J(Ze,e=>{Se?e(Je):e(Xe,!1)});var Ke=X(Ze,2),Qe=e=>{var o=ee(()=>oe(ye,"helperLine$"));!function(e,t){n(t,!0);let o,i=q(t,["$$slots","$$events","$$legacy","children"]);c(D(e,j({_smuiClass:"mdc-text-field-helper-line",tag:"div"},()=>i,{children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.children)?e:T}),d(e,i)},$$slots:{default:!0}})),e=>o=e,()=>o),u({getElement:function(){return o.getElement()}})}(e,j(()=>g(o),{children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.helper)?e:T}),d(e,i)},$$slots:{default:!0}}))};return J(Ke,e=>{t.helper&&e(Qe)}),d(e,Ye),u({focus:function(){var e;null==(e=fe())||e.focus()},blur:function(){var e;null==(e=fe())||e.blur()},layout:He,getElement:_e})}var Li=r('<div class="col-12"><!></div>'),Ni=r('<div class="row pt-4"><div class="col-12"><!></div> <!></div>'),Wi=r('<div class="container-fluid"><div class="row"><div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),Ei=r("<!> <!> <!>",1);function Ui(e,t){n(t,!0);let o=f(t,"open",7),a=m(i(t.isWord&&t.prevText?t.prevText:""));ce(e,{surface$style:"width: 400px; max-width: calc(100vw - 32px);",onSMUIDialogClosed:function(e){t.isWord?t.closeHandler(e,g(a)):t.closeHandler(e),t.onclose()},get open(){return o()},set open(e){o(e)},children:(e,o)=>{var i=Ei(),n=$(i);de(n,{class:"px-3 pb-0 toolbar toolbar__dialog",children:(e,o)=>{var i=P(),n=$(i);s(n,()=>t.title),d(e,i)},$$slots:{default:!0}});var l=X(n,2);ue(l,{children:(e,o)=>{var i=Ni(),n=v(i),l=v(n);s(l,()=>t.context);var r=X(n,2),c=e=>{var t=Li();Vi(v(t),{textarea:!0,label:"",variant:"filled",input$rows:5,get value(){return g(a)},set value(e){p(a,e,!0)}}),d(e,t)};J(r,e=>{t.isWord&&e(c)}),d(e,i)},$$slots:{default:!0}});var r=X(l,2);ge(r,{children:(e,t)=>{var o=Wi(),i=v(o),n=v(i),a=v(n);me(a,{action:"close",children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae("Cancel");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var l=X(n,2),r=v(l);me(r,{action:"accept",children:(e,t)=>{he(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=ae("OK");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),d(e,i)},$$slots:{default:!0}}),u()}var zi=r('<div class="row gy-4"><div class="col-sm-6 col-12"><!></div> <div class="col-sm-6 col-12"><!></div> <div class="col-12"><!> <!></div></div>'),Gi=r("<!> <!> <!>",1);var Hi=r('<i class="mdi mdi-play"></i>'),_i=r('<i class="mdi mdi-clipboard-outline"></i>'),Yi=r('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),Zi=r('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-12" style="height: 48px">Empty</div></div>'),Ji=r('<i class="mdi mdi-alpha-a-box-outline"></i>'),Xi=r('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12 pt-1"><div> </div> <div> </div></div></div></div>'),Ki=r('<i class="mdi mdi-play"></i>'),Qi=r('<i class="mdi mdi-trash-can"></i>'),en=r('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),tn=r('<i class="mdi mdi-content-save"></i>'),on=r('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12"><!></div></div></div>'),nn=r("<!> <!>",1),an=r('<i class="mdi mdi-menu-left"></i>'),ln=r('<i class="mdi mdi-menu-right"></i>'),rn=r('<div class="container-fluid pb-2 mb-2" style="border: 1px solid"><!></div> <div class="row gy-2"><div class="col pb-2"><!></div> <div class="col pb-2"><div class="d-row align-items-center justify-end"><!> <span class="list-text px-2"> </span> <!></div></div></div> <div class="row gy-2"><div class="col-12"><!></div></div>',1),sn=r("<!> <!> <!>",1),cn=r("<!> <!>",1);function dn(e,t){n(t,!0);let o=f(t,"open",7);const i={action:()=>{},title:"Warning",context:""};let a=m("none"),l=m(1),r=ee(()=>9*(g(l)-1)),s=ee(()=>Math.min(g(r)+9-1,99)),h=ee(()=>Array.from({length:g(s)-g(r)+1},(e,t)=>_t[g(r)+t])),b=ee(()=>Array.from({length:g(s)-g(r)+1},(e,t)=>Yt[g(r)+t])),w=m(!1);function T(e){const t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),o=navigator.language,i=new Date,n=new Intl.DateTimeFormat(o,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(i);!async function(e,t,o,i,n){const a=(await eo()).transaction(i,"readwrite").objectStore(i);try{await new Promise((o,i)=>{const n=a.put(e,t);n.onsuccess=()=>o(),n.onerror=()=>i(n.error)}),n&&(_t[o].stored=!0,_t[o].time=e.time,_t[o].name=e.name,_t[o].app=e.app)}catch(l){console.error(l)}}({stored:!0,name:_t[e].name,time:n,app:no()},t,e,"buildStore",!0)}function y(e){!async function(e,t,o,i){const n=(await eo()).transaction(o,"readwrite").objectStore(o);try{await new Promise((t,o)=>{const i=n.delete(e);i.onsuccess=()=>t(),i.onerror=()=>o(i.error)}),i&&(_t[t].stored=!1,_t[t].name="Slot ".concat(t+1),_t[t].time="",_t[t].app="")}catch(a){console.error(a)}}("".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),e,"buildStore",!0)}var S=cn(),C=$(S);ce(C,{surface$style:"width: 700px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},id:"dialog",get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=sn(),n=$(o);de(n,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:(e,t)=>{var o=ae("Save/Load Project");d(e,o)},$$slots:{default:!0}});var r=X(n,2);ue(r,{class:"pt-3",children:(e,t)=>{var o=rn(),n=$(o),r=v(n),s=e=>{var t=P(),o=$(t);be(o,17,()=>g(b),we,(e,t,o)=>{var n=P(),l=$(n),r=e=>{var n=Yi(),l=v(n),r=v(l);fe(r,{onclick:()=>{i.action=()=>{return e=o,void Eo(g(b)[e].app);var e},i.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",p(a,"dlgCommon")},children:(e,t)=>{var o=Hi();d(e,o)},$$slots:{default:!0}});var s=X(l,2),c=v(s),u=v(c),m=v(u),h=X(u,2),f=v(h),w=X(s,2),T=v(w);fe(T,{onclick:()=>function(e){const t=g(b)[e].app;navigator.clipboard.writeText(t).then(()=>{zt.labelText="Build code copied to clipboard.",zt.isOpen=!0}).catch(e=>{zt.labelText="Failed to copy build code to clipboard.",zt.isOpen=!0,console.error(e)})}(o),children:(e,t)=>{var o=_i();d(e,o)},$$slots:{default:!0}}),I(()=>{le(m,g(t).name),le(f,g(t).time)}),d(e,n)},s=e=>{var t=Zi();d(e,t)};J(l,e=>{g(t).stored?e(r):e(s,!1)}),d(e,n)}),d(e,t)},c=e=>{var t=nn(),o=$(t),n=e=>{var t=Xi(),o=v(t),n=v(o);fe(n,{onclick:()=>{i.action=()=>{Eo(Ht.app)},i.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",p(a,"dlgCommon")},children:(e,t)=>{var o=Ji();d(e,o)},$$slots:{default:!0}});var l=X(o,2),r=v(l),s=v(r),c=v(s),u=X(s,2),g=v(u);I(()=>{le(c,Ht.name),le(g,Ht.time)}),d(e,t)};J(o,e=>{Ht.stored&&e(n)});var l=X(o,2);be(l,17,()=>g(h),we,(e,t,o)=>{var n=P(),l=$(n),r=e=>{var n=en(),l=v(n),r=v(l);fe(r,{onclick:()=>{i.action=()=>{Eo(_t[o].app)},i.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",p(a,"dlgCommon")},children:(e,t)=>{var o=Ki();d(e,o)},$$slots:{default:!0}});var s=X(l,2),c=v(s),u=v(c),m=v(u),h=X(u,2),f=v(h),b=X(s,2),w=v(b);fe(w,{onclick:()=>{i.action=()=>y(o),i.context="Are you sure you want to delete this build?<br>This action cannot be undone.",p(a,"dlgCommon")},children:(e,t)=>{var o=Qi();d(e,o)},$$slots:{default:!0}}),I(()=>{le(m,g(t).name),le(f,g(t).time)}),d(e,n)},s=e=>{var i=on(),n=v(i),a=v(n);fe(a,{onclick:()=>T(o),children:(e,t)=>{var o=tn();d(e,o)},$$slots:{default:!0}});var l=X(n,2),r=v(l);Vi(v(r),{onclick:()=>g(t).name="",onblur:()=>{""===g(t).name&&(g(t).name="Slot ".concat(o+1))},input$onkeydown:e=>{"Enter"===e.key&&T(o)},class:"textbox-mini",variant:"standard",get value(){return g(t).name},set value(e){g(t).name=e}}),d(e,i)};J(l,e=>{g(t).stored?e(r):e(s,!1)}),d(e,n)}),d(e,t)};J(r,e=>{g(w)?e(s):e(c,!1)});var u=X(n,2),m=v(u),f=v(m);pe(f,{style:"height: 48px",label:e=>{var t=ae("Load from Legacy Version");d(e,t)},children:(e,t)=>{ve(e,{onSMUISwitchChange:()=>p(l,1),color:"secondary",class:"switch-scale",get checked(){return g(w)},set checked(e){p(w,e,!0)}})},$$slots:{label:!0,default:!0}});var S=X(m,2),C=v(S),x=v(C);fe(x,{onclick:()=>g(l)>1?p(l,g(l)-1):p(l,11),children:(e,t)=>{var o=an();d(e,o)},$$slots:{default:!0}});var B=X(x,2),A=v(B),O=X(B,2);fe(O,{onclick:()=>g(l)<11?p(l,g(l)+1):p(l,1),children:(e,t)=>{var o=ln();d(e,o)},$$slots:{default:!0}});var k=X(u,2),M=v(k),F=v(M);me(F,{onclick:()=>p(a,"appBuildForm"),variant:"raised",children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae("Open Build Form");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(()=>{var e;return le(A,"Page ".concat(null!=(e=g(l))?e:""))}),d(e,o)},$$slots:{default:!0}});var s=X(r,2);ge(s,{children:(e,t)=>{me(e,{action:"close",children:(e,t)=>{he(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=ae("Close");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var x=X(C,2),B=e=>{const t=ee(()=>"dlgCommon"===g(a));Ui(e,{get open(){return g(t)},onclose:()=>p(a,"none"),get title(){return i.title},get context(){return i.context},closeHandler:e=>{"accept"===e.detail.action&&i.action()}})},A=(e,t)=>{var o=e=>{const t=ee(()=>"appBuildForm"===g(a));!function(e,t){n(t,!0);let o=f(t,"open",7),i=m(void 0),a=m(void 0),l=m("");function r(){let e=[],t=Array.from(Bt.keys());t.sort((e,t)=>{let o=Mt.get(e),i=Mt.get(t);return void 0!==o&&void 0!==i?o.row.index!==i.row.index?o.row.index-i.row.index:o.choice.index-i.choice.index:0});for(let o=0;o<t.length;o++){let i=Mt.get(t[o]);void 0!==i&&e.push(i.choice.title)}return e.join(", ")}ce(e,{surface$style:"width: 1920px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=Gi(),n=$(o);de(n,{class:"px-3 pb-0 toolbar toolbar__dialog",tabindex:0,autofocus:!0,children:(e,t)=>{var o=ae("Build Form");d(e,o)},$$slots:{default:!0}});var s=X(n,2);ue(s,{children:(e,t)=>{var o=zi(),n=v(o),s=v(n);const u=ee(r);c(Vi(s,{textarea:!0,get value(){return g(u)},label:"Current Activated Choices Titles",variant:"filled",input$rows:5}),e=>p(i,e,!0),()=>g(i));var m=X(n,2),h=v(m);const f=ee(no);c(Vi(h,{textarea:!0,get value(){return g(f)},label:"Current Activated Choices ID's",variant:"filled",input$rows:5}),e=>p(a,e,!0),()=>g(a));var b=X(m,2),w=v(b);Vi(w,{textarea:!0,label:"Area To Import Activated Choices With Lists Of Id's",variant:"filled",input$rows:5,get value(){return g(l)},set value(e){p(l,e,!0)}});var T=X(w,2);me(T,{onclick:()=>Eo(g(l)),variant:"raised",children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae("Import Choices/Clean if empty");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var u=X(s,2);ge(u,{children:(e,t)=>{me(e,{action:"close",children:(e,t)=>{he(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=ae("Cancel");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),u()}(e,{get open(){return g(t)},onclose:()=>p(a,"none")})};J(e,e=>{"appBuildForm"===g(a)&&e(o)},t)};J(x,e=>{"dlgCommon"===g(a)?e(B):e(A,!1)}),d(e,S),u()}var un=r('<div class="col"><!></div>'),gn=r('<div class="col"><!></div>');function mn(e,t){n(t,!0);let o=ee(()=>{let e=Rt.get(t.required.reqId);return void 0!==e&&void 0!==app.globalRequirements?e.requireds:[]}),i=ee(()=>!!t.required.showRequired&&(!t.required.hideRequired||(t.required.requireds.length>0?xo(t.required.requireds)&&!Co(t.required):!Co(t.required))));var a=P(),l=$(a),r=e=>{var i=P(),n=$(i),a=e=>{var i=P(),n=$(i);be(n,17,()=>g(o),we,(e,o)=>{var i=P(),n=$(i),a=e=>{var i=un(),n=v(i);s(n,()=>Te.sanitize(To(lo(g(o))),Nt)),I(()=>Ie(i,t.scoreText)),d(e,i)};J(n,e=>{g(o).showRequired&&e(a)}),d(e,i)}),d(e,i)},l=e=>{var o=gn(),i=v(o);s(i,()=>Te.sanitize(To(lo(t.required)),Nt)),I(()=>Ie(o,t.scoreText)),d(e,o)};J(n,e=>{"gid"===t.required.type?e(a):e(l,!1)}),d(e,i)};J(l,e=>{g(i)&&e(r)}),d(e,a),u()}var hn=r('<img alt=""/>'),pn=r('<img alt=""/>'),vn=r('<h3 class="m-0"><!></h3>'),fn=r('<img alt=""/>'),bn=r('<img alt=""/>'),wn=r('<p class="mb-0"><!></p>'),Tn=r('<img alt=""/>'),In=r('<img alt=""/>'),yn=r('<span class="m-0"><!> <!> <!> <!> <!> <!></span>'),Sn=r('<img alt=""/>'),Cn=r('<img alt=""/>'),xn=r('<h2 class="mb-0"><!></h2>'),Bn=r('<p class="mb-0"><!></p>'),An=r('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!></div>',1),On=r('<h2 class="mb-0"><!></h2>'),kn=r('<p class="mb-0"><!></p>'),Mn=r('<img alt=""/>'),Fn=r('<img alt=""/>'),Rn=r('<div class="col p-0 text-center"><!> <!> <!></div> <div class="col p-0 text-center"><!></div>',1),Dn=r('<div class="row m-0 p-0 w-100"><!></div>'),jn=r('<div class="text-center"><!></div>');function Pn(e,t){n(t,!0);let o=f(t,"windowWidth",3,0),i=f(t,"preloadImages",3,!1),a=ee(()=>void 0!==t.choice&&t.choice.isActive),l=ee(()=>Io("privateAddonImageIsOn",t.row,t.choice)),r=ee(()=>Io("privateAddonIsOn",t.row,t.choice)),c=ee(()=>Io("privateFilterIsOn",t.row,t.choice)),m=ee(()=>Io("privateObjectImageIsOn",t.row,t.choice)),h=ee(()=>Io("privateObjectIsOn",t.row,t.choice)),p=ee(()=>Io("privateTextIsOn",t.row,t.choice)),b=ee(()=>xo(t.addon.requireds)),w=ee(()=>void 0!==g(l).addonImageBoxWidth?g(l).addonImageBoxWidth:50),T=ee(()=>{let e=g(r).useAddonDesign,o=(e?g(r).addonBorderRadiusIsPixels:g(h).objectBorderRadiusIsPixels)?"px":"%",i=0,n=0,l=0,s=[];if(e){if(g(r).addonBorderImage&&s.push("border-image: url('".concat(g(r).addonBorderImage,"') ").concat(g(r).addonBorderImageSliceTop," ").concat(g(r).addonBorderImageSliceRight," ").concat(g(r).addonBorderImageSliceBottom," ").concat(g(r).addonBorderImageSliceLeft," / ").concat(g(r).addonBorderImageWidth,"px ").concat(g(r).addonBorderImageRepeat,"; border-style: solid; padding: ").concat(g(r).addonBorderImageWidth,"px;")),g(r).useAddonBackgroundImage&&g(r).addonBackgroundImage&&(s.push("background-image: url('".concat(g(r).addonBackgroundImage,"'); ").concat(g(r).isObjectBackgroundRepeat?"background-repeat: repeat;":g(r).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),i=s.length),g(r).addonBgColorIsOn&&(s.push("background-color: ".concat(Bi(g(r).addonBgColor),";")),n=s.length),s.push("margin: ".concat(g(r).addonMargin,"px;")),s.push("border-radius: ".concat(g(r).addonBorderRadiusTopLeft).concat(o," ").concat(g(r).addonBorderRadiusTopRight).concat(o," ").concat(g(r).addonBorderRadiusBottomRight).concat(o," ").concat(g(r).addonBorderRadiusBottomLeft).concat(o,";")),g(r).addonOverflowIsOn&&s.push("overflow: hidden;"),g(r).addonBorderIsOn||g(a)&&g(c).selBorderColorIsOn||!t.isEnabled&&g(c).reqBorderColorIsOn){let e=g(r).addonBorderColor;!t.isEnabled&&g(c).reqBorderColorIsOn?e=g(c).reqFilterBorderColor:g(a)&&g(c).selBorderColorIsOn&&(e=g(c).selFilterBorderColor),s.push("border: ".concat(g(r).addonBorderWidth,"px ").concat(g(r).addonBorderStyle," ").concat(Bi(e),";"))}g(r).addonDropShadowIsOn&&(g(r).addonUseBoxShadowIsOn?s.push("box-shadow: ".concat(g(r).addonDropShadowH,"px ").concat(g(r).addonDropShadowV,"px ").concat(g(r).addonDropShadowBlur,"px ").concat(Bi(g(r).addonDropShadowColor),";")):(l=s.length,s.push("filter: drop-shadow(".concat(g(r).addonDropShadowH,"px ").concat(g(r).addonDropShadowV,"px ").concat(g(r).addonDropShadowBlur,"px ").concat(Bi(g(r).addonDropShadowColor),")")))),0===l&&(s.push("filter:"),l=s.length),t.isEnabled&&g(b)&&(g(a)?(g(c).selFilterBlurIsOn&&s.push(" blur(".concat(g(c).selFilterBlur,"px)")),g(c).selFilterBrightIsOn&&s.push(" brightness(".concat(g(c).selFilterBright,"%)")),g(c).selFilterContIsOn&&s.push(" contrast(".concat(g(c).selFilterCont,"%)")),g(c).selFilterGrayIsOn&&s.push(" grayscale(".concat(g(c).selFilterGray,"%)")),g(c).selFilterHueIsOn&&s.push(" hue-rotate(".concat(g(c).selFilterHue,"deg)")),g(c).selFilterInvertIsOn&&s.push(" invert(".concat(g(c).selFilterInvert,"%)")),g(c).selFilterOpacIsOn&&s.push(" opacity(".concat(g(c).selFilterOpac,"%)")),g(c).selFilterSaturIsOn&&s.push(" saturate(".concat(g(c).selFilterSatur,")")),g(c).selFilterSepiaIsOn&&s.push(" sepia(".concat(g(c).selFilterGray,"%)"))):(g(c).unselFilterBlurIsOn&&s.push(" blur(".concat(g(c).unselFilterBlur,"px)")),g(c).unselFilterBrightIsOn&&s.push(" brightness(".concat(g(c).unselFilterBright,"%)")),g(c).unselFilterContIsOn&&s.push(" contrast(".concat(g(c).unselFilterCont,"%)")),g(c).unselFilterGrayIsOn&&s.push(" grayscale(".concat(g(c).unselFilterGray,"%)")),g(c).unselFilterHueIsOn&&s.push(" hue-rotate(".concat(g(c).unselFilterHue,"deg)")),g(c).unselFilterInvertIsOn&&s.push(" invert(".concat(g(c).unselFilterInvert,"%)")),g(c).unselFilterOpacIsOn&&s.push(" opacity(".concat(g(c).unselFilterOpac,"%)")),g(c).unselFilterSaturIsOn&&s.push(" saturate(".concat(g(c).unselFilterSatur,")")),g(c).unselFilterSepiaIsOn&&s.push(" sepia(".concat(g(c).unselFilterGray,"%)"))),s.length===l?s.splice(l-1,1):s.push(";")),g(r).addonGradientIsOn&&s.push("background-image: linear-gradient(".concat(g(r).addonGradient,");"))}return(app.showAllAddons>0||t.addon.showAddon)&&t.isEnabled&&!g(b)&&(0===l&&(s.push("filter:"),l=s.length),g(c).reqFilterBlurIsOn&&s.push(" blur(".concat(g(c).reqFilterBlur,"px)")),g(c).reqFilterBrightIsOn&&s.push(" brightness(".concat(g(c).reqFilterBright,"%)")),g(c).reqFilterContIsOn&&s.push(" contrast(".concat(g(c).reqFilterCont,"%)")),g(c).reqFilterGrayIsOn&&s.push(" grayscale(".concat(g(c).reqFilterGray,"%)")),g(c).reqFilterHueIsOn&&s.push(" hue-rotate(".concat(g(c).reqFilterHue,"deg)")),g(c).reqFilterInvertIsOn&&s.push(" invert(".concat(g(c).reqFilterInvert,"%)")),g(c).reqFilterOpacIsOn&&s.push(" opacity(".concat(g(c).reqFilterOpac,"%)")),g(c).reqFilterSaturIsOn&&s.push(" saturate(".concat(g(c).reqFilterSatur,")")),g(c).reqFilterSepiaIsOn&&s.push(" sepia(".concat(g(c).reqFilterGray,"%)")),s.length===l?s.splice(l-1,1):s.push(";"),g(c).reqBgColorIsOn&&(g(c).reqOverlayOnImage||(0!==n&&s.splice(n-1,1),0!==i&&s.splice(i-1,1)),s.push("background-color: ".concat(Bi(g(c).reqFilterBgColor),";"))),g(r).addonGradientIsOn&&s.push("background-image: linear-gradient(".concat(g(r).addonGradientOnReq,");"))),s.join(" ")}),y=ee(()=>{let e=[];return e.push("font-family: ".concat(g(p).addonTitle,"; font-size: ").concat(g(p).addonTitleTextSize,"%; text-align: ").concat(g(p).addonTitleAlign,";")),!t.isEnabled&&g(c).reqATitleColorIsOn?e.push("color: ".concat(Bi(g(c).reqFilterATitleColor),";")):g(a)&&g(c).selATitleColorIsOn?e.push("color: ".concat(Bi(g(c).selFilterATitleColor),";")):e.push("color: ".concat(Bi(g(p).addonTitleColor),";")),g(r).useAddonDesign?g(r).titlePaddingIsOn&&e.push("padding: ".concat(g(r).addonTextPadding,"px;")):g(h).titlePaddingIsOn&&e.push("padding: ".concat(g(h).objectTextPadding,"px;")),e.join(" ")}),S=ee(()=>{let e=[];return e.push("font-family: ".concat(g(p).addonText,"; text-align: ").concat(g(p).addonTextAlign,"; font-size: ").concat(g(p).addonTextTextSize,"%; white-space: pre-line;")),!t.isEnabled&&g(c).reqATextColorIsOn?e.push("color: ".concat(Bi(g(c).reqFilterATextColor),";")):g(a)&&g(c).selATextColorIsOn?e.push("color: ".concat(Bi(g(c).selFilterATextColor),";")):e.push("color: ".concat(Bi(g(p).addonTextColor),";")),g(r).useAddonDesign?e.push("padding: ".concat(g(r).addonTextPadding,"px;")):e.push("padding: ".concat(g(h).objectTextPadding,"px;")),e.join(" ")}),C=ee(()=>{var e,o,i,n;let a=[],r=g(l).useAddonImage,s=(r?g(l).addonImgBorderRadiusIsPixels:g(m).objectImgBorderRadiusIsPixels)?"px":"%";return r?(a.push("width: ".concat(g(l).addonImageWidth,"%; margin-top: ").concat(g(l).addonImageMarginTop,"%; margin-bottom: ").concat(g(l).addonImageMarginBottom,"%;")),g(l).addonImgObjectFillIsOn&&(null==(e=t.choice)?void 0:e.addonImgObjectFillHeight)&&a.push("object-fit: ".concat(g(l).addonImgObjectFillStyle,"; height: ").concat(null==(o=t.choice)?void 0:o.addonImgObjectFillHeight,"px;")),a.push("border-radius: ".concat(g(l).addonImgBorderRadiusTopLeft).concat(s," ").concat(g(l).addonImgBorderRadiusTopRight).concat(s," ").concat(g(l).addonImgBorderRadiusBottomRight).concat(s," ").concat(g(l).addonImgBorderRadiusBottomLeft).concat(s,";")),g(l).addonImgOverflowIsOn&&a.push("overflow: hidden;"),g(l).addonImgBorderIsOn&&a.push("border: ".concat(g(l).addonImgBorderWidth,"px ").concat(g(l).addonImgBorderStyle," ").concat(Bi(g(l).addonImgBorderColor),";"))):(a.push("width: ".concat(g(m).objectImageWidth,"%; margin-top: ").concat(g(m).objectImageMarginTop,"%; margin-bottom: ").concat(g(m).objectImageMarginBottom,"%;")),g(m).objectImgObjectFillIsOn&&(null==(i=t.row)?void 0:i.objectImgObjectFillHeight)&&a.push("object-fit: ".concat(g(m).objectImgObjectFillStyle,"; height: ").concat(null==(n=t.row)?void 0:n.objectImgObjectFillHeight,"px;")),a.push("border-radius: ".concat(g(m).objectImgBorderRadiusTopLeft).concat(s," ").concat(g(m).objectImgBorderRadiusTopRight).concat(s," ").concat(g(m).objectImgBorderRadiusBottomRight).concat(s," ").concat(g(m).objectImgBorderRadiusBottomLeft).concat(s,";")),g(m).objectImgOverflowIsOn&&a.push("overflow: hidden;"),g(m).objectImgBorderIsOn&&a.push("border: ".concat(g(m).objectImgBorderWidth,"px ").concat(g(m).objectImgBorderStyle," ").concat(Bi(g(m).objectImgBorderColor),";"))),a.join(" ")}),x=ee(()=>"font-family: ".concat(g(p).scoreText,"; font-size: ").concat(g(p).scoreTextSize,"%; text-align: ").concat(g(p).scoreTextAlign,"; color: ").concat(Bi(g(p).scoreTextColor),";"));var B=P(),A=$(B),O=e=>{var n=jn(),a=v(n),l=e=>{var n=yn(),a=v(n),l=e=>{var o=P(),n=$(o),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var n=hn();I(()=>{ye(n,"src",t.addon.image),Ie(n,g(C)),ye(n,"loading",i()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var o=pn();I(()=>{ye(o,"src",t.addon.image),Ie(o,g(C)),ye(o,"loading",i()?"eager":"lazy")}),d(e,o)};J(n,e=>{t.addon.imageSourceTooltip?e(a):e(l,!1)}),d(e,o)};J(a,e=>{var i;(1===t.addon.template||o()<=960)&&t.addon.image&&!(null==(i=t.row)?void 0:i.addonImageRemoved)&&e(l)});var r=X(a,2),c=e=>{var o=vn(),i=v(o);s(i,()=>Te.sanitize(To(t.addon.title),Nt)),I(()=>Ie(o,g(y))),d(e,o)};J(r,e=>{var o;""===t.addon.title||(null==(o=t.row)?void 0:o.addonTitleRemoved)||e(c)});var u=X(r,2),m=e=>{var o=P(),i=$(o);be(i,17,()=>t.addon.requireds,we,(e,t)=>{mn(e,{get required(){return g(t)},get scoreText(){return g(x)}})}),d(e,o)};J(u,e=>{var o;(null==(o=t.row)?void 0:o.objectRequirementRemoved)||e(m)});var h=X(u,2),p=e=>{var o=P(),n=$(o),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var n=fn();I(()=>{ye(n,"src",t.addon.image),Ie(n,g(C)),ye(n,"loading",i()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var o=bn();I(()=>{ye(o,"src",t.addon.image),Ie(o,g(C)),ye(o,"loading",i()?"eager":"lazy")}),d(e,o)};J(n,e=>{t.addon.imageSourceTooltip?e(a):e(l,!1)}),d(e,o)};J(h,e=>{var o;5===t.addon.template&&t.addon.image&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(p)});var f=X(h,2),b=e=>{var o=wn(),i=v(o);s(i,()=>Te.sanitize(To(t.addon.text),Nt)),I(()=>Ie(o,g(S))),d(e,o)};J(f,e=>{var o;""===t.addon.text||(null==(o=t.row)?void 0:o.addonTextRemoved)||e(b)});var w=X(f,2),T=e=>{var o=P(),n=$(o),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var n=Tn();I(()=>{ye(n,"src",t.addon.image),Ie(n,g(C)),ye(n,"loading",i()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var o=In();I(()=>{ye(o,"src",t.addon.image),Ie(o,g(C)),ye(o,"loading",i()?"eager":"lazy")}),d(e,o)};J(n,e=>{t.addon.imageSourceTooltip?e(a):e(l,!1)}),d(e,o)};J(w,e=>{var o;4===t.addon.template&&t.addon.image&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(T)}),d(e,n)},r=e=>{var o=Dn(),n=v(o),a=e=>{var o=An(),n=$(o),a=v(n),l=e=>{var o=P(),n=$(o),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var n=Sn();I(()=>{ye(n,"src",t.addon.image),Ie(n,g(C)),ye(n,"loading",i()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var o=Cn();I(()=>{ye(o,"src",t.addon.image),Ie(o,g(C)),ye(o,"loading",i()?"eager":"lazy")}),d(e,o)};J(n,e=>{t.addon.imageSourceTooltip?e(a):e(l,!1)}),d(e,o)};J(a,e=>{var o;t.addon.image&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(l)});var r=X(n,2),c=v(r),u=e=>{var o=xn(),i=v(o);s(i,()=>Te.sanitize(To(t.addon.title),Nt)),I(()=>Ie(o,g(y))),d(e,o)};J(c,e=>{var o;""===t.addon.title||(null==(o=t.row)?void 0:o.addonTitleRemoved)||e(u)});var m=X(c,2),h=e=>{var o=P(),i=$(o);be(i,17,()=>t.addon.requireds,we,(e,t)=>{mn(e,{get required(){return g(t)},get scoreText(){return g(x)}})}),d(e,o)};J(m,e=>{var o;(null==(o=t.row)?void 0:o.objectRequirementRemoved)||e(h)});var p=X(m,2),f=e=>{var o=Bn(),i=v(o);s(i,()=>Te.sanitize(To(t.addon.text),Nt)),I(()=>Ie(o,g(S))),d(e,o)};J(p,e=>{var o;""===t.addon.text||(null==(o=t.row)?void 0:o.addonTextRemoved)||e(f)}),I(()=>{var e;Ie(n,"max-width: ".concat(null!=(e=g(w))?e:"","%")),Ie(r,"max-width: ".concat(100-g(w),"%"))}),d(e,o)},l=(e,o)=>{var n=e=>{var o=Rn(),n=$(o),a=v(n),l=e=>{var o=On(),i=v(o);s(i,()=>Te.sanitize(To(t.addon.title),Nt)),I(()=>Ie(o,g(y))),d(e,o)};J(a,e=>{var o;""===t.addon.title||(null==(o=t.row)?void 0:o.addonTitleRemoved)||e(l)});var r=X(a,2),c=e=>{var o=P(),i=$(o);be(i,17,()=>t.addon.requireds,we,(e,t)=>{mn(e,{get required(){return g(t)},get scoreText(){return g(x)}})}),d(e,o)};J(r,e=>{var o;(null==(o=t.row)?void 0:o.objectRequirementRemoved)||e(c)});var u=X(r,2),m=e=>{var o=kn(),i=v(o);s(i,()=>Te.sanitize(To(t.addon.text),Nt)),I(()=>Ie(o,g(S))),d(e,o)};J(u,e=>{var o;""===t.addon.text||(null==(o=t.row)?void 0:o.addonTextRemoved)||e(m)});var h=X(n,2),p=v(h),f=e=>{var o=P(),n=$(o),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.addon.imageSourceTooltip},children:(e,o)=>{var n=Mn();I(()=>{ye(n,"src",t.addon.image),Ie(n,g(C)),ye(n,"loading",i()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var o=Fn();I(()=>{ye(o,"src",t.addon.image),Ie(o,g(C)),ye(o,"loading",i()?"eager":"lazy")}),d(e,o)};J(n,e=>{t.addon.imageSourceTooltip?e(a):e(l,!1)}),d(e,o)};J(p,e=>{var o;t.addon.image&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(f)}),I(()=>{var e;Ie(n,"max-width: ".concat(100-g(w),"%")),Ie(h,"max-width: ".concat(null!=(e=g(w))?e:"","%"))}),d(e,o)};J(e,e=>{3===t.addon.template&&e(n)},o)};J(n,e=>{2===t.addon.template?e(a):e(l,!1)}),d(e,o)};J(a,e=>{t.addon.template>=4||1===t.addon.template||o()<=960?e(l):e(r,!1)}),I(()=>Ie(n,g(T))),d(e,n)};J(A,e=>{(app.showAllAddons>0||t.addon.showAddon||xo(t.addon.requireds))&&e(O)}),d(e,B),u()}var $n=r('<i class="mdi mdi-minus"></i>'),qn=r('<i class="mdi mdi-plus"></i>'),Vn=r('<div class="px-5 w-100"><!></div>'),Ln=r('<div class="d-row justify-space-around w-100"><!> <div translate="no"> </div> <!></div> <!>',1);function Nn(e,t){n(t,!0);let o=m(0),i=ee(()=>{if(t.choice.isMultipleUseVariable)return t.choice.multipleUseVariable;if(void 0!==t.choice.multipleScoreId){let e=Ot.get(t.choice.multipleScoreId);if(void 0!==e)return e.startingSum}return 0});function l(e){e.stopPropagation(),t.selectedOneMore()}function r(e){e.stopPropagation(),t.selectedOneLess()}function s(){var e;const n=g(o)-g(i);for(let o=0;o<Math.abs(n);o++)n>0?t.selectedOneMore():t.selectedOneLess();null==(e=document.activeElement)||e.blur()}a(()=>{t.choice.useSlider&&p(o,g(i),!0)});var c=P(),h=$(c),f=e=>{var n=Ln(),a=$(n),c=v(a);const u=ee(()=>!t.isEnabled);fe(c,{class:"counter-icons",get disabled(){return g(u)},onclick:r,children:(e,o)=>{var i=$n();I(()=>Ie(i,t.multiChoiceButton)),d(e,i)},$$slots:{default:!0}});var m=X(c,2),h=v(m),f=X(m,2);const b=ee(()=>!t.isEnabled);fe(f,{class:"counter-icons",get disabled(){return g(b)},onclick:l,children:(e,o)=>{var i=qn();I(()=>Ie(i,t.multiChoiceButton)),d(e,i)},$$slots:{default:!0}});var w=X(a,2),T=e=>{var i=Vn(),n=v(i);const a=ee(()=>!t.isEnabled);Se(n,{get min(){return t.choice.numMultipleTimesMinus},get max(){return t.choice.numMultipleTimesPluss},step:1,class:"mx-2",onpointerup:s,get disabled(){return g(a)},discrete:!0,get value(){return g(o)},set value(e){p(o,e,!0)}}),d(e,i)};J(w,e=>{t.choice.useSlider&&e(T)}),I(()=>{Ie(m,t.multiChoiceText),le(h,g(i))}),d(e,n)};J(h,e=>{t.choice.hideCounterUntilSelect&&0===t.choice.multipleUseVariable||e(f)}),d(e,c),u()}var Wn=r('<img class="me-1" alt=""/>'),En=r('<img class="mx-1" alt=""/>'),Un=r('<img class="mx-1" alt=""/>'),zn=r('<img class="ms-1" alt=""/>'),Gn=r("<!> <!> <!> <!> <!> <!> <!>",1),Hn=r('<div class="row m-0"><div class="col-12 p-0 m-0 d-flex align-items-center justify-center"><p class="m-0 d-flex align-items-center"><!></p></div></div>');function _n(e,t){n(t,!0);let o=ee(()=>Io("privateTextIsOn",t.row,t.choice)),i=ee(()=>Io("privateFilterIsOn",t.row,t.choice)),a=ee(()=>Ot.get(t.score.id)),l=ee(()=>xo(t.choice.requireds)),r=ee(()=>{let e=[];return e.push("".concat(t.score.afterText)),t.score.discountIsOn&&t.score.discountShow&&void 0!==t.score.discountAfterText&&e.push("".concat(t.score.discountAfterText)),e.join(" ")}),c=ee(()=>{let e=[];return e.push("".concat(t.score.beforeText)),t.score.discountIsOn&&t.score.discountShow&&void 0!==t.score.discountBeforeText&&e.push("".concat(t.score.discountBeforeText)),e.join(" ")}),m=ee(()=>t.score.hideValue?"":t.score.isRandom&&!t.score.setValue&&void 0!==t.score.maxValue?t.score.maxValue<0?"".concat(g(p)," ~ ").concat(g(f)):"".concat(g(f)," ~ ").concat(g(p)):"".concat(g(h))),h=ee(()=>{var e,o;let i=t.score.discountShow&&void 0!==t.score.discountScore?t.score.discountScore:t.score.value;if(i=Math.abs(i),i=(null==(e=g(a))?void 0:e.allowFloat)?i%1==0?i:parseFloat(i.toFixed(void 0!==g(a).decimalPlaces?g(a).decimalPlaces:2)):Math.floor(i),null==(o=g(a))?void 0:o.plussOrMinusAdded){let e=g(a).plussOrMinusInverted?g(b)?"-":"+":g(b)?"+":"-";return"".concat(e).concat(i)}return"".concat(i)}),p=ee(()=>{var e,o;if(void 0!==t.score.maxValue){let i=t.score.maxValue<0,n=Math.abs(t.score.maxValue);if(n=(null==(e=g(a))?void 0:e.allowFloat)?n%1==0?n:parseFloat(n.toFixed(void 0!==g(a).decimalPlaces?g(a).decimalPlaces:2)):Math.floor(n),null==(o=g(a))?void 0:o.plussOrMinusAdded){let e=g(a).plussOrMinusInverted?i?"-":"+":i?"+":"-";return"".concat(e).concat(n)}return"".concat(n)}return""}),f=ee(()=>{var e,o;if(void 0!==t.score.minValue){let i=t.score.minValue<0,n=Math.abs(t.score.minValue);if(n=(null==(e=g(a))?void 0:e.allowFloat)?n%1==0?n:parseFloat(n.toFixed(void 0!==g(a).decimalPlaces?g(a).decimalPlaces:2)):Math.floor(n),null==(o=g(a))?void 0:o.plussOrMinusAdded){let e=g(a).plussOrMinusInverted?i?"-":"+":i?"+":"-";return"".concat(e).concat(n)}return"".concat(n)}return""}),b=ee(()=>t.score.discountShow?(void 0!==t.score.discountScore?t.score.discountScore:t.score.value)<0:t.score.value<0),w=ee(()=>{var e;let n=[];return n.push("font-family: ".concat(g(o).scoreText,"; font-size: ").concat(g(o).scoreTextSize,"%; text-align: ").concat(g(o).scoreTextAlign,";")),(null==(e=g(a))?void 0:e.pointColorsIsOn)?g(b)?n.push("color: ".concat(Bi(g(a).positiveColor),";")):n.push("color: ".concat(Bi(g(a).negativeColor),";")):n.push("color: ".concat(Bi(g(o).scoreTextColor),";")),g(l)?t.choice.isActive&&g(i).selScoreTextColorIsOn&&n.push("color: ".concat(Bi(g(i).selFilterSTextColor))):g(i).reqScoreTextColorIsOn&&n.push("color: ".concat(Bi(g(i).reqFilterSTextColor))),n.join(" ")}),T=ee(()=>{var e;return(null==(e=g(a))?void 0:e.negativeIconIsOn)&&g(b)}),y=ee(()=>{var e,t;return g(T)?null==(e=g(a))?void 0:e.negativeImageSidePlacement:null==(t=g(a))?void 0:t.imageSidePlacement}),S=ee(()=>{var e,t;return g(T)?null==(e=g(a))?void 0:e.negativeImageOnSide:null==(t=g(a))?void 0:t.imageOnSide}),C=ee(()=>{var e,t;return(g(T)?null==(e=g(a))?void 0:e.negativeImage:null==(t=g(a))?void 0:t.image)||""}),x=ee(()=>{var e,t;return(g(T)?null==(e=g(a))?void 0:e.negativeIconWidth:null==(t=g(a))?void 0:t.iconWidth)||0}),B=ee(()=>{var e,t;return(g(T)?null==(e=g(a))?void 0:e.negativeIconHeight:null==(t=g(a))?void 0:t.iconHeight)||0}),A=ee(()=>!g(y)&&!g(S)),O=ee(()=>!g(y)&&g(S)),k=ee(()=>g(y)&&!g(S)),M=ee(()=>g(y)&&g(S));var F=P(),R=$(F),D=e=>{var t=Hn(),o=v(t),i=v(o),n=v(i),l=e=>{var t=Gn(),o=$(t),i=e=>{var t=Wn();I(()=>{var e,o;ye(t,"src",g(C)),Ie(t,"width: ".concat(null!=(e=g(x))?e:"","px; height: ").concat(null!=(o=g(B))?o:"","px;"))}),d(e,t)};J(o,e=>{g(A)&&e(i)});var n=X(o,2);s(n,()=>Te.sanitize(g(c),Nt));var a=X(n,2),l=e=>{var t=En();I(()=>{var e,o;ye(t,"src",g(C)),Ie(t,"width: ".concat(null!=(e=g(x))?e:"","px; height: ").concat(null!=(o=g(B))?o:"","px;"))}),d(e,t)};J(a,e=>{g(O)&&e(l)});var u=X(a,2);s(u,()=>Te.sanitize(g(m),Nt));var h=X(u,2),p=e=>{var t=Un();I(()=>{var e,o;ye(t,"src",g(C)),Ie(t,"width: ".concat(null!=(e=g(x))?e:"","px; height: ").concat(null!=(o=g(B))?o:"","px;"))}),d(e,t)};J(h,e=>{g(k)&&e(p)});var v=X(h,2);s(v,()=>Te.sanitize(g(r),Nt));var f=X(v,2),b=e=>{var t=zn();I(()=>{var e,o;ye(t,"src",g(C)),Ie(t,"width: ".concat(null!=(e=g(x))?e:"","px; height: ").concat(null!=(o=g(B))?o:"","px;"))}),d(e,t)};J(f,e=>{g(M)&&e(b)}),d(e,t)},u=e=>{var t=P(),o=$(t);s(o,()=>Te.sanitize("".concat(g(c)," ").concat(g(m)," ").concat(g(r)),Nt)),d(e,t)};J(n,e=>{var t;(null==(t=g(a))?void 0:t.iconIsOn)?e(l):e(u,!1)}),I(()=>Ie(o,g(w))),d(e,t)};J(R,e=>{(function(){if(t.score.showScore){if(void 0!==g(a)&&g(a).isNotShownObjects){if(void 0!==g(a).activatedId&&""!==g(a).activatedId){let e=Rt.get(g(a).activatedId),t=jt.get(g(a).activatedId);return void 0!==e?xo(e.requireds):void 0!==t?t.isTrue:So(g(a).activatedId)}return!1}return!0}return!1})()&&xo(t.score.requireds)&&e(D)}),d(e,F),u()}var Yn=r('<div class="col-12"><!></div>'),Zn=r('<img alt=""/>'),Jn=r('<img alt=""/>'),Xn=r('<h3 class="m-0"><!></h3>'),Kn=r('<img alt=""/>'),Qn=r('<img alt=""/>'),ea=r('<p class="mb-0"><!></p>'),ta=r('<img alt=""/>'),oa=r('<img alt=""/>'),ia=r('<span class="d-column w-100 p-0 align-items-center"><!> <!> <span class="w-100"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></span> <div></div> <!></span>'),na=r('<img alt=""/>'),aa=r('<img alt=""/>'),la=r('<h2 class="mb-0"><!></h2>'),ra=r('<p class="mb-0"><!></p>'),sa=r("<div></div> <!>",1),ca=r('<div class="col-12 text-center"><div></div> <!></div>'),da=r('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!>',1),ua=r('<h2 class="mb-0"><!></h2>'),ga=r('<p class="mb-0"><!></p>'),ma=r("<div></div> <!>",1),ha=r('<img alt=""/>'),pa=r('<img alt=""/>'),va=r('<div class="col-12 text-center"><div></div> <!></div>'),fa=r('<div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div> <!>',1),ba=r("<div><span><span><!></span></span></div>"),wa=r("<!> <!>",1);function Ta(e,t){n(t,!0);const[o,i]=xe(),a=()=>Be(Xt,"$winWidth",o),l=f(t,"preloadImages",3,!1),r=[],c={choice:null,row:null,context:"",prevText:"",isWord:!0};let h=ee(()=>Io("privateBackgroundIsOn",t.row,t.choice)),b=ee(()=>Io("privateFilterIsOn",t.row,t.choice)),w=ee(()=>Io("privateMultiChoiceIsOn",t.row,t.choice)),T=ee(()=>Io("privateObjectImageIsOn",t.row,t.choice)),x=ee(()=>Io("privateObjectIsOn",t.row,t.choice)),B=ee(()=>Io("privateTextIsOn",t.row,t.choice)),A=ee(()=>void 0!==g(T).objectImageBoxWidth?g(T).objectImageBoxWidth:50),O=m("none"),M=!1,F=ee(()=>xo(t.choice.requireds)),R=ee(()=>t.choice.addonJustify?"justify-".concat(t.choice.addonJustify):""),D=ee(()=>t.choice.isActive),j=ee(()=>g(x).objectHeight),q=ee(()=>{if(t.row.isResultRow){const e=Mt.get(t.choice.id);if(void 0!==e)return e.row}return t.row}),V=ee(()=>{let e=[];return e.push("font-family: ".concat(g(B).objectTitle,";font-size: ").concat(g(B).objectTitleTextSize,"%;text-align: ").concat(g(B).objectTitleAlign,";")),!g(F)&&g(b).reqCTitleColorIsOn?e.push("color: ".concat(Bi(g(b).reqFilterCTitleColor),";")):g(D)&&g(b).selCTitleColorIsOn?e.push("color: ".concat(Bi(g(b).selFilterCTitleColor),";")):e.push("color: ".concat(Bi(g(B).objectTitleColor),";")),g(x).titlePaddingIsOn&&e.push("padding: ".concat(g(x).objectTextPadding,"px;")),e.join(" ")}),L=ee(()=>"font-family: ".concat(g(w).multiChoiceTextFont,"; color: ").concat(Bi(g(B).scoreTextColor),"; font-size: ").concat(g(w).multiChoiceTextSize,"%; align-content: center;")),N=ee(()=>"font-size: ".concat(g(w).multiChoiceCounterSize,"%; color: ").concat(Bi(g(B).scoreTextColor),";")),W=ee(()=>!t.choice.hideMultipleCounter||g(F)),E=ee(()=>{let e=[];return e.push("font-family: ".concat(g(B).objectText,";text-align: ").concat(g(B).objectTextAlign,";font-size: ").concat(g(B).objectTextTextSize,"%;white-space: pre-line;")),!g(F)&&g(b).reqCTextColorIsOn?e.push("color: ".concat(Bi(g(b).reqFilterCTextColor),";")):g(D)&&g(b).selCTextColorIsOn?e.push("color: ".concat(Bi(g(b).selFilterCTextColor),";")):e.push("color: ".concat(Bi(g(B).objectTextColor),";")),e.push("padding: ".concat(g(x).objectTextPadding,"px;")),e.join(" ")}),U=ee(()=>{const e=g(x).objectBorderRadiusIsPixels?"px":"%";let o=0,i=0,n=0,a=[];if(g(x).objectBorderImage&&a.push("border-image: url('".concat(g(x).objectBorderImage,"') ").concat(g(x).objectBorderImageSliceTop," ").concat(g(x).objectBorderImageSliceRight," ").concat(g(x).objectBorderImageSliceBottom," ").concat(g(x).objectBorderImageSliceLeft," / ").concat(g(x).objectBorderImageWidth,"px ").concat(g(x).objectBorderImageRepeat,"; border-style: solid; padding: ").concat(g(x).objectBorderImageWidth,"px;")),g(h).objectBackgroundImage&&(a.push("background-image: url('".concat(g(h).objectBackgroundImage,"'); ").concat(g(h).isObjectBackgroundRepeat?"background-repeat: repeat;":g(h).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),o=a.length),g(h).objectBgColorIsOn&&(a.push("background-color: ".concat(Bi(g(h).objectBgColor),";")),i=a.length),a.push("margin: ".concat(g(x).objectMargin,"px;")),a.push("border-radius: ".concat(g(x).objectBorderRadiusTopLeft).concat(e," ").concat(g(x).objectBorderRadiusTopRight).concat(e," ").concat(g(x).objectBorderRadiusBottomRight).concat(e," ").concat(g(x).objectBorderRadiusBottomLeft).concat(e,";")),g(x).objectOverflowIsOn&&a.push("overflow: hidden;"),g(x).objectBorderIsOn||g(D)&&g(b).selBorderColorIsOn||!g(F)&&g(b).reqBorderColorIsOn){let e=g(x).objectBorderColor;!g(F)&&g(b).reqBorderColorIsOn?e=g(b).reqFilterBorderColor:g(D)&&g(b).selBorderColorIsOn&&(e=g(b).selFilterBorderColor),a.push("border: ".concat(g(x).objectBorderWidth,"px ").concat(g(x).objectBorderStyle," ").concat(Bi(e),";"))}return g(x).objectDropShadowIsOn&&(g(x).objectUseBoxShadowIsOn?a.push("box-shadow: ".concat(g(x).objectDropShadowH,"px ").concat(g(x).objectDropShadowV,"px ").concat(g(x).objectDropShadowBlur,"px ").concat(Bi(g(x).objectDropShadowColor),";")):(n=a.length,a.push("filter: drop-shadow(".concat(g(x).objectDropShadowH,"px ").concat(g(x).objectDropShadowV,"px ").concat(g(x).objectDropShadowBlur,"px ").concat(Bi(g(x).objectDropShadowColor),")")))),0===n&&(a.push("filter:"),n=a.length),g(F)?(g(D)?(g(b).selFilterBlurIsOn&&a.push(" blur(".concat(g(b).selFilterBlur,"px)")),g(b).selFilterBrightIsOn&&a.push(" brightness(".concat(g(b).selFilterBright,"%)")),g(b).selFilterContIsOn&&a.push(" contrast(".concat(g(b).selFilterCont,"%)")),g(b).selFilterGrayIsOn&&a.push(" grayscale(".concat(g(b).selFilterGray,"%)")),g(b).selFilterHueIsOn&&a.push(" hue-rotate(".concat(g(b).selFilterHue,"deg)")),g(b).selFilterInvertIsOn&&a.push(" invert(".concat(g(b).selFilterInvert,"%)")),g(b).selFilterOpacIsOn&&a.push(" opacity(".concat(g(b).selFilterOpac,"%)")),g(b).selFilterSaturIsOn&&a.push(" saturate(".concat(g(b).selFilterSatur,")")),g(b).selFilterSepiaIsOn&&a.push(" sepia(".concat(g(b).selFilterGray,"%)")),a.length===n?a.splice(n-1,1):a.push(";"),g(b).selBgColorIsOn&&(0!==i&&a.splice(i-1,1),g(b).selOverlayOnImage||0!==o&&a.splice(o-1,1),a.push("background-color: ".concat(Bi(g(b).selFilterBgColor),";"))),g(x).objectGradientIsOn&&a.push("background-image: linear-gradient(".concat(g(x).objectGradientOnSelect,");"))):(g(b).unselFilterBlurIsOn&&a.push(" blur(".concat(g(b).unselFilterBlur,"px)")),g(b).unselFilterBrightIsOn&&a.push(" brightness(".concat(g(b).unselFilterBright,"%)")),g(b).unselFilterContIsOn&&a.push(" contrast(".concat(g(b).unselFilterCont,"%)")),g(b).unselFilterGrayIsOn&&a.push(" grayscale(".concat(g(b).unselFilterGray,"%)")),g(b).unselFilterHueIsOn&&a.push(" hue-rotate(".concat(g(b).unselFilterHue,"deg)")),g(b).unselFilterInvertIsOn&&a.push(" invert(".concat(g(b).unselFilterInvert,"%)")),g(b).unselFilterOpacIsOn&&a.push(" opacity(".concat(g(b).unselFilterOpac,"%)")),g(b).unselFilterSaturIsOn&&a.push(" saturate(".concat(g(b).unselFilterSatur,")")),g(b).unselFilterSepiaIsOn&&a.push(" sepia(".concat(g(b).unselFilterGray,"%)")),a.length===n?a.splice(n-1,1):a.push(";"),g(x).objectGradientIsOn&&a.push("background-image: linear-gradient(".concat(g(x).objectGradient,");"))),app.isPointerCursor&&!t.choice.isNotSelectable&&(!t.choice.isSelectableMultiple||t.choice.allowSelectByClick&&0===t.choice.multipleUseVariable)&&a.push("cursor: pointer;")):(g(b).reqFilterBlurIsOn&&a.push(" blur(".concat(g(b).reqFilterBlur,"px)")),g(b).reqFilterBrightIsOn&&a.push(" brightness(".concat(g(b).reqFilterBright,"%)")),g(b).reqFilterContIsOn&&a.push(" contrast(".concat(g(b).reqFilterCont,"%)")),g(b).reqFilterGrayIsOn&&a.push(" grayscale(".concat(g(b).reqFilterGray,"%)")),g(b).reqFilterHueIsOn&&a.push(" hue-rotate(".concat(g(b).reqFilterHue,"deg)")),g(b).reqFilterInvertIsOn&&a.push(" invert(".concat(g(b).reqFilterInvert,"%)")),g(b).reqFilterOpacIsOn&&a.push(" opacity(".concat(g(b).reqFilterOpac,"%)")),g(b).reqFilterSaturIsOn&&a.push(" saturate(".concat(g(b).reqFilterSatur,")")),g(b).reqFilterSepiaIsOn&&a.push(" sepia(".concat(g(b).reqFilterGray,"%)")),a.length===n?a.splice(n-1,1):a.push(";"),g(b).reqBgColorIsOn&&(0!==i&&a.splice(i-1,1),g(b).reqOverlayOnImage||0!==o&&a.splice(o-1,1),a.push("background-color: ".concat(Bi(g(b).reqFilterBgColor),";"))),g(x).objectGradientIsOn&&a.push("background-image: linear-gradient(".concat(g(x).objectGradientOnReq,");"))),a.join(" ")}),z=ee(()=>{let e=[];const o=g(T).objectImgBorderRadiusIsPixels?"px":"%";return e.push("width: ".concat(g(T).objectImageWidth,"%; margin-top: ").concat(g(T).objectImageMarginTop,"%; margin-bottom: ").concat(g(T).objectImageMarginBottom,"%;")),g(T).objectImgObjectFillIsOn&&e.push("object-fit: ".concat(g(T).objectImgObjectFillStyle,"; height: ").concat(t.row.objectImgObjectFillHeight,"px;")),e.push("border-radius: ".concat(g(T).objectImgBorderRadiusTopLeft).concat(o," ").concat(g(T).objectImgBorderRadiusTopRight).concat(o," ").concat(g(T).objectImgBorderRadiusBottomRight).concat(o," ").concat(g(T).objectImgBorderRadiusBottomLeft).concat(o,";")),g(T).objectImgOverflowIsOn&&e.push("overflow: hidden;"),g(T).objectImgBorderIsOn&&e.push("border: ".concat(g(T).objectImgBorderWidth,"px ").concat(g(T).objectImgBorderStyle," ").concat(Bi(g(T).objectImgBorderColor),";")),e.join(" ")}),G=ee(()=>{let e=[];return e.push("font-family: ".concat(g(B).scoreText,"; font-size: ").concat(g(B).scoreTextSize,"%; text-align: ").concat(g(B).scoreTextAlign,";")),e.push("color: ".concat(Bi(g(B).scoreTextColor),";")),g(F)?t.choice.isActive&&g(b).selScoreTextColorIsOn&&e.push("color: ".concat(Bi(g(b).selFilterSTextColor))):g(b).reqScoreTextColorIsOn&&e.push("color: ".concat(Bi(g(b).reqFilterSTextColor))),e.join(" ")}),H=[];function _(e,t,o,i){let n=!1;if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===r.indexOf(e.id)&&t.activateThisChoice.split(",").some(t=>t.split("/ON#")[0]===e.id)&&(r.push(e.id),n=!0),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss){let n=t.multipleUseVariable;if(i>0)for(let a=0;a<i;a++)le(t,o),n++,e.isAllowDeselect||(t.numMultipleTimesMinus+=1);else if(i<0)for(let a=0;a>-1*i;a++)re(t,o),n--,e.isAllowDeselect||(t.numMultipleTimesPluss-=1);if(t.multipleUseVariable!==n){const o=Math.abs(t.numMultipleTimesMinus-t.numMultipleTimesPluss);if(t.numMultipleTimesMinus>t.numMultipleTimePluss){const n=At.get(t.id);i>0?(t.numMultipleTimesMinus-=o,void 0!==n?n.multiple+=o:At.set(t.id,{multiple:o,isAllowDeselect:e.isAllowDeselect||!1})):i<0&&(void 0!==n?n.multiple-=o:At.set(t.id,{multiple:-o,isAllowDeselect:e.isAllowDeselect||!1}))}}}}else t.isActive||ie(t,o),e.isAllowDeselect||(t.forcedActivated=!0),void 0===t.activatedFrom&&(t.activatedFrom=0),n||t.activatedFrom++;t.isActive||(delete t.forcedActivated,At.set(t.id,{multiple:i,isAllowDeselect:e.isAllowDeselect||!1}))}function Y(e,t,o,i){if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===r.indexOf(e.id)&&t.activateThisChoice.split(",").some(t=>t.split("/ON#")[0]===e.id)&&r.push(e.id),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss)if(t.isActive){if(i>0)for(let n=0;n<i;n++)e.isAllowDeselect||(t.numMultipleTimesMinus-=1),e.isNotDeactivate||re(t,o);else if(i<0)for(let n=0;n>-1*i;n++)e.isAllowDeselect||(t.numMultipleTimesPluss+=1),e.isNotDeactivate||le(t,o)}else{const o=At.get(t.id);let n=0;void 0!==o?(n=o.multiple-i,0===n?At.delete(t.id):At.set(t.id,{multiple:n,isAllowDeselect:e.isAllowDeselect||!1})):At.delete(t.id)}}else void 0!==t.activatedFrom?(t.activatedFrom--,t.activatedFrom<=0&&(t.isActive?(delete t.activatedFrom,delete t.forcedActivated,e.isNotDeactivate||ne(t,o)):At.delete(t.id))):(delete t.forcedActivated,!e.isNotDeactivate&&t.isActive&&ne(t,o))}function K(e){if(void 0!==e.activateThisChoice){let t=e.activateThisChoice.split(","),o=new Map;for(let e=0;e<t.length;e++){let[i,n="0"]=t[e].split("/ON#"),a=parseInt(n),l=Ft.get(i);if(void 0!==l)for(let e=0;e<l.elements.length;e++)Bt.has(l.elements[e])||o.set(l.elements[e],a);else Bt.has(i)||o.set(i,a)}let i=[...o.keys()],n=Math.min(i.length,e.numActivateRandom||0),a=n;for(let e=i.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[i[e],i[t]]=[i[t],i[e]]}let l=[];for(let r=0;r<n;){let t=i[r],s=Mt.get(t);if(void 0!==s){let c=s.row,d=s.choice;if(_(e,d,c,o.get(t)||0),!d.isActive){if(l.length<n&&i.length>a){i[r]=i[a++],void 0!==d.activatedFrom&&(d.activatedFrom--,0===d.activatedFrom&&At.delete(d.id));continue}break}l.push(t)}r++}e.isSelectableMultiple?(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),e.activatedRandomMul[e.multipleUseVariable-1]=[...l]):e.activatedRandom=[...l]}}function Q(e,t,o,i=new Set){Array.from(Bt.entries()).forEach(([n])=>{const a=Mt.get(n);if(void 0!==a){const n=a.row,l=a.choice,r=new C;let s=!1;for(let o=0;o<l.scores.length;o++){const a=l.scores[o];if(!a.isNotRecalculatable){const o=Ot.get(a.id);if(void 0!==o){if(e.discountOther&&a.isChangeDiscount&&void 0!==a.tmpDisScore){const t=l.multipleUseVariable;if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){for(let e=t-1;e>=0;e--)l.isActive&&(o.belowZeroNotAllowed&&o.startingSum+a.tmpDisScore<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,n),l.forcedActivated=!0):re(l,n):o.startingSum+=a.tmpDisScore);l.isActive&&(r.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore)}else if(!l.isSelectableMultiple)if(o.belowZeroNotAllowed&&o.startingSum+a.tmpDisScore<0)if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||At.set(l.id,{multiple:l.multipleUseVariable})),l.isSelectableMultiple&&l.isMultipleUseVariable)for(let e=0;e<l.multipleUseVariable;e++)l.isActive&&re(l,n);else l.isActive&&ne(l,n);else o.startingSum+=a.tmpDisScore,r.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore;0===H.length?H.push("Scores Updated On: ".concat(l.title)):H.push(", ".concat(l.title)),s=e.id!==l.id}if(!i.has(a.idx))for(let c=0;c<e.scores.length;c++){const d=e.scores[c],u=t.get(d.id)||0,g=Ot.get(d.id);if(void 0!==g&&l.isActive){const t=xo(a.requireds),c=new C(JSON.parse(JSON.stringify([...Bt])));c.set(e.id,{multiple:e.multipleUseVariable}),n.currentChoices+=1,g.startingSum+=u;const d=xo(a.requireds,c);if(n.currentChoices-=1,g.startingSum-=u,d!==t){let e=a.discountIsOn&&void 0!==a.discountScore?a.discountScore:a.value;if(e=o.allowFloat?e:Math.floor(e),d)if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){for(let t=l.multipleUseVariable-1;t>=0;t--)void 0!==a.isActiveMul&&a.isActiveMul[t]&&(o.belowZeroNotAllowed&&o.startingSum+e<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,n),l.forcedActivated=!0):re(l,n):(o.startingSum+=e,r.set(a.id,e),a.isActiveMul[t]=!1))}else l.isSelectableMultiple||a.isActive&&(o.belowZeroNotAllowed&&o.startingSum+e<0?(l.forcedActivated&&delete l.forcedActivated,ne(l,n)):(o.startingSum+=e,r.set(a.id,e),delete a.isActive));else if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){const t=l.multipleUseVariable;void 0===a.isActiveMul&&(a.isActiveMul=[]);for(let i=t-1;i>=0;i--)a.isActiveMul[i]||(o.belowZeroNotAllowed&&o.startingSum+e<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,n),l.forcedActivated=!0):re(l,n):(o.startingSum-=e,r.set(a.id,e),a.isActiveMul[i]=!0))}else l.isSelectableMultiple||a.isActive||(o.belowZeroNotAllowed&&o.startingSum-e<0?(l.forcedActivated&&delete l.forcedActivated,ne(l,n)):(o.startingSum-=e,r.set(a.id,e),a.isActive=!0));0===H.length?H.push("Scores Updated On: ".concat(l.title)):H.push(", ".concat(l.title)),s=!0,i.add(a.idx)}}}}}}s&&Q(l,r,++o,i)}}),H.length>0&&!app.hideScoresUpdated&&(zt.labelText=H.join(""),zt.isOpen=!0),H.splice(0)}function te(e,t,o,i=new Set){Array.from(Bt.entries()).forEach(([n])=>{const a=Mt.get(n);if(void 0!==a){const n=a.row,l=a.choice,r=new C;let s=!1;for(let o=0;o<l.scores.length;o++){const a=l.scores[o];if(!a.isNotRecalculatable){const o=Ot.get(a.id);if(void 0!==o){if(e.discountOther&&a.isChangeDiscount&&void 0!==a.tmpDisScore&&l.id!==e.id){const e=l.multipleUseVariable;if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){for(let t=e-1;t>=0;t--)l.isActive&&(o.belowZeroNotAllowed&&o.startingSum+a.tmpDisScore<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,n),l.forcedActivated=!0):re(l,n):o.startingSum+=a.tmpDisScore);l.isActive&&(r.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore)}else l.isSelectableMultiple||(o.belowZeroNotAllowed&&o.startingSum+a.tmpDisScore<0?(l.forcedActivated&&delete l.forcedActivated,ne(l,n)):(o.startingSum+=a.tmpDisScore,r.set(a.id,a.tmpDisScore),delete a.isChangeDiscount,delete a.tmpDisScore));0===H.length?H.push("Scores Updated On: ".concat(l.title)):H.push(", ".concat(l.title)),s=!0}if(!i.has(a.idx))for(let c=0;c<e.scores.length;c++){const d=e.scores[c],u=t.get(d.id)||0,g=Ot.get(d.id);if(void 0!==g&&l.isActive&&!a.isChanged){const t=xo(a.requireds),c=new C(JSON.parse(JSON.stringify([...Bt])));c.delete(e.id),n.currentChoices-=1,g.startingSum+=u;const d=xo(a.requireds,c);if(n.currentChoices+=1,g.startingSum-=u,d!==t){let e=a.discountIsOn&&void 0!==a.discountScore?a.discountScore:a.value;if(e=o.allowFloat?e:Math.floor(e),d)if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){for(let t=l.multipleUseVariable-1;t>=0;t--)void 0!==a.isActiveMul&&a.isActiveMul[t]&&(o.belowZeroNotAllowed&&o.startingSum+e<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,n),l.forcedActivated=!0):re(l,n):(o.startingSum+=e,r.set(a.id,e),a.isActiveMul[t]=!1))}else l.isSelectableMultiple||a.isActive&&(o.belowZeroNotAllowed&&o.startingSum+e<0?(l.forcedActivated&&delete l.forcedActivated,ne(l,n)):(o.startingSum+=e,r.set(a.id,e),delete a.isActive));else if(l.isSelectableMultiple&&l.isMultipleUseVariable&&void 0!==l.numMultipleTimesMinus){const t=l.multipleUseVariable;void 0===a.isActiveMul&&(a.isActiveMul=[]);for(let i=t-1;i>=0;i--)a.isActiveMul[i]||(o.belowZeroNotAllowed&&o.startingSum+e<0?l.forcedActivated&&l.isActive?(l.forcedActivated=!1,l.numMultipleTimesMinus--,re(l,n),l.forcedActivated=!0):re(l,n):(o.startingSum-=e,r.set(a.id,e),a.isActiveMul[i]=!0))}else l.isSelectableMultiple||a.isActive||(o.belowZeroNotAllowed&&o.startingSum-e<0?(l.forcedActivated&&delete l.forcedActivated,ne(l,n)):(o.startingSum-=e,r.set(a.id,e),a.isActive=!0));0===H.length?H.push("Scores Updated On: ".concat(l.title)):H.push(", ".concat(l.title)),s=!0,i.add(a.idx)}}}}}}s&&te(l,r,++o,i)}}),H.length>0&&!app.hideScoresUpdated&&(zt.labelText=H.join(""),zt.isOpen=!0),H.splice(0)}function oe(){let e=!1;Array.from(At.entries()).forEach(([t,o])=>{const i=Mt.get(t);if(void 0!==i){const n=i.row,a=i.choice;a.isActive||(ie(a,n),a.isActive&&(At.delete(t),e=!0,o.isAllowDeselect||(a.forcedActivated=!0)))}}),e&&oe()}function ie(e,o){let i=o;if(o.isResultRow){const t=Mt.get(e.id);void 0!==t&&(i=t.row)}e.isSelectableMultiple?e.id===t.choice.id&&e.allowSelectByClick&&0===e.multipleUseVariable&&le(e,i):!xo(e.requireds)||o.isInfoRow||e.isNotSelectable||e.forcedActivated||(e.isActive?e.selectOnce||ne(e,i):ae(e,i))}function ne(e,t){if($o(e,!1)){const o=()=>{const o=new C;for(let t=0;t<e.scores.length;t++){const i=e.scores[t];if(xo(i.requireds)&&i.isActive||i.isActive){const e=Ot.get(i.id);if(void 0!==e){let t=i.discountIsOn&&void 0!==i.discountScore?i.discountScore:i.value;t=e.allowFloat?t:Math.floor(t),e.startingSum+=t;let n=o.get(i.id);void 0!==n?o.set(i.id,-t+n):o.set(i.id,-t),delete i.isActive,delete i.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandom){for(let t=0;t<e.activatedRandom.length;t++){const o=Mt.get(e.activatedRandom[t]);if(void 0!==o){const t=o.row,i=o.choice;Y(e,i,t,0)}}delete e.activatedRandom}else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),n=i.length>1?parseInt(i[1]):0,a=Mt.get(i[0]);if(void 0!==a){const t=a.row,o=a.choice;Y(e,o,t,n)}else{const t=Ft.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Mt.get(o[t]);if(void 0!==i){const t=i.row,o=i.choice;Y(e,o,t,n)}}}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let o=0;o<e.discountRows.length;o++){const i=kt.get(e.discountRows[o]);if(void 0!==i)for(let o=0;o<i.objects.length;o++){const n=i.objects[o];for(let t=0;t<n.scores.length;t++){const o=n.scores[t];o.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(o.id)||Do(e,o)}t.add(n.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++)if(!t.has(e.discountChoices[o])){const i=Mt.get(e.discountChoices[o]);if(void 0!==i){const o=i.choice;for(let n=0;n<o.scores.length;n++){const o=i.choice.scores[n];o.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(o.id)||t.has(o.idx)||Do(e,o)}}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=Ft.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=Mt.get(o.elements[t]);if(void 0!==i)for(let t=0;t<i.choice.scores.length;t++){const o=i.choice.scores[t];o.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(o.id)||Do(e,o)}}}if(e.isActive=!1,t.currentChoices-=1,Bt.delete(e.id),Array.from(Bt.entries()).forEach(([t,o])=>{const i=Mt.get(t);if(void 0!==i){const t=i.row,n=i.choice;if(n.id!==e.id&&!xo(n.requireds))if(n.forcedActivated&&(delete n.forcedActivated,n.isAllowDeselect||At.set(n.id,{multiple:o.multiple})),0===o.multiple)n.isActive&&ne(n,t);else if(o.multiple>0)for(let e=0;e<o.multiple;e++)n.isActive&&re(n,t)}}),e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply){let t=0;for(let o=0;o<e.pointTypeToMultiply.length;o++){let i=Ot.get(e.pointTypeToMultiply[o]);if(void 0!==i){for(let n=Vt.length-1;n>=0;n--){let a=Vt[n];if(a.multiplyPointtypeIsOnCheck&&void 0!==a.startingSumAtMultiply){let e=a.startingSumAtMultiply[o].value*a.startingSumAtMultiply[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=a.startingSumAtMultiply[o].value}if(a.dividePointtypeIsOnCheck&&void 0!==a.startingSumAtDivide){let e=a.startingSumAtDivide[o].value/a.startingSumAtDivide[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=a.startingSumAtDivide[o].value}if(a.id===e.id){t=n;break}}for(let e=t+1;e<Vt.length;e++){let t=Vt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(t.startingSumAtMultiply[o].value=i.startingSum,i.startingSum*=t.startingSumAtMultiply[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(t.startingSumAtDivide[o].value=i.startingSum,i.startingSum/=t.startingSumAtDivide[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum))}}}delete e.multiplyPointtypeIsOnCheck,delete e.startingSumAtMultiply,e.dividePointtypeIsOnCheck||Vt.splice(t,1)}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide){let t=0;for(let o=0;o<e.pointTypeToDivide.length;o++){let i=Ot.get(e.pointTypeToDivide[o]);if(void 0!==i){for(let n=Vt.length-1;n>=0;n--){let a=Vt[n];if(a.multiplyPointtypeIsOnCheck&&void 0!==a.startingSumAtMultiply){let e=a.startingSumAtMultiply[o].value*a.startingSumAtMultiply[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=a.startingSumAtMultiply[o].value}if(a.dividePointtypeIsOnCheck&&void 0!==a.startingSumAtDivide){let e=a.startingSumAtDivide[o].value/a.startingSumAtDivide[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=a.startingSumAtDivide[o].value}if(a.id===e.id){t=n;break}}for(let e=t+1;e<Vt.length;e++){let t=Vt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(t.startingSumAtMultiply[o].value=i.startingSum,i.startingSum*=t.startingSumAtMultiply[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(t.startingSumAtDivide[o].value=i.startingSum,i.startingSum/=t.startingSumAtDivide[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum))}}}delete e.dividePointtypeIsOnCheck,delete e.startingSumAtDivide,Vt.splice(t,1)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=jt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!1:"2"===e.changeType?o.isTrue=!0:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const o=kt.get(e.idOfAllowChoice[t]);if(void 0!==o&&(o.allowedChoices-=e.numbAddToAllowChoice,o.allowedChoices>0&&o.currentChoices>=o.allowedChoices))for(let e=0;e<o.objects.length;e++){const t=o.objects[e];if(t.isActive&&!t.forcedActivated)if(t.isSelectableMultiple){let e=t.multipleUseVariable;for(let i=0;i<e;i++)re(t,o)}else ne(t,o);if(o.allowedChoices>=o.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){const t=Dt.get(e.idOfTheTextfieldWord);void 0!==t&&(t.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){const t=app.bgImageStack.findIndex(t=>t.id===e.id);-1!==t&&app.bgImageStack.splice(t,1);const o=app.bgImageStack.length;o>0?app.styling.backgroundImage=app.bgImageStack[o-1].data:(app.styling.backgroundImage=void 0!==app.defaultBgImage?app.defaultBgImage:"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){const t=app.bgColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.bgColorStack.splice(t,1);const o=app.bgColorStack.length;o>0?app.styling.backgroundColor=app.bgColorStack[o-1].data:(app.styling.backgroundColor=void 0!==app.defaultBgColor?app.defaultBgColor:"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){const t=app.barBgColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barBgColorStack.splice(t,1);const o=app.barBgColorStack.length;o>0?app.styling.barBackgroundColor=app.barBgColorStack[o-1].data:(app.styling.barBackgroundColor=void 0!==app.defaultBarBgColor?app.defaultBarBgColor:"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){const t=app.barIconColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barIconColorStack.splice(t,1);const o=app.barIconColorStack.length;o>0?app.styling.barIconColor=app.barIconColorStack[o-1].data:(app.styling.barIconColor=void 0!==app.defaultBarIconColor?app.defaultBarIconColor:"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){const t=app.barTextColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barTextColorStack.splice(t,1);const o=app.barTextColorStack.length;o>0?app.styling.barTextColor=app.barTextColorStack[o-1].data:(app.styling.barTextColor=void 0!==app.defaultBarIconColor?app.defaultBarIconColor:"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){const t=n.choice;if(yi(t,e.id),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){yi(t.addons[o],e.id)}continue}const a=kt.get(i);if(void 0!==a){yi(a,e.id);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&yi(o,e.id)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){yi(t.choice,e.id)}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){Ci(n.choice,e.id);continue}const a=kt.get(i);if(void 0!==a){Ci(a,e.id);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&Ci(o,e.id)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){Ci(t.choice,e.id)}}continue}}}if(e.setBgmIsOn&&Wt&&e.bgmId&&(Et.bgmIsPlaying=!1,Oo(e,e.bgmId,0)),e.muteBgm&&Wt){const e=k(Wt);app.isMute=!1,e&&"function"==typeof e.unMute&&e.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=kt.get(e.hiddenContentsRow[t]);if(void 0!==o)for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":delete o.objectTitleRemoved;break;case"2":delete o.objectImageRemoved;break;case"3":delete o.objectTextRemoved;break;case"4":delete o.objectScoreRemoved;break;case"5":delete o.objectRequirementRemoved;break;case"6":delete o.addonTitleRemoved;break;case"7":delete o.addonImageRemoved;break;case"8":delete o.addonTextRemoved}}delete e.tempSlots,Q(e,o,0),oe()};-1===r.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,o()},1e3*app.fadeTransitionTime)):o()),0===r.indexOf(e.id)&&r.splice(0)}}function ae(e,o){let i=!0;if(o.allowedChoices>0&&o.currentChoices>=o.allowedChoices){let e=0;for(let t=0;t<o.objects.length;t++){const i=o.objects[t];if(i.isActive){if(!i.forcedActivated){if(i.isSelectableMultiple){let e=i.multipleUseVariable;for(let t=0;t<e;t++)ie(i,o)}else ie(i,o);break}e++}}e>=o.allowedChoices&&(i=!1)}if(i){for(let t=0;t<e.scores.length;t++){const o=e.scores[t],i=Ot.get(o.id);void 0!==i&&o.isRandom&&!o.setValue&&void 0!==o.maxValue&&void 0!==o.minValue&&(o.value=Math.floor(Math.random()*(o.maxValue-o.minValue+1))+o.minValue,o.value=i.allowFloat?o.value:Math.floor(o.value),o.setValue=!0)}if($o(e,!0)){const i=()=>{var i,n,a,l,r,s;const c=new C;if(e.isActive=!0,Bt.set(e.id,{multiple:0}),o.currentChoices+=1,e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let o=0;o<e.discountRows.length;o++){const a=kt.get(e.discountRows[o]);if(void 0!==a)for(let o=0;o<a.objects.length;o++){const l=a.objects[o];for(let t=0;t<l.scores.length;t++){const o=l.scores[t];o.isNotDiscountable||0!==(null==(i=e.discountPointTypes)?void 0:i.length)&&-1===(null==(n=e.discountPointTypes)?void 0:n.indexOf(o.id))||jo(e,o)}t.add(l.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++)if(!t.has(e.discountChoices[o])){const t=Mt.get(e.discountChoices[o]);if(void 0!==t){const o=t.choice;for(let t=0;t<o.scores.length;t++){const i=o.scores[t];i.isNotDiscountable||0!==(null==(a=e.discountPointTypes)?void 0:a.length)&&-1===(null==(l=e.discountPointTypes)?void 0:l.indexOf(i.id))||jo(e,i)}}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=Ft.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=Mt.get(o.elements[t]);if(void 0!==i)for(let t=0;t<i.choice.scores.length;t++){const o=i.choice.scores[t];o.isNotDiscountable||0!==(null==(r=e.discountPointTypes)?void 0:r.length)&&-1===(null==(s=e.discountPointTypes)?void 0:s.indexOf(o.id))||jo(e,o)}}}for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(xo(o.requireds)&&!o.isActive){const e=Ot.get(o.id);if(void 0!==e){let t=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;t=e.allowFloat?t:Math.floor(t),e.startingSum-=t,o.isActive=!0;let i=c.get(o.id);void 0!==i?c.set(o.id,t+i):c.set(o.id,t)}}}if(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&Uo(e),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom)K(e);else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),n=i.length>1?parseInt(i[1]):0,a=Mt.get(i[0]);if(void 0!==a){const t=a.row,o=a.choice;_(e,o,t,n)}else{const t=Ft.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Mt.get(o[t]);if(void 0!==i){const t=i.row,o=i.choice;_(e,o,t,n)}}}}}}if(e.deactivateOtherChoice&&void 0!==e.deactivateThisChoice){const t=e.deactivateThisChoice.split(",");for(let e=0;e<t.length;e++){const o=t[e].split("/ON#"),i=o.length>1?parseInt(o[1]):0,n=Mt.get(o[0]);if(void 0!==n){const e=n.row,t=n.choice;if(t.isActive)if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let o=0;o<i;o++)re(t,e);else ne(t,e)}else{const e=Ft.get(o[0]);if(void 0!==e){const t=e.elements;for(let e=0;e<t.length;e++){const o=Mt.get(t[e]);if(void 0!==o){const e=o.row,t=o.choice;if(t.isActive)if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let o=0;o<i;o++)re(t,e);else ne(t,e)}}}}}}if(Array.from(Bt.entries()).forEach(([t,o])=>{const i=Mt.get(t);if(void 0!==i){const t=i.row,n=i.choice;if(n.id!==e.id&&!xo(n.requireds))if(n.forcedActivated&&(delete n.forcedActivated,n.isAllowDeselect||At.set(n.id,{multiple:o.multiple})),0===o.multiple)n.isActive&&ne(n,t);else if(o.multiple>0)for(let e=0;e<o.multiple;e++)n.isActive&&re(n,t)}}),e.multiplyPointtypeIsOn&&void 0!==e.pointTypeToMultiply&&void 0!==e.multiplyWithThis){let t=0;e.multiplyPointtypeIsOnCheck=!0,"object"!=typeof e.startingSumAtMultiply&&(e.startingSumAtMultiply=[]);for(let o=0;o<e.pointTypeToMultiply.length;o++){let i=Ot.get(e.pointTypeToMultiply[o]);if(void 0!==i)if(e.multiplyPointtypeIsId&&"string"==typeof e.multiplyWithThis){let n=Ot.get(e.multiplyWithThis);void 0!==n?(e.startingSumAtMultiply[o]={value:i.startingSum,calcVal:n.startingSum},i.startingSum*=n.startingSum,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)):t++}else"number"==typeof e.multiplyWithThis&&(e.startingSumAtMultiply[o]={value:i.startingSum,calcVal:e.multiplyWithThis},i.startingSum*=e.multiplyWithThis,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum));else t++}t===e.pointTypeToMultiply.length&&delete e.multiplyPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck&&Vt.push(e)}if(e.dividePointtypeIsOn&&void 0!==e.pointTypeToDivide&&void 0!==e.divideWithThis){let t=0;e.dividePointtypeIsOnCheck=!0,"object"!=typeof e.startingSumAtDivide&&(e.startingSumAtDivide=[]);for(let o=0;o<e.pointTypeToDivide.length;o++){let i=Ot.get(e.pointTypeToDivide[o]);if(void 0!==i)if(e.dividePointtypeIsId&&"string"==typeof e.divideWithThis){let n=Ot.get(e.divideWithThis);void 0!==n?0===n.startingSum?t++:(e.startingSumAtDivide[o]={value:i.startingSum,calcVal:n.startingSum},i.startingSum/=n.startingSum,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)):t++}else"number"==typeof e.divideWithThis&&(0===e.dividedWithThis?t++:(e.startingSumAtDivide[o]={value:i.startingSum,calcVal:e.divideWithThis},i.startingSum/=e.divideWithThis,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)));else t++}t===e.pointTypeToDivide.length&&delete e.dividePointtypeIsOnCheck,!e.multiplyPointtypeIsOnCheck&&e.dividePointtypeIsOnCheck&&Vt.push(e)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=jt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!0:"2"===e.changeType?o.isTrue=!1:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const o=kt.get(e.idOfAllowChoice[t]);if(void 0!==o&&(o.allowedChoices+=e.numbAddToAllowChoice,o.allowedChoices>0&&o.currentChoices>=o.allowedChoices))for(let e=0;e<o.objects.length;e++){const t=o.objects[e];if(t.isActive&&!t.forcedActivated)if(t.isSelectableMultiple){let e=t.multipleUseVariable;for(let i=0;i<e;i++)re(t,o)}else ne(t,o);if(o.allowedChoices>=o.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){const t=Dt.get(e.idOfTheTextfieldWord);void 0!==t&&(t.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,Ut.currentDialog="appImageUpload",Ut.data=e,Ut.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=void 0!==app.styling.backgroundImage?app.styling.backgroundImage:""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=void 0!==app.styling.backgroundColor?app.styling.backgroundColor:""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=void 0!==app.styling.barBackgroundColor?app.styling.barBackgroundColor:"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=void 0!==app.styling.barIconColor?app.styling.barIconColor:"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=void 0!==app.styling.barTextColor?app.styling.barTextColor:"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){const t=n.choice;if(Ii(t,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){Ii(t.addons[o],e.id,e.changeToThisTemplate)}continue}const a=kt.get(i);if(void 0!==a){Ii(a,e.id,e.changeToThisTemplate);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&Ii(o,e.id,e.changeToThisTemplate)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){Ii(t.choice,e.id,e.changeToThisTemplate)}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){Si(n.choice,e.id,e.changeToThisWidth);continue}const a=kt.get(i);if(void 0!==a){Si(a,e.id,e.changeToThisWidth);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&Si(o,e.id,e.changeToThisWidth)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){Si(t.choice,e.id,e.changeToThisWidth)}}continue}}}if(e.setBgmIsOn&&e.bgmId&&(Et.bgmIsPlaying=!0,Et.isBgmInit?Oo(e,e.bgmId,0):(ko(e),Et.isBgmInit=!0)),e.muteBgm&&Wt){const e=k(Wt);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=kt.get(e.hiddenContentsRow[t]);if(void 0!==o){o.textIsRemoved||(o.textIsRemoved=!0);for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!0;break;case"2":o.objectImageRemoved=!0;break;case"3":o.objectTextRemoved=!0;break;case"4":o.objectScoreRemoved=!0;break;case"5":o.objectRequirementRemoved=!0;break;case"6":o.addonTitleRemoved=!0;break;case"7":o.addonImageRemoved=!0;break;case"8":o.addonTextRemoved=!0}}}e.scrollToRow&&Z().then(()=>{setTimeout(()=>{var o,i,n,a,l;if(e.scrollToObject){if(e.scrollObjectId){const l=Mt.get(e.scrollObjectId);if(void 0!==l){const e=l.choice,r=l.row,s=null==(a=null==(n=null==(i=null==(o=t.mainDiv)?void 0:o.children[r.index])?void 0:i.children[0])?void 0:n.children[1])?void 0:a.children;if(void 0!==s)if(t.isBackpack){const t=document.getElementById("backpackDialog");null==t||t.scrollTo({top:s[e.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:s[e.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}else if(e.scrollRowId){const o=kt.get(e.scrollRowId);if(void 0!==o){const e=null==(l=t.mainDiv)?void 0:l.children;if(void 0!==e)if(t.isBackpack){const t=document.getElementById("backpackDialog");null==t||t.scrollTo({top:e[o.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:e[o.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}},10)}),e.cleanACtivatedOnSelect&&qo(),te(e,c,0),oe(),!xo(e.requireds)&&e.isActive&&ne(e,o)};if(e.customTextfieldIsOn&&!M)return c.choice=e,c.row=o,c.context=void 0!==e.wordPromptText?e.wordPromptText:"",c.prevText=void 0!==e.wordChangeSelect?e.wordChangeSelect:"",c.isWord=!0,void p(O,"dlgCommon");if(e.confirmIsOn&&!M)return c.choice=e,c.row=o,c.context=void 0!==e.wordPromptText?e.wordPromptText:"",c.isWord=!1,void p(O,"dlgCommon");-1===r.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,i()},1e3*app.fadeTransitionTime)):i()),0===r.indexOf(e.id)&&r.splice(0)}}}function le(e,o){const i=xo(e.requireds)&&!o.isInfoRow&&!e.isNotSelectable;let n=!0,a=o;if(o.isResultRow){const t=Mt.get(e.id);void 0!==t&&(a=t.row)}if(i&&e.isMultipleUseVariable&&a.allowedChoices>0&&a.currentChoices>=a.allowedChoices){let e=0;for(let t=0;t<a.objects.length;t++){const o=a.objects[t];if(o.isActive){if(!o.forcedActivated){if(o.isSelectableMultiple){let e=o.multipleUseVariable;for(let t=0;t<e;t++)re(o,a)}else ie(o,a);break}e++}}e>=a.allowedChoices&&(n=!1)}if(n){for(let t=0;t<e.scores.length;t++){const o=e.scores[t],i=Ot.get(o.id);void 0!==i&&o.isRandom&&!o.setValue&&void 0!==o.maxValue&&void 0!==o.minValue&&(o.value=Math.floor(Math.random()*(o.maxValue-o.minValue+1))+o.minValue,o.value=i.allowFloat?o.value:Math.floor(o.value),o.setValue=!0)}if($o(e,!0)){const n=()=>{var i,n,l,r,s,c;const d=new C,u=e.isActive,g=e.multipleUseVariable>=0,m=Math.abs(e.multipleUseVariable);if(e.multipleUseVariable+=1,0===e.multipleUseVariable?(Bt.delete(e.id),e.isActive=!1,a.currentChoices-=1):(1===e.multipleUseVariable&&(e.isActive=!0,a.currentChoices+=1),Bt.set(e.id,{multiple:e.multipleUseVariable})),g){if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let o=0;o<e.discountRows.length;o++){const a=kt.get(e.discountRows[o]);if(void 0!==a)for(let o=0;o<a.objects.length;o++){const l=a.objects[o];for(let t=0;t<l.scores.length;t++){const o=l.scores[t];o.isNotDiscountable||0!==(null==(i=e.discountPointTypes)?void 0:i.length)&&-1===(null==(n=e.discountPointTypes)?void 0:n.indexOf(o.id))||jo(e,o)}t.add(l.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++)if(!t.has(e.discountChoices[o])){const t=Mt.get(e.discountChoices[o]);if(void 0!==t){const o=t.choice;for(let t=0;t<o.scores.length;t++){const i=o.scores[t];i.isNotDiscountable||0!==(null==(l=e.discountPointTypes)?void 0:l.length)&&-1===(null==(r=e.discountPointTypes)?void 0:r.indexOf(i.id))||jo(e,i)}}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=Ft.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=Mt.get(o.elements[t]);if(void 0!==i)for(let t=0;t<i.choice.scores.length;t++){const o=i.choice.scores[t];o.isNotDiscountable||0!==(null==(s=e.discountPointTypes)?void 0:s.length)&&-1===(null==(c=e.discountPointTypes)?void 0:c.indexOf(o.id))||jo(e,o)}}}for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(void 0===o.isActiveMul&&(o.isActiveMul=[]),xo(o.requireds)&&!o.isActiveMul[m]){const e=Ot.get(o.id);if(void 0!==e){let t=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;t=e.allowFloat?t:Math.floor(t),o.multiplyByTimes&&(t*=m+1),e.startingSum-=t,o.isActiveMul[m]=!0;let i=d.get(o.id);void 0!==i?d.set(o.id,t+i):d.set(o.id,t)}}}}else for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(void 0===o.isActiveMulMinus&&(o.isActiveMulMinus=[]),xo(o.requireds)&&o.isActiveMulMinus[m]||o.isActiveMulMinus[m]){const e=Ot.get(o.id);if(void 0!==e){let t=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;t=e.allowFloat?t:Math.floor(t),o.multiplyByTimes&&(t*=Math.abs(m)),e.startingSum-=t;let i=d.get(o.id);void 0!==i?d.set(o.id,t+i):d.set(o.id,t),delete o.isActiveMulMinus[m]}}}if(g&&(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&Uo(e),e.activateOtherChoice&&void 0!==e.activateThisChoice))if(e.isActivateRandom)K(e);else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),n=i.length>1?parseInt(i[1]):0,a=Mt.get(i[0]);if(void 0!==a){const t=a.row,o=a.choice;!o.isSelectableMultiple&&u||_(e,o,t,n)}else{const t=Ft.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Mt.get(o[t]);if(void 0!==i){const t=i.row,o=i.choice;!o.isSelectableMultiple&&u||_(e,o,t,n)}}}}}}if(Array.from(Bt.entries()).forEach(([t,o])=>{const i=Mt.get(t);if(void 0!==i){const t=i.row,n=i.choice;if(n.id!==e.id&&!xo(n.requireds))if(n.forcedActivated&&(delete n.forcedActivated,n.isAllowDeselect||At.set(n.id,{multiple:o.multiple})),0===o.multiple)n.isActive&&ne(n,t);else if(o.multiple>0)for(let e=0;e<o.multiple;e++)n.isActive&&re(n,t)}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const o=kt.get(e.idOfAllowChoice[t]);if(void 0!==o&&(o.allowedChoices+=e.numbAddToAllowChoice,o.allowedChoices>0&&o.currentChoices>=o.allowedChoices))for(let e=0;e<o.objects.length;e++){const t=o.objects[e];if(t.isActive&&!t.forcedActivated)if(t.isSelectableMultiple){let e=t.multipleUseVariable;for(let i=0;i<e;i++)re(t,o)}else t.isActive&&ne(t,o);if(o.allowedChoices>=o.currentChoices)break}}if(!u){if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=jt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!0:"2"===e.changeType?o.isTrue=!1:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=void 0!==app.styling.backgroundImage?app.styling.backgroundImage:""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=void 0!==app.styling.backgroundColor?app.styling.backgroundColor:""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=void 0!==app.styling.barBackgroundColor?app.styling.barBackgroundColor:"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=void 0!==app.styling.barIconColor?app.styling.barIconColor:"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=void 0!==app.styling.barTextColor?app.styling.barTextColor:"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){const t=n.choice;if(Ii(t,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){Ii(t.addons[o],e.id,e.changeToThisTemplate)}continue}const a=kt.get(i);if(void 0!==a){Ii(a,e.id,e.changeToThisTemplate);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&Ii(o,e.id,e.changeToThisTemplate)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){Ii(t.choice,e.id,e.changeToThisTemplate)}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){Si(n.choice,e.id,e.changeToThisWidth);continue}const a=kt.get(i);if(void 0!==a){Si(a,e.id,e.changeToThisWidth);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&Si(o,e.id,e.changeToThisWidth)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){Si(t.choice,e.id,e.changeToThisWidth)}}continue}}}if(e.setBgmIsOn&&e.bgmId&&(Et.bgmIsPlaying=!0,Et.isBgmInit?Oo(e,e.bgmId,0):(ko(e),Et.isBgmInit=!0)),e.muteBgm&&Wt){const e=k(Wt);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=kt.get(e.hiddenContentsRow[t]);if(void 0!==o){o.textIsRemoved||(o.textIsRemoved=!0);for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!0;break;case"2":o.objectImageRemoved=!0;break;case"3":o.objectTextRemoved=!0;break;case"4":o.objectScoreRemoved=!0;break;case"5":o.objectRequirementRemoved=!0;break;case"6":o.addonTitleRemoved=!0;break;case"7":o.addonImageRemoved=!0;break;case"8":o.addonTextRemoved=!0}}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){const t=n.choice;t.defaultTemplate&&(t.defaultTemplate=t.template),t.template=e.changeToThisTemplate,e.changeAddonTemplate}else{const t=kt.get(i);if(void 0!==t)t.defaultTemplate=t.template,t.template=e.changeToThisTemplate;else{const t=Ft.get(i[0]);if(void 0!==t){const o=t.rowElements;for(let t=0;t<o.length;t++){const i=kt.get(o[t]);void 0!==i&&(i.defaultTemplate=i.template,i.template=e.changeToThisTemplate)}const i=t.elements;for(let t=0;t<i.length;t++){const o=Mt.get(i[t]);if(void 0!==o){const t=o.choice;t.defaultTemplate=t.template,t.template=e.changeToThisTemplate}}}}}}}e.scrollToRow&&Z().then(()=>{setTimeout(()=>{var o,i,n,a,l;if(e.scrollToObject){if(e.scrollObjectId){const l=Mt.get(e.scrollObjectId);if(void 0!==l){const e=l.choice,r=l.row,s=null==(a=null==(n=null==(i=null==(o=t.mainDiv)?void 0:o.children[r.index])?void 0:i.children[0])?void 0:n.children[1])?void 0:a.children;if(void 0!==s)if(t.isBackpack){const t=document.getElementById("backpackDialog");null==t||t.scrollTo({top:s[e.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:s[e.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}else if(e.scrollRowId){const o=kt.get(e.scrollRowId);if(void 0!==o){const e=null==(l=t.mainDiv)?void 0:l.children;if(void 0!==e)if(t.isBackpack){const t=document.getElementById("backpackDialog");null==t||t.scrollTo({top:e[o.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:e[o.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}},10)})}te(e,d,0),oe(),!xo(e.requireds)&&e.isActive&&re(e,o)};if(i)if(e.isMultipleUseVariable)void 0===e.multipleUseVariable&&(e.multipleUseVariable=0),void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>e.multipleUseVariable&&(-1===r.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,n()},1e3*app.fadeTransitionTime)):n()),0===r.indexOf(e.id)&&r.splice(0));else if(void 0!==e.multipleScoreId){const t=Ot.get(e.multipleScoreId);void 0!==t&&(void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>t.startingSum&&(t.startingSum+=1))}}}}function re(e,t){const o=$o(e,!1);let i=t;if(t.isResultRow){const t=Mt.get(e.id);void 0!==t&&(i=t.row)}if(o){const o=()=>{const t=new C,o=e.multipleUseVariable>0,n=Math.abs(e.multipleUseVariable-1);if(o){for(let o=0;o<e.scores.length;o++){const i=e.scores[o];if(void 0!==i.isActiveMul&&(xo(i.requireds)&&i.isActiveMul[n]||i.isActiveMul[n])){const e=Ot.get(i.id);if(void 0!==e){let o=i.discountIsOn&&void 0!==i.discountScore?i.discountScore:i.value;o=e.allowFloat?o:Math.floor(o),i.multiplyByTimes&&(o*=n+1),e.startingSum+=o;let a=t.get(i.id);void 0!==a?t.set(i.id,-o+a):t.set(i.id,-o),delete i.isActiveMul[n],0===n&&delete i.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandomMul&&void 0!==e.activatedRandomMul[n]){for(let t=0;t<e.activatedRandomMul[n].length;t++){const o=Mt.get(e.activatedRandomMul[n][t]);if(void 0!==o){const t=o.row,i=o.choice;Y(e,i,t,0)}}e.activatedRandomMul.splice(n,1)}else{const t=e.activateThisChoice.split(",");for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),a=i.length>1?parseInt(i[1]):0,l=Mt.get(i[0]);if(void 0!==l){const t=l.row,o=l.choice;(0===n||o.isSelectableMultiple)&&Y(e,o,t,a)}else{const t=Ft.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=Mt.get(o[t]);if(void 0!==i){const t=i.row,o=i.choice;(0===n||o.isSelectableMultiple)&&Y(e,o,t,a)}}}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let o=0;o<e.discountRows.length;o++){const i=kt.get(e.discountRows[o]);if(void 0!==i)for(let o=0;o<i.objects.length;o++){const n=i.objects[o];for(let t=0;t<n.scores.length;t++){const o=n.scores[t];o.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(o.id)||Do(e,o)}t.add(n.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++)if(!t.has(e.discountChoices[o])){const i=Mt.get(e.discountChoices[o]);if(void 0!==i){const o=i.choice;for(let n=0;n<o.scores.length;n++){const o=i.choice.scores[n];o.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(o.id)||t.has(o.idx)||Do(e,o)}}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=Ft.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=Mt.get(o.elements[t]);if(void 0!==i)for(let t=0;t<i.choice.scores.length;t++){const o=i.choice.scores[t];o.isNotDiscountable||0!==e.discountPointTypes.length&&-1===e.discountPointTypes.indexOf(o.id)||Do(e,o)}}}}else for(let i=0;i<e.scores.length;i++){const o=e.scores[i];if(void 0===o.isActiveMulMinus&&(o.isActiveMulMinus=[]),xo(o.requireds)&&!o.isActiveMulMinus[n]){const e=Ot.get(o.id);if(void 0!==e){let i=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;i=e.allowFloat?i:Math.floor(i),o.multiplyByTimes&&(i*=n),e.startingSum+=i;let a=t.get(o.id);void 0!==a?t.set(o.id,-i+a):t.set(o.id,-i),o.isActiveMulMinus[n]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,i.currentChoices-=1,Bt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,i.currentChoices+=1),Bt.set(e.id,{multiple:e.multipleUseVariable})),Array.from(Bt.entries()).forEach(([t,o])=>{const i=Mt.get(t);if(void 0!==i){const t=i.row,n=i.choice;if(n.id!==e.id&&!xo(n.requireds))if(n.forcedActivated&&(delete n.forcedActivated,n.isAllowDeselect||At.set(n.id,{multiple:o.multiple})),0===o.multiple)n.forcedActivated&&delete n.forcedActivated,n.isActive&&ne(n,t);else if(o.multiple>0)for(let e=0;e<o.multiple;e++)n.isActive&&re(n,t)}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let i=0;i<e.idOfAllowChoice.length;i++){const t=kt.get(e.idOfAllowChoice[i]);if(void 0!==t&&(t.allowedChoices-=e.numbAddToAllowChoice,t.allowedChoices>0&&t.currentChoices>=t.allowedChoices))for(let e=0;e<t.objects.length;e++){const o=t.objects[e];if(o.isActive&&!o.forcedActivated)if(o.isSelectableMultiple){let e=o.multipleUseVariable;for(let i=0;i<e;i++)re(o,t)}else o.isActive&&ne(o,t);if(t.allowedChoices>=t.currentChoices)break}}if(0===n){if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=jt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!1:"2"===e.changeType?o.isTrue=!0:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){const t=app.bgImageStack.findIndex(t=>t.id===e.id);-1!==t&&app.bgImageStack.splice(t,1);const o=app.bgImageStack.length;o>0?app.styling.backgroundImage=app.bgImageStack[o-1].data:(app.styling.backgroundImage=void 0!==app.defaultBgImage?app.defaultBgImage:"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){const t=app.bgColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.bgColorStack.splice(t,1);const o=app.bgColorStack.length;o>0?app.styling.backgroundColor=app.bgColorStack[o-1].data:(app.styling.backgroundColor=void 0!==app.defaultBgColor?app.defaultBgColor:"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){const t=app.barBgColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barBgColorStack.splice(t,1);const o=app.barBgColorStack.length;o>0?app.styling.barBackgroundColor=app.barBgColorStack[o-1].data:(app.styling.barBackgroundColor=void 0!==app.defaultBarBgColor?app.defaultBarBgColor:"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){const t=app.barIconColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barIconColorStack.splice(t,1);const o=app.barIconColorStack.length;o>0?app.styling.barIconColor=app.barIconColorStack[o-1].data:(app.styling.barIconColor=void 0!==app.defaultBarIconColor?app.defaultBarIconColor:"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){const t=app.barTextColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barTextColorStack.splice(t,1);const o=app.barTextColorStack.length;o>0?app.styling.barTextColor=app.barTextColorStack[o-1].data:(app.styling.barTextColor=void 0!==app.defaultBarIconColor?app.defaultBarIconColor:"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){const t=n.choice;if(yi(t,e.id),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){yi(t.addons[o],e.id)}continue}const a=kt.get(i);if(void 0!==a){yi(a,e.id);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&yi(o,e.id)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){yi(t.choice,e.id)}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=Mt.get(i);if(void 0!==n){Ci(n.choice,e.id);continue}const a=kt.get(i);if(void 0!==a){Ci(a,e.id);continue}const l=Ft.get(i[0]);if(void 0!==l){const t=l.rowElements;for(let i=0;i<t.length;i++){const o=kt.get(t[i]);void 0!==o&&Ci(o,e.id)}const o=l.elements;for(let i=0;i<o.length;i++){const t=Mt.get(o[i]);if(void 0!==t){Ci(t.choice,e.id)}}continue}}}if(e.setBgmIsOn&&Wt&&e.bgmId&&(Et.bgmIsPlaying=!1,Oo(e,e.bgmId,0)),e.muteBgm&&Wt){const e=k(Wt);app.isMute=!1,e&&"function"==typeof e.unMute&&e.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=kt.get(e.hiddenContentsRow[t]);if(void 0!==o)for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!1;break;case"2":o.objectImageRemoved=!1;break;case"3":o.objectTextRemoved=!1;break;case"4":o.objectScoreRemoved=!1;break;case"5":o.objectRequirementRemoved=!1;break;case"6":o.addonTitleRemoved=!1;break;case"7":o.addonImageRemoved=!1;break;case"8":o.addonTextRemoved=!1}}}Q(e,t,0),oe()};if(!t.isInfoRow&&!e.isNotSelectable&&!e.selectOnce)if(e.isMultipleUseVariable)void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),e.multipleUseVariable>e.numMultipleTimesMinus&&(-1===r.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,o()},1e3*app.fadeTransitionTime)):o()),0===r.indexOf(e.id)&&r.splice(0));else if(void 0!==e.multipleScoreId){const t=Ot.get(e.multipleScoreId);void 0!==t&&(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),t.startingSum>e.numMultipleTimesMinus&&(t.startingSum-=1))}}}var se=wa(),ce=$(se),de=e=>{var o=ba(),i=v(o);let n;var r=v(i);r.__click=()=>ie(t.choice,t.row);var c=v(r),u=e=>{var o=ia(),i=v(o),n=e=>{var t=Yn(),o=v(t);s(o,()=>Te.sanitize(To(g(q).title),Nt)),I(()=>Ie(t,g(G))),d(e,t)};J(i,e=>{t.row.resultShowRowTitle&&e(n)});var a=X(i,2),r=e=>{var o=P(),i=$(o),n=e=>{nt(e,{innerClass:"w-100",get text(){return t.choice.imageSourceTooltip},children:(e,o)=>{var i=Zn();I(()=>{ye(i,"src",t.choice.image),Ie(i,g(z)),ye(i,"loading",l()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},a=e=>{var o=Jn();I(()=>{ye(o,"src",t.choice.image),Ie(o,g(z)),ye(o,"loading",l()?"eager":"lazy")}),d(e,o)};J(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),d(e,o)};J(a,e=>{(1===t.choice.template||t.windowWidth<=960||t.row.choicesShareTemplate)&&t.choice.image&&!t.row.objectImageRemoved&&e(r)});var c=X(a,2),u=v(c),m=e=>{var o=Xn(),i=v(o);s(i,()=>Te.sanitize(To(t.choice.title),Nt)),I(()=>Ie(o,g(V))),d(e,o)};J(u,e=>{""===t.choice.title||t.row.objectTitleRemoved||e(m)});var h=X(u,2),p=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(h,e=>{t.choice.isSelectableMultiple&&g(W)&&0===g(w).multiChoiceCounterPosition&&e(p)});var f=X(h,2),b=e=>{var o=P(),i=$(o);be(i,17,()=>t.choice.scores,we,(e,o)=>{_n(e,{get score(){return g(o)},get row(){return t.row},get choice(){return t.choice}})}),d(e,o)};J(f,e=>{t.row.objectScoreRemoved||e(b)});var T=X(f,2),S=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(T,e=>{t.choice.isSelectableMultiple&&g(W)&&1===g(w).multiChoiceCounterPosition&&e(S)});var C=X(T,2),x=e=>{var o=P(),i=$(o);be(i,17,()=>t.choice.requireds,we,(e,t)=>{mn(e,{get required(){return g(t)},get scoreText(){return g(G)}})}),d(e,o)};J(C,e=>{t.row.objectRequirementRemoved||e(x)});var B=X(C,2),A=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(B,e=>{t.choice.isSelectableMultiple&&g(W)&&2===g(w).multiChoiceCounterPosition&&e(A)});var O=X(B,2),k=e=>{var o=P(),i=$(o),n=e=>{nt(e,{innerClass:"w-100",get text(){return t.choice.imageSourceTooltip},children:(e,o)=>{var i=Kn();I(()=>{ye(i,"src",t.choice.image),Ie(i,g(z)),ye(i,"loading",l()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},a=e=>{var o=Qn();I(()=>{ye(o,"src",t.choice.image),Ie(o,g(z)),ye(o,"loading",l()?"eager":"lazy")}),d(e,o)};J(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),d(e,o)};J(O,e=>{5===t.choice.template&&t.choice.image&&!t.row.objectImageRemoved&&e(k)});var M=X(O,2),D=e=>{var o=ea(),i=v(o);s(i,()=>Te.sanitize(To(t.choice.text),Nt)),I(()=>Ie(o,g(E))),d(e,o)};J(M,e=>{""===t.choice.text||t.row.objectTextRemoved||e(D)});var j=X(M,2),U=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(j,e=>{t.choice.isSelectableMultiple&&g(W)&&3===g(w).multiChoiceCounterPosition&&e(U)});var H=X(j,2),_=e=>{var o=P(),i=$(o),n=e=>{nt(e,{innerClass:"w-100",get text(){return t.choice.imageSourceTooltip},children:(e,o)=>{var i=ta();I(()=>{ye(i,"src",t.choice.image),Ie(i,g(z)),ye(i,"loading",l()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},a=e=>{var o=oa();I(()=>{ye(o,"src",t.choice.image),Ie(o,g(z)),ye(o,"loading",l()?"eager":"lazy")}),d(e,o)};J(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),d(e,o)};J(H,e=>{4===t.choice.template&&t.choice.image&&!t.row.objectImageRemoved&&e(_)});var Y=X(c,2);be(Y,21,()=>t.choice.addons,we,(e,o)=>{Pn(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return g(o)},get isEnabled(){return g(F)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()}})});var Z=X(Y,2),K=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(Z,e=>{t.choice.isSelectableMultiple&&g(W)&&4===g(w).multiChoiceCounterPosition&&e(K)}),I(()=>{var e;return y(Y,1,"d-column pa-0 col w-100 ".concat(null!=(e=g(R))?e:""))}),d(e,o)},m=e=>{var o=P(),i=$(o),n=e=>{var o=da(),i=$(o),n=v(i),a=e=>{var o=P(),i=$(o),n=e=>{nt(e,{innerClass:"w-100",get text(){return t.choice.imageSourceTooltip},children:(e,o)=>{var i=na();I(()=>{ye(i,"src",t.choice.image),Ie(i,g(z)),ye(i,"loading",l()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},a=e=>{var o=aa();I(()=>{ye(o,"src",t.choice.image),Ie(o,g(z)),ye(o,"loading",l()?"eager":"lazy")}),d(e,o)};J(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),d(e,o)};J(n,e=>{t.choice.image&&!t.row.objectImageRemoved&&e(a)});var r=X(i,2),c=v(r),u=e=>{var o=la(),i=v(o);s(i,()=>Te.sanitize(To(t.choice.title),Nt)),I(()=>Ie(o,g(V))),d(e,o)};J(c,e=>{""===t.choice.title||t.row.objectTitleRemoved||e(u)});var m=X(c,2),h=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(m,e=>{t.choice.isSelectableMultiple&&g(W)&&0===g(w).multiChoiceCounterPosition&&e(h)});var p=X(m,2),f=e=>{var o=P(),i=$(o);be(i,17,()=>t.choice.scores,we,(e,o)=>{_n(e,{get score(){return g(o)},get row(){return t.row},get choice(){return t.choice}})}),d(e,o)};J(p,e=>{t.row.objectScoreRemoved||e(f)});var b=X(p,2),T=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(b,e=>{t.choice.isSelectableMultiple&&g(W)&&1===g(w).multiChoiceCounterPosition&&e(T)});var S=X(b,2),C=e=>{var o=P(),i=$(o);be(i,17,()=>t.choice.requireds,we,(e,t)=>{mn(e,{get required(){return g(t)},get scoreText(){return g(G)}})}),d(e,o)};J(S,e=>{t.row.objectRequirementRemoved||e(C)});var x=X(S,2),B=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(x,e=>{t.choice.isSelectableMultiple&&g(W)&&2===g(w).multiChoiceCounterPosition&&e(B)});var O=X(x,2),k=e=>{var o=ra(),i=v(o);s(i,()=>Te.sanitize(To(t.choice.text),Nt)),I(()=>Ie(o,g(E))),d(e,o)};J(O,e=>{""===t.choice.text||t.row.objectTextRemoved||e(k)});var M=X(O,2),D=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(M,e=>{t.choice.isSelectableMultiple&&g(W)&&3===g(w).multiChoiceCounterPosition&&e(D)});var j=X(M,2),q=e=>{var o=sa(),i=$(o);be(i,21,()=>t.choice.addons,we,(e,o)=>{Pn(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return g(o)},get isEnabled(){return g(F)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()}})});var n=X(i,2),a=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(n,e=>{t.choice.isSelectableMultiple&&g(W)&&4===g(w).multiChoiceCounterPosition&&e(a)}),I(()=>{var e;return y(i,1,"d-column pa-0 col w-100 ".concat(null!=(e=g(R))?e:""))}),d(e,o)};J(j,e=>{t.choice.useSeperateAddon||e(q)});var U=X(r,2),H=e=>{var o=ca(),i=v(o);be(i,21,()=>t.choice.addons,we,(e,o)=>{Pn(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return g(o)},get isEnabled(){return g(F)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()}})});var n=X(i,2),a=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(n,e=>{t.choice.isSelectableMultiple&&g(W)&&4===g(w).multiChoiceCounterPosition&&e(a)}),I(()=>{var e;return y(i,1,"d-column pa-0 col w-100 ".concat(null!=(e=g(R))?e:""))}),d(e,o)};J(U,e=>{t.choice.useSeperateAddon&&e(H)}),I(()=>{var e;Ie(i,"max-width: ".concat(null!=(e=g(A))?e:"","%")),Ie(r,"max-width: ".concat(100-g(A),"%"))}),d(e,o)},a=(e,o)=>{var i=e=>{var o=fa(),i=$(o),n=v(i),a=e=>{var o=ua(),i=v(o);s(i,()=>Te.sanitize(To(t.choice.title),Nt)),I(()=>Ie(o,g(V))),d(e,o)};J(n,e=>{""===t.choice.title||t.row.objectTitleRemoved||e(a)});var r=X(n,2),c=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(r,e=>{t.choice.isSelectableMultiple&&g(W)&&0===g(w).multiChoiceCounterPosition&&e(c)});var u=X(r,2),m=e=>{var o=P(),i=$(o);be(i,17,()=>t.choice.scores,we,(e,o)=>{_n(e,{get score(){return g(o)},get row(){return t.row},get choice(){return t.choice}})}),d(e,o)};J(u,e=>{t.row.objectScoreRemoved||e(m)});var h=X(u,2),p=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(h,e=>{t.choice.isSelectableMultiple&&g(W)&&1===g(w).multiChoiceCounterPosition&&e(p)});var f=X(h,2),b=e=>{var o=P(),i=$(o);be(i,17,()=>t.choice.requireds,we,(e,t)=>{mn(e,{get required(){return g(t)},get scoreText(){return g(G)}})}),d(e,o)};J(f,e=>{t.row.objectRequirementRemoved||e(b)});var T=X(f,2),S=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(T,e=>{t.choice.isSelectableMultiple&&g(W)&&2===g(w).multiChoiceCounterPosition&&e(S)});var C=X(T,2),x=e=>{var o=ga(),i=v(o);s(i,()=>Te.sanitize(To(t.choice.text),Nt)),I(()=>Ie(o,g(E))),d(e,o)};J(C,e=>{""===t.choice.text||t.row.objectTextRemoved||e(x)});var B=X(C,2),O=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(B,e=>{t.choice.isSelectableMultiple&&g(W)&&3===g(w).multiChoiceCounterPosition&&e(O)});var k=X(B,2),M=e=>{var o=ma(),i=$(o);be(i,21,()=>t.choice.addons,we,(e,o)=>{Pn(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return g(o)},get isEnabled(){return g(F)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()}})});var n=X(i,2),a=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(n,e=>{t.choice.isSelectableMultiple&&g(W)&&4===g(w).multiChoiceCounterPosition&&e(a)}),I(()=>{var e;return y(i,1,"d-column pa-0 col w-100 ".concat(null!=(e=g(R))?e:""))}),d(e,o)};J(k,e=>{t.choice.useSeperateAddon||e(M)});var D=X(i,2),j=v(D),q=e=>{var o=P(),i=$(o),n=e=>{nt(e,{innerClass:"w-100",get text(){return t.choice.imageSourceTooltip},children:(e,o)=>{var i=ha();I(()=>{ye(i,"src",t.choice.image),Ie(i,g(z)),ye(i,"loading",l()?"eager":"lazy")}),d(e,i)},$$slots:{default:!0}})},a=e=>{var o=pa();I(()=>{ye(o,"src",t.choice.image),Ie(o,g(z)),ye(o,"loading",l()?"eager":"lazy")}),d(e,o)};J(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),d(e,o)};J(j,e=>{t.choice.image&&!t.row.objectImageRemoved&&e(q)});var U=X(D,2),H=e=>{var o=va(),i=v(o);be(i,21,()=>t.choice.addons,we,(e,o)=>{Pn(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return g(o)},get isEnabled(){return g(F)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()}})});var n=X(i,2),a=e=>{const o=ee(()=>g(F)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);Nn(e,{get isEnabled(){return g(o)},get multiChoiceButton(){return g(N)},get multiChoiceText(){return g(L)},get choice(){return t.choice},selectedOneMore:()=>le(t.choice,t.row),selectedOneLess:()=>re(t.choice,t.row)})};J(n,e=>{t.choice.isSelectableMultiple&&g(W)&&4===g(w).multiChoiceCounterPosition&&e(a)}),I(()=>{var e;return y(i,1,"d-column pa-0 col w-100 ".concat(null!=(e=g(R))?e:""))}),d(e,o)};J(U,e=>{t.choice.useSeperateAddon&&e(H)}),I(()=>{var e;Ie(i,"max-width: ".concat(100-g(A),"%")),Ie(D,"max-width: ".concat(null!=(e=g(A))?e:"","%"))}),d(e,o)};J(e,e=>{3===t.choice.template&&e(i)},o)};J(i,e=>{2===t.choice.template?e(n):e(a,!1)}),d(e,o)};J(c,e=>{t.choice.template>=4||1===t.choice.template||t.windowWidth<=960||t.row.choicesShareTemplate?e(u):e(m,!1)}),I((e,a)=>{var l,s;y(o,1,e),n=y(i,1,"d-flex",null,n,a),y(r,1,"row row-".concat(null!=(l=t.row.id)?l:""," choice-").concat(null!=(s=t.choice.id)?s:""," ").concat(g(D)?"choice-selected":"choice-unselected"," ").concat(g(F)?"choice-enabled":"choice-disabled"," ").concat(g(D)&&g(b).selOverlayOnImage||!g(F)&&g(b).reqOverlayOnImage?"bg-overlay":""," w-100")),Ie(r,g(U))},[()=>S(function(){let e=t.choice.objectWidth||t.row.objectWidth,o=function(e){switch(e){case"col-sm-6":case"col-sm-5":return 2;case"col-md-4":return 3;case"col-md-3":return 4;case"w-20":return 5;case"col-lg-2":return 6;case"w-14":return 7;case"w-12":return 8;case"w-11":return 9;case"w-10":return 10;case"w-9":return 11;case"col-xl-1":return 12;default:return 1}}(e),i="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(a()>1280)return e;if(!(a()>720))return a()>480?1===o?"col-12":"col-6":"col-12";switch(o){case 1:return"col-12";case 2:return"col-6";case 3:return i>2?"col-4":app.objectsPerRow;case 4:return i>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}()),()=>({fullHeight:g(j)})]),d(e,o)};J(ce,e=>{!g(F)&&g(b).reqFilterVisibleIsOn||e(de)});var ue=X(ce,2),ge=e=>{const t=ee(()=>"dlgCommon"===g(O));Ui(e,{get open(){return g(t)},onclose:()=>p(O,"none"),title:"",get context(){return c.context},closeHandler:(e,t)=>{"accept"===e.detail.action&&c.choice&&c.row?(M=!0,c.isWord&&(c.choice.wordChangeSelect=t),ae(c.choice,c.row),M=!1):M=!1},get isWord(){return c.isWord},get prevText(){return c.prevText}})};J(ue,e=>{"dlgCommon"===g(O)&&e(ge)}),d(e,se);var me=u({activateObject:ie});return i(),me}Ce(["click"]);var Ia=r('<img alt=""/>'),ya=r('<img alt=""/>'),Sa=r('<h2 class="mb-0"><!></h2>'),Ca=r('<img alt=""/>'),xa=r('<img alt=""/>'),Ba=r('<p class="mb-0"><!></p>'),Aa=r('<img alt=""/>'),Oa=r('<img alt=""/>'),ka=r('<div class="col-12 m-0 p-0"><!> <!> <!> <!> <!></div>'),Ma=r('<h2 class="mb-0"><!></h2>'),Fa=r('<p class="mb-0"><!></p>'),Ra=r('<img alt=""/>'),Da=r('<img alt=""/>'),ja=r('<div class="col p-0 text-center"><!> <!></div> <div class="col p-0 text-center"><!></div>',1),Pa=r('<img alt=""/>'),$a=r('<img alt=""/>'),qa=r('<h2 class="mb-0"><!></h2>'),Va=r('<p class="mb-0"><!></p>'),La=r('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!></div>',1),Na=r("<div><!></div>"),Wa=r("<div><!></div>"),Ea=r("<div><!> <!></div>");function Ua(e,t){n(t,!0);const o=f(t,"preloadImages",3,!1),i=f(t,"isBackpack",3,!1);let l=m(void 0),r=ee(()=>Io("privateBackgroundIsOn",t.row)),h=ee(()=>Io("privateRowImageIsOn",t.row)),b=ee(()=>Io("privateRowIsOn",t.row)),w=ee(()=>Io("privateTextIsOn",t.row)),T=m(0),S=ee(()=>void 0!==g(h).rowImageBoxWidth?g(h).rowImageBoxWidth:50),C=ee(()=>xo(t.row.requireds)),x=ee(()=>t.row.onlyIfNoChoices&&0!==t.row.currentChoices),B=ee(()=>t.row.rowJustify?"justify-".concat(t.row.rowJustify):""),A=ee(()=>{const e=[];if(void 0!==t.row.resultGroupId&&""!==t.row.resultGroupId&&t.row.resultGroupId)for(const[o]of Bt){const i=Mt.get(o);if(void 0!==i){const o=i.choice,n=i.row;if(!o.isNotResult)if(t.row.resultGroupId===n.resultGroupId)e.push({choice:o,row:n});else if(void 0!==o.groups)for(let i=0;i<o.groups.length;i++)if(o.groups[i]===t.row.resultGroupId){e.push({choice:o,row:n});break}}}else for(const[t]of Bt){const o=Mt.get(t);if(void 0!==o){const t=o.choice,i=o.row;t.isNotResult||e.push({choice:t,row:i})}}return e.sort((e,t)=>e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index),e}),O=ee(()=>{if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.backgroundImage)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(let e=0;e<t.row.rowDesignGroups.length;e++){let o=Pt.get(t.row.rowDesignGroups[e]);if(void 0!==o&&o.privateBackgroundIsOn&&o.styling.backgroundImage){let e=o.activatedId,t=Rt.get(e);if(""===e||So(o.activatedId))return o.styling;if(void 0!==app.globalRequirements&&void 0!==t&&xo(t.requireds))return o.styling}}return!1}),k=ee(()=>{if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.bgColorIsOn&&t.row.styling.backgroundColor)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(let e=0;e<t.row.rowDesignGroups.length;e++){let o=Pt.get(t.row.rowDesignGroups[e]);if(void 0!==o&&o.privateBackgroundIsOn&&o.styling.bgColorIsOn&&o.styling.backgroundColor){let e=o.activatedId,t=Rt.get(e);if(""===e||So(o.activatedId))return o.styling;if(void 0!==app.globalRequirements&&void 0!==t&&xo(t.requireds))return o.styling}}return!1}),M=ee(()=>{let e=[];return e.push("margin: ".concat(g(b).rowBodyMarginTop,"px ").concat(g(b).rowBodyMarginSides,"% ").concat(g(b).rowBodyMarginBottom,"px ").concat(g(b).rowBodyMarginSides,"%;")),g(O)&&e.push("background-image: url('".concat(g(O).backgroundImage,"'); ").concat(g(O).isBackgroundRepeat?"background-repeat: repeat;":g(O).isBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),g(k)&&e.push("background-color: ".concat(Bi(g(k).backgroundColor),";")),e.join(" ")}),F=ee(()=>{let e=g(b).rowBorderRadiusIsPixels?"px":"%",t=[];return g(b).rowBorderImage&&t.push("border-image: url('".concat(g(b).rowBorderImage,"') ").concat(g(b).rowBorderImageSliceTop," ").concat(g(b).rowBorderImageSliceRight," ").concat(g(b).rowBorderImageSliceBottom," ").concat(g(b).rowBorderImageSliceLeft," / ").concat(g(b).rowBorderImageWidth,"px ").concat(g(b).rowBorderImageRepeat,"; border-style: solid; padding: ").concat(g(b).rowBorderImageWidth,"px;")),g(r).rowBackgroundImage&&t.push("background-image: url('".concat(g(r).rowBackgroundImage,"'); ").concat(g(r).isRowBackgroundRepeat?"background-repeat: repeat;":g(r).isRowBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),g(r).rowBgColorIsOn&&t.push("background-color: ".concat(Bi(g(r).rowBgColor),";")),t.push("margin-left: ".concat(g(b).rowMargin,"%; margin-right: ").concat(g(b).rowMargin,"%;")),g(b).rowGradientIsOn&&t.push("background-image: linear-gradient(".concat(g(b).rowGradient,");")),t.push("border-radius: ".concat(g(b).rowBorderRadiusTopLeft).concat(e," ").concat(g(b).rowBorderRadiusTopRight).concat(e," ").concat(g(b).rowBorderRadiusBottomRight).concat(e," ").concat(g(b).rowBorderRadiusBottomLeft).concat(e,";")),g(b).rowOverflowIsOn&&t.push("overflow: hidden;"),g(b).rowBorderIsOn&&t.push("border: ".concat(g(b).rowBorderWidth,"px ").concat(g(b).rowBorderStyle," ").concat(Bi(g(b).rowBorderColor),";")),g(b).rowDropShadowIsOn&&(g(b).rowUseBoxShadowIsOn?t.push("box-shadow: ".concat(g(b).rowDropShadowH,"px ").concat(g(b).rowDropShadowV,"px ").concat(g(b).rowDropShadowBlur,"px ").concat(Bi(g(b).rowDropShadowColor),";")):t.push("filter: drop-shadow(".concat(g(b).rowDropShadowH,"px ").concat(g(b).rowDropShadowV,"px ").concat(g(b).rowDropShadowBlur,"px ").concat(Bi(g(b).rowDropShadowColor),");"))),t.join(" ")}),R=ee(()=>"font-family: ".concat(g(w).rowTitle,"; font-size: ").concat(g(w).rowTitleTextSize,"%; text-align: ").concat(g(w).rowTitleAlign,"; color: ").concat(Bi(g(w).rowTitleColor))),D=ee(()=>"white-space: pre-wrap; font-family: ".concat(g(w).rowText,"; font-size: ").concat(g(w).rowTextTextSize,"%; text-align: ").concat(g(w).rowTextAlign,"; color: ").concat(Bi(g(w).rowTextColor),"; padding: ").concat(g(b).rowTextPaddingX,"px ").concat(g(b).rowTextPaddingY,"% ").concat(g(b).rowTextPaddingX,"px ").concat(g(b).rowTextPaddingY,"%;")),j=ee(()=>{let e=g(h).rowImgBorderRadiusIsPixels?"px":"%",t=[];return t.push("width: ".concat(g(h).rowImageWidth,"%; margin-top: ").concat(g(h).rowImageMarginTop,"%; margin-bottoom: ").concat(g(h).rowImageMarginBottom,"%;")),t.push("border-radius: ".concat(g(h).rowImgBorderRadiusTopLeft).concat(e," ").concat(g(h).rowImgBorderRadiusTopRight).concat(e," ").concat(g(h).rowImgBorderRadiusBottomRight).concat(e," ").concat(g(h).rowImgBorderRadiusBottomLeft).concat(e,";")),g(h).rowImgOverflowIsOn&&t.push("overflow: hidden;"),g(h).rowImgBorderIsOn&&t.push("border: ".concat(g(h).rowImgBorderWidth,"px ").concat(g(h).rowImgBorderStyle," ").concat(Bi(g(h).rowImgBorderColor),";")),t.join(" ")}),q=ee(()=>"padding-left: ".concat(g(b).rowButtonYPadding,"px; padding-right: ").concat(g(b).rowButtonYPadding,"px; padding-top: ").concat(g(b).rowButtonXPadding,"px; padding-bottom: ").concat(g(b).rowButtonXPadding,"px;"));function V(){if(t.row.btnPointAddon&&"sumaddon"===t.row.buttonTypeRadio&&void 0!==t.row.pointTypeRandom){const e=t.row.randomMax||0,o=t.row.randomMin||0,i=Math.floor(Math.random()*(e-o)+o),n=Ot.get(t.row.pointTypeRandom);return void(void 0!==n&&(n.startingSum+=i))}if(t.row.buttonRandom){const e=[],o=t.row.objects.filter(e=>xo(e.requireds)&&!e.isNotSelectable);if(t.row.isWeightedRandom){let e=0;for(let t=0;t<o.length;t++){e+=o[t].randomWeight||100}if(void 0!==t.row.buttonRandomNumber)for(let i=0;i<t.row.buttonRandomNumber;i++){const i=Math.floor(Math.random()*e);let n=0;for(let e=0;e<o.length;e++){const a=o[e];if(n+=a.randomWeight||100,i<n){g(l).activateObject(a,t.row);break}}}}else if(void 0!==t.row.buttonRandomNumber)for(let i=0;i<t.row.buttonRandomNumber;i++){let i,n,a=0,r=100;do{n=Math.floor(Math.random()*o.length),i=o[n],a++}while(t.row.onlyUnselectedChoices&&(-1!==e.indexOf(n)||Bt.has(i.id))&&a<r);i&&-1===e.indexOf(n)&&(e.push(n),g(l).activateObject(i,t.row))}}else if(void 0!==t.row.buttonId){const e=jt.get(t.row.buttonId);void 0!==e&&(Bt.has(e.id)?t.row.buttonType&&(e.isTrue=!1,Bt.delete(e.id)):(e.isTrue=!0,Bt.set(e.id,{multiple:0,isVariable:!0})))}}a(()=>{if(t.row.deselectChoices&&!g(C))for(let e=0;e<t.row.objects.length;e++){const o=t.row.objects[e];o.isActive&&g(l).activateObject(o,t.row)}});var L=Ea(),N=v(L),W=e=>{var i=Na(),n=v(i),a=e=>{var i=ka(),n=v(i),a=e=>{var i=P(),n=$(i),a=e=>{const o=ee(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&Bt.has(t.row.buttonId)||g(x));me(e,{onclick:V,get disabled(){return g(o)},get style(){return g(q)},variant:"raised",children:(e,o)=>{he(e,{children:(e,o)=>{var i=P(),n=$(i);s(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},l=(e,i)=>{var n=e=>{var i=P(),n=$(i),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.row.imageSourceTooltip},children:(e,i)=>{var n=Ia();I(()=>{ye(n,"src",t.row.image),Ie(n,g(j)),ye(n,"loading",o()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var i=ya();I(()=>{ye(i,"src",t.row.image),Ie(i,g(j)),ye(i,"loading",o()?"eager":"lazy")}),d(e,i)};J(n,e=>{t.row.imageSourceTooltip?e(a):e(l,!1)}),d(e,i)};J(e,e=>{t.row.image&&e(n)},i)};J(n,e=>{t.row.isButtonRow?e(a):e(l,!1)}),d(e,i)};J(n,e=>{(1===t.row.template||t.windowWidth<=960)&&e(a)});var l=X(n,2),r=e=>{var o=Sa(),i=v(o);s(i,()=>Te.sanitize(To(t.row.title),Nt)),I(()=>Ie(o,g(R))),d(e,o)};J(l,e=>{""!==t.row.title&&e(r)});var c=X(l,2),u=e=>{var i=P(),n=$(i),a=e=>{const o=ee(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&Bt.has(t.row.buttonId)||g(x));me(e,{onclick:V,get disabled(){return g(o)},get style(){return g(q)},variant:"raised",children:(e,o)=>{he(e,{children:(e,o)=>{var i=P(),n=$(i);s(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},l=(e,i)=>{var n=e=>{var i=P(),n=$(i),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.row.imageSourceTooltip},children:(e,i)=>{var n=Ca();I(()=>{ye(n,"src",t.row.image),Ie(n,g(j)),ye(n,"loading",o()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var i=xa();I(()=>{ye(i,"src",t.row.image),Ie(i,g(j)),ye(i,"loading",o()?"eager":"lazy")}),d(e,i)};J(n,e=>{t.row.imageSourceTooltip?e(a):e(l,!1)}),d(e,i)};J(e,e=>{t.row.image&&e(n)},i)};J(n,e=>{t.row.isButtonRow?e(a):e(l,!1)}),d(e,i)};J(c,e=>{5===t.row.template&&e(u)});var m=X(c,2),h=e=>{var o=Ba(),i=v(o);s(i,()=>Te.sanitize(To(t.row.titleText),Nt)),I(()=>Ie(o,g(D))),d(e,o)};J(m,e=>{""!==t.row.titleText&&e(h)});var p=X(m,2),f=e=>{var i=P(),n=$(i),a=e=>{const o=ee(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&Bt.has(t.row.buttonId)||g(x));me(e,{onclick:V,get disabled(){return g(o)},get style(){return g(q)},variant:"raised",children:(e,o)=>{he(e,{children:(e,o)=>{var i=P(),n=$(i);s(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},l=(e,i)=>{var n=e=>{var i=P(),n=$(i),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.row.imageSourceTooltip},children:(e,i)=>{var n=Aa();I(()=>{ye(n,"src",t.row.image),Ie(n,g(j)),ye(n,"loading",o()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var i=Oa();I(()=>{ye(i,"src",t.row.image),Ie(i,g(j)),ye(i,"loading",o()?"eager":"lazy")}),d(e,i)};J(n,e=>{t.row.imageSourceTooltip?e(a):e(l,!1)}),d(e,i)};J(e,e=>{t.row.image&&e(n)},i)};J(n,e=>{t.row.isButtonRow?e(a):e(l,!1)}),d(e,i)};J(p,e=>{4===t.row.template&&e(f)}),d(e,i)},l=e=>{var i=P(),n=$(i),a=e=>{var i=ja(),n=$(i),a=v(n),l=e=>{var o=Ma(),i=v(o);s(i,()=>Te.sanitize(To(t.row.title),Nt)),I(()=>Ie(o,g(R))),d(e,o)};J(a,e=>{""!==t.row.title&&e(l)});var r=X(a,2),c=e=>{var o=Fa(),i=v(o);s(i,()=>Te.sanitize(To(t.row.titleText),Nt)),I(()=>Ie(o,g(D))),d(e,o)};J(r,e=>{""!==t.row.titleText&&e(c)});var u=X(n,2),m=v(u),h=e=>{const o=ee(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&Bt.has(t.row.buttonId)||g(x));me(e,{onclick:V,get disabled(){return g(o)},get style(){return g(q)},variant:"raised",children:(e,o)=>{he(e,{children:(e,o)=>{var i=P(),n=$(i);s(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},p=(e,i)=>{var n=e=>{var i=P(),n=$(i),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.row.imageSourceTooltip},children:(e,i)=>{var n=Ra();I(()=>{ye(n,"src",t.row.image),Ie(n,g(j)),ye(n,"loading",o()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var i=Da();I(()=>{ye(i,"src",t.row.image),Ie(i,g(j)),ye(i,"loading",o()?"eager":"lazy")}),d(e,i)};J(n,e=>{t.row.imageSourceTooltip?e(a):e(l,!1)}),d(e,i)};J(e,e=>{t.row.image&&e(n)},i)};J(m,e=>{t.row.isButtonRow?e(h):e(p,!1)}),I(()=>{var e;Ie(n,"max-width: ".concat(100-g(S),"%")),Ie(u,"max-width: ".concat(null!=(e=g(S))?e:"","%"))}),d(e,i)},l=(e,i)=>{var n=e=>{var i=La(),n=$(i),a=v(n),l=e=>{const o=ee(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&Bt.has(t.row.buttonId)||g(x));me(e,{onclick:V,get disabled(){return g(o)},get style(){return g(q)},variant:"raised",children:(e,o)=>{he(e,{children:(e,o)=>{var i=P(),n=$(i);s(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},r=(e,i)=>{var n=e=>{var i=P(),n=$(i),a=e=>{nt(e,{innerClass:"w-100",get text(){return t.row.imageSourceTooltip},children:(e,i)=>{var n=Pa();I(()=>{ye(n,"src",t.row.image),Ie(n,g(j)),ye(n,"loading",o()?"eager":"lazy")}),d(e,n)},$$slots:{default:!0}})},l=e=>{var i=$a();I(()=>{ye(i,"src",t.row.image),Ie(i,g(j)),ye(i,"loading",o()?"eager":"lazy")}),d(e,i)};J(n,e=>{t.row.imageSourceTooltip?e(a):e(l,!1)}),d(e,i)};J(e,e=>{t.row.image&&e(n)},i)};J(a,e=>{t.row.isButtonRow?e(l):e(r,!1)});var c=X(n,2),u=v(c),m=e=>{var o=qa(),i=v(o);s(i,()=>Te.sanitize(To(t.row.title),Nt)),I(()=>Ie(o,g(R))),d(e,o)};J(u,e=>{""!==t.row.title&&e(m)});var h=X(u,2),p=e=>{var o=Va(),i=v(o);s(i,()=>Te.sanitize(To(t.row.titleText),Nt)),I(()=>Ie(o,g(D))),d(e,o)};J(h,e=>{""!==t.row.titleText&&e(p)}),I(()=>{var e;Ie(n,"max-width: ".concat(null!=(e=g(S))?e:"","%")),Ie(c,"max-width: ".concat(100-g(S),"%"))}),d(e,i)};J(e,e=>{3===t.row.template&&e(n)},i)};J(n,e=>{2===t.row.template?e(a):e(l,!1)}),d(e,i)};J(n,e=>{t.row.template>=4||1===t.row.template||t.windowWidth<=960?e(a):e(l,!1)}),I(()=>{var e;y(i,1,"row gx-0 row-".concat(null!=(e=t.row.id)?e:"")),Ie(i,""!==t.row.title?g(F):"")}),d(e,i)};J(N,e=>{g(C)&&e(W)});var E=X(N,2),U=e=>{var n=Wa(),a=v(n),r=e=>{var i=P(),n=$(i);be(n,17,()=>g(A),we,(e,i,n)=>{c(Ta(e,{get row(){return t.row},get choice(){return g(i).choice},index:n,get windowWidth(){return t.windowWidth},get preloadImages(){return o()}}),e=>p(l,e,!0),()=>g(l))}),d(e,i)},s=e=>{var n=P(),a=$(n);be(a,17,()=>t.row.objects,we,(e,n,a)=>{c(Ta(e,{get row(){return t.row},get choice(){return g(n)},index:a,get windowWidth(){return t.windowWidth},get preloadImages(){return o()},get isBackpack(){return i()},get mainDiv(){return t.mainDiv}}),e=>p(l,e,!0),()=>g(l))}),d(e,n)};J(a,e=>{t.row.isResultRow?e(r):e(s,!1)}),I(()=>{var e;return y(n,1,"row gx-0 m-0 p-0 ".concat(null!=(e=g(B))?e:""))}),d(e,n)};J(E,e=>{g(C)&&e(U)}),I(()=>{var e;y(L,1,"row-".concat(null!=(e=t.row.id)?e:"","-bg text-center ").concat(g(C)?"":"hidden")),Ie(L,g(M))}),Ae(L,"clientWidth",e=>p(T,e)),d(e,L),u()}var za=r('<div><span><!> <!> <span translate="no"> </span> <!> <!></span></div>');var Ga=r("<!> <!>",1),Ha=r('<div class="p-0 col-12"><!></div>'),_a=r("<div><!></div>"),Ya=r('<div class="container-fluid p-0"><div class="row gx-0"></div></div>'),Za=r("<!> <!> <!>",1);function Ja(e,t){n(t,!0);let o=f(t,"open",7),i=m(0),a=m(void 0),l=ee(()=>{let e=[];return e.push("overflow-wrap: break-word;"),e.push("white-space: normal;"),app.styling.useBackpackDesign?(app.styling.backpackBgImage&&e.push("background-image: url('".concat(app.styling.backpackBgImage,"');")),e.push("background-color: ".concat(Bi(app.styling.backpackBgColor),";")),app.styling.isBackpackBgRepeat?e.push("background-repeat: repeat;"):app.styling.isBackpackBgFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")):(app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(Bi(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")),e.join(" ")});const r=ee(()=>"dlgBackpack"!==Ut.currentDialog?"close":""),s=ee(()=>"dlgBackpack"!==Ut.currentDialog?"close":""),h=ee(()=>void 0!==app.styling.backPackWidth?app.styling.backPackWidth:1200);ce(e,{get escapeKeyAction(){return g(r)},get scrimClickAction(){return g(s)},get surface$style(){var e;return"width: ".concat(null!=(e=g(h))?e:"","px; max-width: 100vw;")},get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=Za(),n=$(o);de(n,{class:"p-0 m-0 row",tabindex:0,autofocus:!0,children:(e,t)=>{var o=Ha(),i=v(o);me(i,{onclick:()=>async function(e){var t;if(e){let i=[];try{zt.labelText="Downloading image...",zt.isOpen=!0,bi(e),await fi(e),e.querySelectorAll("span.d-flex").forEach(e=>{const t=e;!t.style.height&&t.offsetHeight>0&&(t.style.height="".concat(t.offsetHeight+1,"px"),i.push(t))});const t=(await ut.maxArea({usePromise:!0})).height,n=e.offsetHeight,a=e.offsetWidth;if(!Gt.isSingleFile&&n>t){let i=0,l=1;const r=Math.ceil(n/t);for(;i<n;){const s=Math.min(t,n-i),c=document.createElement("div");zt.labelText="Splitting large image...(".concat(l," / ").concat(r,")"),zt.isOpen=!0,app.styling.useBackpackDesign?(app.styling.backpackBgImage&&(c.style.backgroundImage=app.styling.backpackBgImage),app.styling.backpackBgColor&&(c.style.backgroundColor=Bi(app.styling.backpackBgColor)),app.styling.isBackpackBgRepeat?c.style.backgroundRepeat="repeat":app.styling.isBackpackBgFitIn?c.style.backgroundSize="100% 100%":c.style.backgroundSize="cover"):(app.styling.backgroundImage&&(c.style.backgroundImage=app.styling.backgroundImage),app.styling.backgroundColor&&(c.style.backgroundColor=Bi(app.styling.backgroundColor)),app.styling.isBackgroundRepeat?c.style.backgroundRepeat="repeat":app.styling.isBackgroundFitIn?c.style.backgroundSize="100% 100%":c.style.backgroundSize="cover"),e.parentElement&&e.parentElement.classList.contains("mdc-dialog__content")&&c.classList.add("backpack-wrapper"),c.style.width="".concat(a,"px"),c.style.height="".concat(s,"px"),c.style.overflow="hidden",c.style.position="absolute",c.style.display="block",c.style.top="0",c.style.left="0",c.style.zIndex="-9999",c.style.pointerEvents="none";const d=e.cloneNode(!0);bi(d),d.style.position="relative",d.style.top="-".concat(i,"px"),c.appendChild(d),document.body.appendChild(c),await fi(c),await wi(c),await Ti(5);try{const e=await R(c,{filter:e=>{var t,o;return!(null==(t=e.classList)?void 0:t.contains("mdc-top-app-bar"))&&!(null==(o=e.classList)?void 0:o.contains("hidden"))&&e.nodeType!==Node.COMMENT_NODE}});if(!e)throw new Error("blob creation failed");const t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download="Build_".concat(ao(),"_part").concat(l++,".png"),o.target="_blank",o.click(),setTimeout(()=>{URL.revokeObjectURL(t)},1e3)}catch(o){zt.labelText="Download failed: Restricted content detected.",zt.isOpen=!0,console.error(o)}finally{document.body.removeChild(c)}i+=t}zt.labelText="Image downloads complete.",zt.isOpen=!0}else{const t=await R(e,{filter:e=>{var t,o;return!(null==(t=e.classList)?void 0:t.contains("mdc-top-app-bar"))&&!(null==(o=e.classList)?void 0:o.contains("hidden"))&&e.nodeType!==Node.COMMENT_NODE}});if(!t)throw new Error("blob creation failed");const o=URL.createObjectURL(t),i=document.createElement("a");i.href=o,i.download="Build_".concat(ao(),".png"),i.target="_blank",i.click(),setTimeout(()=>{URL.revokeObjectURL(o)},1e3),zt.labelText="Image download complete.",zt.isOpen=!0}}catch(o){zt.labelText="Download failed: Restricted content detected.",zt.isOpen=!0,console.error(o)}finally{for(let e=0;e<i.length;e++){const o=i[e];o.style.removeProperty("height"),""===(null==(t=o.getAttribute("style"))?void 0:t.trim())&&o.removeAttribute("style")}}}else zt.labelText="Download failed: Cannot find window.",zt.isOpen=!0}(g(a)),class:"h-100",children:(e,t)=>{var o=Ga(),i=$(o);Oe(i,{class:"mdi mdi-file-image"});var n=X(i,2);he(n,{children:(e,t)=>{var o=ae("Download Image");d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var r=X(n,2);ue(r,{id:"backpackDialog",class:"p-0",children:(e,t)=>{var o=Ya(),n=v(o);be(n,21,()=>app.backpack,we,(e,t)=>{var o=_a();Ua(v(o),{get row(){return g(t)},get windowWidth(){return g(i)},get preloadImages(){return app.preloadImages},isBackpack:!0}),I(()=>y(o,1,S(g(t).width?"col-6":"col-12"))),d(e,o)}),c(o,e=>p(a,e),()=>g(a)),I(()=>Ie(o,g(l))),Ae(o,"clientWidth",e=>p(i,e)),d(e,o)},$$slots:{default:!0}});var s=X(r,2);ge(s,{class:"p-0",style:"min-height: 36px",children:(e,t)=>{me(e,{action:"close",children:(e,t)=>{he(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=ae("Close");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),u()}var Xa=r("<div><!></div>"),Ka=(e,t)=>{e.preventDefault(),t()},Qa=r('<span class="picture-inner-text svelte-k98dno"><!></span>'),el=r('<span class="picture-inner-text svelte-k98dno"><!></span>'),tl=r('<div class="picture-inner svelte-k98dno"><!></div>'),ol=r('<div class="preview-container svelte-k98dno"><canvas tabindex="0"></canvas> <!></div> <!> <!> <!>',1),il=r("<div><!></div> <!> <!>",1),nl=r("<div><!></div>"),al=r('<div id="picture-input" class="picture-input svelte-k98dno"><!> <input type="file" class="svelte-k98dno"/></div>');function ll(e,o){n(o,!0);let r,h,w=f(o,"width",19,()=>Number.MAX_SAFE_INTEGER),T=f(o,"height",19,()=>Number.MAX_SAFE_INTEGER),S=f(o,"margin",3,0),C=f(o,"accept",3,"image/*, image/avif"),x=f(o,"capture",3,null),B=f(o,"size",19,()=>Number.MAX_SAFE_INTEGER),A=f(o,"name",3,null),O=f(o,"id",3,null),k=f(o,"buttonClass",3,""),M=f(o,"removeButtonClass",3,""),F=f(o,"aspectButtonClass",3,""),R=f(o,"prefill",11,""),D=f(o,"prefillOptions",19,()=>({})),j=f(o,"crop",3,!0),P=f(o,"radius",3,0),q=f(o,"removable",3,!1),V=f(o,"hideChangeButton",3,!1),L=f(o,"autoToggleAspectRatio",3,!1),N=f(o,"toggleAspectRatio",3,!1),W=f(o,"changeOnClick",3,!0),E=f(o,"plain",3,!1),U=f(o,"zIndex",3,1e4),z=f(o,"alertOnError",3,!0),G=f(o,"customStrings",19,()=>({})),H=m(!1),_=m(0),Y=m(0),K=m(!1),Q=m(0),te=m(0),oe=m(1),ie=m(0),ne=m(""),re=m(null),se=m(null),ce=m(""),de=m(0),ue=m(0),ge=m(""),pe=m(!1),ve=m(0),fe=m(0),be=m(0),we=m(null),Te=m(i([])),Se={upload:"<p>Your device does not support file uploading.</p>",drag:"Drag an image or <br>click here to select a file",tap:"Tap here to select a photo <br>from your gallery",change:"Change Photo",aspect:"Landscape/Portrait",remove:"Remove Photo",select:"Select a Photo",selected:"<p>Photo successfully selected!</p>",fileSize:"The file size exceeds the limit",fileType:"This file type is not supported."},Ce=m(void 0);const xe=ee(()=>{if(navigator.userAgent.match(/(Android (1\.0|1\.1|1\.5|1\.6|2\.0|2\.1))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.0|2\.5|3\.0))/))return!1;const e=document.createElement("input");return e.type="file",!e.disabled}),Be=ee(()=>!(!window.FileReader||!window.CanvasRenderingContext2D)),Ae=ee(()=>{const e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!("ontouchstart"in window||navigator.maxTouchPoints)}),Oe=ee(()=>g(K)?"dragging-over":""),Me=ee(()=>"".concat(Math.min(.04*g(Y),21),"px"));function Fe(){g(H)&&!W()||qe(),o.onclick&&o.onclick()}function Re(){Ne()&&g(re)&&$e(g(re))}function De(){g(Ae)&&p(K,!1)}function je(e,t=!1){var i;const n=e.target,a="drop"===e.type?null==(i=e.dataTransfer)?void 0:i.files:n.files;if(a&&0!==a.length){if(a[0].size<=0||a[0].size>1024*Number(B())*1024)return o.onerror&&o.onerror({type:"fileSize",fileSize:a[0].size,fileType:a[0].type,fileName:a[0].name,message:"".concat(Se.fileSize," (").concat(B(),"MB)")}),void(z()&&alert("".concat(Se.fileSize," (").concat(B(),"MB)")));if(a[0].name!==g(ce)||a[0].size!==g(de)||g(ue)!==a[0].lastModified){if(p(se,a[0],!0),p(ce,a[0].name,!0),p(de,a[0].size,!0),p(ue,a[0].lastModified,!0),p(ge,a[0].type.split(";")[0],!0),"image/*, image/avif"===C()){if(!g(ge).startsWith("image/"))return}else if(-1===g(Te).indexOf(g(ge)))return o.onerror&&o.onerror({type:"fileType",fileSize:g(de),fileType:g(ge),fileName:g(ce),message:Se.fileType}),void(z()&&alert(Se.fileType));p(H,!0),p(ne,""),g(Be)&&g(se)?Pe(g(se)):t?o.onprefill&&o.onprefill():o.onchange&&o.onchange(g(ne))}}}function Pe(e,t){!function(e,t){const o=new FileReader;o.onload=e=>{const o=new DataView(e.target.result);if(65496!==o.getUint16(0,!1))return t(-2);const i=o.byteLength;let n=2;for(;n<i;){const e=o.getUint16(n,!1);if(n+=2,65505===e){if(1165519206!==o.getUint32(n+=2,!1))return t(-1);const e=18761===o.getUint16(n+=6,!1);n+=o.getUint32(n+4,e);const i=o.getUint16(n,e);n+=2;for(let a=0;a<i;a++)if(274===o.getUint16(n+12*a,e))return t(o.getUint16(n+12*a+8,e))}else{if(65280&~e)break;n+=o.getUint16(n,!1)}}return t(-1)},o.readAsArrayBuffer(e.slice(0,65536))}(e,t=>{!function(e){p(pe,!1),8===e?p(pe,-Math.PI/2):6===e?p(pe,Math.PI/2):3===e&&p(pe,-Math.PI)}(t);const i=new FileReader;i.onload=e=>{p(ne,e.target.result,!0),p(re,new Image,!0),g(re).onload=()=>{if(L()){We(g(Q),g(te))!==We(g(re).width,g(re).height)&&Ee()}$e(g(re))},g(re).src=g(ne),o.onchange&&o.onchange(g(ne))},i.readAsDataURL(e)})}function $e(e){p(ve,e.width,!0),p(fe,e.height,!0),p(be,e.width/e.height);let t=0,o=0,i=g(Y),n=g(_);const a=g(Y)/g(_);j()?g(be)>=a?(i=n*g(be),t=(g(Y)-i)/2):(n=i/g(be),o=(g(_)-n)/2):g(be)>=a?(n=i/g(be),o=(g(_)-n)/2):(i=n*g(be),t=(g(Y)-i)/2),g(Ce)&&(g(Ce).style.background="none",g(Ce).width=g(Y)*g(oe),g(Ce).height=g(_)*g(oe),g(we)&&(g(we).setTransform(1,0,0,1,0,0),g(we).clearRect(0,0,g(Ce).width,g(Ce).height),g(pe)&&void 0===e.style.imageOrientation&&(g(we).translate(t*g(oe),o*g(oe)),g(we).translate(i/2*g(oe),n/2*g(oe)),g(we).rotate(g(pe)),t=-i/2,o=-n/2),g(we).drawImage(e,t*g(oe),o*g(oe),i*g(oe),n*g(oe))))}function qe(){h.click()}function Ve(){h.value="",h.type="",h.type="file",p(ce,""),p(ge,""),p(de,0),p(ue,0),p(H,!1),p(ne,""),p(se,null),p(re,null),g(Ce)&&(g(Ce).style.backgroundColor="rgba(200,200,200,.25)",g(Ce).width=g(Y)*g(oe)),o.onremove&&o.onremove()}function Le(){Ee(),g(re)&&$e(g(re));const e=We(g(Q),g(te));o.onaspectratiochange&&o.onaspectratiochange(e)}function Ne(){const e=g(Q)/g(te),t=r.clientWidth;return!!t&&(!(!N()&&!L()&&t===g(ie))&&(p(ie,t,!0),p(Y,Math.min(g(ie)-2*Number(S()),g(Q)),!0),p(_,g(Y)/e),!0))}function We(e,t){return e>t?"landscape":e<t?"portrait":"square"}function Ee(){!function(){const e=g(Q);p(Q,g(te),!0),p(te,e,!0)}(),Ne()}function Ue(e,i){let n=window.File;try{new n([],"")}catch(l){n=class extends Blob{constructor(e,o,i={}){super(e,i),t(this,"lastModifiedDate",new Date),t(this,"lastModified",+this.lastModifiedDate),t(this,"name"),this.name=o}}}if(i=Object.assign({},i),"object"==typeof e)return p(H,!0),p(ne,""),void(g(Be)?Pe(e):o.onprefill&&o.onprefill());-1===e.indexOf("data:")&&(e+=-1!==e.indexOf("?")?"&_="+(new Date).getTime():"?_="+(new Date).getTime());const a=new Headers;a.append("Accept","image/*, image/avif"),fetch(e,{method:"GET",mode:"cors",headers:a}).then(e=>e.blob()).then(t=>{const o={target:{files:[]}},a=i.fileName||e.split("/").slice(-1)[0];let l=i.mediaType||t.type||"image/"+(i.fileType||a.split("?")[0].split(".").slice(-1)[0]);l=l.replace("jpg","jpeg").replace("image/svg","image/svg+xml"),"image/svg"===l&&(l="image/svg+xml"),o.target.files[0]=new n([t],a,{type:l}),je(o,!0)}).catch(e=>{o.onerror&&o.onerror({type:"failedPrefill",message:"Failed loading prefill image: "+e}),z()&&alert("Failed loading prefill image: "+e)})}a(()=>{R()&&Ue(R(),D())}),b(async()=>{await Z(),function(){if(G())for(const e in G())e in Se&&"string"==typeof G()[e]&&(Se[e]=G()[e])}(),R()&&Ue(R(),D()),window.addEventListener("resize",Re),Re(),g(Be)&&g(Ce)&&(p(oe,Math.round(window.devicePixelRatio||1),!0),g(Ce).getContext&&(p(we,g(Ce).getContext("2d"),!0),g(we)&&g(we).scale(g(oe),g(oe)))),"image/*, image/avif"!==C()&&p(Te,C().split(",").map(e=>e.trim()),!0),p(Q,w()!=Number.MAX_SAFE_INTEGER?Number(w()):r.clientWidth,!0),p(te,T()!=Number.MAX_SAFE_INTEGER?Number(T()):g(Q),!0),p(Y,g(Q),!0),p(_,g(te),!0)}),l(()=>{window.removeEventListener("resize",Re)});var ze=al(),Ge=v(ze),He=e=>{var t=Xa(),o=v(t);s(o,()=>Se.upload),d(e,t)},_e=(e,t)=>{var o=e=>{var t=ol(),o=$(t),i=v(o);i.__click=[Ka,Fe],c(i,e=>p(Ce,e),()=>g(Ce));var n=X(i,2),a=e=>{var t=tl(),o=v(t),i=e=>{var t=Qa(),o=v(t);s(o,()=>Se.drag),d(e,t)},n=e=>{var t=el(),o=v(t);s(o,()=>Se.tap),d(e,t)};J(o,e=>{g(Ae)?e(i):e(n,!1)}),I(e=>{var o,i,n,a;return Ie(t,"top: -".concat(null!=(o=g(_))?o:"","px; margin-bottom: -").concat(null!=(i=g(_))?i:"","px; font-size: ").concat(null!=(n=g(Me))?n:"","; border-radius: ").concat(null!=(a=P())?a:"","%; z-index: ").concat(null!=e?e:"",";"))},[()=>parseInt(U()+"")+2]),d(e,t)};J(n,e=>{g(H)||E()||e(a)});var l=X(o,2),r=e=>{me(e,{variant:"raised",onclick:qe,get class(){return k()},children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae();I(()=>le(o,Se.change)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};J(l,e=>{g(H)&&!V()&&e(r)});var u=X(l,2),m=e=>{me(e,{variant:"raised",onclick:Ve,get class(){return M()},children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae();I(()=>le(o,Se.remove)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};J(u,e=>{g(H)&&q()&&e(m)});var h=X(u,2),f=e=>{me(e,{variant:"raised",onclick:Le,get class(){return F()},children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae();I(()=>le(o,Se.aspect)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};J(h,e=>{g(H)&&N()&&w()!==T()&&e(f)}),I(e=>{var t,n,a,l,r;Ie(o,"max-width: ".concat(null!=(t=g(Y))?t:"","px; height: ").concat(null!=(n=g(_))?n:"","px; border-radius: ").concat(null!=(a=P())?a:"","%;")),y(i,1,"picture-preview ".concat(null!=(l=g(Oe))?l:""),"svelte-k98dno"),Ie(i,"height: ".concat(null!=(r=g(_))?r:"","px; z-index: ").concat(null!=e?e:"",";"))},[()=>parseInt(U()+"")+1]),ke("drag",i,e=>{e.stopPropagation(),e.preventDefault()}),ke("dragover",i,e=>{e.stopPropagation(),e.preventDefault()}),ke("dragstart",i,e=>{e.stopPropagation(),e.preventDefault()}),ke("dragend",i,e=>{e.stopPropagation(),e.preventDefault()}),ke("dragenter",i,e=>{e.stopPropagation(),e.preventDefault(),g(Ae)&&p(K,!0)}),ke("dragleave",i,e=>{e.stopPropagation(),e.preventDefault(),De()}),ke("drop",i,e=>{e.stopPropagation(),e.preventDefault(),function(e){De(),je(e)}(e)}),d(e,t)},i=e=>{var t=nl(),o=v(t),i=e=>{me(e,{variant:"raised",onclick:qe,get class(){return k()},children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae();I(()=>le(o,Se.select)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},n=e=>{var t=il(),o=$(t),i=v(o);s(i,()=>Se.selected);var n=X(o,2),a=e=>{me(e,{variant:"raised",onclick:qe,get class(){return k()},children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae();I(()=>le(o,Se.change)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};J(n,e=>{V()||e(a)});var l=X(n,2),r=e=>{me(e,{variant:"raised",onclick:Ve,get class(){return M()},children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae();I(()=>le(o,Se.remove)),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};J(l,e=>{q()&&e(r)}),d(e,t)};J(o,e=>{g(H)?e(n,!1):e(i)}),d(e,t)};J(e,e=>{g(Be)?e(o):e(i,!1)},t)};J(Ge,e=>{g(xe)?e(_e,!1):e(He)});var Ye=X(Ge,2);Ye.__change=je,c(Ye,e=>h=e,()=>h),c(ze,e=>r=e,()=>r),I(()=>{ye(Ye,"name",A()),ye(Ye,"id",O()),ye(Ye,"accept",C()),ye(Ye,"capture",x())}),d(e,ze),u()}Ce(["click","change"]);var rl=r('<div class="mb-4 text-left"><!></div>'),sl=r('<img alt="Converted" loading="lazy" class="svelte-1br61l5"/> <!> <!>',1),cl=r('<div class="col col-lg-4"><!> <!></div> <div class="col col-lg-8"><!></div>',1),dl=r('<div><img alt="Cropper" loading="lazy" class="cropper-image svelte-1br61l5"/></div>'),ul=r('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div> <div class="mt-2"><!></div> <!>',1),gl=r('<div class="pt-3 col col-12"><img alt="Compress" loading="lazy" class="svelte-1br61l5"/></div>'),ml=r('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div> <!></div>'),hl=r('<div class="col col-lg-4"><div><!></div> <div><b>Before:</b> <b>After:</b> </div> <!></div> <div class="col-lg-8"><!> <!> <!></div>',1),pl=r('<div class="container"><!> <div class="row"><!></div></div>'),vl=r("<!> <!> <!>",1);function fl(e,t){n(t,!0);let o,i=f(t,"open",7),l=f(t,"imgObject",7),r=f(t,"canHaveURL",3,!0),s=m("Cropper"),h=m(100),b=m(90),w=!1,S=m(1),C=m(1),x=m(void 0),B=m(void 0),A=m(void 0),O=m(!1),k=0,M=ee(()=>{if(g(B)){const e=function(e){const t=e.match(/^data:.+;base64,(.+)$/);return t?t[1]:e}(g(B)).length*(3/4)-2;return Math.round(e/1024)}return 0}),F=ee(()=>{if(g(A)){const e=g(A).split(",")[1].length*(3/4)-2;return Math.round(e/1024)}return 0});function R(){const e=L(l(),t.imgProp);e&&q(e)}function D(){g(A)&&V(l(),t.imgProp,g(A),!1)}function j(){o&&o.setAspectRatio(g(C)/g(S))}function P(){if(o&&g(x)){const e=o.getCroppedCanvas().toDataURL("image/webp");g(x).src=e,V(l(),t.imgProp,e)}}function q(e){const t=document.createElement("canvas"),o=t.getContext("2d"),i=new Image;i.crossOrigin="anonymous",i.onload=()=>{const e=g(h)/100,n=i.width*e,a=i.height*e;t.setAttribute("width",n.toString()),t.setAttribute("height",a.toString()),null==o||o.drawImage(i,0,0,n,a),p(A,t.toDataURL("image/webp",g(b)),!0),k++,w&&k>1&&(w=!1,D(),k=0)},i.src=e}function V(e,t,i,n=!0){e&&(e[t]=i,p(B,i,!0),o&&o.replace(i),n&&q(i))}function L(e,t){return e&&e[t]?e[t]:""}a(()=>(g(x)?o=new Me(g(x),{viewMode:3,dragMode:"move"}):o&&o.destroy(),()=>{o&&o.destroy()})),ce(e,{surface$style:"width: 1200px; max-width: calc(100vw - 32px);",style:"text-align: center",get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:(e,o)=>{var n=vl(),a=$(n);de(a,{tabindex:0,autofocus:!0,children:(e,t)=>{var o=ae("Image");d(e,o)},$$slots:{default:!0}});var u=X(a,2);ue(u,{children:(e,o)=>{var n=pl(),a=v(n),u=e=>{var t=rl(),o=v(t);pe(o,{label:e=>{var t=ae("Uploaded Image or External URL.");d(e,t)},children:(e,t)=>{ve(e,{color:"secondary",class:"switch-scale",get checked(){return g(O)},set checked(e){p(O,e,!0)}})},$$slots:{label:!0,default:!0}});d(e,t)};J(a,e=>{r()&&e(u)});var m=X(a,2),f=v(m),B=e=>{var o=cl(),i=$(o),n=v(i);Vi(n,{get value(){return l().imageLink||""},set value(e){var t;t=e,l().imageLink=t},label:"External Image URL",variant:"filled"});var a=X(n,2);me(a,{onclick:()=>{V(l(),t.imgProp,l().imageLink)},variant:"raised",children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae("Convert URL to Image");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var r=X(i,2),s=v(r),c=e=>{var o=sl(),i=$(o),n=X(i,2);me(n,{onclick:()=>{V(l(),t.imgProp,""),delete l().imageLink},variant:"raised",class:"my-3",children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae("Remove Photo");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=X(n,2);Vi(a,{get value(){return l().imageSourceTooltip||""},set value(e){var t;t=e,l().imageSourceTooltip=t},label:"Tooltip That Shows When Hovering over it",variant:"filled"}),I(e=>ye(i,"src",e),[()=>L(l(),t.imgProp)]),d(e,o)};J(s,e=>{void 0!==L(l(),t.imgProp)&&""!==L(l(),t.imgProp)&&e(c)}),d(e,o)},A=e=>{var o=hl(),n=$(o),a=v(n),r=v(a),u=e=>{const o=ee(()=>zo(L(l(),t.imgProp))?L(l(),t.imgProp):"");ll(e,{hideChangeButton:!0,removable:!0,crop:!1,get prefill(){return g(o)},onchange:e=>{V(l(),t.imgProp,e)},onclick:()=>w=app.compressImageAuto,onremove:()=>V(l(),t.imgProp,"")})};J(r,e=>{i()&&e(u)});var m=X(a,2);let f;var B=X(v(m)),A=X(B,2),O=X(m,2);Vi(O,{get value(){return l().imageSourceTooltip||""},set value(e){var t;t=e,l().imageSourceTooltip=t},label:"Tooltip That Shows When Hovering over it",variant:"filled"});var k=X(n,2),q=v(k);{const e=(e,t=T)=>{je(e,{get tab(){return t()},children:(e,o)=>{he(e,{children:(e,o)=>{var i=ae();I(()=>le(i,t())),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};Fe(q,{tabs:["Cropper","Compress"],get active(){return g(s)},set active(e){p(s,e,!0)},tab:e,$$slots:{tab:!0}})}var N=X(q,2);const W=ee(()=>"Cropper"!==g(s)?"display: none;":"");Re(N,{role:"tabpanel",variant:"unelevated",get style(){return g(W)},children:(e,o)=>{De(e,{children:(e,o)=>{var i=ul(),n=$(i),a=v(n);Vi(v(a),{label:"Width Aspect",type:"number",variant:"filled",get value(){return g(C)},set value(e){p(C,e,!0)}});var r=X(a,2);Vi(v(r),{label:"Height Aspect",type:"number",variant:"filled",get value(){return g(S)},set value(e){p(S,e,!0)}});var s=X(r,2),u=v(s);me(u,{onclick:j,variant:"raised",style:"height: 100%;",children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae("Change Aspect");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var m=X(n,2),h=v(m);me(h,{onclick:P,variant:"raised",children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae("Crop Image");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var f=X(m,2),b=e=>{var o=dl(),i=v(o);c(i,e=>p(x,e),()=>g(x)),I(e=>ye(i,"src",e),[()=>L(l(),t.imgProp)]),d(e,o)};J(f,e=>{zo(L(l(),t.imgProp))&&e(b)}),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var E=X(N,2);const U=ee(()=>"Compress"!==g(s)?"display: none;":"");Re(E,{role:"tabpanel",variant:"unelevated",get style(){return g(U)},children:(e,o)=>{De(e,{children:(e,o)=>{var i=ml(),n=v(i);Vi(v(n),{onchange:R,label:"Image Scale",type:"number",variant:"filled",get value(){return g(h)},set value(e){p(h,e,!0)}});var a=X(n,2);Vi(v(a),{onchange:R,label:"Image Quality",type:"number",variant:"filled",get value(){return g(b)},set value(e){p(b,e,!0)}});var r=X(a,2),s=v(r);me(s,{onclick:D,variant:"raised",style:"height: 100%;",children:(e,t)=>{he(e,{children:(e,t)=>{var o=ae("Compress Image");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=X(r,2),u=e=>{var o=gl(),i=v(o);I(e=>ye(i,"src",e),[()=>L(l(),t.imgProp)]),d(e,o)};J(c,e=>{zo(L(l(),t.imgProp))&&e(u)}),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e=>{var t,o;f=y(m,1,"pa-4",null,f,e),le(B,"".concat(null!=(t=g(M))?t:""," kB|")),le(A,"".concat(null!=(o=g(F))?o:""," kB"))},[()=>({hidden:!L(l(),t.imgProp)})]),d(e,o)};J(f,e=>{g(O)?e(B):e(A,!1)}),d(e,n)},$$slots:{default:!0}});var m=X(u,2);ge(m,{children:(e,t)=>{me(e,{action:"close",children:(e,t)=>{he(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=ae("Close");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,n)},$$slots:{default:!0}}),u()}let bl=0;var wl=r("<div><!></div>");let Tl=0;var Il=r("<input/>"),yl=r('<span class="mdc-select__ripple"></span>'),Sl=r('<div><!> <div><!> <!> <!> <!> <span><span> </span></span> <span><svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false"><polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon><polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon></svg></span> <!></div> <!></div> <!>',1);function Cl(e,t){n(t,!0);const[o,r]=xe(),s=()=>Be(Ke,"$selectedTextStore",o);let h=()=>{};function y(e){return e===h}let S=f(t,"use",19,()=>[]),C=f(t,"class",3,""),x=f(t,"style",3,""),B=f(t,"ripple",3,!0),A=f(t,"disabled",3,!1),O=f(t,"variant",3,"standard"),k=f(t,"noLabel",3,!1),F=f(t,"label",3,void 0),R=f(t,"value",15),D=f(t,"key",3,e=>e),E=f(t,"dirty",15,!1),U=f(t,"invalid",15,h),H=f(t,"updateInvalid",19,()=>y(U())),_=f(t,"required",3,!1),Y=f(t,"inputId",19,()=>"SMUI-select-"+Tl++),Z=f(t,"hiddenInput",3,!1),Q=f(t,"withLeadingIcon",3,h),ce=f(t,"anchor$use",19,()=>[]),de=f(t,"anchor$class",3,""),ue=f(t,"selectedTextContainer$use",19,()=>[]),ge=f(t,"selectedTextContainer$class",3,""),me=f(t,"selectedText$use",19,()=>[]),he=f(t,"selectedText$class",3,""),pe=f(t,"dropdownIcon$use",19,()=>[]),ve=f(t,"dropdownIcon$class",3,""),fe=f(t,"menu$class",3,""),be=f(t,"alwaysFloat",3,!1),we=q(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","children","leadingIcon","helperText","alwaysFloat"]);const Te=y(U());let Ie;y(U())&&U(!1);let ye,Se=m(void 0),Ce=i({}),Ae=i({}),Oe=i({}),ke=m(-1);const Me=ee(()=>void 0!==we.menu$id?we.menu$id:Y()+"-menu");let Fe,Re,De,je,We=m(void 0),Ee=z("SMUI:addLayoutListener"),Ue=m(!1),ze=i({}),Ge=m(void 0),He=m(void 0),_e=m(!1),Ye=z("SMUI:select:context"),Ze=m(void 0),Je=m(void 0),Xe=m(void 0);G("SMUI:list:role",""),G("SMUI:list:nav",!1);const Ke=M("");G("SMUI:select:selectedText",Ke);const Qe=M(R());a(()=>{$e(Qe,R())}),G("SMUI:select:value",Qe),a(()=>{g(Se)&&g(Se).getValue()!==D()(R())&&g(Se).setValue(D()(R()))});let et=g(ke);function tt(e){return e in Ce?Ce[e]:mt().classList.contains(e)}function ot(e){Ce[e]||(Ce[e]=!0)}function it(e){e in Ce&&!Ce[e]||(Ce[e]=!1)}function nt(e,t){Ae[e]!=t&&(""===t||null==t?delete Ae[e]:Ae[e]=t)}function at(e){ze[e]||(ze[e]=!0)}function lt(e){e in ze&&!ze[e]||(ze[e]=!1)}function rt(e){return e in Oe?void 0!==Oe[e]?Oe[e]:null:mt().getAttribute(e)}function st(e,t){Oe[e]!==t&&(Oe[e]=t)}function ct(e){e in Oe&&null==Oe[e]||(Oe[e]=void 0)}function dt(){return Re.getOrderedList().map(e=>e.getValue())}function ut(e){var t;null==(t=g(Se))||t.setUseDefaultValidation(e)}function gt(){var e;null==(e=g(Se))||e.layout()}function mt(){return Ie}a(()=>{if(et!==g(ke))if(et=g(ke),g(Se))g(Se).setSelectedIndex(g(ke),!1,!0);else{const e=dt();R()!==e[g(ke)]&&R(e[g(ke)])}}),a(()=>{g(Se)&&g(Se).getDisabled()!==A()&&g(Se).setDisabled(A())}),a(()=>{g(Se)&&E()&&g(Se).isValid()!==!U()&&(H()?U(!g(Se).isValid()):g(Se).setValid(!U()))}),a(()=>{g(Se)&&g(Se).getRequired()!==_()&&g(Se).setRequired(_())}),Ee&&(Fe=Ee(gt)),G("SMUI:select:leading-icon:mount",e=>{De=e}),G("SMUI:select:leading-icon:unmount",()=>{De=void 0}),G("SMUI:list:mount",e=>{Re=e}),G("SMUI:select:helper-text:id",e=>{p(We,e,!0)}),G("SMUI:select:helper-text:mount",e=>{je=e}),G("SMUI:select:helper-text:unmount",()=>{p(We,void 0),je=void 0}),b(()=>(p(Se,new qe({setSelectedText:e=>{$e(Ke,e)},isSelectAnchorFocused:()=>document.activeElement===ye,getSelectAnchorAttr:rt,setSelectAnchorAttr:st,removeSelectAnchorAttr:ct,addMenuClass:at,removeMenuClass:lt,openMenu:()=>{p(Ue,!0)},closeMenu:()=>{p(Ue,!1)},getAnchorElement:()=>ye,setMenuAnchorElement:e=>{p(Ge,e,!0)},setMenuAnchorCorner:e=>{p(He,e,!0)},setMenuWrapFocus:e=>{p(_e,e,!0)},getSelectedIndex:()=>g(ke),setSelectedIndex:e=>{et=e,p(ke,e,!0),R(dt()[g(ke)])},focusMenuItemAtIndex:e=>{Re.focusItemAtIndex(e)},getMenuItemCount:()=>Re.items.length,getMenuItemValues:()=>dt().map(D()),getMenuItemTextAtIndex:e=>Re.getPrimaryTextAtIndex(e),isTypeaheadInProgress:()=>Re.typeaheadInProgress,typeaheadMatchItem:(e,t)=>Re.typeaheadMatchItem(e,t),addClass:ot,removeClass:it,hasClass:tt,setRippleCenter:e=>g(Je)&&g(Je).setRippleCenter(e),activateBottomLine:()=>g(Je)&&g(Je).activate(),deactivateBottomLine:()=>g(Je)&&g(Je).deactivate(),notifyChange:e=>{var t;E(!0),H()&&U(!(null==(t=g(Se))?void 0:t.isValid())),re(mt(),"SMUISelectChange",{value:R(),index:g(ke)})},hasOutline:()=>!!g(Xe),notchOutline:e=>g(Xe)&&g(Xe).notch(e),closeOutline:()=>g(Xe)&&g(Xe).closeNotch(),hasLabel:()=>!!g(Ze),floatLabel:e=>g(Ze)&&g(Ze).float(e||be()),getLabelWidth:()=>g(Ze)?g(Ze).getWidth():0,setLabelRequired:e=>g(Ze)&&g(Ze).setRequired(e)},{get helperText(){return je},get leadingIcon(){return De}}),!0),p(ke,dt().indexOf(R()),!0),g(Se).init(),ut(Te),()=>{var e;null==(e=g(Se))||e.destroy()})),l(()=>{Fe&&Fe()});var ht=Sl(),pt=$(ht);V(pt,(e,t,o)=>({class:e,style:t,...o}),[()=>L({[C()]:!0,"mdc-select":!0,"mdc-select--required":_(),"mdc-select--disabled":A(),"mdc-select--filled":"filled"===O(),"mdc-select--outlined":"outlined"===O(),"smui-select--standard":"standard"===O(),"mdc-select--with-leading-icon":y(Q())?t.leadingIcon:Q(),"mdc-select--no-label":k()||null==F(),"mdc-select--invalid":U(),"mdc-select--activated":g(Ue),"mdc-data-table__pagination-rows-per-page-select":"data-table:pagination"===Ye,...Ce}),()=>Object.entries(Ae).map(([e,t])=>"".concat(e,": ").concat(t,";")).concat([x()]).join(" "),()=>K(we,["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])]);var vt=v(pt),ft=e=>{var t=Il();V(t,e=>({type:"hidden",required:_(),disabled:A(),value:R(),...e}),[()=>oe(we,"input$")]),d(e,t)};J(vt,e=>{Z()&&e(ft)});var bt=X(vt,2),wt=e=>{var o;ye.focus(),g(Se)&&g(Se).handleClick(function(e){const t=e.currentTarget.getBoundingClientRect();return(function(e){return"touches"in e}(e)?e.touches[0].clientX:e.clientX)-t.left}(e)),null==(o=t.anchor$onclick)||o.call(t,e)},Tt=e=>{var o;g(Se)&&g(Se).handleKeydown(e),null==(o=t.onkeydown)||o.call(t,e)},It=e=>{var o;g(Se)&&g(Se).handleBlur(),re(mt(),"blur",e),null==(o=t.anchor$onblur)||o.call(t,e)},yt=e=>{var o;g(Se)&&g(Se).handleFocus(),re(mt(),"focus",e),null==(o=t.anchor$onfocus)||o.call(t,e)};V(bt,(e,t)=>({class:e,"aria-required":_()?"true":void 0,"aria-disabled":A()?"true":void 0,"aria-controls":g(Me),"aria-expanded":g(Ue)?"true":"false","aria-describedby":g(We),role:"combobox",tabindex:"0",...Oe,...t,onclick:wt,onkeydown:Tt,onblur:It,onfocus:yt}),[()=>L({[de()]:!0,"mdc-select__anchor":!0}),()=>oe(we,"anchor$")]);var St=v(bt),Ct=e=>{var t=yl();d(e,t)};J(St,e=>{"filled"===O()&&e(Ct)});var xt=X(St,2),Bt=e=>{const t=ee(()=>Y()+"-smui-label"),o=ee(()=>""!==s()||be());var i=ee(()=>oe(we,"label$"));c(ne(e,j({get id(){return g(t)},get floatAbove(){return g(o)},get required(){return _()}},()=>g(i),{children:(e,t)=>{var o=P(),i=$(o),n=e=>{},a=(e,t)=>{var o=e=>{var t=ae();I(()=>le(t,F())),d(e,t)},i=e=>{var t=P(),o=$(t);w(o,F),d(e,t)};J(e,e=>{"string"==typeof F()?e(o):e(i,!1)},t)};J(i,e=>{null==F()?e(n):e(a,!1)}),d(e,o)},$$slots:{default:!0}})),e=>p(Ze,e,!0),()=>g(Ze))};J(xt,e=>{"outlined"===O()||k()||null==F()||e(Bt)});var At=X(xt,2),Ot=e=>{const t=ee(()=>k()||null==F());var o=ee(()=>oe(we,"outline$"));c(ie(e,j({get noLabel(){return g(t)}},()=>g(o),{children:(e,t)=>{var o=P(),i=$(o),n=e=>{const t=ee(()=>Y()+"-smui-label"),o=ee(()=>""!==s()||be());var i=ee(()=>oe(we,"label$"));c(ne(e,j({get id(){return g(t)},get floatAbove(){return g(o)},get required(){return _()}},()=>g(i),{children:(e,t)=>{var o=P(),i=$(o),n=e=>{},a=(e,t)=>{var o=e=>{var t=ae();I(()=>le(t,F())),d(e,t)},i=e=>{var t=P(),o=$(t);w(o,F),d(e,t)};J(e,e=>{"string"==typeof F()?e(o):e(i,!1)},t)};J(i,e=>{null==F()?e(n):e(a,!1)}),d(e,o)},$$slots:{default:!0}})),e=>p(Ze,e,!0),()=>g(Ze))};J(i,e=>{k()||null==F()||e(n)}),d(e,o)},$$slots:{default:!0}})),e=>p(Xe,e,!0),()=>g(Xe))};J(At,e=>{"outlined"===O()&&e(Ot)});var kt=X(At,2);w(kt,()=>{var e;return null!=(e=t.leadingIcon)?e:T});var Mt=X(kt,2);V(Mt,(e,t)=>({class:e,...t}),[()=>L({[ge()]:!0,"mdc-select__selected-text-container":!0}),()=>oe(we,"selectedTextContainer$")]);var Ft=v(Mt);V(Ft,(e,t)=>({id:Y()+"-smui-selected-text",class:e,role:"button","aria-haspopup":"listbox","aria-labelledby":Y()+"-smui-label",...t}),[()=>L({[he()]:!0,"mdc-select__selected-text":!0}),()=>oe(we,"selectedText$")]);var Rt=v(Ft);N(Ft,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},me),N(Mt,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},ue);var Dt=X(Mt,2);V(Dt,(e,t)=>({class:e,...t}),[()=>L({[ve()]:!0,"mdc-select__dropdown-icon":!0}),()=>oe(we,"dropdownIcon$")]),N(Dt,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},pe);var jt=X(Dt,2),Pt=e=>{var t=ee(()=>oe(we,"ripple$"));c(se(e,j(()=>g(t))),e=>p(Je,e,!0),()=>g(Je))};J(jt,e=>{"outlined"!==O()&&B()&&e(Pt)}),c(bt,e=>ye=e,()=>ye),N(bt,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},ce);var $t=X(bt,2);const qt=ee(()=>L({[fe()]:!0,"mdc-select__menu":!0,...ze}));var Vt=ee(()=>oe(we,"menu$"));Ve($t,j({get class(){return g(qt)},get id(){return g(Me)},fullWidth:!0,anchor:!1,get anchorElement(){return g(Ge)},get anchorCorner(){return g(He)}},()=>g(Vt),{onSMUIMenuSelected:e=>{var o;g(Se)&&g(Se).handleMenuItemAction(e.detail.index),null==(o=t.onSMUIMenuSelected)||o.call(t,e)},onSMUIMenuSurfaceClosing:e=>{var o;g(Se)&&g(Se).handleMenuClosing(),null==(o=t.onSMUIMenuSurfaceClosing)||o.call(t,e)},onSMUIMenuSurfaceClosed:e=>{var o;g(Se)&&g(Se).handleMenuClosed(),null==(o=t.onSMUIMenuSurfaceClosed)||o.call(t,e)},onSMUIMenuSurfaceOpened:e=>{var o;g(Se)&&g(Se).handleMenuOpened(),null==(o=t.onSMUIMenuSurfaceOpened)||o.call(t,e)},get open(){return g(Ue)},set open(e){p(Ue,e,!0)},children:(e,o)=>{var i=ee(()=>oe(we,"list$"));Le(e,j({role:"listbox",get wrapFocus(){return g(_e)}},()=>g(i),{style:"max-height: 296px",get selectedIndex(){return g(ke)},set selectedIndex(e){p(ke,e,!0)},children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.children)?e:T}),d(e,i)},$$slots:{default:!0}}))},$$slots:{default:!0}})),c(pt,e=>Ie=e,()=>Ie),N(pt,(e,t)=>{var o;return null==(o=te)?void 0:o(e,t)},()=>({ripple:"filled"===O(),unbounded:!1,addClass:ot,removeClass:it,addStyle:nt})),N(pt,(e,t)=>{var o;return null==(o=Ne)?void 0:o(e,t)},()=>({addClass:ot,removeClass:it})),N(pt,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},S);var Lt=X(pt,2),Nt=e=>{var o=ee(()=>oe(we,"helperText$"));!function(e,t){n(t,!0);let o,a=f(t,"use",19,()=>[]),l=f(t,"class",3,""),r=f(t,"id",19,()=>"SMUI-select-helper-text-"+bl++),s=f(t,"persistent",3,!1),h=f(t,"validationMsg",3,!1),y=q(t,["$$slots","$$events","$$legacy","use","class","id","persistent","validationMsg","children"]),S=m(void 0),C=i({}),x=i({}),B=m(void 0);const A=z("SMUI:select:helper-text:id"),O=z("SMUI:select:helper-text:mount"),k=z("SMUI:select:helper-text:unmount");function M(e){return e in C?C[e]:U().classList.contains(e)}function F(e){C[e]||(C[e]=!0)}function R(e){e in C&&!C[e]||(C[e]=!1)}function D(e){return e in x?void 0!==x[e]?x[e]:null:U().getAttribute(e)}function j(e,t){x[e]!==t&&(x[e]=t)}function E(e){e in x&&null==x[e]||(x[e]=void 0)}function U(){return o}b(()=>(p(S,new Pe({addClass:F,removeClass:R,hasClass:M,getAttr:D,setAttr:j,removeAttr:E,setContent:e=>{p(B,e,!0)}}),!0),A&&A(r()),O&&O(g(S)),g(S).init(),()=>{var e;k&&g(S)&&k(g(S)),null==(e=g(S))||e.destroy()}));var G=wl();V(G,e=>({class:e,"aria-hidden":s()?void 0:"true",id:r(),...x,...y}),[()=>L({[l()]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":h(),"mdc-select-helper-text--validation-msg-persistent":s(),...C})]);var H=v(G),_=e=>{var o=P(),i=$(o);w(i,()=>{var e;return null!=(e=t.children)?e:T}),d(e,o)},Y=e=>{var t=ae();I(()=>le(t,g(B))),d(e,t)};J(H,e=>{null==g(B)?e(_):e(Y,!1)}),c(G,e=>o=e,()=>o),N(G,(e,t)=>{var o;return null==(o=W)?void 0:o(e,t)},a),d(e,G),u({getElement:U})}(e,j(()=>g(o),{children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.helperText)?e:T}),d(e,i)},$$slots:{default:!0}}))};J(Lt,e=>{t.helperText&&e(Nt)}),I(()=>le(Rt,s())),d(e,ht);var Wt=u({getUseDefaultValidation:function(){if(null==g(Se))throw new Error("Instance is undefined.");return g(Se).getUseDefaultValidation()},setUseDefaultValidation:ut,focus:function(){ye.focus()},layout:gt,getElement:mt});return r(),Wt}function xl(e,t){n(t,!0);const[o,i]=xe();let a=f(t,"use",19,()=>[]);f(t,"class",3,"");let r,s=f(t,"value",3,""),m=q(t,["$$slots","$$events","$$legacy","use","class","value","children"]);const h=z("SMUI:select:selectedText"),p=z("SMUI:select:value");G("SMUI:list:item:role","option");const v=ee(()=>null!=s()&&""!==s()&&Be(p,"$selectedValue",o)===s());function I(){g(v)&&r&&$e(h,r.getPrimaryText())}b(I),l(I),c(We(e,j({get use(){return a()},get"data-value"(){return s()},get value(){return s()},get selected(){return g(v)}},()=>m,{children:(e,o)=>{var i=P(),n=$(i);w(n,()=>{var e;return null!=(e=t.children)?e:T}),d(e,i)},$$slots:{default:!0}})),e=>r=e,()=>r);var y=u({getElement:function(){return r.getElement()}});return i(),y}var Bl=r('<div class="col-12 px-3 mt-0"><!></div>'),Al=r('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12"><!></div> <div class="col-12"><!></div> <!> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div></div></div>'),Ol=r("<b>Interactive CYOA Creator Plus</b>"),kl=r('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12 text-right"> <br/></div></div></div>'),Ml=r("<!> <!>",1),Fl=r("<!> <!>",1),Rl=r("<!> <!> <!>",1);function Dl(e,t){n(t,!0);let o=f(t,"open",7);const i=[{text:"2 Per Row",value:"col-6"},{text:"3 Per Row",value:"col-4"},{text:"4 Per Row",value:"col-3"}];let a=m("General");function l(){to&&to.abort(),io()}function r(){const e=Gt.allowDeselect;for(let t=0;t<app.backpack.length;t++){const o=app.backpack[t];o.isResultRow&&(o.isInfoRow=!e)}}ce(e,{surface$style:"width: 600px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=Rl(),n=$(o);de(n,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:(e,t)=>{var o=ae("Settings");d(e,o)},$$slots:{default:!0}});var s=X(n,2);ue(s,{children:(e,t)=>{var o=Fl(),n=$(o);{const e=(e,t=T)=>{je(e,{get tab(){return t()},children:(e,o)=>{he(e,{children:(e,o)=>{var i=ae();I(()=>le(i,t())),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};Fe(n,{tabs:["General","About"],get active(){return g(a)},set active(e){p(a,e,!0)},tab:e,$$slots:{tab:!0}})}var s=X(n,2),c=e=>{Re(e,{role:"tabpanel",variant:"unelevated",children:(e,t)=>{De(e,{children:(e,t)=>{var o=Al(),n=v(o),a=v(n);{const e=e=>{var t=ae("Maximum number of choices per row for screens between 720px and 1280px.");d(e,t)};Cl(v(a),{label:"Choices Per Row",variant:"standard",alwaysFloat:!0,get value(){return app.objectsPerRow},set value(e){app.objectsPerRow=e},helperText:e,children:(e,t)=>{var o=P(),n=$(o);be(n,17,()=>i,e=>e.text,(e,t)=>{xl(e,{get value(){return g(t).value},children:(e,o)=>{var i=ae();I(()=>le(i,g(t).text)),d(e,i)},$$slots:{default:!0}})}),d(e,o)},$$slots:{helperText:!0,default:!0}})}var s=X(a,2),c=v(s);pe(c,{label:e=>{var t=ae("Enable Auto Save");d(e,t)},children:(e,t)=>{ve(e,{get checked(){return app.buildAutoSaveIsOn||!1},set checked(e){var t;t=e,app.buildAutoSaveIsOn=t},onSMUISwitchChange:()=>{app.buildAutoSaveIsOn&&l()},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var u=X(s,2),m=e=>{var t=Bl(),o=v(t);Vi(o,{get value(){return app.buildAutoSaveInterval||10},set value(e){var t;t=e,app.buildAutoSaveInterval=t},label:"Auto Save Interval",type:"number",suffix:"min",variant:"standard",style:"max-width: 200px",input$class:"text-right",input$min:"1",onchange:()=>{app.buildAutoSaveInterval<1&&(app.buildAutoSaveInterval=1),l()}}),d(e,t)};J(u,e=>{app.buildAutoSaveIsOn&&e(m)});var h=X(u,2),p=v(h);pe(p,{label:e=>{var t=ae("Preload Images in Backpack");d(e,t)},children:(e,t)=>{ve(e,{get checked(){return app.preloadImages||!1},set checked(e){var t;t=e,app.preloadImages=t},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var f=X(h,2),b=v(f);pe(b,{label:e=>{var t=ae("Allow Deselecting Choices in Backpack");d(e,t)},children:(e,t)=>{ve(e,{onSMUISwitchChange:r,color:"secondary",class:"switch-scale",get checked(){return Gt.allowDeselect},set checked(e){Gt.allowDeselect=e}})},$$slots:{label:!0,default:!0}});var w=X(f,2),T=v(w);nt(T,{text:"Enabling this option may cause image downloads to fail or reduce the image resolution.",children:(e,t)=>{pe(e,{label:e=>{var t=ae("Download Images as Single File");d(e,t)},children:(e,t)=>{ve(e,{color:"secondary",class:"switch-scale",get checked(){return Gt.isSingleFile},set checked(e){Gt.isSingleFile=e}})},$$slots:{label:!0,default:!0}})},$$slots:{default:!0}});var y=X(w,2),S=v(y);pe(S,{label:e=>{var t=ae("Show Background Music Player");d(e,t)},children:(e,t)=>{ve(e,{get checked(){return app.showMusicPlayer||!1},set checked(e){var t;t=e,app.showMusicPlayer=t},color:"secondary",class:"switch-scale",onchange:()=>{if(app.showMusicPlayer){const e=k(Wt);if(e){let t=0,o=0;0!==Et.bgmTitleInterval&&(clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),Et.bgmTitleInterval=window.setInterval(()=>{if(void 0!==e.playerInfo.videoData&&""!==Et.bgmObjectId){const t=Mt.get(Et.bgmObjectId);if(void 0!==t){const o=t.choice;e.playerInfo.videoData.video_id===o.bgmId&&void 0!==e.playerInfo.videoData.title&&""!==e.playerInfo.videoData.title&&(Et.bgmTitle=e.playerInfo.videoData.title,Et.curBgmLength=e.getDuration(),clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0)}}},1e3),0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.bgmPlayInterval=window.setInterval(()=>{if(void 0!==e.playerInfo.videoData&&!Et.isSeeking&&1===e.getPlayerState()){const i=Math.floor(e.getCurrentTime());i!==Et.curBgmTime?t!==i?Et.curBgmTime=i:(o++,o>Et.curBgmLength&&(o=1),Et.curBgmTime=o):(t=i,o=i+1,Et.curBgmTime=o)}},1e3)}}else Et.bgmIsPlaying&&(0!==Et.bgmTitleInterval&&(clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0))}})},$$slots:{label:!0,default:!0}});d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},u=(e,t)=>{var o=e=>{Re(e,{role:"tabpanel",variant:"unelevated",children:(e,t)=>{var o=Ml(),i=$(o);Ee(i,{class:"text-center",children:(e,t)=>{var o=Ol();d(e,o)},$$slots:{default:!0}});var n=X(i,2);De(n,{children:(e,t)=>{var o=kl(),i=v(o),n=v(i),a=v(n);I(()=>le(a,"v".concat(gt))),d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}})};J(e,e=>{"About"===g(a)&&e(o)},t)};J(s,e=>{"General"===g(a)?e(c):e(u,!1)}),d(e,o)},$$slots:{default:!0}});var c=X(s,2);ge(c,{children:(e,t)=>{me(e,{action:"close",children:(e,t)=>{he(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=ae("Close");d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),u()}var jl=r("<!> <!>",1),Pl=r("<!> <!>",1),$l=r("<!> <!>",1),ql=r("<!> <!>",1),Vl=r("<!> <!>",1),Ll=r("<!> <!>",1),Nl=r("<!> <!> <!> <!> <!> <!> <!>",1),Wl=r("<i></i>"),El=r('<i class="mdi mdi-stop"></i>'),Ul=r("<i></i>"),zl=r('<!> <!> <!> <div class="px-1" style="max-width: 104px; width: 100%"><!></div> <div class="ps-1" style="max-width:150px; overflow: hidden;"><span class="scrolling-text"> </span></div> <div class="px-1 col"><!></div> <div class="text-center" style="width: 180px"> </div>',1),Gl=r('<i class="mdi mdi-format-list-checks"></i>'),Hl=r('<div class="py-0 justify-center"><!></div>'),_l=r('<i class="mdi mdi-checkbox-marked-circle-outline"></i>'),Yl=r("<!> <!> <!>",1),Zl=r("<div><!></div>"),Jl=r('<div class="ab-0"><div class="fadeOverlay"></div> <!> <!> <div class="s-main"><!> <!> <div class="container-fluid p-0"><div class="row gx-0"></div></div></div></div> <!> <!> <!>',1);function Xl(e,t){n(t,!0);let o=m(!1),i=m(!1),r=m("none"),f=ee(()=>g(i)?app.showMusicPlayer?"top: 32px;":"top: 0;":"bottom: 0;"),b=ee(()=>"opacity: ".concat(app.fadeTransitionIsOn?1:0,"; transition: opacity ").concat(app.fadeTransitionTime,"s ease-out; background-color: ").concat(Bi(app.fadeTransitionColor),"; pointer-events: ").concat(app.fadeTransitionIsOn?"auto":"none","; cursor: ").concat(app.fadeTransitionIsOn?"none":"auto",";")),w=m(0),T=m(void 0),C=ee(()=>app.pointTypes.length>0||app.backpack.length>0||app.importedChoicesIsOpen),x=ee(()=>"background-color: ".concat(Bi(app.styling.barBackgroundColor),";margin:").concat(app.styling.barMargin,"px;padding:").concat(app.styling.barPadding,"px;").concat(g(f))),B=ee(()=>"color: ".concat(Bi(app.styling.barTextColor),";margin: ").concat(app.styling.barTextMargin,"px;padding: ").concat(app.styling.barTextPadding,'px;font-family: "').concat(app.styling.barTextFont,'";font-size: ').concat(app.styling.barTextSize,"px")),A=ee(()=>"color: ".concat(Bi(app.styling.barIconColor),";")),O=ee(()=>{let e=[];return app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(Bi(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;"),g(C)&&e.push("padding-bottom: 56px;"),app.useVW&&e.push("font-size: 0.835vw;"),e.join("")}),M=ee(()=>{let e=[];return app.showMusicPlayer&&e.push("padding-top: 32px;"),e.join("")}),F=ee(()=>"".concat(q(Et.curBgmTime)," | ").concat(q(Et.curBgmLength))),R=m(0),D=m(100),j=m(!1);function q(e){const t=Math.floor(e/3600),o=Math.floor(e%3600/60),i=Math.floor(e%60),n=String(o).padStart(2,"0"),a=String(i).padStart(2,"0");return t>0?"".concat(t,":").concat(n,":").concat(a):"".concat(n,":").concat(a)}function V(){const e=localStorage.getItem("theme");Lt.value="dark"===e?"light":"dark";let t=document.head.querySelector("#theme-dark"),o=document.head.querySelector("#theme-light");"dark"===Lt.value?(t&&(t.media="screen and (prefers-color-scheme: light)"),o&&(o.media="screen and (prefers-color-scheme: dark)")):(t&&(t.media="screen and (prefers-color-scheme: dark)"),o&&(o.media="screen and (prefers-color-scheme: light)")),localStorage.setItem("theme",Lt.value)}function L(){if(Wt&&0!==Et.curBgmLength){const e=k(Wt);if(e)if(Et.bgmIsPlaying)e.pauseVideo(),Et.bgmIsPlaying=!1,0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0);else{let t=0,o=0;0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),e.playVideo(),Et.bgmIsPlaying=!0,Et.bgmPlayInterval=window.setInterval(()=>{if(void 0!==e.playerInfo.videoData&&!Et.isSeeking&&1===e.getPlayerState()){const i=Math.floor(e.getCurrentTime());i!==Et.curBgmTime?t!==i?Et.curBgmTime=i:(o++,o>Et.curBgmLength&&(o=1),Et.curBgmTime=o):(t=i,o=i+1,Et.curBgmTime=o)}},1e3)}}}function N(){if(Wt&&Et.bgmIsPlaying&&0!==Et.curBgmLength){const e=k(Wt);e&&(e.stopVideo(),Et.bgmIsPlaying=!1,Et.curBgmTime=0,0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0))}}function W(){if(app.isMute=!app.isMute,Wt){const e=k(Wt);e&&(app.isMute?e.mute():e.unMute())}}function E(){Wt&&Et.bgmIsPlaying&&(Et.isSeeking=!0)}function U(){var e;if(Wt&&Et.bgmIsPlaying){const e=k(Wt);e&&(e.seekTo(g(R),!0),Et.curBgmTime=g(R)),Et.isSeeking=!1}null==(e=document.activeElement)||e.blur()}function z(){p(j,!0)}function G(){var e;if(app.curVolume=g(D),Wt){const e=k(Wt);e&&e.setVolume(g(D))}p(j,!1),null==(e=document.activeElement)||e.blur()}a(()=>{Et.isSeeking||p(R,Et.curBgmTime,!0)}),a(()=>{g(j)||p(D,app.curVolume,!0)});var H=Jl(),_=$(H),Y=v(_),Z=X(Y,2);Ue(Z,{style:"top: 0;",variant:"modal",get open(){return g(o)},set open(e){p(o,e,!0)},children:(e,t)=>{Ge(e,{class:"navigation-drawer",children:(e,t)=>{Le(e,{children:(e,t)=>{var n=Nl(),a=$(n);We(a,{onSMUIAction:()=>p(o,!1),class:"my-0",children:(e,t)=>{var o=jl(),i=$(o);He(i,{class:"mdi mdi-chevron-left"});var n=X(i,2);_e(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=ae("Close Menu");d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var l=X(a,2);Ye(l,{class:"my-3"});var s=X(l,2);We(s,{onSMUIAction:V,class:"my-0",children:(e,t)=>{var o=Pl(),i=$(o);He(i,{class:"mdi mdi-theme-light-dark"});var n=X(i,2);_e(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=ae("Toogle Dark/Light Theme");d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var c=X(s,2);We(c,{onSMUIAction:()=>p(i,!g(i)),class:"my-0",children:(e,t)=>{var o=$l(),i=$(o);He(i,{class:"mdi mdi-swap-vertical"});var n=X(i,2);_e(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=ae("Top/Bottom Point Bar");d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var u=X(c,2);We(u,{get onSMUIAction(){return qo},class:"my-0",children:(e,t)=>{var o=ql(),i=$(o);He(i,{class:"mdi mdi-select-off"});var n=X(i,2);_e(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=ae("Clean Selected Choices");d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}});var m=X(u,2),h=e=>{We(e,{onSMUIAction:()=>{p(r,"appSaveLoad"),p(o,!1)},class:"my-0",children:(e,t)=>{var o=Vl(),i=$(o);He(i,{class:"mdi mdi-content-save"});var n=X(i,2);_e(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=ae("Save/Load Build");d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}})};J(m,e=>{app.importedChoicesIsOpen&&e(h)});var v=X(m,2);We(v,{onSMUIAction:()=>{p(r,"appGlobalSettings"),p(o,!1)},class:"my-0",children:(e,t)=>{var o=Ll(),i=$(o);He(i,{class:"mdi mdi-cog"});var n=X(i,2);_e(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=ae("Settings");d(e,o)},$$slots:{default:!0}}),d(e,o)},$$slots:{default:!0}}),d(e,n)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var K=X(Z,2);ze(K,{});var Q=X(K,2),te=v(Q),oe=e=>{Ze(e,{class:"music-player",variant:"fixed",children:(e,t)=>{Je(e,{class:"music-player--row",children:(e,t)=>{Xe(e,{class:"px-2 justify-left",children:(e,t)=>{var o=zl(),i=$(o);fe(i,{class:"music-player--button",onclick:L,size:"button","aria-label":"Play",children:(e,t)=>{var o=Wl();I(()=>y(o,1,S(Et.bgmIsPlaying?"mdi mdi-pause":"mdi mdi-play"))),d(e,o)},$$slots:{default:!0}});var n=X(i,2);fe(n,{class:"music-player--button",onclick:N,size:"button","aria-label":"Stop",children:(e,t)=>{var o=El();d(e,o)},$$slots:{default:!0}});var a=X(n,2);fe(a,{class:"music-player--button",onclick:W,size:"button","aria-label":"Mute",children:(e,t)=>{var o=Ul();I(()=>y(o,1,S(app.isMute?"mdi mdi-volume-off":"mdi mdi-volume-high"))),d(e,o)},$$slots:{default:!0}});var l=X(a,2),r=v(l);Se(r,{min:0,max:100,step:1,class:"mx-2",onpointerdown:z,onpointerup:G,get disabled(){return app.isMute},get value(){return g(D)},set value(e){p(D,e,!0)}});var s=X(l,2),c=v(s),u=v(c),m=X(s,2),h=v(m);const f=ee(()=>Et.curBgmLength||1);Se(h,{min:0,get max(){return g(f)},step:1,class:"mx-2",onpointerdown:E,onpointerup:U,get value(){return g(R)},set value(e){p(R,e,!0)}});var b=X(m,2),w=v(b);I(()=>{le(u,Et.bgmTitle),le(w,g(F))}),d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})};J(te,e=>{app.showMusicPlayer&&e(oe)});var ie=X(te,2),ne=e=>{Ze(e,{class:"pointBar",get style(){return g(x)},variant:"fixed",color:"secondary",children:(e,t)=>{Je(e,{class:"justify-space-around",children:(e,t)=>{var i=Yl(),a=$(i);Xe(a,{class:"py-0 justify-center",children:(e,t)=>{fe(e,{class:"pointbar-icons",onclick:()=>p(o,!0),"aria-label":"Open Import Window",get style(){return g(A)},children:(e,t)=>{var o=Gl();d(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var l=X(a,2);Xe(l,{class:"pointbar-center--viewer",children:(e,t)=>{var o=P(),i=$(o);be(i,17,()=>app.pointTypes,we,(e,t)=>{var o=P(),i=$(o),a=e=>{var o=Hl();!function(e,t){n(t,!0);let o=ee(()=>"color: ".concat(Bi(app.styling.barTextColor),";margin: ").concat(app.styling.barTextMargin,"px;padding: ").concat(app.styling.barTextPadding,'px;font-family: "').concat(app.styling.barTextFont,'";font-size: ').concat(app.styling.barTextSize,"px")),i=ee(()=>{if(t.point.startingSum>=0){if(void 0!==app.styling.barPointPos)return"color: ".concat(Bi(app.styling.barPointPos),";")}else if(void 0!==app.styling.barPointNeg)return"color: ".concat(Bi(app.styling.barPointNeg),";");return""});function a(e,t){const o=t?e.negativeImage:e.image,i=t?e.negativeIconWidth:e.iconWidth,n=t?e.negativeIconHeight:e.iconHeight;return o?'<img src="'.concat(o,'" style="width: ').concat(i,"px; height:").concat(n,'px;" alt="">'):""}var l=za(),r=v(l),c=v(r),m=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o);s(i,()=>a(t.point,!0)),d(e,o)};J(i,e=>{t.point.negativeImageOnSide||t.point.negativeImageSidePlacement||e(n)}),d(e,o)},l=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o);s(i,()=>a(t.point,!1)),d(e,o)};J(i,e=>{t.point.imageOnSide||t.point.imageSidePlacement||e(n)}),d(e,o)};J(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(n):e(l,!1)}),d(e,o)};J(c,e=>{t.point.iconIsOn&&e(m)});var h=X(c),p=X(h),f=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o);s(i,()=>a(t.point,!0)),d(e,o)};J(i,e=>{t.point.negativeImageOnSide&&!t.point.negativeImageSidePlacement&&e(n)}),d(e,o)},l=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o);s(i,()=>a(t.point,!1)),d(e,o)};J(i,e=>{t.point.imageOnSide&&!t.point.imageSidePlacement&&e(n)}),d(e,o)};J(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(n):e(l,!1)}),d(e,o)};J(p,e=>{t.point.iconIsOn&&e(f)});var b=X(p,2),w=v(b),T=X(b,2),y=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o);s(i,()=>a(t.point,!0)),d(e,o)};J(i,e=>{!t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(n)}),d(e,o)},l=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o);s(i,()=>a(t.point,!1)),d(e,o)};J(i,e=>{!t.point.imageOnSide&&t.point.imageSidePlacement&&e(n)}),d(e,o)};J(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(n):e(l,!1)}),d(e,o)};J(T,e=>{t.point.iconIsOn&&e(y)});var S=X(T),C=X(S),x=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o);s(i,()=>a(t.point,!0)),d(e,o)};J(i,e=>{t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(n)}),d(e,o)},l=e=>{var o=P(),i=$(o),n=e=>{var o=P(),i=$(o);s(i,()=>a(t.point,!1)),d(e,o)};J(i,e=>{t.point.imageOnSide&&t.point.imageSidePlacement&&e(n)}),d(e,o)};J(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(n):e(l,!1)}),d(e,o)};J(C,e=>{t.point.iconIsOn&&e(x)}),I((e,n)=>{var a,s;Ie(l,g(o)),Ie(r,e),le(h," ".concat(null!=(a=t.point.beforeText)?a:""," ")),Ie(b,g(i)),le(w,n),le(S," ".concat(null!=(s=t.point.afterText)?s:""," "))},[()=>t.point.pointPrivateColorIsOn?"color: ".concat(t.point.startingSum>=0?Bi(t.point.privateColor):Bi(t.point.privateNegativeColor)):"",()=>t.point.startingSum%1==0?t.point.startingSum:parseFloat(t.point.startingSum.toFixed(void 0!==t.point.decimalPlaces?t.point.decimalPlaces:2))]),d(e,l),u()}(v(o),{get point(){return g(t)}}),I(()=>Ie(o,g(B))),d(e,o)};J(i,e=>{(function(e){if(e.isNotShownPointBar){if(void 0!==e.activatedId&&""!==e.activatedId){let t=Rt.get(e.activatedId),o=jt.get(e.activatedId);return void 0!==t?xo(t.requireds):void 0!==o?o.isTrue:So(e.activatedId)}return!1}return!0})(g(t))&&e(a)}),d(e,o)}),d(e,o)},$$slots:{default:!0}});var c=X(l,2);Xe(c,{class:"py-0 justify-center",children:(e,t)=>{var o=P(),i=$(o),n=e=>{fe(e,{class:"pointbar-icons",onclick:()=>p(r,"dlgBackpack"),"aria-label":"Open Backpack Window",get style(){return g(A)},children:(e,t)=>{var o=_l();d(e,o)},$$slots:{default:!0}})};J(i,e=>{app.backpack.length>0&&(void 0===app.hideBackpackBtn||0===app.hideBackpackBtn||app.hideBackpackBtn>0&&app.hideBackpackBtn===app.btnBackpackIsOn)&&e(n)}),d(e,o)},$$slots:{default:!0}}),d(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};J(ie,e=>{g(C)&&e(ne)});var re=X(ie,2),se=v(re);be(se,21,()=>app.rows,we,(e,t)=>{var o=Zl();Ua(v(o),{get row(){return g(t)},get windowWidth(){return g(w)},get mainDiv(){return g(T)}}),I(()=>y(o,1,S(g(t).width?"col-6":"col-12"))),d(e,o)}),c(se,e=>p(T,e),()=>g(T));var ce=X(_,2),de=e=>{const t=ee(()=>"appSaveLoad"===g(r));dn(e,{get open(){return g(t)},onclose:()=>p(r,"none")})},ue=(e,t)=>{var o=e=>{const t=ee(()=>"dlgBackpack"===g(r));Ja(e,{get open(){return g(t)},onclose:()=>p(r,"none")})},i=(e,t)=>{var o=e=>{const t=ee(()=>"appGlobalSettings"===g(r));Dl(e,{get open(){return g(t)},onclose:()=>p(r,"none")})};J(e,e=>{"appGlobalSettings"===g(r)&&e(o)},t)};J(e,e=>{"dlgBackpack"===g(r)?e(o):e(i,!1)},t)};J(ce,e=>{"appSaveLoad"===g(r)?e(de):e(ue,!1)});var ge=X(ce,2),me=e=>{const t=ee(()=>"appImageUpload"===Ut.currentDialog);fl(e,{get open(){return g(t)},onclose:()=>Ut.currentDialog="none",get imgObject(){return Ut.data},get imgProp(){return Ut.imgProp}})},he=(e,t)=>{var o=e=>{const t=ee(()=>"dlgCommon"===Ut.currentDialog);Ui(e,{get open(){return g(t)},onclose:()=>Ut.currentDialog="none",get closeHandler(){return Ut.cFunc},get title(){return Ut.title},get context(){return Ut.context},get isWord(){return Ut.isWord}})};J(e,e=>{"dlgCommon"===Ut.currentDialog&&void 0!==Ut.cFunc&&void 0!==Ut.title&&void 0!==Ut.context&&e(o)},t)};J(ge,e=>{"appImageUpload"===Ut.currentDialog&&void 0!==Ut.data&&void 0!==Ut.imgProp?e(me):e(he,!1)}),function(e,t){n(t,!0);let o=m(void 0),i=null;a(()=>{g(o)&&""!==tt.text&&(tt.isVisible&&tt.anchor?(null==i||i.destroy(),i=h(tt.anchor,g(o),{placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{boundary:"viewport"}},{name:"flip",options:{fallbackPlacements:["bottom","top"]}}]}),g(o).classList.add("mdc-tooltip--shown")):i&&(i.destroy(),i=null,g(o).classList.remove("mdc-tooltip--shown")))}),l(()=>{null==i||i.destroy()});var r=ot(),f=v(r),b=v(f);s(b,()=>tt.text),c(r,e=>p(o,e),()=>g(o)),d(e,r),u()}(X(ge,2),{}),I(()=>{Ie(_,g(O)),Ie(Y,g(b)),Ie(Q,g(M))}),Ae(_,"clientWidth",e=>p(w,e)),d(e,H),u()}var Kl=r('<div id="bgm-player" style="display:none"></div> <!> <!>',1);void 0===window.ResizeObserver&&(window.ResizeObserver=Qe),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){t.appendChild(e instanceof Node?e:document.createTextNode(String(e)))}),this.appendChild(t)}})}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("before")||Object.defineProperty(e,"before",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){t.appendChild(e instanceof Node?e:document.createTextNode(String(e)))}),this.parentNode.insertBefore(t,this)}})}),"function"!=typeof queueMicrotask&&(window.queueMicrotask=function(e){Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e},0))});const Ql=e=>{e.preventDefault(),e.returnValue=""};window.addEventListener?window.addEventListener("beforeunload",Ql):window.onbeforeunload=Ql,et(function(e,t){let o,i,r;n(t,!0);let s,g="<div>Loading</div>";function m(){let e=localStorage.getItem("theme"),t=document.head.querySelector("#theme-dark"),o=document.head.querySelector("#theme-light"),i=function(){if(!window.matchMedia)return!1;try{return"not all"!==window.matchMedia("(prefers-color-scheme: dark)").media}catch(e){return!1}}();"dark"===e?i?(t&&(t.media="screen and (prefers-color-scheme: light)"),o&&(o.media="screen and (prefers-color-scheme: dark)"),Lt.value="dark"):(t&&(t.media="all"),o&&(o.media="not all")):i||(o&&(o.media="all"),t&&(t.media="not all"))}async function h(e){const t=Array.from(e);for(let n=0;n<t.length;n++){const e=t[n];try{await new Promise((t,o)=>{const i=new Image;i.onload=t,i.onerror=o,i.src=e})}catch(o){console.error(o)}finally{i&&(i.innerHTML="<div>Images</div><div>".concat(n," / ").concat(t.length,"</div>"))}}}async function p(){if(Jt.value){const t="Your browser does not support the .avif format.\n Avif images may not be displayed.";try{await new Promise((e,t)=>{const o=new Image;o.onload=e,o.onerror=t,o.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="})}catch(e){console.error(e),zt.labelText=t,zt.isOpen=!0}}}a(()=>{zt.isOpen&&(s.close(),s.open(),zt.isOpen=!1)}),b(()=>{window.debugApp=app,m(),async function(){const e=(await eo()).transaction("buildStore","readonly").objectStore("buildStore"),t=location.pathname.replace(/\/index\.html$/,"/");await new Promise((o,i)=>{const n=e.openCursor();n.onsuccess=e=>{const i=e.target.result;if(!i)return void o();const n=i.key,a=i.value;if("string"==typeof n&&n.startsWith(t)){const e=n.slice(t.length);if("autoSave"===e)Ht.stored=!0,Ht.time=a.time,Ht.app=a.app;else{const t=e.match(/^slot-(\d+)$/),o=Number(null==t?void 0:t[1]);_t[o].stored=!0,_t[o].name=void 0!==a.name?a.name:"Slot ".concat(o+1),_t[o].time=a.time,_t[o].app=a.app}}i.continue()},n.onerror=i})}(),async function(){o=document.getElementById("lm"),r=document.getElementById("projectSize"),i=document.getElementById("indicator");const e=r?parseInt(r.innerHTML):0,t=i?i.className:"";if(i&&(g=i.innerHTML),o&&(o.style.pointerEvents="none"),"function"==typeof window.fetch)try{const n=await fetch("project.json");if(n&&n.body){const a=n.body.getReader(),l=new TextDecoder;let s=0,c="";for(;;){const{done:o,value:n}=await a.read();if(o)break;s+=n.length,c+=l.decode(n,{stream:!0}),i&&(i.innerHTML="ind2"===t&&e>0?"".concat(g,"<div>").concat((s/e*100).toFixed(1)," %</div>"):"ind3"===t&&e>0?"".concat(g,"<div>").concat((s/1e6).toFixed(1),"/").concat((e/1e6).toFixed(1)," MB</div>"):"".concat(g,"<div>").concat((s/1e6).toFixed(1)," MB</div>"))}o&&(o.style.height="0");const d=mi(JSON.parse(c)),u=ui.safeParse(d);u.success?(vi(u.data),app.preloadExternalImages&&Zt.size>0&&await h(Zt),setTimeout(()=>{const e=document.createElement("style");document.head.appendChild(e),setTimeout(()=>{o&&(o.style.height="",o.style.opacity="1",o.style.pointerEvents=""),i&&i.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),await p()):(zt.labelText="Failed to load data.",zt.isOpen=!0,console.error(u.error))}}catch(n){console.error(n),o&&(o.style.height="0"),vi(JSON.parse(JSON.stringify(app))),app.preloadExternalImages&&Zt.size>0&&await h(Zt),setTimeout(()=>{const e=document.createElement("style");document.head.appendChild(e),setTimeout(()=>{o&&(o.style.height="",o.style.opacity="1",o.style.pointerEvents=""),i&&i.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),await p()}else{const n=new XMLHttpRequest;n.open("GET","project.json",!0),n.onprogress=o=>{i&&(i.innerHTML="ind2"===t&&e>0?"".concat(g,"<div>").concat((o.loaded/e*100).toFixed(1)," %</div>"):"ind3"===t&&e>0?"".concat(g,"<div>").concat((o.loaded/1e6).toFixed(1),"/").concat((e/1e6).toFixed(1)," MB</div>"):"".concat(g,"<div>").concat((o.loaded/1e6).toFixed(1)," MB</div>"))},n.onload=async()=>{o&&(o.style.height="0"),200===n.status?(vi(JSON.parse(n.responseText)),app.preloadExternalImages&&app.externalImages.size>0&&await h(app.externalImages)):vi(JSON.parse(JSON.stringify(app))),setTimeout(()=>{const e=document.createElement("style");document.head.appendChild(e),setTimeout(()=>{o&&(o.style.height="",o.style.opacity="1",o.style.pointerEvents=""),i&&i.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),await p()},n.send()}}(),l(()=>{Wt.update(e=>(null==e||e.destroy(),null))})});var v=Kl(),f=X($(v),2);Xl(f,{});var w=X(f,2);c(Ke(w,{get labelText(){return zt.labelText},get timeoutMs(){return zt.timeoutMs},children:(e,t)=>{he(e,{class:"text-center"})},$$slots:{default:!0}}),e=>s=e,()=>s),d(e,v),u()},{target:document.getElementById("app")});export{o as __vite_legacy_guard};
