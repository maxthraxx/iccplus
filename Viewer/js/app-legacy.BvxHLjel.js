!function(){var e=["onError","onSuccess"];function t(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],i=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}throw new TypeError(u(e)+" is not iterable")}function i(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,b(o.key),o)}}function o(e,t,i){return t=c(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,i||[],c(e).constructor):t.apply(e,i))}function n(e){var t="function"==typeof Map?new Map:void 0;return n=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return function(e,t,i){if(r())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var n=new(e.bind.apply(e,o));return i&&a(n,i.prototype),n}(e,arguments,c(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a(i,e)},n(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r=function(){return!!e})()}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",n=i.toStringTag||"@@toStringTag";function r(i,o,n,r){var l=o&&o.prototype instanceof c?o:c,u=Object.create(l.prototype);return s(u,"_invoke",function(i,o,n){var r,c,l,s=0,u=n||[],d=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,i){return r=t,c=0,l=e,f.n=i,a}};function v(i,o){for(c=i,l=o,t=0;!d&&s&&!n&&t<u.length;t++){var n,r=u[t],v=f.p,g=r[2];i>3?(n=g===o)&&(l=r[(c=r[4])?5:(c=3,3)],r[4]=r[5]=e):r[0]<=v&&((n=i<2&&v<r[1])?(c=0,f.v=o,f.n=r[1]):v<g&&(n=i<3||r[0]>o||o>g)&&(r[4]=i,r[5]=o,f.n=g,c=0))}if(n||i>1)return a;throw d=!0,o}return function(n,u,g){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&v(u,g),c=u,l=g;(t=c<2?e:l)||!d;){r||(c?c<3?(c>1&&(f.n=-1),v(c,l)):f.n=l:f.v=l);try{if(s=2,r){if(c||(n="next"),t=r[n]){if(!(t=t.call(r,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=r.return)&&t.call(r),c<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),c=1);r=e}else if((t=(d=f.n<0)?l:i.call(o,f))!==a)break}catch(t){r=e,c=1,l=t}finally{s=1}}return{value:t,done:d}}}(i,n,r),!0),u}var a={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(s(t={},o,function(){return this}),t),v=d.prototype=c.prototype=Object.create(f);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,n,"GeneratorFunction")),e.prototype=Object.create(v),e}return u.prototype=d,s(v,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,n,"GeneratorFunction"),s(v),s(v,n,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),(l=function(){return{w:r,m:g}})()}function s(e,t,i,o){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}s=function(e,t,i,o){function r(t,i){s(e,t,function(e){return this._invoke(t,i,e)})}t?n?n(e,t,{value:i,enumerable:!o,configurable:!o,writable:!o}):e[t]=i:(r("next",0),r("throw",1),r("return",2))},s(e,t,i,o)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t,i,o,n,r,a){try{var c=e[r](a),l=c.value}catch(e){return void i(e)}c.done?t(l):Promise.resolve(l).then(o,n)}function f(e){return function(){var t=this,i=arguments;return new Promise(function(o,n){var r=e.apply(t,i);function a(e){d(r,o,n,a,c,"next",e)}function c(e){d(r,o,n,a,c,"throw",e)}a(void 0)})}}function v(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o,n,r,a,c=[],l=!0,s=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(o=r.call(i)).done)&&(c.push(o.value),c.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(s)throw n}}return c}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){h(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function h(e,t,i){return(t=b(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function w(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=T(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw r}}}}function T(e,t){if(e){if("string"==typeof e)return I(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=Array(t);i<t;i++)o[i]=e[i];return o}System.register(["./chunk-vendors-legacy.wxFgqm_T.js"],function(r,c){"use strict";var s,d,p,b,T,I,y,x,S,C,A,B,O,k,M,F,D,R,j,P,$,V,q,L,W,E,U,N,z,G,_,H,Y,Z,J,X,K,Q,ee,te,ie,oe,ne,re,ae,ce,le,se,ue,de,fe,ve,ge,pe,me,he,be,we,Te,Ie,ye,xe,Se,Ce,Ae,Be,Oe,ke,Me,Fe,De,Re,je,Pe,$e,Ve,qe,Le,We,Ee,Ue,Ne,ze,Ge,_e,He,Ye,Ze,Je,Xe,Ke,Qe,et,tt,it,ot,nt,rt,at,ct,lt,st,ut,dt,ft,vt,gt,pt;return{setters:[function(e){s=e.p,d=e.S,p=e.a,b=e.o,T=e.c,I=e.b,y=e.d,x=e.w,S=e.g,C=e.r,A=e.t,B=e.u,O=e.e,k=e.f,M=e.k,F=e.h,D=e.i,R=e.j,j=e.l,P=e.m,$=e.s,V=e.n,q=e.q,L=e.v,W=e.x,E=e.y,U=e.z,N=e.A,z=e.B,G=e.C,_=e.D,H=e.E,Y=e.F,Z=e.G,J=e.H,X=e.I,K=e.J,Q=e.K,ee=e.L,te=e.M,ie=e.N,oe=e.O,ne=e.P,re=e.Q,ae=e.R,ce=e.T,le=e.U,se=e.V,ue=e.W,de=e.X,fe=e.Y,ve=e.Z,ge=e._,pe=e.$,me=e.a0,he=e.a1,be=e.a2,we=e.a3,Te=e.a4,Ie=e.a5,ye=e.a6,xe=e.a7,Se=e.a8,Ce=e.a9,Ae=e.aa,Be=e.ab,Oe=e.ac,ke=e.ad,Me=e.ae,Fe=e.af,De=e.ag,Re=e.ah,je=e.ai,Pe=e.aj,$e=e.ak,Ve=e.al,qe=e.am,Le=e.an,We=e.ao,Ee=e.ap,Ue=e.aq,Ne=e.ar,ze=e.as,Ge=e.at,_e=e.au,He=e.av,Ye=e.aw,Ze=e.ax,Je=e.ay,Xe=e.az,Ke=e.aA,Qe=e.aB,et=e.aC,tt=e.aD,it=e.aE,ot=e.aF,nt=e.aG,rt=e.aH,at=e.aI,ct=e.aJ,lt=e.aK,st=e.aL,ut=e.aM,dt=e.aN,ft=e.aO,vt=e.aP,gt=e.aQ,pt=e.aR}],execute:function(){var r=document.createElement("style");
/*!
			 * canvas-size
			 * v2.0.0
			 * https://github.com/jhildenbiddle/canvas-size
			 * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
			 * MIT license
			 */
function c(e){var t,i,o=e.sizes.shift(),n=Math.max(Math.ceil(o[0]),1),r=Math.max(Math.ceil(o[1]),1),a=[n-1,r-1,1,1],l=performance.now(),s="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;s?(t=new OffscreenCanvas(1,1),i=new OffscreenCanvas(n,r)):((t=document.createElement("canvas")).width=1,t.height=1,(i=document.createElement("canvas")).width=n,i.height=r);var u=t.getContext("2d"),d=i.getContext("2d");d&&(d.fillRect.apply(d,a),u.drawImage(i,n-1,r-1,1,1,0,0,1,1));var f=u&&0!==u.getImageData(0,0,1,1).data[3],v=parseInt(performance.now()-l);return[t,i].forEach(function(e){e.height=0,e.width=0}),s?(postMessage({width:n,height:r,testTime:v,isTestPass:f}),!f&&e.sizes.length&&setTimeout(function(){c(e)},0)):f?e.onSuccess({width:n,height:r,testTime:v}):(e.onError({width:n,height:r,testTime:v}),e.sizes.length&&setTimeout(function(){c(e)},0)),f}r.textContent="html,body{height:100%}p{margin-bottom:0}#app,#lm{height:100%}#backpackDialog{max-height:100%}img{padding-right:0!important;padding-left:0!important;width:100%}.fadeOverlay{position:fixed;top:0;left:0;width:100%;height:100%;opacity:0;pointer-events:none;z-index:10000}.ab-0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100%;max-width:100%;position:relative;background-position:center;background-attachment:fixed}.s-main{height:100%}.m-half{margin:.125rem!important}.mt-half{margin-top:.125rem!important}.ml-half{margin-left:.125rem!important}.mr-half{margin-right:.125rem!important}.mb-half{margin-bottom:.125rem!important}.m-n1{margin:-.25rem!important}.m-n2{margin:-.5rem!important}.m-n3{margin:-1rem!important}.m-n4{margin:-1.5rem!important}.m-n5{margin:-3rem!important}.mt-n1{margin-top:-.25rem!important}.mt-n2{margin-top:-.5rem!important}.mt-n3{margin-top:-1rem!important}.mt-n4{margin-top:-1.5rem!important}.mt-n5{margin-top:-3rem!important}.ml-n1{margin-left:-.25rem!important}.ml-n2{margin-left:-.5rem!important}.ml-n3{margin-left:-1rem!important}.ml-n4{margin-left:-1.5rem!important}.ml-n5{margin-left:-3rem!important}.mr-n1{margin-right:-.25rem!important}.mr-n2{margin-right:-.5rem!important}.mr-n3{margin-right:-1rem!important}.mr-n4{margin-right:-1.5rem!important}.mr-n5{margin-right:-3rem!important}.mb-n1{margin-bottom:-.25rem!important}.mb-n2{margin-bottom:-.5rem!important}.mb-n3{margin-bottom:-1rem!important}.mb-n4{margin-bottom:-1.5rem!important}.mb-n5{margin-bottom:-3rem!important}.h-100{height:100%!important}.w-auto{width:auto!important}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.align-center{align-items:center}.list-text{font-size:.8125rem;font-weight:500;line-height:1rem}.dialog-title{font-size:1.5rem}.d-column{display:flex;flex-direction:column}.d-row{display:flex;flex-direction:row}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-space-around{justify-content:space-around}.justify-space-between{justify-content:space-between}.dialog-actions--btn{color:#43a047}.mdc-dialog__title:focus{outline:none}.mdc-dialog__content{max-height:810px;font-size:.875rem;font-weight:400;line-height:1.375rem;letter-spacing:.0071428571em}.mdc-dialog__actions{padding:4px}.backpack-wrapper{font-size:.875rem;font-weight:400;line-height:1.375rem;letter-spacing:.0071428571em}.mdc-text-field,.mdc-button{width:100%}.mdc-floating-label{font-size:.9125rem}.mdc-select{width:100%}.mdc-snackbar{top:0;bottom:auto}.no-shadow{box-shadow:none}.mdc-form-field{font-size:1rem}.mdc-form-field>label{cursor:pointer}.mdc-tooltip{pointer-events:none}.smui-autocomplete__menu{max-width:100%}.toolbar{width:100%;font-size:24px;display:flex;flex-direction:row;align-items:center;overflow:auto}.toolbar__dialog{font-size:.875rem}.toolbar__title{font-family:Roboto,sans-serif;font-size:1.25rem;line-height:1.5}.toolbar__title p{display:inline}.toolbar__title p:not(:last-child){margin-right:4px}.req p{display:inline}.req p:not(:last-child){margin-right:4px}.point-slot{border-radius:4px}.disabled{pointer-events:none;opacity:.5}.hidden{display:none!important}.transparent{pointer-events:none;opacity:0}.preview-image{cursor:pointer}.mdc-deprecated-list-divider{border-bottom-color:currentColor}.btn--image-background{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:none;font:inherit;color:inherit;width:100%}.btn--image{width:100%;height:auto;object-fit:contain;object-position:center}.pointBar{height:56px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px rgba(0,0,0,.14),0 1px 10px rgba(0,0,0,.12)}.mdc-drawer--mini{position:fixed;width:56px;transition:width .2s}.mdc-drawer--mini:hover{width:256px}.navigation-drawer{display:flex;flex-direction:column;justify-content:space-between}.pointbar-icons{font-size:32px;padding:0}.pointbar-center--viewer{flex:1 0 auto!important;max-width:calc(90vw - 96px);overflow-x:auto;overflow-y:hidden;white-space:nowrap;padding:0;justify-content:space-around}.counter-icons{width:36px;height:36px;font-size:.875rem;overflow:hidden}.button-icons{font-size:24px!important}.mdc-chip--small{font-size:12px;border-radius:12px;height:24px}.mdi--small{font-size:12px!important}.mdi--normal{font-size:18px!important}.mdi--big{font-size:24px!important}.smui-chip-input__container{padding-top:20px!important;padding-left:12px!important;padding-right:12px!important}.mdi{font-family:Material Design Icons;line-height:1}.mdc-deprecated-list-item__graphic{font-size:24px}.switch-scale{--mdc-ripple-fg-scale: 1.45 !important;margin:8px}.check-scale{--mdc-checkbox-touch-target-size: 32px}.b-line{border-bottom:1px solid #e9ecef}.floating-button-container{position:relative;width:100%}.floating-button{position:absolute;z-index:1;top:50%;right:5px;transform:translateY(-50%)}.spacer{margin-left:auto}.hide-file-ui input[type=file]::file-selector-button{display:none}.hide-file-ui input[type=file]:not(.mdc-text-field--label-floating){color:transparent}.line-default{line-height:1}.row-cm{margin:0 1% 25px}.fullHeight{display:flex;height:100%;align-content:start}.w-20{-webkit-box-flex:0;-ms-flex:0 0 20%!important;flex:0 0 20%!important;max-width:20%}.w-14{-webkit-box-flex:0;-ms-flex:0 0 14.28%!important;flex:0 0 14.28%!important;max-width:14.28%}.w-12{-webkit-box-flex:0;-ms-flex:0 0 12.5%!important;flex:0 0 12.5%!important;max-width:12.5%}.w-11{-webkit-box-flex:0;-ms-flex:0 0 11%!important;flex:0 0 11%!important;max-width:11%}.w-10{-webkit-box-flex:0;-ms-flex:0 0 10%!important;flex:0 0 10%!important;max-width:10%}.w-9{-webkit-box-flex:0;-ms-flex:0 0 9.09%!important;flex:0 0 9.09%!important;max-width:9.09%}.bordered-panel{border-top-width:1px!important;margin:0!important}.mdc-form-field>label{width:100%}.bg-overlay{background-blend-mode:overlay}.on-top{z-index:99999!important}.create-box{display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;color:gray;border:2px grey dashed;border-radius:10px;height:100%}.save-slot{border:1px grey solid}.textbox-mini{height:40px}.textbox-mini:before{height:24px}.panel--active,.mdc-tab--active .mdc-tab__text-label{color:#1976d2}.mdc-tab-indicator--active .mdc-tab-indicator__content--underline{border-color:#1976d2}.slider{max-width:104px;width:100%;height:32px}.mdc-slider,.mdc-slider .mdc-slider__thumb{height:32px}.mdc-slider .mdc-slider__thumb-knob{border:none;width:12px;height:12px}.mdc-slider .mdc-slider__track,.mdc-slider .mdc-slider__track--inactive{height:2px}.mdc-slider .mdc-slider__track--active{top:0;height:2px}.music-player{top:0;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px rgba(0,0,0,.14),0 1px 10px rgba(0,0,0,.12);font-family:Roboto,sans-serif}.music-player--row{height:32px}.music-player--button{font-size:24px!important}.scrolling-text{display:inline-block;white-space:nowrap;min-width:150px;animation:scrollText 10s linear infinite}.viewer-menu{height:48px}.picture-input{width:100%;margin:0 auto;text-align:center}.preview-container{width:100%;box-sizing:border-box;margin:0 auto;cursor:pointer;overflow:hidden;transform:translateZ(0)}.picture-preview{width:100%;height:100%;position:relative;z-index:10001;box-sizing:border-box;background-color:rgba(200,200,200,.25)}.picture-preview.dragging-over{filter:brightness(.5)}.picture-inner{position:relative;z-index:10002;pointer-events:none;box-sizing:border-box;margin:1em auto;padding:.5em;border:.3em dashed rgba(66,66,66,.15);border-radius:8px;width:calc(100% - 2.5em);height:calc(100% - 2.5em);display:table}.picture-inner .picture-inner-text{display:table-cell;vertical-align:middle;text-align:center;font-size:2em;line-height:1.5}.picture-input input[type=file]{display:none}.text-prewrap{white-space:pre-wrap}@keyframes scrollText{0%{transform:translate(150px)}to{transform:translate(-100%)}}img.svelte-nl65cd{display:block;width:100%}\n/*$vite$:1*/",document.head.appendChild(r);var mt=[16384,14188,11402,11180,10836,8192,4096,1],ht={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},bt={};function wt(e){var t=e.width===e.height,i=1===e.height,o=1===e.width,n=[];if(e.width&&e.height)for(var r=e.min||ht.min,a=e.step||ht.step,c=Math.max(e.width,e.height);c>=r;){var l=t||i?c:1,s=t||o?c:1;n.push([l,s]),c-=a}else e.sizes.forEach(function(e){var r=t||i?e:1,a=t||o?e:1;n.push([r,a])});return n}function Tt(t){var i="undefined"!=typeof window,o=i&&"Promise"in window,n=i&&"HTMLCanvasElement"in window,r=i&&"OffscreenCanvas"in window,a=URL.createObjectURL(new Blob([])).slice(-36),l=performance.now(),s=t.onError,u=t.onSuccess,d=function(e,t){if(null==e)return{};var i,o,n=function(e,t){if(null==e)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;i[o]=e[o]}return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)i=r[o],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,e),f=function(){return parseInt(performance.now()-l)},v=null;if(!n)return!1;if(t.useWorker&&r){var p="\n            var canvasTest = ".concat(c.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),h=new Blob([p],{type:"application/javascript"}),b=URL.createObjectURL(h);v=new Worker(b),URL.revokeObjectURL(b),v.onmessage=function(e){var t=e.data,i=t.width,o=t.height,n=t.testTime,r=t.isTestPass,c={width:i,height:o,testTime:n,totalTime:f()};r?(bt[a].onSuccess(c),delete bt[a]):bt[a].onError(c)}}return o?new Promise(function(e){var i=m(m({},t),{},{onError:function(i){var o,n=i.width,r=i.height,a={width:n,height:r,testTime:i.testTime,totalTime:f()};if(0===t.sizes.length)o=!0;else{var c=g(t.sizes.slice(-1),1),l=g(c[0],2),u=l[0],d=l[1];o=n===u&&r===d}s(a),o&&e(m(m({},a),{},{success:!1}))},onSuccess:function(t){var i={width:t.width,height:t.height,testTime:t.testTime,totalTime:f()};u(i),e(m(m({},i),{},{success:!0}))}});if(v){var o=i.onError,n=i.onSuccess;bt[a]={onError:o,onSuccess:n},v.postMessage(d)}else c(i)}):v?(bt[a]={onError:s,onSuccess:u},void v.postMessage(d)):c(t)}var It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=wt({width:e.max,height:e.max,min:e.min,step:e.step,sizes:v(mt)});return Tt(m(m(m({},ht),e),{},{sizes:t}))},yt="2.5.1",xt={selFilterBlurIsOn:!1,selFilterBlur:0,selFilterBrightIsOn:!1,selFilterBright:100,selFilterContIsOn:!1,selFilterCont:100,selFilterGrayIsOn:!1,selFilterGray:0,selFilterHueIsOn:!1,selFilterHue:0,selFilterInvertIsOn:!1,selFilterInvert:0,selFilterOpacIsOn:!1,selFilterOpac:100,selFilterSaturIsOn:!1,selFilterSatur:1,selFilterSepiaIsOn:!1,selFilterSepia:0,selBgColorIsOn:!0,selOverlayOnImage:!1,selFilterBgColor:"#70FF7EFF",selBorderColorIsOn:!1,selFilterBorderColor:"#000000FF",selCTitleColorIsOn:!1,selFilterCTitleColor:"#000000FF",selCTextColorIsOn:!1,selFilterCTextColor:"#000000FF",selATitleColorIsOn:!1,selFilterATitleColor:"#000000FF",selATextColorIsOn:!1,selFilterATextColor:"#000000FF",selScoreTextColorIsOn:!1,selFilterSTextColor:"#000000FF",selFilterVisibleIsOn:!1,reqFilterBlurIsOn:!1,reqFilterBlur:0,reqFilterBrightIsOn:!1,reqFilterBright:100,reqFilterContIsOn:!1,reqFilterCont:100,reqFilterGrayIsOn:!1,reqFilterGray:0,reqFilterHueIsOn:!1,reqFilterHue:0,reqFilterInvertIsOn:!1,reqFilterInvert:0,reqFilterOpacIsOn:!0,reqFilterOpac:50,reqFilterSaturIsOn:!1,reqFilterSatur:1,reqFilterSepiaIsOn:!1,reqFilterSepia:0,reqBgColorIsOn:!1,reqOverlayOnImage:!1,reqFilterBgColor:"#FFFFFFFF",reqBorderColorIsOn:!1,reqFilterBorderColor:"#000000FF",reqCTitleColorIsOn:!1,reqFilterCTitleColor:"#000000FF",reqCTextColorIsOn:!1,reqFilterCTextColor:"#000000FF",reqATitleColorIsOn:!1,reqFilterATitleColor:"#000000FF",reqATextColorIsOn:!1,reqFilterATextColor:"#000000FF",reqScoreTextColorIsOn:!1,reqFilterSTextColor:"#000000FF",reqFilterVisibleIsOn:!1,unselFilterBlurIsOn:!1,unselFilterBlur:0,unselFilterBrightIsOn:!1,unselFilterBright:100,unselFilterContIsOn:!1,unselFilterCont:100,unselFilterGrayIsOn:!1,unselFilterGray:0,unselFilterHueIsOn:!1,unselFilterHue:0,unselFilterInvertIsOn:!1,unselFilterInvert:0,unselFilterOpacIsOn:!1,unselFilterOpac:100,unselFilterSaturIsOn:!1,unselFilterSatur:1,unselFilterSepiaIsOn:!1,unselFilterSepia:0,unselFilterVisibleIsOn:!1},St={customRowTitle:!1,rowTitle:"Times New Roman",customRowText:!1,rowText:"Times New Roman",customObjectTitle:!1,objectTitle:"Times New Roman",customObjectText:!1,objectText:"Times New Roman",customAddonTitle:!1,addonTitle:"Times New Roman",customAddonText:!1,addonText:"Times New Roman",customScoreText:!1,scoreText:"Times New Roman",rowTitleTextSize:200,rowTextTextSize:100,objectTitleTextSize:200,objectTextTextSize:100,addonTitleTextSize:200,addonTextTextSize:100,scoreTextSize:75,rowTitleColor:"#000000",rowTextColor:"#000000",objectTitleColor:"#000000",objectTextColor:"#000000",addonTitleColor:"#000000",addonTextColor:"#000000",scoreTextColor:"#000000",rowTitleAlign:"center",rowTextAlign:"center",objectTitleAlign:"center",objectTextAlign:"center",addonTitleAlign:"center",addonTextAlign:"center",scoreTextAlign:"center"},Ct={objectImgBorderStyle:"solid",objectImgBorderWidth:2,objectImageWidth:100,objectImageMarginTop:0,objectImageMarginBottom:0,objectImgBorderRadiusTopLeft:0,objectImgBorderRadiusTopRight:0,objectImgBorderRadiusBottomRight:0,objectImgBorderRadiusBottomLeft:0,objectImgBorderRadiusIsPixels:!0,objectImgBorderIsOn:!1,objectImgOverflowIsOn:!1,objectImgBorderColor:"red",objectImgObjectFillStyle:"",objectImgObjectFillIsOn:!1,objectImageBoxWidth:50},At={rowImgBorderStyle:"solid",rowImgBorderWidth:2,rowImageWidth:100,rowImageMarginTop:0,rowImageMarginBottom:0,rowImgBorderRadiusTopLeft:0,rowImgBorderRadiusTopRight:0,rowImgBorderRadiusBottomRight:0,rowImgBorderRadiusBottomLeft:0,rowImgBorderRadiusIsPixels:!0,rowImgBorderIsOn:!1,rowImgOverflowIsOn:!1,rowImgBorderColor:"red",rowImageBoxWidth:50},Bt={useAddonImage:!1,addonImgBorderStyle:"solid",addonImgBorderWidth:2,addonImageWidth:100,addonImageMarginTop:0,addonImageMarginBottom:0,addonImgBorderRadiusTopLeft:0,addonImgBorderRadiusTopRight:0,addonImgBorderRadiusBottomRight:0,addonImgBorderRadiusBottomLeft:0,addonImgBorderRadiusIsPixels:!0,addonImgBorderIsOn:!1,addonImgOverflowIsOn:!1,addonImgBorderColor:"red",addonImgObjectFillStyle:"",addonImgObjectFillIsOn:!1,addonImageBoxWidth:50},Ot={bgColorIsOn:!1,backgroundColor:"#FFFFFFFF",rowBgColorIsOn:!1,rowBgColor:"#FFFFFFFF",objectBgColorIsOn:!1,objectBgColor:"#FFFFFFFF",isBackgroundRepeat:!1,isBackgroundFitIn:!1,backgroundImage:"",isRowBackgroundRepeat:!1,isRowBackgroundFitIn:!1,rowBackgroundImage:"",isObjectBackgroundRepeat:!1,isObjectBackgroundFitIn:!1,objectBackgroundImage:""},kt={objectHeight:!0,objectDesignIsAdvanced:!1,objectMargin:10,objectTextPadding:10,objectBorderStyle:"solid",objectBorderWidth:2,objectBorderIsOn:!1,objectDropShadowH:0,objectDropShadowV:0,objectDropShadowBlur:0,objectDropShadowSpread:0,objectDropShadowIsOn:!1,objectUseBoxShadowIsOn:!1,objectBorderRadiusTopLeft:0,objectBorderRadiusTopRight:0,objectBorderRadiusBottomRight:0,objectBorderRadiusBottomLeft:0,objectBorderRadiusIsPixels:!0,objectOverflowIsOn:!0,objectDropShadowColor:"grey",objectGradientIsOn:!1,objectGradient:"",objectGradientOnSelect:"",objectGradientOnReq:"",objectBorderColor:"red",objectBorderImage:"",objectBorderImageRepeat:"stretch",objectBorderImageWidth:5,objectBorderImageSliceTop:5,objectBorderImageSliceBottom:5,objectBorderImageSliceLeft:5,objectBorderImageSliceRight:5,removeSpaceAddonIsOn:!1,titlePaddingIsOn:!1},Mt={rowDesignIsAdvanced:!1,rowMargin:10,rowBodyMarginSides:1,rowBodyMarginTop:25,rowBodyMarginBottom:25,rowTextPaddingY:5,rowTextPaddingX:10,rowOverflowIsOn:!0,rowDropShadowH:0,rowDropShadowV:0,rowDropShadowBlur:0,rowDropShadowSpread:0,rowDropShadowColor:"grey",rowButtonXPadding:0,rowButtonYPadding:0,rowDropShadowIsOn:!1,rowUseBoxShadowIsOn:!1,rowBorderRadiusTopLeft:0,rowBorderRadiusTopRight:0,rowBorderRadiusBottomRight:0,rowBorderRadiusBottomLeft:0,rowBorderRadiusIsPixels:!0,rowBorderStyle:"solid",rowBorderWidth:2,rowBorderIsOn:!1,rowBorderColor:"red",rowGradientIsOn:!1,rowGradient:"",rowBorderImage:"",rowBorderImageRepeat:"stretch",rowBorderImageWidth:5,rowBorderImageSliceTop:5,rowBorderImageSliceBottom:5,rowBorderImageSliceLeft:5,rowBorderImageSliceRight:5},Ft={useAddonDesign:!1,addonDesignIsAdvanced:!1,addonMargin:10,addonTextPadding:10,addonBorderStyle:"solid",addonBorderWidth:2,addonBorderIsOn:!1,addonDropShadowH:0,addonDropShadowV:0,addonDropShadowBlur:0,addonDropShadowSpread:0,addonDropShadowIsOn:!1,addonUseBoxShadowIsOn:!1,addonBorderRadiusTopLeft:0,addonBorderRadiusTopRight:0,addonBorderRadiusBottomRight:0,addonBorderRadiusBottomLeft:0,addonBorderRadiusIsPixels:!0,addonOverflowIsOn:!0,addonDropShadowColor:"grey",addonGradientIsOn:!1,addonGradient:"",addonGradientOnSelect:"",addonGradientOnReq:"",addonBorderColor:"red",addonBorderImage:"",addonBorderImageRepeat:"stretch",addonBorderImageWidth:5,addonBorderImageSliceTop:5,addonBorderImageSliceBottom:5,addonBorderImageSliceLeft:5,addonBorderImageSliceRight:5,useAddonBackgroundImage:!1,addonBackgroundImage:"",isAddonBackgroundFitIn:!1,isAddonBackgroundRepeat:!1,addonBgColorIsOn:!1,addonBgColor:"#FFFFFFFF",addonTitlePaddingIsOn:!1},Dt={customMultiTextFont:!1,multiChoiceCounterPosition:0,multiChoiceCounterSize:170,multiChoiceTextFont:"Times New Roman",multiChoiceTextSize:100},Rt={barTextPadding:17,barTextMargin:0,customBarTextFont:!1,barTextFont:"Times New Roman",barPadding:0,barMargin:0,barTextSize:15,barTextColor:"#000000",barPointPos:"#FF0000FF",barPointNeg:"#FF0000FF",barIconColor:"#0000008A",barBackgroundColor:"#FFFFFFFF"},jt={useBackpackDesign:!1,backpackBgColor:"#FFFFFF",isBackpackBgRepeat:!1,isBackpackBgFitIn:!1,backpackBgImage:"",backPackWidth:1400},app=s(

/*! Delete and replace this part with your project if you're pasting it in, leave it here if you have placed your project.json file under index.html. */
{version:yt,isEditModeOnAll:!0,isStyleOpen:!1,isPointsOpen:!1,isChoicesOpen:!1,isDesignOpen:!1,isFadingOut:!1,isPointerCursor:!1,importedChoicesIsOpen:!0,curBgmTime:0,curBgmLength:0,curVolume:100,isSeeking:!1,isMute:!1,lastFadeTime:0,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRow:[],tmpChoice:[],tmpRequired:[],tmpScore:[],tmpAddon:[],tmpGroup:[],rowIdLength:4,objectIdLength:4,words:[],wordChangeComplete:!1,groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,useTextEditor:!0,useToolbarBtn:!1,useChoiceEditBtn:!0,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,tooltipDelay:1e3,checkDeleteRow:!0,checkDeleteObject:!1,checkSelectAll:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:m(m(m(m(m(m(m(m(m(m(m(m({},xt),St),Ct),At),Bt),Ot),kt),Mt),Ft),Dt),Rt),jt)}
/*! End */

),Pt={version:yt,isEditModeOnAll:!0,isStyleOpen:!1,isPointsOpen:!1,isChoicesOpen:!1,isDesignOpen:!1,isFadingOut:!1,isPointerCursor:!1,importedChoicesIsOpen:!0,curBgmTime:0,curBgmLength:0,curVolume:100,isSeeking:!1,isMute:!1,lastFadeTime:0,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRow:[],tmpChoice:[],tmpRequired:[],tmpScore:[],tmpAddon:[],tmpGroup:[],rowIdLength:4,objectIdLength:4,words:[],wordChangeComplete:!1,groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,useTextEditor:!0,useToolbarBtn:!1,useChoiceEditBtn:!0,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,tooltipDelay:1e3,checkDeleteRow:!0,checkDeleteObject:!1,checkSelectAll:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:m(m(m(m(m(m(m(m(m(m(m(m({},xt),St),Ct),At),Bt),Ot),kt),Mt),Ft),Dt),Rt),jt)},$t=s(new d),Vt=s(new d),qt=s(new d),Lt=s(new d),Wt=s(new d),Et=s(new d),Ut=s(new d),Nt=s(new d),zt=s(new d),Gt=s(new d),_t=s(new d),Ht=s(new p),Yt=s([]),Zt=s({value:"light"}),Jt={ALLOWED_TAGS:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","font","iframe","img"],ADD_ATTR:["href","target","style","class"]},Xt=x(null),Kt=s({isBgmInit:!1,bgmIsPlaying:!1,bgmPlayInterval:0,bgmTitleInterval:0,bgmFadeInterval:0,bgmFadeTimer:0,bgmTitle:"No Audio Title",curBgmTime:0,curBgmLength:0,isSeeking:!1,lastFadeTime:0,isFadingOut:!1,bgmObjectId:""}),Qt=s({currentDialog:"none"}),ei=s({labelText:"",timeoutMs:4e3,isOpen:!1}),ti=s({allowDeselect:!1,isSingleFile:!1}),ii=s({stored:!1,name:"Auto Save",time:"",app:""}),oi=s(Array.from({length:99},function(e,t){return{stored:!1,name:"Slot ".concat(t+1),time:"",app:""}})),ni=s(Array.from({length:99},function(e,t){return{stored:!1,name:"Slot ".concat(t+1),time:"",app:""}}));s({backgroundColor:"",backgroundImage:"",barBgColor:""});var ri=new Set,ai={value:!1},ci=C(window.innerWidth,function(e){var t=function(){return e(window.innerWidth)};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),li=null,si=null;function ui(){return new Promise(function(e,t){var i=indexedDB.open("cyoaPlusDB");i.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("cyoaStore")||t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore")},i.onsuccess=function(t){var i=t.target.result;e(i)},i.onerror=t})}function di(){return new Promise(function(e,t){return si?e(si):t()})}function fi(){return new Promise(function(e,t){if(li)return e(li);var i=indexedDB.open("cyoaDB"),o=!1,n=[],r=[],a=[];i.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore",{keyPath:"title"}),o=!0},i.onsuccess=function(i){var c=i.target.result;if(1===c.version)if(o)ui().then(function(t){e(li=t)}).catch(t).finally(function(){c.close()});else if(c.objectStoreNames.contains("buildStore")){var l=c.transaction(["buildStore"],"readonly").objectStore("buildStore").getAll();l.onsuccess=function(){for(var i=l.result,o=0;o<i.length;o++){var n=l.result[o];ni[o].stored=!0,ni[o].name=n.title,ni[o].time="Unknown"}ui().then(function(t){e(li=t)}).catch(t).finally(function(){si=c})},l.onerror=function(i){console.error(i),ui().then(function(t){e(li=t)}).catch(t).finally(function(){c.close()})}}else ui().then(function(t){e(li=t)}).catch(t).finally(function(){c.close()});else{var s=[new Promise(function(e,t){if(c.objectStoreNames.contains("cyoaStore")){var i=c.transaction("cyoaStore","readonly").objectStore("cyoaStore").openCursor();i.onsuccess=function(t){var i=t.target.result;i?(n.push({key:i.key,value:i.value}),i.continue()):e()},i.onerror=t}else e()}),new Promise(function(e,t){if(c.objectStoreNames.contains("buildStore")){var i=c.transaction("buildStore","readonly").objectStore("buildStore").openCursor();i.onsuccess=function(t){var i=t.target.result;i?(r.push({key:i.key,value:i.value}),i.continue()):e()},i.onerror=t}else e()})];Promise.all(s).then(function(){return c.close(),new Promise(function(e,t){var i=indexedDB.deleteDatabase("cyoaDB");i.onsuccess=function(){var i=indexedDB.open("cyoaDB",1);i.onupgradeneeded=function(e){e.target.result.createObjectStore("buildStore",{keyPath:"title"});var t=e.target.transaction;if(t)for(var i=t.objectStore("buildStore"),o=0,n=0;n<r.length;n++){var c=r[n];void 0!==c.value.title?(i.put(c.value),ni[o].stored=!0,ni[o].name=c.title,ni[o].time="Unknown",o+=1):a.push(c)}},i.onsuccess=function(t){var i=t.target.result;si=i,e()},i.onerror=function(e){t(e)}},i.onerror=function(e){t(e)}})}).catch(function(e){console.error(e),c.close()}).finally(function(){var i=indexedDB.open("cyoaPlusDB");i.onupgradeneeded=function(e){var t=e.target.result;!t.objectStoreNames.contains("cyoaStore")&&n.length>0&&t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore");var i=e.target.transaction;if(i){if(n.length>0)for(var o=i.objectStore("cyoaStore"),r=0;r<n.length;r++){var c=n[r];o.put(c.value,c.key)}if(a.length>0)for(var l=i.objectStore("buildStore"),s=0;s<a.length;s++){var u=a[s];l.put(u.value,u.key)}}},i.onsuccess=function(t){var i=t.target.result;e(li=i)},i.onerror=function(e){t(e)}})}},i.onerror=function(e){t(e)}})}var vi=null;function gi(e,t){return new Promise(function(i,o){var n=setTimeout(function(){return i()},e);t&&t.addEventListener("abort",function(){clearTimeout(n),o(new DOMException("Aborted","AbortError"))})})}function pi(){return mi.apply(this,arguments)}function mi(){return mi=f(l().m(function e(){var i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:i=new AbortController,vi=i,o="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave"),n=l().m(function e(){var t,n,r,a,c,s,u,d,f;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,gi(1e3*app.buildAutoSaveInterval*60,i.signal);case 1:e.n=3;break;case 2:return e.p=2,e.v,e.a(2,0);case 3:if(app.buildAutoSaveIsOn){e.n=4;break}return e.a(2,0);case 4:return e.n=5,fi();case 5:return t=e.v,n=t.transaction("buildStore","readwrite"),r=n.objectStore("buildStore"),a=navigator.language,c=new Date,s=new Intl.DateTimeFormat(a,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),u=s.format(c),d={stored:!0,name:"Auto Save",time:u,app:yi()},e.p=6,e.n=7,new Promise(function(e,t){var i=r.put(d,o);i.onsuccess=function(){return e()},i.onerror=function(){return t(i.error)}});case 7:ii.stored=!0,ii.time=u,ei.labelText="Auto-save completed successfully.",ei.isOpen=!0,e.n=9;break;case 8:e.p=8,f=e.v,console.error(f);case 9:return e.a(2)}},e,null,[[6,8],[0,2]])});case 1:if(!app.buildAutoSaveIsOn){e.n=4;break}return e.d(t(n()),2);case 2:if(0!==e.v){e.n=3;break}return e.a(3,4);case 3:e.n=1;break;case 4:return e.a(2)}},e)})),mi.apply(this,arguments)}function hi(){return hi=f(l().m(function e(t,i,o,n,r){var a,c,s,u;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,fi();case 1:return a=e.v,c=a.transaction(n,"readwrite"),s=c.objectStore(n),e.p=2,e.n=3,new Promise(function(e,o){var n=s.put(t,i);n.onsuccess=function(){return e()},n.onerror=function(){return o(n.error)}});case 3:r&&(oi[o].stored=!0,oi[o].time=t.time,oi[o].name=t.name),e.n=5;break;case 4:e.p=4,u=e.v,console.error(u);case 5:return e.a(2)}},e,null,[[2,4]])})),hi.apply(this,arguments)}function bi(){return bi=f(l().m(function e(t,i,o,n){var r,a,c,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,fi();case 1:return r=e.v,a=r.transaction(o,"readwrite"),c=a.objectStore(o),e.p=2,e.n=3,new Promise(function(e,i){var o=c.delete(t);o.onsuccess=function(){return e()},o.onerror=function(){return i(o.error)}});case 3:n&&(oi[i].stored=!1,oi[i].name="Slot ".concat(i+1),oi[i].time=""),e.n=5;break;case 4:e.p=4,s=e.v,console.error(s);case 5:return e.a(2)}},e,null,[[2,4]])})),bi.apply(this,arguments)}function wi(e,t){return Ti.apply(this,arguments)}function Ti(){return Ti=f(l().m(function e(t,i){var o,n,r=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.n=2;break}return e.n=1,di();case 1:n=e.v,e.n=4;break;case 2:return e.n=3,fi();case 3:n=e.v;case 4:return o=n,e.a(2,new Promise(function(e,n){var r=o.transaction(i,"readonly").objectStore(i).get(t);r.onsuccess=function(){return e(void 0!==r.result?r.result:null)},r.onerror=n}))}},e)})),Ti.apply(this,arguments)}function Ii(){return Ii=f(l().m(function e(){var t,i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fi();case 1:return t=e.v,i=t.transaction("buildStore","readonly"),o=i.objectStore("buildStore"),n=location.pathname.replace(/\/index\.html$/,"/"),e.n=2,new Promise(function(e,t){var i=o.openCursor();i.onsuccess=function(t){var i=t.target.result;if(i){var o=i.key,r=i.value;if("string"==typeof o&&o.startsWith(n)){var a=o.slice(n.length);if("autoSave"===a)ii.stored=!0,ii.time=r.time;else{var c=a.match(/^slot-(\d+)$/),l=Number(null==c?void 0:c[1]);oi[l].stored=!0,oi[l].name=void 0!==r.name?r.name:"Slot ".concat(l+1),oi[l].time=r.time}}i.continue()}else e()},i.onerror=t});case 2:return e.a(2)}},e)})),Ii.apply(this,arguments)}function yi(){var e=[];return Array.from($t.entries()).forEach(function(t){var i=g(t,2),o=i[0],n=i[1],r=Wt.get(o);if(void 0!==r){var a=r.choice,c=o;0===n.multiple?(a.isActivateRandom&&a.activatedRandom&&(c+="/RND#".concat(a.activatedRandom.join("/AND#").replace(/\/ON#/g,"/RON#"))),a.textfieldIsOn&&a.customTextfieldIsOn&&void 0!==a.wordChangeSelect&&(c+="/WORD#".concat(a.wordChangeSelect.replace(/,/g,"/CHAR#"))),a.isImageUpload&&a.image!==a.defaultImage&&(c+="/IMG#".concat(a.image.replace(/,/g,"/CHAR#"))),e.push(c)):(c+="/ON#".concat(n.multiple),a.isActivateRandom&&a.activatedRandomMul&&(c+="/RND#".concat(a.activatedRandomMul.flat(2).join("/AND#").replace(/\/ON#/g,"/RON#"))),e.push(c))}}),e.join(",")}function xi(){var e=new Date,t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(i,"-").concat(o,"_").concat(n,"-").concat(r,"-").concat(a)}function Si(e){if(e.customTextIsOn)return void 0!==e.customText?e.customText:"";switch(e.type){case"id":var t=e.reqId.split("/ON#"),i=Wt.get(t[0]);if(void 0!==i){var o=i.choice;return"".concat(e.beforeText).concat(t.length>1?" ".concat(t[1]):""," ").concat(o.title," ").concat(e.afterText)}break;case"points":var n=qt.get(e.reqId);if(void 0!==n)return"".concat(e.beforeText," ").concat(e.reqPoints," ").concat(n.name," ").concat(e.afterText);break;case"or":for(var r=[],a=0;a<e.orRequired.length;a++){var c=e.orRequired[a].req;if(void 0!==c){var l=c.split("/ON#"),s=Wt.get(l[0]),u="";if(void 0!==s){var d=s.choice;u=l.length>1?"".concat(l[1]," "):"",r.push("".concat(u).concat(d.title))}}}return"1"===app.orderOrReqText?"".concat(e.beforeText," ").concat(r.join(", ")," ").concat(void 0!==e.orNum?"".concat(app.defaultOrReq," ").concat(e.orNum):"".concat(app.defaultOrReq," 1")," ").concat(e.afterText):"".concat(e.beforeText," ").concat(void 0!==e.orNum?"".concat(e.orNum," ").concat(app.defaultOrReq):"1 ".concat(app.defaultOrReq)," ").concat(r.join(", ")," ").concat(e.afterText);case"selFromGroups":if(void 0!==e.selGroups){for(var f=[],v=0;v<e.selGroups.length;v++){var g=e.selGroups[v],p=Et.get(g);void 0!==p&&f.push(p.name)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(f.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(f.join(", ")," ").concat(e.afterText)}case"selFromRows":if(void 0!==e.selRows){for(var m=[],h=0;h<e.selRows.length;h++){var b=e.selRows[h],w=Lt.get(b);void 0!==w&&m.push(w.title)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(m.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(m.join(", ")," ").concat(e.afterText)}case"selFromWhole":return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(e.afterText)}return"".concat(e.beforeText," ").concat(e.afterText)}function Ci(e){return Lt.has(e)||Wt.has(e)||Nt.has(e)||qt.has(e)||Gt.has(e)||_t.has(e)||Et.has(e)||zt.has(e)}function Ai(e,t){for(var i=app.addPrefix?"row-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Ci(i)?e>2?Ai(0,++t):Ai(++e,t):i}function Bi(e,t){for(var i=app.addPrefix?"word-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Ci(i)?e>2?Bi(0,++t):Bi(++e,t):i}function Oi(e,t){for(var i=app.addPrefix?"choice-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Ci(i)?e>2?Oi(0,++t):Oi(++e,t):i}function ki(e,t,i){for(var o=app.addPrefix?"design-":"",n="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)o+=n.charAt(Math.floor(36*Math.random()));return Ci(o)?e>2?ki(0,++t):ki(++e,t):o}function Mi(e,t){for(var i=app.addPrefix?"group-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Ci(i)?e>2?Mi(0,++t):Mi(++e,t):i}function Fi(e,t){for(var i=app.addPrefix?"point-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Ci(i)?e>2?Fi(0,++t):Fi(++e,t):i}function Di(e,t){for(var i=app.addPrefix?"variable-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Ci(i)?e>2?Di(0,++t):Di(++e,t):i}function Ri(e,t){for(var i="s-",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Ht.has(i)?e>2?Ri(0,++t):Ri(++e,t):i}var ji,Pi=[];function $i(){return function(){if(Pi.length!==app.words.length)return!0;for(var e=0;e<Pi.length;e++){if(Pi[e].id!==app.words[e].id)return!0;if(Pi[e].replaceText!==app.words[e].replaceText)return!0}return!1}()&&(Pi=JSON.parse(JSON.stringify(app.words)),ji=new RegExp(app.words.map(function(e){return e.id}).sort(function(e,t){return t.length-e.length}).map(function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}).join("|"),"g")),ji}function Vi(e){var t=e;return app.words&&(t=t.replace($i(),function(e){var t=qt.get(e);if(void 0!==t)return(t.startingSum%1==0?t.startingSum:parseFloat(t.startingSum.toFixed(void 0!==t.decimalPlaces?t.decimalPlaces:2))).toString();var i=Wt.get(e);if(void 0!==i){var o=i.choice;if(o.isSelectableMultiple&&o.isMultipleUseVariable)return o.multipleUseVariable.toString()}else{var n=Nt.get(e);if(void 0!==n)return n.replaceText}return e})),t}function qi(e,t,i){if(void 0!==i){if(void 0!==i.styling&&i.isPrivateStyling&&i[e])return i.styling;if(void 0!==app.objectDesignGroups&&i.objectDesignGroups)for(var o=0;o<i.objectDesignGroups.length;o++){var n=_t.get(i.objectDesignGroups[o]);if(void 0!==n&&n[e]){var r=n.activatedId,a=Ut.get(r);if(""===r||Wi(n.activatedId))return n.styling;if(void 0!==app.globalRequirements&&void 0!==a&&zi(a.requireds))return n.styling}}}if(void 0!==t){if(void 0!==t.styling&&t.isPrivateStyling&&t[e])return t.styling;if(void 0!==app.rowDesignGroups&&t.rowDesignGroups)for(var c=0;c<t.rowDesignGroups.length;c++){var l=Gt.get(t.rowDesignGroups[c]);if(void 0!==l&&l[e]){var s=l.activatedId,u=Ut.get(s);if(""===s||Wi(l.activatedId))return l.styling;if(void 0!==app.globalRequirements&&void 0!==u&&zi(u.requireds))return l.styling}}}return app.styling}function Li(e,t){return t.has(e)?Li("".concat(e,"_dup"),t):e}function Wi(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t,o=g(e.split("/ON#"),2),n=o[0],r=o[1],a=parseInt(void 0===r?"0":r);return a>0?((null===(t=i.get(n))||void 0===t?void 0:t.multiple)||0)>=a:i.has(n)}function Ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;switch(e){case"5":case"4":case"3":return 10*t+1;default:return 10*t+2}}function Ui(e){if("number"==typeof e)return e;var t=Ui(e.left),i=Ui(e.right);switch(e.operator){case"1":return t+i;case"2":return t-i;case"3":return t*i;case"4":return 0!==i?t/i:t;case"5":return 0!==i?t%i:t;default:return t}}function Ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;if(e.required)switch(e.type){case"id":return Wi(e.reqId,t);case"points":var i=qt.get(e.reqId);if(void 0!==i){if(void 0===e.operator)return i.startingSum>e.reqPoints;switch(e.operator){case"1":return i.startingSum>e.reqPoints;case"2":return i.startingSum>=e.reqPoints;case"3":return i.startingSum==e.reqPoints;case"4":return i.startingSum<=e.reqPoints;case"5":return i.startingSum<e.reqPoints}}return!1;case"or":for(var o=void 0===e.orNum?1:e.orNum,n=0,r=0;r<e.orRequired.length;r++){var a=e.orRequired[r].req;void 0!==a&&Wi(a,t)&&n++}return n>=o;case"pointCompare":var c=qt.get(e.reqId),l=qt.get(e.reqId1);if(void 0!==c&&void 0!==l){var s=l.startingSum;if(e.more)for(var u=0;u<e.more.length;u++){var d=0,f=e.more[u],v=f.operator||"1",g=Ei(v,f.priority);if(f.id){var p=qt.get(f.id);void 0!==p&&(d=p.startingSum)}else void 0!==f.points&&(d=f.points);var m={left:s,operator:v,right:d,priority:g};s="number"!=typeof s&&g<s.priority?{left:s.left,operator:s.operator,right:{left:s.right,operator:v,right:d,priority:g},priority:s.priority}:m}var h=Ui(s);switch(e.operator){case"1":return c.startingSum>h;case"2":return c.startingSum>=h;case"3":return c.startingSum==h;case"4":return c.startingSum<=h;case"5":return c.startingSum<h;default:return!1}}return!1;case"selFromGroups":if(e.selGroups){for(var b=0,w=void 0===e.selFromOperators?"1":e.selFromOperators,T=void 0===e.selNum?1:e.selNum,I=0;I<e.selGroups.length;I++){var y=Et.get(e.selGroups[I]);if(void 0!==y)for(var x=y.elements,S=0;S<x.length;S++)$t.has(x[S])&&b++}switch(w){case"1":return!(T>b||0===T&&b>0);case"2":return T===b;case"3":return!(T<b||0===T&&b>0);default:return!1}}case"selFromRows":if(e.selRows){for(var C=0,A=void 0===e.selFromOperators?"1":e.selFromOperators,B=void 0===e.selNum?1:e.selNum,O=0;O<e.selRows.length;O++){var k=Lt.get(e.selRows[O]);void 0!==k&&(C+=k.currentChoices)}switch(A){case"1":return!(B>C||0===B&&C>0);case"2":return B===C;case"3":return!(B<C||0===B&&C>0);default:return!1}}case"selFromWhole":for(var M=0,F=void 0===e.selFromOperators?"1":e.selFromOperators,D=void 0===e.selNum?1:e.selNum,R=0;R<app.rows.length;R++)M+=app.rows[R].currentChoices;switch(F){case"1":return!(D>M||0===D&&M>0);case"2":return D===M;case"3":return!(D<M||0===D&&M>0);default:return!1}case"gid":var j=Ut.get(e.reqId);return void 0!==j&&void 0!==app.globalRequirements&&zi(j.requireds,t);case"word":var P=Nt.get(e.reqId);if(void 0!==P){for(var $=0,V=0;V<e.orRequired.length;V++){var q=e.orRequired[V].req;void 0!==q&&P.replaceText===q&&$++}return $>=1}return!1}else switch(e.type){case"id":return!Wi(e.reqId,t);case"or":for(var L=void 0===e.orNum?1:e.orNum,W=0,E=0;E<e.orRequired.length;E++){var U=e.orRequired[E].req;(""===U||void 0!==U&&Wi(U,t))&&W++}return W<e.orRequired.length-L+1;case"gid":var N=Ut.get(e.reqId);return void 0!==N&&void 0!==app.globalRequirements&&!zi(N.requireds,t)}return!1}function zi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t,i=!0;if(void 0!==e)for(var o=0;o<e.length;o++){var n=e[o],r=!0;if(void 0!==n.requireds)for(var a=0;a<n.requireds.length;a++)r=r&&Ni(n.requireds[a],t);r&&(i=i&&Ni(e[o],t))}return i}function Gi(e,t,i,o){function n(){var n=0,r=0,a=0;if(i&&(o.loadVideoById(t),e.bgmNoLoop?o.setLoop(!1):(o.loadPlaylist(t),o.setLoop(!0))),e.bgmFadeIn&&void 0!==e.bgmFadeInSec&&e.bgmFadeInSec>0){var c=e.bgmFadeInSec/20;Kt.lastFadeTime=e.bgmFadeInSec,o.setVolume(0),o.playVideo(),0!==Kt.bgmFadeInterval&&(window.clearInterval(Kt.bgmFadeInterval),Kt.bgmFadeInterval=0),0!==Kt.bgmPlayInterval&&(window.clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0),Kt.isFadingOut&&(Kt.isFadingOut=!1),Kt.bgmFadeInterval=window.setInterval(function(){1===o.getPlayerState()&&(n<app.curVolume?(n+=5,o.setVolume(n),Kt.lastFadeTime=Kt.lastFadeTime-c):(o.setVolume(app.curVolume),window.clearInterval(Kt.bgmFadeInterval),Kt.bgmFadeInterval=0,Kt.lastFadeTime=0))},c)}else Kt.isFadingOut&&(Kt.isFadingOut=!1,window.clearInterval(Kt.bgmFadeInterval),Kt.bgmFadeInterval=0),o.playVideo(),o.setVolume(app.curVolume);Kt.bgmObjectId=e.id,app.showMusicPlayer&&(0!==Kt.bgmTitleInterval&&(window.clearInterval(Kt.bgmTitleInterval),Kt.bgmTitleInterval=0),Kt.bgmTitleInterval=window.setInterval(function(){if(void 0!==o.playerInfo.videoData){var e=o.playerInfo.videoData;e.video_id===t&&void 0!==e.title&&""!==e.title&&(Kt.bgmTitle=e.title,Kt.curBgmLength=o.getDuration(),window.clearInterval(Kt.bgmTitleInterval),Kt.bgmTitleInterval=0)}},1e3),0!==Kt.bgmPlayInterval&&(window.clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0),Kt.bgmPlayInterval=window.setInterval(function(){if(void 0!==o.playerInfo.videoData&&!Kt.isSeeking&&1===o.getPlayerState()){var e=Math.floor(o.getCurrentTime());e!==Kt.curBgmTime?r!==e?Kt.curBgmTime=e:(++a>Kt.curBgmLength&&(a=1),Kt.curBgmTime=a):(r=e,a=e+1,Kt.curBgmTime=a)}},1e3))}if(Kt.isFadingOut){var r=Kt.lastFadeTime;0!==Kt.bgmFadeTimer&&(window.clearTimeout(Kt.bgmFadeTimer),Kt.bgmFadeTimer=0),Kt.bgmFadeTimer=window.setTimeout(function(){n()},r)}else n()}function _i(e,t){var i=app.curVolume/5;if(e.bgmFadeOut&&void 0!==e.bgmFadeOutSec&&e.bgmFadeOutSec>0&&i>0){var o=e.bgmFadeOutSec/i,n=app.curVolume;Kt.lastFadeTime=e.bgmFadeOutSec,Kt.isFadingOut=!0,0!==Kt.bgmFadeInterval&&(window.clearInterval(Kt.bgmFadeInterval),Kt.bgmFadeInterval=0),Kt.bgmFadeInterval=window.setInterval(function(){void 0!==t.setVolume&&(n>0?(n-=5,t.setVolume(n),Kt.lastFadeTime-=o):Kt.isFadingOut&&(t.pauseVideo(),t.setVolume(app.curVolume),window.clearInterval(Kt.bgmFadeInterval),Kt.bgmFadeInterval=0,Kt.lastFadeTime=0,Kt.isFadingOut=!1,0!==Kt.bgmTitleInterval&&(window.clearInterval(Kt.bgmTitleInterval),Kt.bgmTitleInterval=0),0!==Kt.bgmPlayInterval&&(window.clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0),Kt.bgmTitle="No Audio Title",Kt.curBgmTime=0,Kt.curBgmLength=0))},o)}else t.pauseVideo(),0!==Kt.bgmTitleInterval&&(window.clearInterval(Kt.bgmTitleInterval),Kt.bgmTitleInterval=0),0!==Kt.bgmPlayInterval&&(window.clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0),Kt.bgmTitle="No Audio Title",Kt.curBgmTime=0,Kt.curBgmLength=0}function Hi(e,t,i){var o=S(Xt);if(o&&void 0!==o.playerInfo.videoData){var n=Kt.bgmIsPlaying,r=o.playerInfo.videoData.video_id,a=o.getPlayerState();r===t?Kt.bgmObjectId===e.id?n?(2===a||o.stopVideo(),Gi(e,t,!1,o)):_i(e,o):n?(o.stopVideo(),Gi(e,t,!1,o)):_i(e,o):n&&Gi(e,t,!0,o)}else i<10?window.setTimeout(function(){Hi(e,t,++i)},200):console.log("Failed to play bgm")}function Yi(){return new Promise(function(e){if(window.YT&&window.YT.Player)e(window.YT);else{var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t),window.onYouTubeIframeAPIReady=function(){return e(window.YT)}}})}function Zi(e){return Ji.apply(this,arguments)}function Ji(){return(Ji=f(l().m(function e(t){var i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Yi();case 1:i=e.v,o=new i.Player("bgm-player",{width:0,height:0,events:{onReady:function(){Xt.set(o),Hi(t,t.bgmId||"",0),app.isMute&&!o.isMuted()&&o.mute()}}});case 2:return e.a(2)}},e)}))).apply(this,arguments)}function Xi(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==e){if(t)for(var o=["addonBorderRadiusTopLeft","addonBorderRadiusTopRight","addonBorderRadiusBottomLeft","addonBorderRadiusBottomRight","addonImgBorderRadiusTopLeft","addonImgBorderRadiusTopRight","addonImgBorderRadiusBottomLeft","addonImgBorderRadiusBottomRight","objectBorderRadiusTopLeft","objectBorderRadiusTopRight","objectBorderRadiusBottomLeft","objectBorderRadiusBottomRight","objectImgBorderRadiusTopLeft","objectImgBorderRadiusTopRight","objectImgBorderRadiusBottomLeft","objectImgBorderRadiusBottomRight","rowBorderRadiusTopLeft","rowBorderRadiusTopRight","rowBorderRadiusBottomLeft","rowBorderRadiusBottomRight","rowImgBorderRadiusTopLeft","rowImgBorderRadiusTopRight","rowImgBorderRadiusBottomLeft","rowImgBorderRadiusBottomRight"],n=0;n<o.length;n++){var r=o[n];void 0!==e[r]&&(e[r]=10*e[r])}for(var a=["selFilterBgColor","selFilterBorderColor","selFilterCTitleColor","selFilterCTextColor","selFilterATitleColor","selFilterATextColor","selFilterSTextColor","reqFilterBgColor","reqFilterBorderColor","reqFilterCTitleColor","reqFilterCTextColor","reqFilterATitleColor","reqFilterATextColor","reqFilterSTextColor","rowTitleColor","rowTextColor","objectTitleColor","objectTextColor","addonTitleColor","addonTextColor","scoreTextColor","objectImgBorderColor","rowImgBorderColor","addonImgBorderColor","backgroundColor","rowBgColor","objectBgColor","objectDropShadowColor","objectBorderColor","rowDropShadowColor","rowBorderColor","addonDropShadowColor","addonBorderColor","addonBgColor","barTextColor","barIconColor","barBackgroundColor","backpackBgColor","barPointNeg","barPointPos"],c=0;c<a.length;c++){var l=a[c];"object"===u(e[l])&&(e[l]=e[l].hexa)}i&&(void 0===e.customMultiTextFont&&(e.customMultiTextFont=!1),void 0===e.multiChoiceCounterPosition&&(e.multiChoiceCounterPosition=0),void 0===e.multiChoiceCounterSize&&(e.multiChoiceCounterSize=170),void 0===e.multiChoiceTextFont&&(e.multiChoiceTextFont="Times New Roman"),void 0===e.multiChoiceTextSize&&(e.multiChoiceTextSize=100))}}function Ki(e,t,i){switch(t){case"1":return e-i;case"2":return e+i;case"3":return e*i;case"4":return e/i;case"5":return i;default:return e}}function Qi(e){delete e.tmpDiscount,delete e.discountTextA,delete e.discountTextB,delete e.dupTextA,delete e.dupTextB,delete e.discountedFrom,delete e.discountIsOn,delete e.discountScore,delete e.discountScoreCal,delete e.notStackableDiscount,delete e.discountShow,delete e.discountBeforeText,delete e.discountAfterText,delete e.isChangeDiscount,delete e.tmpDisScore,delete e.appliedDiscount,delete e.replaceText,delete e.hideDisValue,delete e.hideDisIcon}function eo(e,t){for(var i=0;i<t.scores.length;i++){var o=t.scores[i],n=o.appliedDiscount;if(!o.isNotDiscountable&&(void 0===e.discountPointTypes||0===e.discountPointTypes.length||-1!==e.discountPointTypes.indexOf(o.id))){var r=qt.get(o.id);if(void 0!==r&&void 0!==e.discountOperator&&void 0!==e.discountValue){var a=r.allowFloat?o.value:Math.floor(o.value),c=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;c=r.allowFloat?c:Math.floor(c);var l=0,s=0,u=[],d=!1,f=0;if(e.stackableDiscount){if(o.notStackableDiscount){if(void 0!==o.tmpDiscount){for(var v=0;v<o.tmpDiscount.length;v++)o.tmpDiscount[v].isStackable&&(u=o.tmpDiscount[v].discountedFrom,a=o.tmpDiscount[v].discountedValue,f=v);o.tmpDiscount.splice(f,1)}}else if(void 0!==o.discountedFrom){var g=o.discountedFrom.indexOf(e.id);if(o.discountedFrom.splice(g,1),o.discountedFrom.length>0){var p=!1,m=!1,h=!1;l=a;for(var b=0;b<o.discountedFrom.length;b++){var w=Wt.get(o.discountedFrom[b]);if(void 0!==w){var T=w.choice;void 0!==T.discountOperator&&void 0!==T.discountValue&&(l=Ki(l,T.discountOperator,T.discountValue),s=l=r.allowFloat?l:Math.floor(l),T.replaceScoreText&&(p=T.replaceScoreText),T.hideScoreValue&&(m=T.hideScoreValue),T.hideScoreIcon&&(h=T.hideScoreIcon),T.discountLowLimitIsOn&&void 0!==T.discountLowLimit&&(l=Math.max(l,T.discountLowLimit)))}}if(e.discountShow){var I=void 0!==e.discountAfterText&&void 0!==o.discountTextA?o.discountTextA.indexOf(e.discountAfterText):-1,y=void 0!==e.discountBeforeText&&void 0!==o.discountTextB?o.discountTextB.indexOf(e.discountBeforeText):-1;if(e.discountTextDuplicated){var x,S;if(-1!==I&&void 0!==o.dupTextA&&void 0!==e.discountAfterText)if(o.dupTextA[e.discountAfterText]-=1,0===o.dupTextA[e.discountAfterText])null===(x=o.discountTextA)||void 0===x||x.splice(I,1),delete o.dupTextA[e.discountAfterText];if(-1!==y&&void 0!==o.dupTextB&&void 0!==e.discountBeforeText)if(o.dupTextB[e.discountBeforeText]-=1,0===o.dupTextB[e.discountBeforeText])null===(S=o.discountTextB)||void 0===S||S.splice(I,1),delete o.dupTextB[e.discountBeforeText]}else-1!==I&&void 0!==o.discountTextA&&(o.discountTextA.splice(I,1),o.discountAfterText=o.discountTextA.join(" ")),-1!==y&&void 0!==o.discountTextB&&(o.discountTextB.splice(y,1),o.discountBeforeText=o.discountTextB.join(" "))}if(o.discountScore=l,o.discountScoreCal=s,o.replaceText=p,o.hideDisValue=m,o.hideDisIcon=h,e.useDiscountCount&&o.appliedDiscount){o.tmpDisScore=c-o.value,t.isActive&&(o.isChangeDiscount=!0);continue}}else{if(void 0!==o.tmpDiscount)for(var C=0;C<o.tmpDiscount.length;C++)o.tmpDiscount[C].isStackable||l>o.tmpDiscount[C].discountedValue&&(u=o.tmpDiscount[C].discountedFrom,s=o.tmpDiscount[C].calcValue,l=o.tmpDiscount[C].discountedValue,f=C,d=!0);d&&void 0!==o.tmpDiscount?0===u.length?o.tmpDiscount.splice(f,1):(o.discountedFrom=u,o.tmpDiscount[f].showDiscount&&(o.discountBeforeText=o.tmpDiscount[f].beforeText,o.discountAfterText=o.tmpDiscount[f].afterText,o.replaceText=o.tmpDiscount[f].replaceText||!1,o.hideDisValue=o.tmpDiscount[f].hideValue||!1,o.hideDisIcon=o.tmpDiscount[f].hideIcon||!1),o.tmpDiscount.splice(f,1),o.notStackableDiscount=!0):Qi(o)}}}else if(o.notStackableDiscount)if(void 0!==o.discountedFrom&&o.discountedFrom.length>0&&void 0!==o.tmpDiscount){if(-1!==o.discountedFrom.indexOf(e.id)){if(o.tmpDiscount.length>0){a=o.tmpDiscount[0].discountedValue,d=!0;for(var A=1;A<o.tmpDiscount.length;A++)a>o.tmpDiscount[A].discountedValue&&(a=o.tmpDiscount[A].discountedValue,f=A)}if(d){var B,O;if(o.discountScore=a,o.discountScoreCal=o.tmpDiscount[f].calcValue,o.discountedFrom=o.tmpDiscount[f].discountedFrom,o.notStackableDiscount=!o.tmpDiscount[f].isStackable,o.discountShow=o.tmpDiscount[f].showDiscount,o.tmpDiscount[f].isStackable&&o.tmpDiscount[f].showDiscount)o.discountBeforeText=null===(B=o.discountTextB)||void 0===B?void 0:B.join(""),o.discountAfterText=null===(O=o.discountTextA)||void 0===O?void 0:O.join("");else o.tmpDiscount[f].showDiscount?(o.discountBeforeText=o.tmpDiscount[f].beforeText,o.discountAfterText=o.tmpDiscount[f].afterText,o.replaceText=o.tmpDiscount[f].replaceText||!1,o.hideDisValue=o.tmpDiscount[f].hideValue||!1,o.hideDisIcon=o.tmpDiscount[f].hideIcon||!1):(o.discountBeforeText="",o.discountAfterText="",o.replaceText=!1,o.hideDisValue=!1,o.hideDisIcon=!1);o.tmpDiscount.splice(f,1)}else Qi(o)}else for(var k=0;k<o.tmpDiscount.length;k++)if(-1!==o.tmpDiscount[k].discountedFrom.indexOf(e.id)){o.tmpDiscount.splice(k,1);break}}else Qi(o);else if(void 0!==o.tmpDiscount){if(o.tmpDiscount=o.tmpDiscount.filter(function(t){return-1!==t.discountedFrom.indexOf(e.id)}),o.tmpDiscount.length>0){a=o.tmpDiscount[0].discountedValue,d=!0;for(var M=1;M<o.tmpDiscount.length;M++)a>o.tmpDiscount[M].discountedValue&&(a=o.tmpDiscount[M].discountedValue,f=M)}if(d){var F,D;if(o.discountScore=a,o.discountScoreCal=o.tmpDiscount[f].calcValue,o.discountedFrom=o.tmpDiscount[f].discountedFrom,o.notStackableDiscount=!o.tmpDiscount[f].isStackable,o.notStackableDiscount)o.tmpDiscount[f].showDiscount?(o.discountBeforeText=o.tmpDiscount[f].beforeText,o.discountAfterText=o.tmpDiscount[f].afterText,o.replaceText=o.tmpDiscount[f].replaceText||!1,o.hideDisValue=o.tmpDiscount[f].hideValue||!1,o.hideDisIcon=o.tmpDiscount[f].hideIcon||!1):(o.discountBeforeText="",o.discountAfterText="",o.replaceText=!1,o.hideDisValue=!1,o.hideDisIcon=!1);else o.discountBeforeText=null===(F=o.discountTextB)||void 0===F?void 0:F.join(""),o.discountAfterText=null===(D=o.discountTextA)||void 0===D?void 0:D.join("");o.tmpDiscount.splice(f,1)}else Qi(o)}else Qi(o);var R=void 0!==o.discountScore?o.discountScore:o.value;(R=r.allowFloat?R:Math.floor(R))!==c&&n?(o.tmpDisScore=c-R,t.isActive&&(o.isChangeDiscount=!0)):t.isActive&&(o.isChangeDiscount=!1)}}}}function to(e,t){for(var i=0;i<t.scores.length;i++){var o=t.scores[i];if(!o.isNotDiscountable&&(void 0===e.discountPointTypes||0===e.discountPointTypes.length||-1!==e.discountPointTypes.indexOf(o.id))){var n=qt.get(o.id);if(void 0!==n&&void 0!==e.discountOperator&&void 0!==e.discountValue){var r=n.allowFloat?o.value:Math.floor(o.value),a=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:r,c=0,l=0,s=[],u=void 0,d=!1,f=0;if(void 0===o.discountedFrom&&(o.discountedFrom=[]),e.stackableDiscount)if(o.notStackableDiscount){if(void 0!==o.tmpDiscount){for(var g=0;g<o.tmpDiscount.length;g++)o.tmpDiscount[g].isStackable&&((s=o.tmpDiscount[g].discountedFrom).push(e.id),r=o.tmpDiscount[g].discountedValue,d=!0,f=g);var p;if(c=Ki(r,e.discountOperator,e.discountValue),l=c=n.allowFloat?c:Math.floor(c),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(c=Math.max(c,e.discountLowLimit)),void 0!==o.discountScore&&o.discountScore>c)o.tmpDisScore=o.discountScore-c,t.isActive&&(o.isChangeDiscount=!0),u={isStackable:!1,discountedFrom:o.discountedFrom,calcValue:void 0!==o.discountScoreCal?o.discountScoreCal:o.discountScore,discountedValue:o.discountScore,showDiscount:!1,replaceText:!1,hideValue:!1,hideIcon:!1},o.discountShow&&(u.showDiscount=!0,u.beforeText=e.discountBeforeText,u.afterText=e.discountAfterText,e.replaceScoreText&&(u.replaceText=!0),e.hideScoreValue&&(u.hideValue=!0),e.hideScoreIcon&&(u.hideIcon=!0)),o.discountScore=c,o.discountScoreCal=l,e.discountShow&&(o.discountShow=!0,io(e,o)),void 0!==o.discountTextA&&(o.discountAfterText=o.discountTextA.join(" ")),void 0!==o.discountTextB&&(o.discountBeforeText=o.discountTextB.join(" ")),(p=o.discountedFrom).push.apply(p,v(s)),d&&o.tmpDiscount.splice(f,1),o.tmpDiscount.push(u),o.notStackableDiscount=!1;else t.isActive&&(o.isChangeDiscount=!1),s.push(e.id),e.discountShow&&io(e,o),d?(o.tmpDiscount[f].discountedFrom=s,o.tmpDiscount[f].calcValue=l,o.tmpDiscount[f].discountedValue=c):(u={isStackable:e.stackableDiscount||!1,discountedFrom:s,calcValue:l,discountedValue:c,showDiscount:e.discountShow||!1,replaceText:e.replaceScoreText||!1,hideValue:e.hideScoreValue||!1,hideIcon:e.hideScoreIcon||!1},o.tmpDiscount.push(u))}}else r=o.discountIsOn&&void 0!==o.discountScoreCal?o.discountScoreCal:o.value,r=n.allowFloat?r:Math.floor(r),a=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value,a=n.allowFloat?a:Math.floor(a),c=Ki(r,e.discountOperator,e.discountValue),l=c=n.allowFloat?c:Math.floor(c),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(c=Math.max(c,e.discountLowLimit)),Array.isArray(o.discountedFrom)||(o.discountedFrom=[]),o.discountScore=c,o.discountScoreCal=l,o.discountedFrom.push(e.id),o.discountScore!==a?(o.tmpDisScore=a-o.discountScore,t.isActive&&(o.isChangeDiscount=!0)):!o.appliedDiscount&&e.useDiscountCount&&e.discountCount?(void 0===e.appliedDisChoices&&(e.appliedDisChoices=[]),o.tmpDisScore=o.value-o.discountScore,t.isActive&&(o.isChangeDiscount=!0)):t.isActive&&(o.isChangeDiscount=!1),o.discountIsOn||(o.discountIsOn=!0),e.discountShow&&(o.discountShow=!0,io(e,o)),void 0!==o.discountTextA&&(o.discountAfterText=o.discountTextA.join(" ")),void 0!==o.discountTextB&&(o.discountBeforeText=o.discountTextB.join(" "));else void 0===o.tmpDiscount&&(o.tmpDiscount=[]),c=Ki(r,e.discountOperator,e.discountValue),l=c=n.allowFloat?c:Math.floor(c),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(c=Math.max(c,e.discountLowLimit)),o.discountIsOn?void 0!==o.discountScore&&(o.discountScore>c?(u={isStackable:!o.notStackableDiscount,discountedFrom:o.discountedFrom,calcValue:void 0!==o.discountScoreCal?o.discountScoreCal:o.discountScore,discountedValue:o.discountScore,showDiscount:o.discountShow||!1},o.discountShow&&(u.showDiscount=!0,u.beforeText=o.discountBeforeText,u.afterText=o.discountAfterText,u.replaceText=o.replaceText||!1,u.hideValue=o.hideDisValue||!1,u.hideIcon=o.hideDisIcon||!1),o.discountScore=c,o.discountScoreCal=l,o.discountShow=e.discountShow,o.discountBeforeText=e.discountBeforeText,o.discountAfterText=e.discountAfterText,o.discountedFrom=[e.id],o.notStackableDiscount=!0,o.replaceText=e.replaceScoreText||!1,o.hideDisValue=e.hideScoreValue||!1,o.hideDisIcon=e.hideScoreIcon||!1):(u={isStackable:e.stackableDiscount||!1,discountedFrom:[e.id],calcValue:l,discountedValue:c,showDiscount:e.discountShow||!1,replaceText:o.replaceText||!1,hideValue:o.hideDisValue||!1,hideIcon:o.hideDisIcon||!1},e.discountShow&&(u.showDiscount=!0,u.beforeText=e.discountBeforeText,u.afterText=e.discountAfterText,e.replaceScoreText&&(u.replaceText=!0),e.hideScoreValue&&(u.hideValue=!0),e.hideScoreIcon&&(u.hideIcon=!0))),o.tmpDiscount.push(u)):(o.discountScore=c,o.discountScoreCal=l,e.discountShow&&(o.discountShow=e.discountShow,o.discountBeforeText=e.discountBeforeText,o.discountAfterText=e.discountAfterText,o.replaceText=e.replaceScoreText||!1,o.hideDisValue=e.hideScoreValue||!1,o.hideDisIcon=e.hideScoreIcon||!1),Array.isArray(o.discountedFrom)||(o.discountedFrom=[]),o.discountIsOn=!0,o.discountedFrom.push(e.id),o.notStackableDiscount=!0),void 0!==o.discountScore&&o.discountScore!==a?(o.tmpDisScore=a-o.discountScore,t.isActive&&(o.isChangeDiscount=!0)):t.isActive&&(o.isChangeDiscount=!1)}}}}function io(e,t){void 0===t.discountTextA&&(t.discountTextA=[]),void 0===t.discountTextB&&(t.discountTextB=[]),void 0===t.dupTextA&&(t.dupTextA={}),void 0===t.dupTextB&&(t.dupTextB={}),e.discountTextDuplicated?(void 0!==e.discountAfterText&&(-1!==t.discountTextA.indexOf(e.discountAfterText)?t.dupTextA[e.discountAfterText]=(t.dupTextA[e.discountAfterText]||0)+1:(t.dupTextA[e.discountAfterText]=1,t.discountTextA.push(e.discountAfterText))),void 0!==e.discountBeforeText&&(-1!==t.discountTextB.indexOf(e.discountBeforeText)?t.dupTextB[e.discountBeforeText]=(t.dupTextB[e.discountBeforeText]||0)+1:(t.dupTextB[e.discountBeforeText]=1,t.discountTextB.push(e.discountBeforeText)))):(void 0!==e.discountAfterText&&t.discountTextA.push(e.discountAfterText),void 0!==e.discountBeforeText&&t.discountTextB.push(e.discountBeforeText)),t.replaceText=e.replaceScoreText||!1,t.hideDisValue=e.hideScoreValue||!1,t.hideDisIcon=e.hideScoreIcon||!1}function oo(e,t){for(var i=!0,o=new Map,n=0;n<e.scores.length;n++){var r=e.scores[n],a=r.discountIsOn&&void 0!==r.discountScore?r.discountScore:r.value;if(r.multiplyByTimes&&(a*=Math.abs(e.multipleUseVariable)+1),zi(r.requireds)&&!r.isActive){var c=qt.get(r.id);if(void 0!==c&&c.belowZeroNotAllowed){var l=o.get(r.id);void 0!==l?(i=i&&(t?l-a>=0:l+a>=0),o.set(r.id,l-r.value)):(i=i&&(t?c.startingSum-a>=0:c.startingSum+a>=0),o.set(r.id,c.startingSum-a))}}}return i}function no(){var e=new Set,t=new Set;function i(o){if(o.activateOtherChoice&&void 0!==o.activateThisChoice)if(o.activatedRandom){if(o.isSelectableMultiple){for(var n=0;n<o.multipleUseVariable;n++)if(void 0!==o.activatedRandomMul)for(var r=0;r<o.activatedRandomMul[r].length;r++){var a=o.activatedRandomMul[n][r].split("/ON#"),c=Wt.get(a[0]);if(void 0!==c){var l=c.choice;if($t.has(l.id)||o.activateAfterReset)o.isAllowDeselect&&!o.activateAfterReset||(o.activateAfterReset&&t.add(l.id),e.add(l.id),a.length>1&&l.isSelectableMultiple&&(void 0===l.tempMultipleValue?l.tempMultipleValue=parseInt(a[1]):l.tempMultipleValue+=parseInt(a[1])),i(l));else{var s=Vt.get(l.id);void 0!==s?a.length>1&&(s.multiple+=parseInt(a[1])):Vt.set(l.id,{multiple:a.length>1?parseInt(a[1]):0,isAllowDeselect:l.isAllowDeselect||!1})}}}}else if(void 0!==o.activatedRandom)for(var u=0;u<o.activatedRandom.length;u++){var d=o.activatedRandom[u].split("/ON#"),f=Wt.get(d[0]);if(void 0!==f){var v=f.choice;if($t.has(v.id)||o.activateAfterReset)o.isAllowDeselect&&!o.activateAfterReset||(o.activateAfterReset&&t.add(v.id),e.add(v.id),d.length>1&&v.isSelectableMultiple&&(void 0===v.tempMultipleValue?v.tempMultipleValue=parseInt(d[1]):v.tempMultipleValue+=parseInt(d[1])),i(v));else{var g=Vt.get(v.id);void 0!==g?d.length>1&&(g.multiple+=parseInt(d[1])):Vt.set(v.id,{multiple:d.length>1?parseInt(d[1]):0,isAllowDeselect:v.isAllowDeselect||!1})}}}}else for(var p=o.activateThisChoice.split(","),m=0;m<p.length;m++){var h=p[m].split("/ON#"),b=Wt.get(h[0]);if(void 0!==b){var w=b.choice;if($t.has(w.id)||o.activateAfterReset)o.isAllowDeselect&&!o.activateAfterReset||(o.activateAfterReset&&t.add(w.id),e.add(w.id),h.length>1&&w.isSelectableMultiple&&(void 0===w.tempMultipleValue?w.tempMultipleValue=parseInt(h[1]):w.tempMultipleValue+=parseInt(h[1])),i(w));else{var T=Vt.get(w.id);void 0!==T?h.length>1&&(T.multiple+=parseInt(h[1])):Vt.set(w.id,{multiple:h.length>1?parseInt(h[1]):0,isAllowDeselect:w.isAllowDeselect||!1})}}}}Vt.clear(),Array.from($t.entries()).forEach(function(t){var o=g(t,1)[0],n=Wt.get(o);if(void 0!==n){var r=n.choice;r.notDeselectedByClean&&(e.add(r.id),i(r))}else $t.delete(o)});var o,n=new Set,r=w($t.keys());try{for(r.s();!(o=r.n()).done;){var a=o.value;n.add(a)}}catch(et){r.e(et)}finally{r.f()}var c,l=w(Wt);try{for(l.s();!(c=l.n()).done;){var s=g(c.value,2),d=s[0];s[1].choice.isActive&&n.add(d)}}catch(et){l.e(et)}finally{l.f()}for(var f=[].concat(v(n),v(t)),p=f.length-1;p>=0;p--){var m=Wt.get(f[p]);if(void 0!==m){var h=m.choice;if(delete h.multiplyPointtypeIsOnCheck,delete h.startingSumAtMultiply,delete h.dividePointtypeIsOnCheck,delete h.startingSumAtDivide,delete h.numDiscountChoices,delete h.appliedDisChoices,h.addToAllowChoice&&void 0!==h.idOfAllowChoice&&void 0!==h.numbAddToAllowChoice)for(var b=0;b<h.idOfAllowChoice.length;b++){var T=Lt.get(h.idOfAllowChoice[b]);void 0!==T&&(T.allowedChoices-=h.numbAddToAllowChoice)}if(h.muteBgm&&Xt){var I=S(Xt);I&&"function"==typeof I.unMute&&(app.isMute=!1,I.unMute())}if(e.has(h.id))h.isSelectableMultiple&&h.isMultipleUseVariable&&void 0!==h.tempMultipleValue&&(h.multipleUseVariable=h.tempMultipleValue,delete h.tempMultipleValue),t.has(h.id)&&(h.isActive=!0,$t.set(h.id,{multiple:h.isSelectableMultiple&&h.isMultipleUseVariable?h.multipleUseVariable:0}));else{if(delete h.activatedRandom,delete h.activatedRandomMul,h.isContentHidden&&void 0!==h.hiddenContentsRow&&void 0!==h.hiddenContentsType)for(var y=0;y<h.hiddenContentsRow.length;y++){var x=Lt.get(h.hiddenContentsRow[y]);if(void 0!==x)for(var C=0;C<h.hiddenContentsType.length;C++)switch(h.hiddenContentsType[C]){case"1":delete x.objectTitleRemoved;break;case"2":delete x.objectImageRemoved;break;case"3":delete x.objectTextRemoved;break;case"4":delete x.objectScoreRemoved;break;case"5":delete x.objectRequirementRemoved;break;case"6":delete x.addonTitleRemoved;break;case"7":delete x.addonImageRemoved;break;case"8":delete x.addonTextRemoved}}if(h.isChangeVariables&&void 0!==h.changedVariables)for(var A=0;A<h.changedVariables.length;A++){var B=zt.get(h.changedVariables[A]);void 0!==B&&("1"===h.changeType?B.isTrue=!0:"2"===h.changeType?B.isTrue=!1:"3"===h.changeType&&(B.isTrue=!B.isTrue))}if(h.textfieldIsOn&&void 0!==h.idOfTheTextfieldWord&&void 0!==h.wordChangeSelect){var O=Nt.get(h.idOfTheTextfieldWord);void 0!==O&&(O.replaceText=void 0===h.wordChangeDeselect?"":h.wordChangeDeselect)}if(h.isImageUpload&&void 0!==h.defaultImage&&(h.image=h.defaultImage),h.setBgmIsOn&&Xt&&h.bgmId){var k=S(Xt);if(k&&void 0!==k.playerInfo.videoData){var M=k.playerInfo.videoData.video_id;h.bgmId===M&&(k.stopVideo(),Kt.bgmIsPlaying=!1,0!==Kt.bgmFadeInterval&&(window.clearInterval(Kt.bgmFadeInterval),Kt.bgmFadeInterval=0),0!==Kt.bgmTitleInterval&&(window.clearInterval(Kt.bgmTitleInterval),Kt.bgmTitleInterval=0),0!==Kt.bgmPlayInterval&&(window.clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0),Kt.lastFadeTime=0,Kt.isFadingOut=!1,Kt.bgmTitle="No Audio Title",Kt.curBgmTime=0,Kt.curBgmLength=0)}}void 0!==h.initMultipleTimesMinus&&(h.numMultipleTimesMinus=h.initMultipleTimesMinus),h.multipleUseVariable=0,h.isActive=!1,$t.delete(h.id)}}else $t.delete(f[p])}for(var F=0;F<app.pointTypes.length;F++){var D=app.pointTypes[F];D.startingSum=D.initValue}for(var R=0;R<app.rows.length;R++){var j=app.rows[R];j.isEditModeOn=!1,j.currentChoices=0,j.index=R;for(var P=0;P<j.objects.length;P++){var $=j.objects[P];$.index=P,delete $.isEditModeOn,void 0!==$.defaultTemplate&&($.template=$.defaultTemplate),void 0!==$.defaultWidth&&($.width=$.defaultWidth),$.isActive||(delete $.forcedActivated,delete $.activatedFrom,delete $.numDiscountChoices,delete $.appliedDisChoices),delete $.templateStack,delete $.widthStack;for(var V=0;V<$.scores.length;V++){var q=$.scores[V];$.isSelectableMultiple?(delete q.isActiveMul,delete q.isActiveMulMinus):delete q.isActive,Qi(q)}}}for(var L=0;L<app.backpack.length;L++){var W=app.backpack[L];W.isEditModeOn=!1,W.currentChoices=0,W.index=L;for(var E=0;E<W.objects.length;E++){var U=W.objects[E];U.index=E,delete U.isEditModeOn,void 0!==U.defaultTemplate&&(U.template=U.defaultTemplate),void 0!==U.defaultWidth&&(U.width=U.defaultWidth),U.isActive||(delete U.forcedActivated,delete U.activatedFrom,delete U.numDiscountChoices,delete U.appliedDisChoices),delete U.templateStack,delete U.widthStack;for(var N=0;N<U.scores.length;N++){var z=U.scores[N];U.isSelectableMultiple?(delete z.isActiveMul,delete z.isActiveMulMinus):delete z.isActive,Qi(z)}}}if(void 0!==app.defaultBgColor&&(app.styling.backgroundColor=app.defaultBgColor,delete app.defaultBgColor),void 0!==app.defaultBgImage&&(app.styling.backgroundImage=app.defaultBgImage,delete app.defaultBgImage),void 0!==app.defaultBarBgColor&&(app.styling.barBackgroundColor=app.defaultBarBgColor,delete app.defaultBarBgColor),void 0!==app.defaultBarIconColor&&(app.styling.barIconColor=app.defaultBarIconColor,delete app.defaultBarIconColor),void 0!==app.defaultBarTextColor&&(app.styling.barTextColor=app.defaultBarTextColor,delete app.defaultBarTextColor),delete app.bgColorStack,delete app.bgImageStack,delete app.barBgColorStack,delete app.barIconColorStack,delete app.barTextColorStack,app.btnBackpackIsOn=0,app.showAllAddons=0,app.isMute=!1,app.curVolume=100,Xt){var G=S(Xt);G&&"function"==typeof G.unMute&&G.unMute()}Yt.splice(0),f=v($t.keys());for(var _=0;_<f.length;_++){var H=Wt.get(f[_]);if(void 0!==H){var Y=H.choice;if(zi(Y.requireds)&&oo(Y,!0)){if(Y.discountOther&&void 0!==Y.discountOperator&&void 0!==Y.discountValue)if(Y.isDisChoices){if(void 0!==Y.discountChoices)for(var Z=0;Z<Y.discountChoices.length;Z++){var J=Wt.get(Y.discountChoices[Z]);void 0!==J&&to(Y,J.choice)}}else if(void 0!==Y.discountGroups)for(var X=0;X<Y.discountGroups.length;X++){var K=Et.get(Y.discountGroups[X]);if(void 0!==K)for(var Q=0;Q<K.elements.length;Q++){var ee=Wt.get(K.elements[Q]);void 0!==ee&&to(Y,ee.choice)}}if(Y.addToAllowChoice&&void 0!==Y.idOfAllowChoice&&void 0!==Y.numbAddToAllowChoice)for(var te=0;te<Y.idOfAllowChoice.length;te++){var ie=Lt.get(Y.idOfAllowChoice[te]);void 0!==ie&&(ie.allowedChoices+=Y.numbAddToAllowChoice)}}}}for(var oe=0;oe<f.length;oe++){var ne=Wt.get(f[oe]);if(void 0!==ne){var re=ne.choice,ae=ne.row;if(zi(re.requireds)&&oo(re,!0)){for(var ce=0;ce<re.scores.length;ce++){var le=re.scores[ce],se=qt.get(le.id);if(void 0!==se)if(re.isSelectableMultiple&&re.isMultipleUseVariableultiple)for(var ue=0;ue<re.multipleUseVariable;ue++)zi(le.requireds)&&(void 0===le.isActiveMul&&(le.isActiveMul=[]),le.isActiveMul[ue]||(le.multiplyByTimes?se.startingSum-=le.discountIsOn&&void 0!==le.discountScore?le.discountScore*(ue+1):le.value*(ue+1):se.startingSum-=le.discountIsOn&&void 0!==le.discountScore?le.discountScore:le.value,le.isActiveMul[ue]=!0));else re.isSelectableMultiple||zi(le.requireds)&&!le.isActive&&(se.startingSum-=le.discountIsOn&&void 0!==le.discountScore?le.discountScore:le.value,le.isActive=!0)}if(re.multiplyPointtypeIsOn&&void 0!==re.pointTypeToMultiply&&void 0!==re.multiplyWithThis){var de=0;re.multiplyPointtypeIsOnCheck=!0,"object"!==u(re.startingSumAtMultiply)&&(re.startingSumAtMultiply=[]);for(var fe=0;fe<re.pointTypeToMultiply.length;fe++){var ve=qt.get(re.pointTypeToMultiply[fe]);if(void 0!==ve)if(re.multiplyPointtypeIsId&&"string"==typeof re.multiplyWithThis){var ge=qt.get(re.multiplyWithThis);void 0!==ge?(re.startingSumAtMultiply[fe]={value:ve.startingSum,calcVal:ge.startingSum},ve.startingSum*=ge.startingSum):de++}else"number"==typeof re.multiplyWithThis&&(re.startingSumAtMultiply[fe]={value:ve.startingSum,calcVal:re.multiplyWithThis},ve.startingSum*=re.multiplyWithThis);else de++}de===re.pointTypeToMultiply.length&&delete re.multiplyPointtypeIsOnCheck,re.multiplyPointtypeIsOnCheck&&Yt.push(re)}if(re.dividePointtypeIsOn&&void 0!==re.pointTypeToDivide&&void 0!==re.divideWithThis){var pe=0;re.dividePointtypeIsOnCheck=!0,"object"!==u(re.startingSumAtDivide)&&(re.startingSumAtDivide=[]);for(var me=0;me<re.pointTypeToDivide.length;me++){var he=qt.get(re.pointTypeToDivide[me]);if(void 0!==he)if(re.dividePointtypeIsId&&"string"==typeof re.divideWithThis){var be=qt.get(re.divideWithThis);void 0!==be?0===be.startingSum?pe++:(re.startingSumAtDivide[me]={value:he.startingSum,calcVal:be.startingSum},he.startingSum/=be.startingSum):pe++}else"number"==typeof re.divideWithThis&&(0===re.dividedWithThis?pe++:(re.startingSumAtDivide[me]={value:he.startingSum,calcVal:re.divideWithThis},he.startingSum/=re.divideWithThis));else pe++}pe===re.pointTypeToDivide.length&&delete re.dividePointtypeIsOnCheck,!re.multiplyPointtypeIsOnCheck&&re.dividePointtypeIsOnCheck&&Yt.push(re)}if(re.changeBackground&&(re.changeBgImage?void 0!==re.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:re.id,data:re.bgImage}),app.styling.backgroundImage=re.bgImage):void 0!==re.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:re.id,data:re.changedBgColorCode}),app.styling.backgroundColor=re.changedBgColorCode)),re.changePointBar&&(re.changeBarBgColorIsOn&&void 0!==re.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:re.id,data:re.changedBarBgColor}),app.styling.barBackgroundColor=re.changedBarBgColor),re.changeBarIconColorIsOn&&void 0!==re.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:re.id,data:re.changedBarIconColor}),app.styling.barIconColor=re.changedBarIconColor),re.changeBarTextColorIsOn&&void 0!==re.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:re.id,data:re.changedBarTextColor}),app.styling.barTextColor=re.changedBarTextColor)),re.changeTemplates&&re.changeTemplatesList&&re.changeToThisTemplate)for(var we=re.changeTemplatesList.split(","),Te=0;Te<we.length;Te++){var Ie=we[Te],ye=Wt.get(Ie);if(void 0===ye){var xe=Lt.get(Ie);if(void 0===xe){var Se=Et.get(Ie[0]);if(void 0===Se);else{for(var Ce=Se.rowElements,Ae=0;Ae<Ce.length;Ae++){var Be=Lt.get(Ce[Ae]);void 0!==Be&&_o(Be,re.id,re.changeToThisTemplate)}for(var Oe=Se.elements,ke=0;ke<Oe.length;ke++){var Me=Wt.get(Oe[ke]);if(void 0!==Me)_o(Me.choice,re.id,re.changeToThisTemplate)}}}else _o(xe,re.id,re.changeToThisTemplate)}else{var Fe=ye.choice;if(_o(Fe,re.id,re.changeToThisTemplate),re.changeAddonTemplate)for(var De=0;De<Fe.addons.length;De++){_o(Fe.addons[De],re.id,re.changeToThisTemplate)}}}if(re.changeWidth&&re.changeWidthList&&re.changeToThisWidth)for(var Re=re.changeWidthList.split(","),je=0;je<Re.length;je++){var Pe=Re[je],$e=Wt.get(Pe);if(void 0===$e){var Ve=Lt.get(Pe);if(void 0===Ve){var qe=Et.get(Pe[0]);if(void 0===qe);else{for(var Le=qe.rowElements,We=0;We<Le.length;We++){var Ee=Lt.get(Le[We]);void 0!==Ee&&Yo(Ee,re.id,re.changeToThisWidth)}for(var Ue=qe.elements,Ne=0;Ne<Ue.length;Ne++){var ze=Wt.get(Ue[Ne]);if(void 0!==ze)Yo(ze.choice,re.id,re.changeToThisWidth)}}}else Yo(Ve,re.id,re.changeToThisWidth)}else{Yo($e.choice,re.id,re.changeToThisWidth)}}if(re.muteBgm&&Xt){var Ge=S(Xt);app.isMute=!0,Ge&&"function"==typeof Ge.mute&&Ge.mute()}re.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),re.showAllAddons&&(app.showAllAddons+=1),ae.currentChoices+=1}else{if(re.discountOther&&void 0!==re.discountOperator&&void 0!==re.discountValue)if(re.isDisChoices){if(void 0!==re.discountChoices)for(var _e=0;_e<re.discountChoices.length;_e++){var He=Wt.get(re.discountChoices[_e]);void 0!==He&&eo(re,He.choice)}}else if(void 0!==re.discountGroups)for(var Ye=0;Ye<re.discountGroups.length;Ye++){var Ze=Et.get(re.discountGroups[Ye]);if(void 0!==Ze)for(var Je=0;Je<Ze.elements.length;Je++){var Xe=Wt.get(Ze.elements[Je]);void 0!==Xe&&eo(re,Xe.choice)}}if(re.addToAllowChoice&&void 0!==re.idOfAllowChoice&&void 0!==re.numbAddToAllowChoice)for(var Ke=0;Ke<re.idOfAllowChoice.length;Ke++){var Qe=Lt.get(re.idOfAllowChoice[Ke]);void 0!==Qe&&(Qe.allowedChoices-=re.numbAddToAllowChoice)}$t.delete(re.id),re.forcedActivated&&Vt.set(re.id,{multiple:re.multipleUseVariable})}}else $t.delete(f[oe])}}function ro(e,t,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,n=Array.from($t.keys()),r=0;r<n.length;r++){var a=n[r],c=Wt.get(a);if(void 0!==c){var l=c.row,s=c.choice,u=new d,f=!1,g=!1;e.useDiscountCount&&!e.appliedDisChoices&&(e.appliedDisChoices=[]);for(var p=0;p<s.scores.length;p++){var m=s.scores[p];if(!m.isNotRecalculatable){var h=qt.get(m.id);if(void 0!==h){if(e.discountOther&&m.isChangeDiscount&&void 0!==m.tmpDisScore){var b=s.multipleUseVariable,w=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount&&e.discountCount?e.discountCount*e.multipleUseVariable:e.discountCount;if(!e.useDiscountCount||e.useDiscountCount&&w&&w>e.appliedDisChoices.length){if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){for(var T=b-1;T>=0;T--)s.isActive&&(h.startingSum+=m.tmpDisScore);s.isActive&&(u.set(m.id,m.tmpDisScore),delete m.isChangeDiscount,delete m.tmpDisScore)}else s.isSelectableMultiple||(h.startingSum+=m.tmpDisScore,u.set(m.id,m.tmpDisScore),delete m.isChangeDiscount,delete m.tmpDisScore);g=!0,s.isActive&&(m.appliedDiscount=!0,f=!0)}}if(!o.has(m.idx))for(var I=e.scores.length>0,y=e.scores.length||1,x=0;x<y;x++){var S=I?e.scores[x]:null,C=S&&t.get(S.id)||0,A=S?qt.get(S.id):null;if((!I||I&&A)&&s.isActive){var B=zi(m.requireds),O=new d(JSON.parse(JSON.stringify(v($t))));O.delete(e.id),l.currentChoices-=1,A&&(A.startingSum+=C);var k=zi(m.requireds,O);if(l.currentChoices+=1,A&&(A.startingSum-=C),k!==B){var M=m.discountIsOn&&m.appliedDiscount&&void 0!==m.discountScore?m.discountScore:m.value;if(k)if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus)for(var F=s.multipleUseVariable-1;F>=0;F--)void 0!==m.isActiveMul&&m.isActiveMul[x]&&(h.startingSum+=M,u.set(m.id,M),m.isActiveMul[F]=!1);else s.isSelectableMultiple||m.isActive&&(h.startingSum+=M,u.set(m.id,M),delete m.isActive);else if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){var D=s.multipleUseVariable;void 0===m.isActiveMul&&(m.isActiveMul=[]);for(var R=D-1;R>=0;R--)m.isActiveMul[R]||(h.startingSum-=M,u.set(m.id,M),m.isActiveMul[R]=!0)}else s.isSelectableMultiple||m.isActive||(h.startingSum-=M,u.set(m.id,M),m.isActive=!0);g||(g=!0),o.add(m.idx)}}}}}}f&&e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id),g&&ro(s,u,++i,o)}}}function ao(e,t){var i=e.split("/IMG#"),o=i.length>1?i[1]:"",n=(i=i[0].split("/WORD#")).length>1?i[1].replace(/\/CHAR#/g,","):"",r=(i=i[0].split("/RND#")).length>1?i[1].split("/AND#"):"",a=i[0],c=Wt.get(a);if(void 0!==c){for(var l=c.row,s=c.choice,f=0;f<s.scores.length;f++){var g=s.scores[f],p=qt.get(g.id);void 0!==p&&g.isRandom&&!g.setValue&&void 0!==g.maxValue&&void 0!==g.minValue&&(g.value=Math.floor(Math.random()*(g.maxValue-g.minValue+1))+g.minValue,g.value=p.allowFloat?g.value:Math.floor(g.value),g.setValue=!0)}var m=new d;if(s.isActive=!0,$t.set(s.id,{multiple:0}),l.currentChoices+=1,s.discountOther&&void 0!==s.discountOperator&&void 0!==s.discountValue)if(s.isDisChoices){var h=new Set;if(void 0!==s.discountRows)for(var b=0;b<s.discountRows.length;b++){var w=Lt.get(s.discountRows[b]);if(void 0!==w)for(var T=0;T<w.objects.length;T++){var I=w.objects[T];to(s,I),h.add(I.id)}}if(void 0!==s.discountChoices)for(var y=0;y<s.discountChoices.length;y++)if(!h.has(s.discountChoices[y])){var x=Wt.get(s.discountChoices[y]);if(void 0!==x){var C=x.choice;to(s,C)}}}else if(void 0!==s.discountGroups)for(var A=0;A<s.discountGroups.length;A++){var B=Et.get(s.discountGroups[A]);if(void 0!==B)for(var O=0;O<B.elements.length;O++){var k=Wt.get(B.elements[O]);if(void 0!==k){var M=k.choice;to(s,M)}}}for(var F=new Set,D=0;D<s.scores.length;D++){var R=s.scores[D];if(zi(R.requireds)&&!R.isActive){var j=qt.get(R.id);if(void 0!==j){var P=R.value;if(R.appliedDiscount&&void 0!==R.discountScore)P=R.discountScore;else if(R.discountIsOn&&void 0!==R.discountScore&&R.discountedFrom&&R.discountedFrom.length>0){for(var $=!1,V=0;V<R.discountedFrom.length;V++){var q=Wt.get(R.discountedFrom[V]);if(void 0!==q){var L=q.choice;if(!L.useDiscountCount||void 0===L.discountCount){P=R.discountScore,R.appliedDiscount=!0,$=!0;break}var W=L.isSelectableMultiple&&L.isMultipleUseVariable&&L.stackableDiscount?L.discountCount*L.multipleUseVariable:L.discountCount;if(L.appliedDisChoices||(L.appliedDisChoices=[]),W>L.appliedDisChoices.length){F.add(L),P=R.discountScore,R.appliedDiscount=!0,$=!0;break}}}if(!$&&void 0!==R.tmpDiscount)for(var E=0;E<R.tmpDiscount.length;E++)P>R.tmpDiscount[E].discountedValue&&(P=R.tmpDiscount[E].discountedValue)}P=j.allowFloat?P:Math.floor(P),j.startingSum-=P,R.isActive=!0;var U=m.get(R.id);void 0!==U?m.set(R.id,P+U):m.set(R.id,P)}}}if(F.size>0&&F.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id)}),s.duplicateRow&&void 0!==s.duplicateRowId&&void 0!==s.duplicateRowPlace&&uo(s),s.activateOtherChoice&&void 0!==s.activateThisChoice){var N=new Set(t.map(function(e){return e.split("/ON#")[0]}));if(s.isActivateRandom&&void 0!==s.numActivateRandom)if(""===r){for(var z=s.activateThisChoice.split(",").filter(function(e){return N.has(e.split("/ON#")[0])}),G=s.numActivateRandom>z.length?z.length:s.numActivateRandom,_=new Set,H=0;H<z.length;H++){var Y=Wt.get(z[H]);if(void 0!==Y)if(!zi(Y.choice.requireds)){var Z=z[H];z.splice(H,1),z.push(Z)}}for(var J=z.length-1;J>=0;J--)_.add(z[J]);z=v(_).reverse(),s.activatedRandom=z.slice(0,G);for(var X=0;X<G;X++){var K=s.activatedRandom[X].split("/ON#"),Q=Wt.get(K[0]);if(void 0!==Q){var ee=Q.choice;if(!s.isAllowDeselect){if(ee.isSelectableMultiple&&ee.isMultipleUseVariable)for(var te=parseInt(K[1]),ie=0;ie<Math.abs(te);ie++)te>0&&void 0!==ee.numMultipleTimesMinus?ee.numMultipleTimesMinus++:te<0&&void 0!==ee.numMultipleTimesPluss&&ee.numMultipleTimesPluss--;ee.forcedActivated=!0}ee.isSelectableMultiple||(void 0===ee.activatedFrom&&(ee.activatedFrom=0),ee.activatedFrom+=1)}}}else{var oe=r.filter(function(e){return N.has(e.split("/RON#")[0])});s.activatedRandom=oe;for(var ne=0;ne<oe.length;ne++){var re=s.activatedRandom[ne].split("/RON#"),ae=Wt.get(re[0]);if(void 0!==ae){var ce=ae.choice;if(!s.isAllowDeselect){if(ce.isSelectableMultiple&&ce.isMultipleUseVariable)for(var le=parseInt(re[1]),se=0;se<Math.abs(le);se++)le>0&&void 0!==ce.numMultipleTimesMinus?ce.numMultipleTimesMinus++:le<0&&void 0!==ce.numMultipleTimesPluss&&ce.numMultipleTimesPluss--;ce.forcedActivated=!0}ce.isSelectableMultiple||(void 0===ce.activatedFrom&&(ce.activatedFrom=0),ce.activatedFrom+=1)}}}else for(var ue=s.activateThisChoice.split(",").filter(function(e){return N.has(e.split("/ON#")[0])}),de=0;de<ue.length;de++){var fe=ue[de].split("/ON#"),ve=fe.length>1?parseInt(fe[1]):0,ge=Wt.get(fe[0]);if(void 0!==ge){var pe=ge.choice;if(!s.isAllowDeselect){if(pe.isSelectableMultiple&&pe.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(var me=0;me<Math.abs(s.multipleUseVariable);me++)for(var he=0;he<Math.abs(ve);he++)ve>0&&void 0!==pe.numMultipleTimesMinus?pe.numMultipleTimesMinus++:ve<0&&void 0!==pe.numMultipleTimesPluss&&pe.numMultipleTimesPluss--;else for(var be=0;be<Math.abs(ve);be++)ve>0&&void 0!==pe.numMultipleTimesMinus?pe.numMultipleTimesMinus++:ve<0&&void 0!==pe.numMultipleTimesPluss&&pe.numMultipleTimesPluss--;pe.forcedActivated=!0}pe.isSelectableMultiple||(void 0===pe.activatedFrom&&(pe.activatedFrom=0),pe.activatedFrom+=1)}else{var we=Et.get(fe[0]);if(void 0!==we)for(var Te=we.elements,Ie=0;Ie<Te.length;Ie++){var ye=Wt.get(Te[Ie]);if(void 0!==ye){var xe=ye.choice;if(!s.isAllowDeselect){if(xe.isSelectableMultiple&&xe.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(var Se=0;Se<Math.abs(s.multipleUseVariable);Se++)for(var Ce=0;Ce<Math.abs(ve);Ce++)ve>0&&void 0!==xe.numMultipleTimesMinus?xe.numMultipleTimesMinus++:ve<0&&void 0!==xe.numMultipleTimesPluss&&xe.numMultipleTimesPluss--;else for(var Ae=0;Ae<Math.abs(ve);Ae++)ve>0&&void 0!==xe.numMultipleTimesMinus?xe.numMultipleTimesMinus++:ve<0&&void 0!==xe.numMultipleTimesPluss&&xe.numMultipleTimesPluss--;xe.forcedActivated=!0}xe.isSelectableMultiple||(void 0===xe.activatedFrom&&(xe.activatedFrom=0),xe.activatedFrom+=1)}}}}}if(s.multiplyPointtypeIsOn&&void 0!==s.pointTypeToMultiply&&void 0!==s.multiplyWithThis){var Be=0;s.multiplyPointtypeIsOnCheck=!0,"object"!==u(s.startingSumAtMultiply)&&(s.startingSumAtMultiply=[]);for(var Oe=0;Oe<s.pointTypeToMultiply.length;Oe++){var ke=qt.get(s.pointTypeToMultiply[Oe]);if(void 0!==ke)if(s.multiplyPointtypeIsId&&"string"==typeof s.multiplyWithThis){var Me=qt.get(s.multiplyWithThis);void 0!==Me?(s.startingSumAtMultiply[Oe]={value:ke.startingSum,calcVal:Me.startingSum},ke.startingSum*=Me.startingSum,ke.startingSum=ke.allowFloat?ke.startingSum:Math.floor(ke.startingSum)):Be++}else"number"==typeof s.multiplyWithThis&&(s.startingSumAtMultiply[Oe]={value:ke.startingSum,calcVal:s.multiplyWithThis},ke.startingSum*=s.multiplyWithThis,ke.startingSum=ke.allowFloat?ke.startingSum:Math.floor(ke.startingSum));else Be++}Be===s.pointTypeToMultiply.length&&delete s.multiplyPointtypeIsOnCheck,s.multiplyPointtypeIsOnCheck&&Yt.push(s)}if(s.dividePointtypeIsOn&&void 0!==s.pointTypeToDivide&&void 0!==s.divideWithThis){var Fe=0;s.dividePointtypeIsOnCheck=!0,"object"!==u(s.startingSumAtDivide)&&(s.startingSumAtDivide=[]);for(var De=0;De<s.pointTypeToDivide.length;De++){var Re=qt.get(s.pointTypeToDivide[De]);if(void 0!==Re)if(s.dividePointtypeIsId&&"string"==typeof s.divideWithThis){var je=qt.get(s.divideWithThis);void 0!==je?0===je.startingSum?Fe++:(s.startingSumAtDivide[De]={value:Re.startingSum,calcVal:je.startingSum},Re.startingSum/=je.startingSum,Re.startingSum=Re.allowFloat?Re.startingSum:Math.floor(Re.startingSum)):Fe++}else"number"==typeof s.divideWithThis&&(0===s.dividedWithThis?Fe++:(s.startingSumAtDivide[De]={value:Re.startingSum,calcVal:s.divideWithThis},Re.startingSum/=s.divideWithThis,Re.startingSum=Re.allowFloat?Re.startingSum:Math.floor(Re.startingSum)));else Fe++}Fe===s.pointTypeToDivide.length&&delete s.dividePointtypeIsOnCheck,!s.multiplyPointtypeIsOnCheck&&s.dividePointtypeIsOnCheck&&Yt.push(s)}if(s.isChangeVariables&&void 0!==s.changedVariables)for(var Pe=0;Pe<s.changedVariables.length;Pe++){var $e=zt.get(s.changedVariables[Pe]);void 0!==$e&&("1"===s.changeType?$e.isTrue=!0:"2"===s.changeType?$e.isTrue=!1:"3"===s.changeType&&($e.isTrue=!$e.isTrue))}if(s.addToAllowChoice&&void 0!==s.idOfAllowChoice&&void 0!==s.numbAddToAllowChoice)for(var Ve=0;Ve<s.idOfAllowChoice.length;Ve++){var qe=Lt.get(s.idOfAllowChoice[Ve]);void 0!==qe&&(qe.allowedChoices+=s.numbAddToAllowChoice)}if(s.textfieldIsOn&&void 0!==s.idOfTheTextfieldWord&&void 0!==s.wordChangeSelect){var Le=Nt.get(s.idOfTheTextfieldWord);void 0!==Le&&(s.customTextfieldIsOn?Le.replaceText=n:Le.replaceText=s.wordChangeSelect)}if(s.isImageUpload&&(s.defaultImage=s.image,s.image=o),s.backpackBtnRequirement&&(void 0===app.btnBackpackIsOn&&(app.btnBackpackIsOn=0),app.btnBackpackIsOn+=1),s.showAllAddons&&(void 0===app.showAllAddons&&(app.showAllAddons=0),app.showAllAddons+=1),s.changeBackground&&(s.changeBgImage?void 0!==s.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:s.id,data:s.bgImage}),app.styling.backgroundImage=s.bgImage):void 0!==s.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:s.id,data:s.changedBgColorCode}),app.styling.backgroundColor=s.changedBgColorCode)),s.changePointBar&&(s.changeBarBgColorIsOn&&void 0!==s.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:s.id,data:s.changedBarBgColor}),app.styling.barBackgroundColor=s.changedBarBgColor),s.changeBarIconColorIsOn&&void 0!==s.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:s.id,data:s.changedBarIconColor}),app.styling.barIconColor=s.changedBarIconColor),s.changeBarTextColorIsOn&&void 0!==s.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:s.id,data:s.changedBarTextColor}),app.styling.barTextColor=s.changedBarTextColor)),s.changeTemplates&&s.changeTemplatesList&&s.changeToThisTemplate)for(var We=s.changeTemplatesList.split(","),Ee=0;Ee<We.length;Ee++){var Ue=We[Ee],Ne=Wt.get(Ue);if(void 0===Ne){var ze=Lt.get(Ue);if(void 0===ze){var Ge=Et.get(Ue[0]);if(void 0===Ge);else{for(var _e=Ge.rowElements,He=0;He<_e.length;He++){var Ye=Lt.get(_e[He]);void 0!==Ye&&_o(Ye,s.id,s.changeToThisTemplate)}for(var Ze=Ge.elements,Je=0;Je<Ze.length;Je++){var Xe=Wt.get(Ze[Je]);if(void 0!==Xe)_o(Xe.choice,s.id,s.changeToThisTemplate)}}}else _o(ze,s.id,s.changeToThisTemplate)}else{var Ke=Ne.choice;if(_o(Ke,s.id,s.changeToThisTemplate),s.changeAddonTemplate)for(var Qe=0;Qe<Ke.addons.length;Qe++){_o(Ke.addons[Qe],s.id,s.changeToThisTemplate)}}}if(s.changeWidth&&s.changeWidthList&&s.changeToThisWidth)for(var et=s.changeWidthList.split(","),tt=0;tt<et.length;tt++){var it=et[tt],ot=Wt.get(it);if(void 0===ot){var nt=Lt.get(it);if(void 0===nt){var rt=Et.get(it[0]);if(void 0===rt);else{for(var at=rt.rowElements,ct=0;ct<at.length;ct++){var lt=Lt.get(at[ct]);void 0!==lt&&Yo(lt,s.id,s.changeToThisWidth)}for(var st=rt.elements,ut=0;ut<st.length;ut++){var dt=Wt.get(st[ut]);if(void 0!==dt)Yo(dt.choice,s.id,s.changeToThisWidth)}}}else Yo(nt,s.id,s.changeToThisWidth)}else{Yo(ot.choice,s.id,s.changeToThisWidth)}}if(s.setBgmIsOn&&s.bgmId&&(Kt.bgmIsPlaying=!0,Kt.isBgmInit?Hi(s,s.bgmId,0):(Zi(s),Kt.isBgmInit=!0)),s.muteBgm&&Xt){var ft=S(Xt);ft&&"function"==typeof ft.mute&&(app.isMute=!0,ft.mute())}if(s.isContentHidden&&void 0!==s.hiddenContentsRow&&void 0!==s.hiddenContentsType)for(var vt=0;vt<s.hiddenContentsRow.length;vt++){var gt=Lt.get(s.hiddenContentsRow[vt]);if(void 0!==gt){gt.textIsRemoved||(gt.textIsRemoved=!0);for(var pt=0;pt<s.hiddenContentsType.length;pt++)switch(s.hiddenContentsType[pt]){case"1":gt.objectTitleRemoved=!0;break;case"2":gt.objectImageRemoved=!0;break;case"3":gt.objectTextRemoved=!0;break;case"4":gt.objectScoreRemoved=!0;break;case"5":gt.objectRequirementRemoved=!0;break;case"6":gt.addonTitleRemoved=!0;break;case"7":gt.addonImageRemoved=!0;break;case"8":gt.addonTextRemoved=!0}}}ro(s,m,0)}}function co(e,t){var i=e.length>1?e[1].split("/AND#"):"",o=e[0].split("/ON#"),n=Wt.get(o[0]);if(void 0!==n){for(var r=n.choice,a=n.row,c=0;c<r.scores.length;c++){var l=r.scores[c],s=qt.get(l.id);void 0!==s&&l.isRandom&&!l.setValue&&void 0!==l.maxValue&&void 0!==l.minValue&&(l.value=Math.floor(Math.random()*(l.maxValue-l.minValue+1))+l.minValue,l.value=s.allowFloat?l.value:Math.floor(l.value),l.setValue=!0)}var u=new d,f=r.isActive,g=r.multipleUseVariable>=0,p=Math.abs(r.multipleUseVariable);if(r.isActive||(r.isActive=!0,a.currentChoices+=1),r.multipleUseVariable++,$t.set(r.id,{multiple:r.multipleUseVariable}),g&&r.discountOther&&void 0!==r.discountOperator&&void 0!==r.discountValue)if(r.isDisChoices){var m=new Set;if(void 0!==r.discountRows)for(var h=0;h<r.discountRows.length;h++){var b=Lt.get(r.discountRows[h]);if(void 0!==b)for(var w=0;w<b.objects.length;w++){var T=b.objects[w];to(r,T),m.add(T.id)}}if(void 0!==r.discountChoices)for(var I=0;I<r.discountChoices.length;I++)if(!m.has(r.discountChoices[I])){var y=Wt.get(r.discountChoices[I]);if(void 0!==y){var x=y.choice;to(r,x)}}}else if(void 0!==r.discountGroups)for(var C=0;C<r.discountGroups.length;C++){var A=Et.get(r.discountGroups[C]);if(void 0!==A)for(var B=0;B<A.elements.length;B++){var O=Wt.get(A.elements[B]);if(void 0!==O){var k=O.choice;to(r,k)}}}for(var M=new Set,F=0;F<r.scores.length;F++){var D=r.scores[F];if(void 0===D.isActiveMul&&(D.isActiveMul=[]),zi(D.requireds)&&!D.isActiveMul[p]){var R=qt.get(D.id);if(void 0!==R){var j=D.value;if(D.discountIsOn&&void 0!==D.discountScore&&D.discountedFrom&&D.discountedFrom.length>0){var P=Wt.get(D.discountedFrom[0]);if(void 0!==P){var $=P.choice;if($.useDiscountCount&&void 0!==$.discountCount){if($.appliedDisChoices||($.appliedDisChoices=[]),$.discountCount>$.appliedDisChoices.length)M.add($),j=D.discountScore,D.appliedDiscount=!0;else if(void 0!==D.tmpDiscount)for(var V=0;V<D.tmpDiscount.length;V++)j>D.tmpDiscount[V].discountedValue&&(j=D.tmpDiscount[V].discountedValue)}else j=D.discountScore,D.appliedDiscount=!0}}j=R.allowFloat?j:Math.floor(j),D.multiplyByTimes&&(j*=p+1),R.startingSum-=j,D.isActiveMul[p]=!0;var q=u.get(D.id);void 0!==q?u.set(D.id,j+q):u.set(D.id,j)}}}if(M.size>0&&M.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(r.id)&&e.appliedDisChoices.push(r.id)}),g&&(r.duplicateRow&&void 0!==r.duplicateRowId&&void 0!==r.duplicateRowPlace&&uo(r),r.activateOtherChoice&&void 0!==r.activateThisChoice)){var L=new Set(t.map(function(e){return e.split("/ON#")[0]}));if(r.isActivateRandom&&void 0!==r.numActivateRandom)if(void 0===r.activatedRandomMul&&(r.activatedRandomMul=[]),""===i){if(1===r.multipleUseVariable){var W=r.activateThisChoice.split(",").filter(function(e){return L.has(e.split("/ON#")[0])});r.numActivateRandom>W.length?W.length:r.numActivateRandom;for(var E=new Set,U=0;U<W.length;U++){var N=Wt.get(W[U]);if(void 0!==N)if(!zi(N.choice.requireds)){var z=W[U];W.splice(U,1),W.push(z)}}for(var G=W.length-1;G>=0;G--)E.add(W[G]);W=v(E).reverse();for(var _=0,H=[],Y=0;Y<r.numActivateRandom;Y++){H[Y]=W.length/(r.numActivateRandom*(Y+1))<1?W.length%(r.numActivateRandom*(Y+1)):r.numActivateRandom,r.activatedRandomMul.push(W.slice(_,H[Y]+_));for(var Z=0;Z<H[Y]-_;Z++){var J=r.activatedRandomMul[Y][Z].split("/ON#"),X=J.length>1?parseInt(J[1]):0,K=Wt.get(J[0]);if(void 0!==K){var Q=K.choice;if(!r.isAllowDeselect){if(Q.isSelectableMultiple&&Q.isMultipleUseVariable)for(var ee=0;ee<Math.abs(X);ee++)X>0&&void 0!==Q.numMultipleTimesMinus?Q.numMultipleTimesMinus++:X<0&&void 0!==Q.numMultipleTimesPluss&&Q.numMultipleTimesPluss--;Q.forcedActivated=!0}}}_+=H[Y]}}}else{var te=(r.multipleUseVariable-1)*r.numActivateRandom,ie=i.splice(te,te+r.numActivateRandom);r.activatedRandomMul.push(ie);for(var oe=0;oe<r.activatedRandomMul[r.multipleUseVariable-1].length;oe++){var ne=r.activatedRandomMul[r.multipleUseVariable-1][oe].split("/RON#"),re=ne.length>1?parseInt(ne[1]):0,ae=Wt.get(ne[0]);if(void 0!==ae){var ce=ae.choice;if(!r.isAllowDeselect&&L.has(ce.id)){if(ce.isSelectableMultiple&&ce.isMultipleUseVariable)for(var le=0;le<Math.abs(re);le++)re>0&&void 0!==ce.numMultipleTimesMinus?ce.numMultipleTimesMinus++:re<0&&void 0!==ce.numMultipleTimesPluss&&ce.numMultipleTimesPluss--;ce.forcedActivated=!0}}}}else for(var se=r.activateThisChoice.split(",").filter(function(e){return L.has(e.split("/ON#")[0])}),ue=0;ue<se.length;ue++){var de=se[ue].split("/ON#"),fe=de.length>1?parseInt(de[1]):0,ve=Wt.get(de[0]);if(void 0!==ve){var ge=ve.choice;if(!r.isAllowDeselect){if(ge.isSelectableMultiple&&ge.isMultipleUseVariable)if(r.isSelectableMultiple&&r.isMultipleUseVariable)for(var pe=0;pe<Math.abs(r.multipleUseVariable);pe++)for(var me=0;me<Math.abs(fe);me++)fe>0&&void 0!==ge.numMultipleTimesMinus?ge.numMultipleTimesMinus++:fe<0&&void 0!==ge.numMultipleTimesPluss&&ge.numMultipleTimesPluss--;else for(var he=0;he<Math.abs(fe);he++)fe>0&&void 0!==ge.numMultipleTimesMinus?ge.numMultipleTimesMinus++:fe<0&&void 0!==ge.numMultipleTimesPluss&&ge.numMultipleTimesPluss--;ge.forcedActivated=!0}}else{var be=Et.get(de[0]);if(void 0!==be)for(var we=be.elements,Te=0;Te<we.length;Te++){var Ie=Wt.get(we[Te]);if(void 0!==Ie){var ye=Ie.choice;if(!r.isAllowDeselect){if(ye.isSelectableMultiple&&ye.isMultipleUseVariable)if(r.isSelectableMultiple&&r.isMultipleUseVariable)for(var xe=0;xe<Math.abs(r.multipleUseVariable);xe++)for(var Se=0;Se<Math.abs(fe);Se++)fe>0&&void 0!==ye.numMultipleTimesMinus?ye.numMultipleTimesMinus++:fe<0&&void 0!==ye.numMultipleTimesPluss&&ye.numMultipleTimesPluss--;else for(var Ce=0;Ce<Math.abs(fe);Ce++)fe>0&&void 0!==ye.numMultipleTimesMinus?ye.numMultipleTimesMinus++:fe<0&&void 0!==ye.numMultipleTimesPluss&&ye.numMultipleTimesPluss--;ye.forcedActivated=!0}}}}}}if(r.addToAllowChoice&&void 0!==r.idOfAllowChoice&&void 0!==r.numbAddToAllowChoice)for(var Ae=0;Ae<r.idOfAllowChoice.length;Ae++){var Be=Lt.get(r.idOfAllowChoice[Ae]);void 0!==Be&&(Be.allowedChoices+=r.numbAddToAllowChoice)}if(!f){if(r.isChangeVariables&&void 0!==r.changedVariables)for(var Oe=0;Oe<r.changedVariables.length;Oe++){var ke=zt.get(r.changedVariables[Oe]);void 0!==ke&&("1"===r.changeType?ke.isTrue=!0:"2"===r.changeType?ke.isTrue=!1:"3"===r.changeType&&(ke.isTrue=!ke.isTrue))}if(r.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),r.showAllAddons&&(app.showAllAddons+=1),r.changeBackground&&(r.changeBgImage?void 0!==r.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:r.id,data:r.bgImage}),app.styling.backgroundImage=r.bgImage):void 0!==r.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:r.id,data:r.changedBgColorCode}),app.styling.backgroundColor=r.changedBgColorCode)),r.changePointBar&&(r.changeBarBgColorIsOn&&void 0!==r.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:r.id,data:r.changedBarBgColor}),app.styling.barBackgroundColor=r.changedBarBgColor),r.changeBarIconColorIsOn&&void 0!==r.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:r.id,data:r.changedBarIconColor}),app.styling.barIconColor=r.changedBarIconColor),r.changeBarTextColorIsOn&&void 0!==r.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:r.id,data:r.changedBarTextColor}),app.styling.barTextColor=r.changedBarTextColor)),r.changeTemplates&&r.changeTemplatesList&&r.changeToThisTemplate)for(var Me=r.changeTemplatesList.split(","),Fe=0;Fe<Me.length;Fe++){var De=Me[Fe],Re=Wt.get(De);if(void 0===Re){var je=Lt.get(De);if(void 0===je){var Pe=Et.get(De[0]);if(void 0===Pe);else{for(var $e=Pe.rowElements,Ve=0;Ve<$e.length;Ve++){var qe=Lt.get($e[Ve]);void 0!==qe&&_o(qe,r.id,r.changeToThisTemplate)}for(var Le=Pe.elements,We=0;We<Le.length;We++){var Ee=Wt.get(Le[We]);if(void 0!==Ee)_o(Ee.choice,r.id,r.changeToThisTemplate)}}}else _o(je,r.id,r.changeToThisTemplate)}else{var Ue=Re.choice;if(_o(Ue,r.id,r.changeToThisTemplate),r.changeAddonTemplate)for(var Ne=0;Ne<Ue.addons.length;Ne++){_o(Ue.addons[Ne],r.id,r.changeToThisTemplate)}}}if(r.changeWidth&&r.changeWidthList&&r.changeToThisWidth)for(var ze=r.changeWidthList.split(","),Ge=0;Ge<ze.length;Ge++){var _e=ze[Ge],He=Wt.get(_e);if(void 0===He){var Ye=Lt.get(_e);if(void 0===Ye){var Ze=Et.get(_e[0]);if(void 0===Ze);else{for(var Je=Ze.rowElements,Xe=0;Xe<Je.length;Xe++){var Ke=Lt.get(Je[Xe]);void 0!==Ke&&Yo(Ke,r.id,r.changeToThisWidth)}for(var Qe=Ze.elements,et=0;et<Qe.length;et++){var tt=Wt.get(Qe[et]);if(void 0!==tt)Yo(tt.choice,r.id,r.changeToThisWidth)}}}else Yo(Ye,r.id,r.changeToThisWidth)}else{Yo(He.choice,r.id,r.changeToThisWidth)}}if(r.setBgmIsOn&&r.bgmId&&(Kt.bgmIsPlaying=!0,Kt.isBgmInit?Hi(r,r.bgmId,0):(Zi(r),Kt.isBgmInit=!0)),r.muteBgm&&Xt){var it=S(Xt);it&&"function"==typeof it.mute&&(app.isMute=!0,it.mute())}if(r.isContentHidden&&void 0!==r.hiddenContentsRow&&void 0!==r.hiddenContentsType)for(var ot=0;ot<r.hiddenContentsRow.length;ot++){var nt=Lt.get(r.hiddenContentsRow[ot]);if(void 0!==nt){nt.textIsRemoved||(nt.textIsRemoved=!0);for(var rt=0;rt<r.hiddenContentsType.length;rt++)switch(r.hiddenContentsType[rt]){case"1":nt.objectTitleRemoved=!0;break;case"2":nt.objectImageRemoved=!0;break;case"3":nt.objectTextRemoved=!0;break;case"4":nt.objectScoreRemoved=!0;break;case"5":nt.objectRequirementRemoved=!0;break;case"6":nt.addonTitleRemoved=!0;break;case"7":nt.addonImageRemoved=!0;break;case"8":nt.addonTextRemoved=!0}}}}ro(r,u,0)}}function lo(e,t){for(var i=new d,o=Math.abs(e.multipleUseVariable-1),n=0;n<e.scores.length;n++){var r=e.scores[n];if(void 0===r.isActiveMulMinus&&(r.isActiveMulMinus=[]),zi(r.requireds)&&!r.isActiveMulMinus[o]){var a=qt.get(r.id);if(void 0!==a){var c=r.discountIsOn&&void 0!==r.discountScore?r.discountScore:r.value;c=a.allowFloat?c:Math.floor(c),r.multiplyByTimes&&(c*=Math.abs(o)),a.startingSum+=c;var l=i.get(r.id);void 0!==l?i.set(r.id,-c+l):i.set(r.id,-c),r.isActiveMulMinus[o]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,t.currentChoices-=1,$t.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,t.currentChoices+=1),$t.set(e.id,{multiple:e.multipleUseVariable})),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var s=0;s<e.idOfAllowChoice.length;s++){var u=Lt.get(e.idOfAllowChoice[s]);void 0!==u&&(u.allowedChoices-=e.numbAddToAllowChoice)}ro(e,i,0)}function so(e){no();for(var t=e.split(","),i=0;i<t.length;i++){var o=t[i].split(/\/(IMG|WORD|RND)#/)[0].split("/ON#"),n=o.length>1?parseInt(o[1]):0,r=Wt.get(o[0]);if(void 0!==r){var a=r.choice;if(a.isSelectableMultiple&&a.isMultipleUseVariable)for(var c=0;c<Math.abs(n);c++){var l=t[i].split("/RND#");n>0?co(l,t):lo(a,r.row)}else ao(t[i],t)}}}function uo(e,t){if(void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace){var i=e.duplicateRowId,o=0;Array.from(Lt.entries()).forEach(function(e){g(e,1)[0].split("/D#")[0]===i.split("/D#")[0]&&o++});var n=Lt.get(e.duplicateRowId),r=Lt.get(e.duplicateRowPlace),a="/D#".concat(o);if(void 0!==n&&void 0!==r){var c=JSON.parse(JSON.stringify(n));if(c.id="".concat(c.id.split("/D#")[0]).concat(a),r.isBackpack){app.backpack.splice(r.index+1,0,c),Lt.set(c.id,app.backpack[r.index+1]);for(var l=r.index+1;l<app.backpack.length;l++)app.backpack[l].index=l}else{app.rows.splice(r.index+1,0,c),Lt.set(c.id,app.rows[r.index+1]);for(var s=r.index+1;s<app.rows.length;s++)app.rows[s].index=s}for(var u=0;u<c.objects.length;u++){var d=c.objects[u];d.id="".concat(d.id.split("/D#")[0]).concat(a),d.isActive=!1,delete d.forcedActivated,delete d.appliedDisChoices;for(var f=0;f<d.scores.length;f++){var v=d.scores[f];v.idx=Ri(0,5),Ht.add(v.idx),delete v.isActive,delete v.setValue,Qi(v)}for(var p=0;p<d.addons.length;p++){d.addons[p].parentId=d.id}if(!e.dRowAddSufReq){for(var m=0;m<d.requireds.length;m++){var h=d.requireds[m];if("id"===h.type){var b=h.reqId.split("/ON#"),w="".concat(b[0].split("/D#")[0]).concat(a);b.length>1?h.reqId="".concat(w,"/ON#").concat(b[1]):h.reqId=w}else if("or"===h.type)for(var T=0;T<h.orRequired.length;T++){var I=h.orRequired[T];if(void 0!==I.req){var y=I.req.split("/ON#"),x="".concat(y[0].split("/D#")[0]).concat(a);y.length>1?I.req="".concat(x,"/ON#").concat(y[1]):I.req=x}}if(void 0!==h.requireds)for(var S=0;S<h.requireds.length;S++){var C=d.requireds[m];if("id"===C.type){var A=C.reqId.split("/ON#"),B="".concat(A[0].split("/D#")[0]).concat(a);A.length>1?C.reqId="".concat(B,"/ON#").concat(A[1]):C.reqId=B}else if("or"===C.type)for(var O=0;O<C.orRequired.length;O++){var k=C.orRequired[O];if(void 0!==k.req){var M=k.req.split("/ON#"),F="".concat(M[0].split("/D#")[0]).concat(a);M.length>1?k.req="".concat(F,"/ON#").concat(M[1]):k.req=F}}}}for(var D=0;D<d.scores.length;D++){var R=d.scores[D];if(void 0!==R.requireds)for(var j=0;j<R.requireds.length;j++){var P=R.requireds[j];if("id"===P.type){var $=P.reqId.split("/ON#"),V="".concat($[0].split("/D#")[0]).concat(a);$.length>1?P.reqId="".concat(V,"/ON#").concat($[1]):P.reqId=V}else if("or"===P.type)for(var q=0;q<P.orRequired.length;q++){var L=P.orRequired[q];if(void 0!==L.req){var W=L.req.split("/ON#"),E="".concat(W[0].split("/D#")[0]).concat(a);W.length>1?L.req="".concat(E,"/ON#").concat(W[1]):L.req=E}}}}for(var U=0;U<d.addons.length;U++){var N=d.addons[U];if(void 0!==N.requireds)for(var z=0;z<N.requireds.length;z++){var G=N.requireds[z];if("id"===G.type){var _=G.reqId.split("/ON#"),H="".concat(_[0].split("/D#")[0]).concat(a);_.length>1?G.reqId="".concat(H,"/ON#").concat(_[1]):G.reqId=H}else if("or"===G.type)for(var Y=0;Y<G.orRequired.length;Y++){var Z=G.orRequired[Y];if(void 0!==Z.req){var J=Z.req.split("/ON#"),X="".concat(J[0].split("/D#")[0]).concat(a);J.length>1?Z.req="".concat(X,"/ON#").concat(J[1]):Z.req=X}}}}}if(!e.dRowAddSufFunc){if(d.activateOtherChoice&&void 0!==d.activateThisChoice){for(var K=d.activateThisChoice.split(","),Q="",ee=0;ee<K.length;ee++){var te=K[ee].split("/ON#"),ie="".concat(te[0].split("/D#")[0]).concat(a);te.length>1?Q+="".concat(ie,"/ON#").concat(te[1],","):Q+="".concat(ie,",")}d.activateThisChoice=Q}if(d.deactivateOtherChoice&&void 0!==d.deactivateThisChoice){for(var oe=d.deactivateThisChoice.split(","),ne="",re=0;re<oe.length;re++){var ae=oe[re].split("/ON#"),ce="".concat(ae[0].split("/D#")[0]).concat(a);ae.length>1?ne+="".concat(ce,"/ON#").concat(ae[1],","):ne+="".concat(ce,",")}d.deactivateThisChoice=ne}if(d.duplicateRow&&void 0!==d.duplicateRowId&&void 0!==d.duplicateRowPlace){var le=d.duplicateRowId,se=d.duplicateRowPlace;d.duplicateRowId="".concat(le.split("/D")[0]).concat(a),d.duplicateRowPlace="".concat(se.split("/D")[0]).concat(a)}}if(d.backpackBtnRequirement&&(void 0!==app.hideBackpackBtn?app.hideBackpackBtn+=1:delete d.backpackBtnRequirement),r.isBackpack?Wt.set(d.id,{choice:app.backpack[r.index+1].objects[u],row:app.backpack[r.index+1]}):Wt.set(d.id,{choice:app.rows[r.index+1].objects[u],row:app.rows[r.index+1]}),d.groups)for(var ue=0;ue<d.groups.length;ue++){var de=Et.get(d.groups[ue]);if(void 0!==de)-1===de.elements.indexOf(d.id)&&de.elements.push(d.id)}if(d.objectDesignGroups)for(var fe=0;fe<d.objectDesignGroups.length;fe++){var ve=_t.get(d.objectDesignGroups[fe]);if(void 0!==ve)-1===ve.elements.indexOf(d.id)&&ve.elements.push(d.id)}}}}}function fo(e){return/^data:[a-zA-Z]+\/[a-zA-Z]+;base64,/.test(e)}function vo(e){var t=e.match(/^data:(image\/[a-zA-Z0-9.+-]+);base64,/);return!!t&&"image/avif"===t[1].toLowerCase()}var go=b({selFilterBlur:T.number().optional(),selFilterBright:T.number().optional(),selFilterCont:T.number().optional(),selFilterGray:T.number().optional(),selFilterHue:T.number().optional(),selFilterInvert:T.number().optional(),selFilterOpac:T.number().optional(),selFilterSatur:T.number().optional(),selFilterSepia:T.number().optional(),reqFilterBlur:T.number().optional(),reqFilterBright:T.number().optional(),reqFilterCont:T.number().optional(),reqFilterGray:T.number().optional(),reqFilterHue:T.number().optional(),reqFilterInvert:T.number().optional(),reqFilterOpac:T.number().optional(),reqFilterSatur:T.number().optional(),reqFilterSepia:T.number().optional(),unselFilterBlur:T.number().optional(),unselFilterBright:T.number().optional(),unselFilterCont:T.number().optional(),unselFilterGray:T.number().optional(),unselFilterHue:T.number().optional(),unselFilterInvert:T.number().optional(),unselFilterOpac:T.number().optional(),unselFilterSatur:T.number().optional(),unselFilterSepia:T.number().optional()}).passthrough(),po=b({rowTitleTextSize:T.number().optional(),rowTextTextSize:T.number().optional(),objectTitleTextSize:T.number().optional(),objectTextTextSize:T.number().optional(),addonTitleTextSize:T.number().optional(),addonTextTextSize:T.number().optional(),scoreTextSize:T.number().optional()}).passthrough(),mo=b({objectImgBorderWidth:T.number().optional(),objectImageWidth:T.number().optional(),objectImageMarginTop:T.number().optional(),objectImageMarginBottom:T.number().optional(),objectImgBorderRadiusTopLeft:T.number().optional(),objectImgBorderRadiusTopRight:T.number().optional(),objectImgBorderRadiusBottomRight:T.number().optional(),objectImgBorderRadiusBottomLeft:T.number().optional(),objectImageBoxWidth:T.number().optional()}).passthrough(),ho=b({rowImgBorderWidth:T.number().optional(),rowImageWidth:T.number().optional(),rowImageMarginTop:T.number().optional(),rowImageMarginBottom:T.number().optional(),rowImgBorderRadiusTopLeft:T.number().optional(),rowImgBorderRadiusTopRight:T.number().optional(),rowImgBorderRadiusBottomRight:T.number().optional(),rowImgBorderRadiusBottomLeft:T.number().optional(),rowImageBoxWidth:T.number().optional()}).passthrough(),bo=b({addonImgBorderWidth:T.number().optional(),addonImageWidth:T.number().optional(),addonImageMarginTop:T.number().optional(),addonImageMarginBottom:T.number().optional(),addonImgBorderRadiusTopLeft:T.number().optional(),addonImgBorderRadiusTopRight:T.number().optional(),addonImgBorderRadiusBottomRight:T.number().optional(),addonImgBorderRadiusBottomLeft:T.number().optional(),addonImageBoxWidth:T.number().optional()}).passthrough(),wo=b({objectMargin:T.number().optional(),objectTextPadding:T.number().optional(),objectBorderWidth:T.number().optional(),objectDropShadowH:T.number().optional(),objectDropShadowV:T.number().optional(),objectDropShadowBlur:T.number().optional(),objectDropShadowSpread:T.number().optional(),objectBorderRadiusTopLeft:T.number().optional(),objectBorderRadiusTopRight:T.number().optional(),objectBorderRadiusBottomRight:T.number().optional(),objectBorderRadiusBottomLeft:T.number().optional(),objectBorderImageWidth:T.number().optional(),objectBorderImageSliceTop:T.number().optional(),objectBorderImageSliceBottom:T.number().optional(),objectBorderImageSliceLeft:T.number().optional(),objectBorderImageSliceRight:T.number().optional()}).passthrough(),To=b({rowMargin:T.number().optional(),rowBodyMarginSides:T.number().optional(),rowBodyMarginTop:T.number().optional(),rowBodyMarginBottom:T.number().optional(),rowTextPaddingY:T.number().optional(),rowTextPaddingX:T.number().optional(),rowDropShadowH:T.number().optional(),rowDropShadowV:T.number().optional(),rowDropShadowBlur:T.number().optional(),rowDropShadowSpread:T.number().optional(),rowButtonXPadding:T.number().optional(),rowButtonYPadding:T.number().optional(),rowBorderRadiusTopLeft:T.number().optional(),rowBorderRadiusTopRight:T.number().optional(),rowBorderRadiusBottomRight:T.number().optional(),rowBorderRadiusBottomLeft:T.number().optional(),rowBorderWidth:T.number().optional(),rowBorderImageWidth:T.number().optional(),rowBorderImageSliceTop:T.number().optional(),rowBorderImageSliceBottom:T.number().optional(),rowBorderImageSliceLeft:T.number().optional(),rowBorderImageSliceRight:T.number().optional()}).passthrough(),Io=b({addonMargin:T.number().optional(),addonTextPadding:T.number().optional(),addonBorderWidth:T.number().optional(),addonDropShadowH:T.number().optional(),addonDropShadowV:T.number().optional(),addonDropShadowBlur:T.number().optional(),addonDropShadowSpread:T.number().optional(),addonBorderRadiusTopLeft:T.number().optional(),addonBorderRadiusTopRight:T.number().optional(),addonBorderRadiusBottomRight:T.number().optional(),addonBorderRadiusBottomLeft:T.number().optional(),addonBorderImageWidth:T.number().optional(),addonBorderImageSliceTop:T.number().optional(),addonBorderImageSliceBottom:T.number().optional(),addonBorderImageSliceLeft:T.number().optional(),addonBorderImageSliceRight:T.number().optional()}).passthrough(),yo=b({multiChoiceCounterPosition:T.number().optional(),multiChoiceCounterSize:T.number().optional(),multiChoiceTextSize:T.number().optional()}).passthrough(),xo=b({barTextPadding:T.number().optional(),barTextMargin:T.number().optional(),barPadding:T.number().optional(),barMargin:T.number().optional(),barTextSize:T.number().optional()}).passthrough(),So=b({backPackWidth:T.number().optional()}).passthrough(),Co=I(function(e){return""===e?{}:e},go.merge(po).merge(mo).merge(ho).merge(bo).merge(wo).merge(To).merge(Io).merge(yo).merge(xo).merge(So).passthrough()),Ao=b({template:T.number().optional()}).passthrough(),Bo=b({value:T.number().optional(),minValue:T.number().optional(),maxValue:T.number().optional(),discountScore:T.number().optional(),discountScoreCal:T.number().optional(),tmpDisScore:T.number().optional()}).passthrough(),Oo=b({index:T.number().optional(),template:T.number().optional(),multipleUseVariable:T.number().optional(),initMultipleTimesMinus:T.number().optional(),selectedThisManyTimesProp:T.number().optional(),addons:y(Ao).optional(),scores:y(Bo).optional(),styling:Co.optional(),numMultipleTimesMinus:T.number().optional(),numMultipleTimesPluss:T.number().optional(),numActivateRandom:T.number().optional(),discountLowLimit:T.number().optional(),discountValue:T.number().optional(),numbAddToAllowChoice:T.number().optional(),bgmFadeInSec:T.number().optional(),bgmFadeOutSec:T.number().optional(),fadeTransitionTime:T.number().optional(),divideWithThis:T.number().optional(),activatedFrom:T.number().optional()}).passthrough(),ko=b({index:T.number().optional(),template:T.number().optional(),buttonRandomNumber:T.number().optional(),defaultAspectWidth:T.number().optional(),defaultAspectHeight:T.number().optional(),allowedChoices:T.number().optional(),currentChoices:T.number().optional(),objects:y(Oo).optional(),styling:Co.optional(),objectImgObjectFillHeight:T.number().optional(),randomMin:T.number().optional(),randomMax:T.number().optional()}).passthrough(),Mo=b({startingSum:T.number().optional(),initValue:T.number().optional(),iconWidth:T.number().optional(),iconHeight:T.number().optional(),negativeIconWidth:T.number().optional(),negativeIconHeight:T.number().optional()}).passthrough(),Fo=b({styling:Co.optional()}).passthrough(),Do=b({styling:Co.optional()}).passthrough(),Ro=b({curVolume:T.number().optional(),fadeTransitionTime:T.number().optional(),hideBackpackBtn:T.number().optional(),btnBackpackIsOn:T.number().optional(),rowIdLength:T.number().optional(),objectIdLength:T.number().optional(),rowDesignGroups:y(Fo).optional(),objectDesignGroups:y(Do).optional(),rows:y(ko).optional(),pointTypes:y(Mo).optional(),backpack:y(ko).optional(),styling:Co.optional()}).passthrough(),jo=["autoSaveInterval","bgmFadeInterval","bgmFadeTimer","bgmIsPlaying","bgmObjectId","bgmPlayInterval","bgmTitle","bgmTitleInterval","cancelForcedActivated","comp","compG","compODG","compR","compRDG","curBgmTime","curBgmLength","isSeeking","isFadingOut","lastFadeTime","objectMap","pointTypeMap","wordMap"];function Po(e){if(Array.isArray(e))return e.map(Po).filter(function(e){return null!==e&&!("object"===u(e)&&0===Object.keys(e).length)});if(e&&"object"===u(e)){for(var t={},i=Object.keys(e),o=0;o<i.length;o++){var n=i[o],r=Po(e[n]);null!==r&&(t[n]=r)}return Object.keys(t).length>0?t:null}return e}function $o(e){e.isPrivateStyling&&e.privateFilterIsOn&&void 0!==e.styling&&(void 0===e.styling.unselFilterBlurIsOn&&(e.styling.unselFilterBlurIsOn=!1),void 0===e.styling.unselFilterBlur&&(e.styling.unselFilterBlur=0),void 0===e.styling.unselFilterBrightIsOn&&(e.styling.unselFilterBrightIsOn=!1),void 0===e.styling.unselFilterBright&&(e.styling.unselFilterBright=100),void 0===e.styling.unselFilterCont&&(e.styling.unselFilterCont=100),void 0===e.styling.unselFilterGrayIsOn&&(e.styling.unselFilterGrayIsOn=!1),void 0===e.styling.unselFilterGray&&(e.styling.unselFilterGray=0),void 0===e.styling.unselFilterHueIsOn&&(e.styling.unselFilterHueIsOn=!1),void 0===e.styling.unselFilterHue&&(e.styling.unselFilterHue=0),void 0===e.styling.unselFilterInvertIsOn&&(e.styling.unselFilterInvertIsOn=!1),void 0===e.styling.unselFilterInvert&&(e.styling.unselFilterInvert=0),void 0===e.styling.unselFilterOpacIsOn&&(e.styling.unselFilterOpacIsOn=!1),void 0===e.styling.unselFilterOpac&&(e.styling.unselFilterOpac=100),void 0===e.styling.unselFilterSaturIsOn&&(e.styling.unselFilterSaturIsOn=!1),void 0===e.styling.unselFilterSatur&&(e.styling.unselFilterSatur=0),void 0===e.styling.unselFilterSepiaIsOn&&(e.styling.unselFilterSepiaIsOn=!1),void 0===e.styling.unselFilterSepia&&(e.styling.unselFilterSepia=0))}function Vo(e,t){e.isPrivateStyling&&void 0===e.privateFilterIsOn&&void 0!==e.styling&&Object.keys(xt).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateFilterIsOn=!0:e.privateFilterIsOn=!1}),e.isPrivateStyling&&void 0===e.privateTextIsOn&&void 0!==e.styling&&Object.keys(St).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateTextIsOn=!0:e.privateTextIsOn=!1}),e.isPrivateStyling&&void 0===e.privateObjectImageIsOn&&void 0!==e.styling&&Object.keys(Ct).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateObjectImageIsOn=!0:e.privateObjectImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateObjectIsOn&&void 0!==e.styling&&Object.keys(kt).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateObjectIsOn=!0:e.privateObjectIsOn=!1}),e.isPrivateStyling&&void 0===e.privateAddonImageIsOn&&void 0!==e.styling&&Object.keys(Bt).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateAddonImageIsOn=!0:e.privateAddonImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateAddonIsOn&&void 0!==e.styling&&Object.keys(Ft).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateAddonIsOn=!0:e.privateAddonIsOn=!1}),e.isPrivateStyling&&void 0===e.privateBackgroundIsOn&&void 0!==e.styling&&Object.keys(Ot).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateBackgroundIsOn=!0:e.privateBackgroundIsOn=!1}),t&&(e.isPrivateStyling&&void 0===e.privateRowImageIsOn&&void 0!==e.styling&&Object.keys(At).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateRowImageIsOn=!0:e.privateRowImageIsOn=!1}),e.isPrivateStyling&&void 0===e.privateRowIsOn&&void 0!==e.styling&&Object.keys(Mt).forEach(function(t){e.styling.hasOwnProperty(t)?e.privateRowIsOn=!0:e.privateRowIsOn=!1})),$o(e),e.isPrivateStyling||void 0===e.styling||(void 0!==e.styling.objectImgObjectFillHeight&&(e.objectImgObjectFillHeight=e.styling.objectImgObjectFillHeight),delete e.styling)}function qo(e){for(var t=Object.keys(e),i=0;i<t.length;i++){var o=t[i];if(-1!==jo.indexOf(o))delete e[o];else if(Array.isArray(e[o])){if("rows"===o||"backpack"===o)for(var n=0;n<e[o].length;n++){var r=e[o][n];if(r.index=n,"backpack"===o&&(r.isBackpack=!0),Vo(r,!0),void 0!==r.styling&&Xi(r.styling,void 0===e.version||"2.0.0-beta"===e.version),void 0!==r.rowDesignGroups)for(var a=0;a<r.rowDesignGroups.length;a++)"object"===u(r.rowDesignGroups[a])&&(r.rowDesignGroups[a]=r.rowDesignGroups[a].id);if(u(r.image)&&(fo(r.image)?ai.value||(ai.value=vo(r.image)):ri.add(r.image)),void 0!==r.objects)for(var c=0;c<r.objects.length;c++){var l=r.objects[c];if(l.index=c,Vo(l,!1),void 0!==l.styling&&Xi(l.styling,void 0===e.version||"2.0.0-beta"===e.version),l.multiplyPointtypeIsOn&&("string"==typeof l.pointTypeToMultiply&&(l.pointTypeToMultiply=[l.pointTypeToMultiply]),"number"==typeof l.startingSumAtMultiply&&(l.startingSumAtMultiply=[l.startingSumAtMultiply])),l.dividePointtypeIsOn&&("string"==typeof l.pointTypeToDivide&&(l.pointTypeToDivide=[l.pointTypeToDivide]),"number"==typeof l.startingSumAtDivide&&(l.startingSumAtDivide=[l.startingSumAtDivide])),l.fadeTransitionIsOn&&void 0!==l.fadeTransitionTime&&(l.fadeInTransitionTime=l.fadeTransitionTime,l.fadeOutTransitionTime=l.fadeTransitionTime,delete l.fadeTransitionTime),l.addToAllowChoice&&"string"==typeof l.idOfAllowChoice&&(l.idOfAllowChoice=[l.idOfAllowChoice]),void 0!==l.groups)for(var s=0;s<l.groups.length;s++)"object"===u(l.groups[s])&&(l.groups[s]=l.groups[s].id);if(void 0!==l.objectDesignGroups)for(var d=0;d<l.objectDesignGroups.length;d++)"object"===u(l.objectDesignGroups[d])&&(l.objectDesignGroups[d]=l.objectDesignGroups[d].id);l.isSelectableMultiple&&void 0!==l.numMultipleTimesMinus&&void 0===l.initMultipleTimesMinus&&(l.initMultipleTimesMinus=l.forcedActivated?0:l.numMultipleTimesMinus),u(l.image)&&(fo(l.image)?ai.value||(ai.value=vo(l.image)):ri.add(l.image));for(var f=0;f<l.addons.length;f++){var v=l.addons[f];void 0!==v.template&&0!==v.template||(v.template=1),v.parentId=l.id,u(v.image)&&(fo(v.image)?ai.value||(ai.value=vo(v.image)):ri.add(v.image))}}}else if("objectDesignGroups"===o||"rowDesignGroups"===o)for(var g=0;g<e[o].length;g++){var p=e[o][g];void 0===p.activatedId&&(p.activatedId=""),void 0===p.elements&&(p.elements=[]),void 0===p.backpackElements&&(p.backpackElements=[]);for(var m=0;m<p.elements.length;m++)"object"===u(p.elements[m])&&(p.elements[m]=p.elements[m].id);for(var h=0;h<p.backpackElements.length;h++)"object"===u(p.backpackElements[h])&&(p.backpackElements[h]=p.backpackElements[h].id);$o(p),Xi(p.styling,void 0===e.version||"2.0.0-beta"===e.version)}else if("pointTypes"===o)for(var b=0;b<e[o].length;b++){var w=e[o][b];void 0===w.initValue&&(w.initValue=w.startingSum),"object"===u(w.positiveColor)&&void 0!==w.positiveColor.hexa&&(w.positiveColor=w.positiveColor.hexa),"object"===u(w.negativeColor)&&void 0!==w.negativeColor.hexa&&(w.negativeColor=w.negativeColor.hexa),"object"===u(w.privateColor)&&void 0!==w.privateColor.hexa&&(w.privateColor=w.privateColor.hexa),"object"===u(w.privateNegativeColor)&&void 0!==w.privateNegativeColor.hexa&&(w.privateNegativeColor=w.privateNegativeColor.hexa)}else if("groups"===o)for(var T=0;T<e[o].length;T++){var I=e[o][T];void 0===I.elements&&(I.elements=[]),void 0===I.rowElements&&(I.rowElements=[]);for(var y=0;y<I.elements.length;y++)"object"===u(I.elements[y])&&(I.elements[y]=I.elements[y].id);for(var x=0;x<I.rowElements.length;x++)"object"===u(I.rowElements[x])&&(I.rowElements[x]=I.rowElements[x].id)}}else"object"===u(e[o])&&"styling"===o&&Xi(e[o],void 0===e.version||"2.0.0-beta"===e.version,!0)}$t.clear(),qt.clear(),Lt.clear(),Wt.clear(),Et.clear(),Ut.clear(),Nt.clear(),zt.clear(),Gt.clear(),_t.clear(),Yt.splice(0);for(var S=Object.keys(Pt),C=0;C<S.length;C++){var A=S[C];Pt.hasOwnProperty(A)?app[A]=Pt[A]:delete app[A]}for(var B=Object.keys(e),O=0;O<B.length;O++){var k=B[O];app[k]=e[k]}for(var M=0;M<app.googleFonts.length;M++){var F=app.googleFonts[M].replace(/ /g,"+"),D="https://fonts.googleapis.com/css2?family=".concat(F,"&display=swap"),R=document.createElement("link");R.id=F,R.rel="stylesheet",R.href=D,R.crossOrigin="anonymous",document.head.appendChild(R)}for(var j=0;j<app.customFonts.length;j++){var P=app.customFonts[j],$=document.createElement("link");$.id=P,$.rel="stylesheet",$.href=P,$.crossOrigin="anonymous",document.head.appendChild($)}for(var V=0;V<app.pointTypes.length;V++){var q=app.pointTypes[V];void 0!==q.id&&""!==q.id||(q.id=Fi(0,4)),q.id=Li(q.id,qt),void 0===q.initValue&&(q.initValue=q.startingSum),void 0===q.isNotShownObjects&&""!==q.activatedId&&(q.isNotShownObjects=!0),void 0===q.isNotShownPointBar&&""!==q.activatedId&&(q.isNotShownPointBar=!0),qt.set(q.id,q)}for(var L=0;L<app.rows.length;L++){var W=app.rows[L];void 0!==W.id&&""!==W.id||(W.id=Ai(0,4)),W.id=Li(W.id,Lt),Lt.set(W.id,W);for(var E=0;E<W.objects.length;E++){var U=W.objects[E];void 0!==U.id&&""!==U.id||(U.id=Oi(0,4)),U.id=Li(U.id,Wt),Wt.set(U.id,{choice:U,row:W});for(var N=0;N<U.scores.length;N++){var z=U.scores[N];void 0!==z.idx&&""!==z.idx||(z.idx=Ri(0,5)),z.idx=Li(z.idx,Ht),Ht.add(z.idx)}}}for(var G=0;G<app.backpack.length;G++){var _=app.backpack[G];void 0!==_.id&&""!==_.id||(_.id=Ai(0,4)),_.id=Li(_.id,Lt),Lt.set(_.id,_);for(var H=0;H<_.objects.length;H++){var Y=_.objects[H];void 0!==Y.id&&""!==Y.id||(Y.id=Oi(0,4)),Y.id=Li(Y.id,Wt),Wt.set(Y.id,{choice:Y,row:_});for(var Z=0;Z<Y.scores.length;Z++){var J=Y.scores[Z];void 0!==J.idx&&""!==J.idx||(J.idx=Ri(0,5)),J.idx=Li(J.idx,Ht),Ht.add(J.idx)}}}for(var X=0;X<app.groups.length;X++){var K=app.groups[X];void 0!==K.id&&""!==K.id||(K.id=Mi(0,4)),K.id=Li(K.id,Et),Et.set(K.id,app.groups[X]);for(var Q=K.elements.length-1;Q>=0;Q--)Wt.has(K.elements[Q])||K.elements.splice(Q,1);for(var ee=K.rowElements.length-1;ee>=0;ee--)Lt.has(K.rowElements[ee])||K.rowElements.splice(ee,1)}for(var te=0;te<app.rows.length;te++){var ie=app.rows[te];if(void 0!==ie.groups)for(var oe=ie.groups.length-1;oe>=0;oe--)Et.has(ie.groups[oe])||ie.groups.splice(oe,1);for(var ne=0;ne<ie.objects.length;ne++){var re=ie.objects[ne];if(void 0!==re.groups)for(var ae=re.groups.length-1;ae>=0;ae--)Et.has(re.groups[ae])||re.groups.splice(ae,1)}}for(var ce=0;ce<app.backpack.length;ce++){var le=app.backpack[ce];if(void 0!==le.groups)for(var se=le.groups.length-1;se>=0;se--)Et.has(le.groups[se])||le.groups.splice(se,1);for(var ue=0;ue<le.objects.length;ue++){var de=le.objects[ue];if(void 0!==de.groups)for(var fe=de.groups.length-1;fe>=0;fe--)Et.has(de.groups[fe])||de.groups.splice(fe,1)}}for(var ve=0;ve<app.words.length;ve++){var ge=app.words[ve];void 0!==ge.id&&""!==ge.id||(ge.id=Bi(0,4)),ge.id=Li(ge.id,Nt),Nt.set(ge.id,app.words[ve])}for(var pe=0;pe<app.variables.length;pe++){var me=app.variables[pe];void 0!==me.id&&""!==me.id||(me.id=Di(0,4)),me.id=Li(me.id,zt),zt.set(me.id,app.variables[pe])}if(void 0!==app.rowDesignGroups)for(var he=0;he<app.rowDesignGroups.length;he++){var be=app.rowDesignGroups[he];void 0!==be.id&&""!==be.id||(be.id=ki(0,4)),be.id=Li(be.id,Gt),Gt.set(be.id,be)}if(void 0!==app.objectDesignGroups)for(var we=0;we<app.objectDesignGroups.length;we++){var Te=app.objectDesignGroups[we];void 0!==Te.id&&""!==Te.id||(Te.id=ki(0,4)),Te.id=Li(Te.id,_t),_t.set(app.objectDesignGroups[we].id,app.objectDesignGroups[we])}if(void 0!==app.globalRequirements)for(var Ie=0;Ie<app.globalRequirements.length;Ie++){var ye=app.globalRequirements[Ie];Ut.set(ye.id,ye)}app.activated.length>0&&so(app.activated.join(",")),void 0!==app.customCSS&&function(e){var t=document.getElementById("customCSS");t?""===e?(t.remove(),delete app.customCSS):(t.textContent=e,app.customCSS=e):((t=document.createElement("style")).id="customCSS",t.textContent=e,app.customCSS=e,document.head.appendChild(t))}(app.customCSS),app.buildAutoSaveIsOn&&(vi&&vi.abort(),pi()),"boolean"!=typeof app.isMute&&(app.curVolume=100,app.isMute=!1)}function Lo(e){return Wo.apply(this,arguments)}function Wo(){return(Wo=f(l().m(function e(t){var i,o;return l().w(function(e){for(;;)if(0===e.n)return i=t.querySelectorAll("img"),o=Array.from(i).map(function(e){return e.complete?Promise.resolve():new Promise(function(t){e.onload=t,e.onerror=t})}),e.a(2,Promise.all(o).then(function(){}))},e)}))).apply(this,arguments)}function Eo(e){e.querySelectorAll("img").forEach(function(e){"lazy"===e.loading&&(e.loading="eager")})}function Uo(e){return No.apply(this,arguments)}function No(){return(No=f(l().m(function e(t){var i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:return i=t.querySelectorAll("*"),o=[],i.forEach(function(e){var t=getComputedStyle(e).borderImageSource.match(/url\(["']?(.*?)["']?\)/);t&&t[1]&&o.push(t[1])}),n=o.map(function(e){return new Promise(function(t){var i=new Image;i.src=e,i.onload=t,i.onerror=t})}),e.n=1,Promise.all(n);case 1:return e.a(2)}},e)}))).apply(this,arguments)}function zo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return new Promise(function(t){var i=0;requestAnimationFrame(function o(){if(++i>=e)return t();requestAnimationFrame(o)})})}function Go(){return(Go=f(l().m(function e(i){var o,n,r,a,c,s,u,d,f,v,g,p,m,h,b,w;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!i){e.n=14;break}return o=[],e.p=1,ei.labelText="Downloading image...",ei.isOpen=!0,Eo(i),e.n=2,Lo(i);case 2:return e.n=3,It({usePromise:!0});case 3:if(n=e.v,r=n.height,a=i.offsetHeight,c=i.offsetWidth,ti.isSingleFile||!(a>r)){e.n=7;break}s=0,u=1,d=Math.ceil(a/r),f=l().m(function e(){var t,o,n,f,v,g,p;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=Math.min(r,a-s),o=document.createElement("div"),ei.labelText="Splitting large image...(".concat(u," / ").concat(d,")"),ei.isOpen=!0,app.styling.useBackpackDesign?(app.styling.backpackBgImage&&(o.style.backgroundImage=app.styling.backpackBgImage),app.styling.backpackBgColor&&(o.style.backgroundColor=Xo(app.styling.backpackBgColor)),app.styling.isBackpackBgRepeat?o.style.backgroundRepeat="repeat":app.styling.isBackpackBgFitIn?o.style.backgroundSize="100% 100%":o.style.backgroundSize="cover"):(app.styling.backgroundImage&&(o.style.backgroundImage=app.styling.backgroundImage),app.styling.backgroundColor&&(o.style.backgroundColor=Xo(app.styling.backgroundColor)),app.styling.isBackgroundRepeat?o.style.backgroundRepeat="repeat":app.styling.isBackgroundFitIn?o.style.backgroundSize="100% 100%":o.style.backgroundSize="cover"),i.parentElement&&i.parentElement.classList.contains("mdc-dialog__content")&&o.classList.add("backpack-wrapper"),o.style.width="".concat(c,"px"),o.style.height="".concat(t,"px"),o.style.overflow="hidden",o.style.position="absolute",o.style.display="block",o.style.top="0",o.style.left="0",o.style.zIndex="-9999",o.style.pointerEvents="none",Eo(n=i.cloneNode(!0)),n.style.position="relative",n.style.top="-".concat(s,"px"),o.appendChild(n),document.body.appendChild(o),e.n=1,Lo(o);case 1:return e.n=2,Uo(o);case 2:return e.n=3,zo(5);case 3:return e.p=3,e.n=4,A(o,{filter:function(e){var t,i;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("mdc-top-app-bar")||null!==(i=e.classList)&&void 0!==i&&i.contains("hidden")||e.nodeType===Node.COMMENT_NODE)}});case 4:if(f=e.v){e.n=5;break}throw new Error("blob creation failed");case 5:v=URL.createObjectURL(f),(g=document.createElement("a")).href=v,g.download="Build_".concat(xi(),"_part").concat(u++,".png"),g.target="_blank",g.click(),setTimeout(function(){URL.revokeObjectURL(v)},1e3),e.n=7;break;case 6:e.p=6,p=e.v,ei.labelText="Download failed: Restricted content detected.",ei.isOpen=!0,console.error(p);case 7:return e.p=7,document.body.removeChild(o),e.f(7);case 8:s+=r;case 9:return e.a(2)}},e,null,[[3,6,7,8]])});case 4:if(!(s<a)){e.n=6;break}return e.d(t(f()),5);case 5:e.n=4;break;case 6:ei.labelText="Image downloads complete.",ei.isOpen=!0,e.n=10;break;case 7:return e.n=8,A(i,{filter:function(e){var t,i;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("mdc-top-app-bar")||null!==(i=e.classList)&&void 0!==i&&i.contains("hidden")||e.nodeType===Node.COMMENT_NODE)}});case 8:if(v=e.v){e.n=9;break}throw new Error("blob creation failed");case 9:g=URL.createObjectURL(v),(p=document.createElement("a")).href=g,p.download="Build_".concat(xi(),".png"),p.target="_blank",p.click(),setTimeout(function(){URL.revokeObjectURL(g)},1e3),ei.labelText="Image download complete.",ei.isOpen=!0;case 10:e.n=12;break;case 11:e.p=11,w=e.v,ei.labelText="Download failed: Restricted content detected.",ei.isOpen=!0,console.error(w);case 12:for(e.p=12,m=0;m<o.length;m++)(b=o[m]).style.removeProperty("height"),""===(null===(h=b.getAttribute("style"))||void 0===h?void 0:h.trim())&&b.removeAttribute("style");return e.f(12);case 13:e.n=15;break;case 14:ei.labelText="Download failed: Cannot find window.",ei.isOpen=!0;case 15:return e.a(2)}},e,null,[[1,11,12,13]])}))).apply(this,arguments)}function _o(e,t,i){void 0===e.templateStack&&(e.templateStack=[],e.defaultTemplate=void 0!==e.template?e.template:1),e.templateStack.push({id:t,data:i}),e.template=i}function Ho(e,t){if(void 0!==e.templateStack){var i=e.templateStack.findIndex(function(e){return e.id===t});-1!==i&&e.templateStack.splice(i,1);var o=e.templateStack.length;o>0?e.template=e.templateStack[o-1].data:(e.template=void 0!==e.defaultTemplate?e.defaultTemplate:1,delete e.templateStack)}}function Yo(e,t,i){void 0===e.widthStack&&(e.widthStack=[],e.defaultWidth=void 0!==e.width?e.width:"col-md-3"),e.widthStack.push({id:t,data:i}),e.width=i}function Zo(e,t){if(void 0!==e.widthStack){var i=e.widthStack.findIndex(function(e){return e.id===t});-1!==i&&e.widthStack.splice(i,1);var o=e.widthStack.length;o>0?e.width=e.widthStack[o-1].data:(e.width=void 0!==e.defaultWidth?e.defaultWidth:"col-md-3",delete e.widthStack)}}var Jo=CSS.supports("color","#00000080");function Xo(e){if(void 0===e)return"";if(Jo||!/^#([\da-f]{8})$/i.test(e))return e;var t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16),n=parseInt(e.slice(7,9),16)/255;return"rgba(".concat(t,", ").concat(i,", ").concat(o,", ").concat(n.toFixed(3),")")}var Ko=s({anchor:null,text:"",isVisible:!0}),Qo=0;function en(e,t){var i="string"==typeof t?t:t.text;function o(){var o="string"==typeof t?void 0!==app.tooltipDelay?app.tooltipDelay:1e3:t.delay;0!==Qo&&(clearTimeout(Qo),Qo=0),o>0?Qo=window.setTimeout(function(){Ko.anchor=e,Ko.text=i,Ko.isVisible=!0},o):(Ko.anchor=e,Ko.text=i,Ko.isVisible=!0)}function n(){0!==Qo&&(clearTimeout(Qo),Qo=0),Ko.isVisible=!1}return e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",n),e.addEventListener("focusin",o),e.addEventListener("focusout",n),{destroy:function(){Ko.isVisible=!1,Ko.anchor=null,e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",n),e.removeEventListener("focusin",o),e.removeEventListener("focusout",n)}}}var tn=k('<div class="mdc-tooltip" role="tooltip" style="z-index: 9999;"><div class="mdc-tooltip__surface"><!></div></div>');var on=k("<div><!></div>");var nn=function(e,t){var i=N(t,"text",3,""),o=N(t,"innerClass",3,""),n=on(),r=E(n);z(r,function(){var e;return null!==(e=t.children)&&void 0!==e?e:G}),_(n,function(e,t){return null==en?void 0:en(e,t)},function(){return{text:i(),delay:0}}),H(function(){return Y(n,1,Z(o()))}),D(e,n)};var rn=k("<input/>");function an(e,t){j(t,!0);var i,o=N(t,"use",19,function(){return[]}),n=N(t,"class",3,""),r=N(t,"type",3,"text"),a=N(t,"placeholder",3," "),c=N(t,"value",15),l=N(t,"files",15,null),u=N(t,"dirty",15,!1),d=N(t,"invalid",15,!1),f=N(t,"updateInvalid",3,!0),v=N(t,"initialInvalid",3,!1),g=N(t,"emptyValueNull",19,function(){return null===c()}),p=N(t,"emptyValueUndefined",19,function(){return void 0===c()}),b=N(t,"step",3,"any"),w=K(t,["$$slots","$$events","$$legacy","use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","initialInvalid","emptyValueNull","emptyValueUndefined","step"]),T=s({}),I=s({});function y(e){return""===e?Number.NaN:+e}function x(e){if("file"!==r())if(""===e.currentTarget.value&&g())c(null);else if(""===e.currentTarget.value&&p())c(void 0);else switch(r()){case"number":c(y(e.currentTarget.value)),""!==e.currentTarget.value&&"0"!==e.currentTarget.value||("-"===e.data?(c("-0"),e.target.value="-0"):"deleteContentBackward"===e.inputType||"insertFromPaste"!==e.inputType||isNaN(parseInt(e.data))?(c("0"),e.target.value="0"):(c(parseFloat(e.data)),e.target.value=parseFloat(e.data)));break;case"range":c(y(e.currentTarget.value));break;default:c(e.currentTarget.value)}else l(e.currentTarget.files)}function S(){return i}B(function(){"file"===r()?delete I.value:I.value=null==c()?"":c()}),Q(function(){f()&&v()&&d(S().matches(":invalid"))});var C={getAttr:function(e){return e in T?void 0!==T[e]?T[e]:null:S().getAttribute(e)},addAttr:function(e,t){T[e]!==t&&(T[e]=t)},removeAttr:function(e){e in T&&null==T[e]||(T[e]=void 0)},focus:function(){S().focus()},blur:function(){S().blur()},getElement:S},A=rn(),O=function(e){var i;"file"!==r()&&x(e),null===(i=t.oninput)||void 0===i||i.call(t,e)},k=function(e){var i;!function(e){"file"!==r()&&"range"!==r()||x(e),u(!0),f()&&d(S().matches(":invalid"))}(e),null===(i=t.onchange)||void 0===i||i.call(t,e)};return ee(A,function(e){return m(m(m(m({class:e,type:r(),placeholder:a()},I),T),{},{step:b()},w),{},{oninput:O,onchange:k})},[function(){return te(h({"mdc-text-field__input":!0},n(),!0))}],void 0,void 0,!0),F(A,function(e){return i=e},function(){return i}),_(A,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},o),D(e,A),R(C)}var cn=k("<textarea></textarea>");function ln(e,t){j(t,!0);var i,o=N(t,"use",19,function(){return[]}),n=N(t,"class",3,""),r=N(t,"style",3,""),a=N(t,"value",15,""),c=N(t,"dirty",15,!1),l=N(t,"invalid",15,!1),u=N(t,"updateInvalid",3,!0),d=N(t,"initialInvalid",3,!1),f=N(t,"resizable",3,!0),v=K(t,["$$slots","$$events","$$legacy","use","class","style","value","dirty","invalid","updateInvalid","initialInvalid","resizable"]),g=s({});function p(){return i}Q(function(){u()&&d()&&l(p().matches(":invalid"))});var b={getAttr:function(e){return e in g?void 0!==g[e]?g[e]:null:p().getAttribute(e)},addAttr:function(e,t){g[e]!==t&&(g[e]=t)},removeAttr:function(e){e in g&&null==g[e]||(g[e]=void 0)},focus:function(){p().focus()},blur:function(){p().blur()},getElement:p},w=cn(),T=function(e){var i;c(!0),u()&&l(p().matches(":invalid")),null===(i=t.onchange)||void 0===i||i.call(t,e)};return ee(w,function(e){return m(m(m({class:e,style:"".concat(f()?"":"resize: none; ").concat(r())},g),v),{},{onchange:T})},[function(){return te(h({"mdc-text-field__input":!0},n(),!0))}]),F(w,function(e){return i=e},function(){return i}),_(w,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},o),oe(function(){return ne(w,a)}),D(e,w),R(b)}var sn=k('<span class="mdc-text-field__ripple"></span>'),un=k("<!> <!>",1),dn=k("<span><!> <!></span>"),fn=k("<!> <!> <!>",1),vn=k("<label><!> <!> <!> <!> <!> <!> <!></label>"),gn=k("<div><!> <!> <!> <!> <!></div>"),pn=k("<!> <!>",1);function mn(e,t){j(t,!0);var i=se.applyPassive,o=function(){};function n(e){return e===o}var r=N(t,"use",19,function(){return[]}),a=N(t,"class",3,""),c=N(t,"style",3,""),l=N(t,"ripple",3,!0),u=N(t,"disabled",3,!1),d=N(t,"required",3,!1),f=N(t,"textarea",3,!1),v=N(t,"variant",19,function(){return f()?"outlined":"standard"}),p=N(t,"noLabel",3,!1),b=N(t,"type",3,"text"),w=N(t,"value",15),T=N(t,"files",15,o),I=N(t,"invalid",15,o),y=N(t,"updateInvalid",19,function(){return n(I())}),x=N(t,"initialInvalid",3,!1),S=N(t,"dirty",15,!1),C=N(t,"validateOnValueChange",19,y),A=N(t,"useNativeValidation",19,y),k=N(t,"withLeadingIcon",3,o),M=N(t,"withTrailingIcon",3,o),V=N(t,"input",7),W=N(t,"floatingLabel",7),oe=N(t,"lineRipple",7),ne=N(t,"notchedOutline",7),Se=N(t,"alwaysFloat",3,!1),Ce=K(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","initialInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","children","leadingIcon","trailingIcon","internalCounter","line","helper","alwaysFloat"]),Ae=void 0!==w()||void 0===w()&&t.input$emptyValueUndefined||!n(T());n(T())&&T(null),n(I())&&I(!1);var Be,Oe,ke=$(s(document.createElement("div"))),Me=$(void 0),Fe=new le,De=s({}),Re=s({}),je=$(void 0),Pe=$(!1),$e=$(s(x())),Ve=re("SMUI:addLayoutListener"),qe=new Promise(function(e){return Oe=e}),Le=void 0,We=void 0,Ee=void 0,Ue=void 0,Ne=pe(function(){return V()&&V().getElement()});B(function(){(S()||P($e)||!y())&&P(Me)&&P(Me).isValid()!==!I()&&(y()?I(!P(Me).isValid()):P(Me).setValid(!I()))}),B(function(){P(Me)&&P(Me).getValidateOnValueChange()!==C()&&P(Me).setValidateOnValueChange(!n(C())&&C())}),B(function(){P(Me)&&P(Me).setUseNativeValidation(!!n(A())||A())}),B(function(){P(Me)&&P(Me).setDisabled(u())});var ze=w();function Ge(e){return e in De?void 0!==De[e]&&De[e]:Je().classList.contains(e)}function _e(e){De[e]||(De[e]=!0)}function He(e){e in De&&!De[e]||(De[e]=!1)}function Ye(e,t){Re[e]!=t&&(""===t||null==t?delete Re[e]:Re[e]=t)}function Ze(){if(P(Me)){var e=P(Me).shouldFloat;P(Me).notchOutline(e)}}function Je(){return P(ke)}B(function(){if(P(Me)&&Ae&&ze!==w()){ze=w();var e="".concat(null==w()?"":w());P(Me).getValue()!==e&&P(Me).setValue(e)}}),Ve&&(Be=Ve(Ze)),ae("SMUI:textfield:leading-icon:mount",function(e){Le=e}),ae("SMUI:textfield:leading-icon:unmount",function(){Le=void 0}),ae("SMUI:textfield:trailing-icon:mount",function(e){We=e}),ae("SMUI:textfield:trailing-icon:unmount",function(){We=void 0}),ae("SMUI:textfield:helper-text:id",function(e){U(je,e,!0)}),ae("SMUI:textfield:helper-text:mount",function(e){Ee=e}),ae("SMUI:textfield:helper-text:unmount",function(){U(je,void 0),Ee=void 0}),ae("SMUI:textfield:character-counter:mount",function(e){Ue=e}),ae("SMUI:textfield:character-counter:unmount",function(){Ue=void 0}),Q(function(){if(U(Me,new ce({addClass:_e,removeClass:He,hasClass:Ge,registerTextFieldInteractionHandler:function(e,t){return Fe.on(Je(),e,t)},deregisterTextFieldInteractionHandler:function(e,t){return Fe.off(Je(),e,t)},registerValidationAttributeChangeHandler:function(e){var t=new MutationObserver(function(t){A()&&e(function(e){return e.map(function(e){return e.attributeName}).filter(function(e){return e})}(t))});return V()&&t.observe(V().getElement(),{attributes:!0}),t},deregisterValidationAttributeChangeHandler:function(e){e.disconnect()},getNativeInput:function(){var e;return void 0!==(null===(e=V())||void 0===e?void 0:e.getElement())?V().getElement():null},setInputAttr:function(e,t){var i;null===(i=V())||void 0===i||i.addAttr(e,t)},removeInputAttr:function(e){var t;null===(t=V())||void 0===t||t.removeAttr(e)},isFocused:function(){var e;return document.activeElement===(null===(e=V())||void 0===e?void 0:e.getElement())},registerInputInteractionHandler:function(e,t){var o,n=null===(o=V())||void 0===o?void 0:o.getElement();if(n){var r=i();Fe.on(n,e,t,"boolean"==typeof r?{capture:r}:r)}},deregisterInputInteractionHandler:function(e,t){var i,o=null===(i=V())||void 0===i?void 0:i.getElement();o&&Fe.off(o,e,t)},floatLabel:function(e){return W()&&W().float(e||Se())},getLabelWidth:function(){return W()?W().getWidth():0},hasLabel:function(){return!!W()},shakeLabel:function(e){return W()&&W().shake(e)},setLabelRequired:function(e){return W()&&W().setRequired(e)},activateLineRipple:function(){return oe()&&oe().activate()},deactivateLineRipple:function(){return oe()&&oe().deactivate()},setLineRippleTransformOrigin:function(e){return oe()&&oe().setRippleCenter(e)},closeOutline:function(){return ne()&&ne().closeNotch()},hasOutline:function(){return!!ne()},notchOutline:function(e){return ne()&&ne().notch(e)}},{get helperText(){return Ee},get characterCounter(){return Ue},get leadingIcon(){return Le},get trailingIcon(){return We}}),!0),Ae){var e;if(null==V())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null===(e=P(Me))||void 0===e||e.init()}else ue().then(function(){var e;if(null==V())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null===(e=P(Me))||void 0===e||e.init()});return Oe(),function(){var e;null===(e=P(Me))||void 0===e||e.destroy(),Fe.clear()}}),O(function(){Be&&Be()});var Xe={focus:function(){var e;null===(e=V())||void 0===e||e.focus()},blur:function(){var e;null===(e=V())||void 0===e||e.blur()},layout:Ze,getElement:Je},Ke=pn(),Qe=L(Ke),et=function(e){var i=vn();ee(i,function(e,t,i){return m({class:e,style:t,for:void 0},i)},[function(){return te(m(m({"mdc-text-field":!0,"mdc-text-field--disabled":u(),"mdc-text-field--textarea":f(),"mdc-text-field--filled":"filled"===v(),"mdc-text-field--outlined":"outlined"===v(),"smui-text-field--standard":"standard"===v()&&!f(),"mdc-text-field--no-label":p()||null==t.label,"mdc-text-field--label-floating":P(Pe)||null!=w()&&""!==w(),"mdc-text-field--with-leading-icon":n(k())?t.leadingIcon:k(),"mdc-text-field--with-trailing-icon":n(M())?t.trailingIcon:M(),"mdc-text-field--with-internal-counter":f()&&t.internalCounter,"mdc-text-field--invalid":I()},De),{},h({},a(),!0)))},function(){return Object.entries(Re).map(function(e){var t=g(e,2),i=t[0],o=t[1];return"".concat(i,": ").concat(o,";")}).concat([c()]).join(" ")},function(){return ve(Ce,["input$","label$","ripple$","outline$","helperLine$"])}]);var o=E(i),s=function(e){var i=un(),o=L(i),n=function(e){var t=sn();D(e,t)};de(o,function(e){"filled"===v()&&e(n)});var r=fe(o,2),a=function(e){var i=pe(function(){return P(Pe)||Se()||null!=w()&&""!==w()&&("number"!=typeof w()||!isNaN(w()))}),o=pe(function(){return he(Ce,"label$")});F(we(e,X({get floatAbove(){return P(i)},get required(){return d()},wrapped:!0},function(){return P(o)},{children:function(e,i){var o=q(),n=L(o),r=function(e){},a=function(e){var i=q(),o=L(i),n=function(e){var i=Te();H(function(){return Ie(i,t.label)}),D(e,i)},r=function(e){var i=q(),o=L(i);z(o,function(){return t.label}),D(e,i)};de(o,function(e){"string"==typeof t.label?e(n):e(r,!1)},!0),D(e,i)};de(n,function(e){null==t.label?e(r):e(a,!1)}),D(e,o)},$$slots:{default:!0}})),function(e){return W(e)},function(){return W()})};de(r,function(e){p()||null==t.label||e(a)}),D(e,i)};de(o,function(e){"outlined"!==v()&&e(s)});var x=fe(o,2),C=function(e){var i=pe(function(){return p()||null==t.label}),o=pe(function(){return he(Ce,"outline$")});F(be(e,X({get noLabel(){return P(i)}},function(){return P(o)},{children:function(e,i){var o=q(),n=L(o),r=function(e){var i=pe(function(){return P(Pe)||Se()||null!=w()&&""!==w()&&("number"!=typeof w()||!isNaN(w()))}),o=pe(function(){return he(Ce,"label$")});F(we(e,X({get floatAbove(){return P(i)},get required(){return d()},wrapped:!0},function(){return P(o)},{children:function(e,i){var o=q(),n=L(o),r=function(e){},a=function(e){var i=q(),o=L(i),n=function(e){var i=Te();H(function(){return Ie(i,t.label)}),D(e,i)},r=function(e){var i=q(),o=L(i);z(o,function(){return t.label}),D(e,i)};de(o,function(e){"string"==typeof t.label?e(n):e(r,!1)},!0),D(e,i)};de(n,function(e){null==t.label?e(r):e(a,!1)}),D(e,o)},$$slots:{default:!0}})),function(e){return W(e)},function(){return W()})};de(n,function(e){p()||null==t.label||e(r)}),D(e,o)},$$slots:{default:!0}})),function(e){return ne(e)},function(){return ne()})};de(x,function(e){"outlined"===v()&&e(C)});var A=fe(x,2);ge(A,{key:"SMUI:textfield:icon:leading",value:!0,children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}});var B=fe(A,2);z(B,function(){var e;return null!==(e=t.children)&&void 0!==e?e:G});var O=fe(B,2),$=function(e){var i=dn(),o=E(i),n=pe(function(){return he(Ce,"input$")});F(ln(o,X({get disabled(){return u()},get required(){return d()},get updateInvalid(){return y()},get initialInvalid(){return P($e)},get"aria-controls"(){return P(je)},get"aria-describedby"(){return P(je)}},function(){return P(n)},{onblur:function(e){var i;U(Pe,!1),U($e,!0),ye(Je(),"blur",e),null===(i=t.input$onblur)||void 0===i||i.call(t,e)},onfocus:function(e){var i;U(Pe,!0),ye(Je(),"focus",e),null===(i=t.input$onfocus)||void 0===i||i.call(t,e)},get value(){return w()},set value(e){w(e)},get dirty(){return S()},set dirty(e){S(e)},get invalid(){return I()},set invalid(e){I(e)}})),function(e){return V(e)},function(){return V()});var r=fe(o,2);z(r,function(){var e;return null!==(e=t.internalCounter)&&void 0!==e?e:G}),H(function(e){return Y(i,1,e)},[function(){return Z(te({"mdc-text-field__resizer":!("input$resizable"in Ce)||t.input$resizable}))}]),D(e,i)},N=function(e){var i=fn(),o=L(i),n=function(e){var i=q(),o=L(i),n=function(e){!function(e,t){j(t,!0);var i,o=K(t,["$$slots","$$events","$$legacy","children"]),n={getElement:function(){return i.getElement()}};F(J(e,X({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--prefix",tag:"span"},function(){return o},{children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}})),function(e){return i=e},function(){return i}),R(n)}(e,{children:function(e,i){var o=Te();H(function(){return Ie(o,t.prefix)}),D(e,o)},$$slots:{default:!0}})},r=function(e){var i=q(),o=L(i);z(o,function(){var e;return null!==(e=t.prefix)&&void 0!==e?e:G}),D(e,i)};de(o,function(e){"string"==typeof t.prefix?e(n):e(r,!1)}),D(e,i)};de(o,function(e){null!=t.prefix&&e(n)});var r=fe(o,2),a=pe(function(){return he(Ce,"input$")});F(an(r,X({get type(){return b()},get disabled(){return u()},get required(){return d()},get updateInvalid(){return y()},get initialInvalid(){return P($e)},get"aria-controls"(){return P(je)},get"aria-describedby"(){return P(je)}},function(){return p()&&null!=t.label&&"string"==typeof t.label?{placeholder:t.label}:{}},function(){return P(a)},{onblur:function(e){var i;U(Pe,!1),U($e,!0),ye(Je(),"blur",e),null===(i=t.input$onblur)||void 0===i||i.call(t,e)},onfocus:function(e){var i;U(Pe,!0),ye(Je(),"focus",e),null===(i=t.input$onfocus)||void 0===i||i.call(t,e)},get value(){return w()},set value(e){w(e)},get files(){return T()},set files(e){T(e)},get dirty(){return S()},set dirty(e){S(e)},get invalid(){return I()},set invalid(e){I(e)}})),function(e){return V(e)},function(){return V()});var c=fe(r,2),l=function(e){var i=q(),o=L(i),n=function(e){!function(e,t){j(t,!0);var i,o=K(t,["$$slots","$$events","$$legacy","children"]),n={getElement:function(){return i.getElement()}};F(J(e,X({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--suffix",tag:"span"},function(){return o},{children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}})),function(e){return i=e},function(){return i}),R(n)}(e,{children:function(e,i){var o=Te();H(function(){return Ie(o,t.suffix)}),D(e,o)},$$slots:{default:!0}})},r=function(e){var i=q(),o=L(i);z(o,function(){var e;return null!==(e=t.suffix)&&void 0!==e?e:G}),D(e,i)};de(o,function(e){"string"==typeof t.suffix?e(n):e(r,!1)}),D(e,i)};de(c,function(e){null!=t.suffix&&e(l)}),D(e,i)};de(O,function(e){f()&&"string"==typeof w()?e($):e(N,!1)});var Q=fe(O,2);ge(Q,{key:"SMUI:textfield:icon:leading",value:!1,children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.trailingIcon)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}});var re=fe(Q,2),ae=function(e){var t=pe(function(){return he(Ce,"ripple$")});F(xe(e,X(function(){return P(t)})),function(e){return oe(e)},function(){return oe()})};de(re,function(e){"outlined"!==v()&&l()&&e(ae)}),F(i,function(e){return U(ke,e)},function(){return P(ke)}),_(i,function(e,t){var i;return null===(i=me)||void 0===i?void 0:i(e,t)},function(){return{ripple:"filled"===v(),unbounded:!1,addClass:_e,removeClass:He,addStyle:Ye,eventTarget:P(Ne),activeTarget:P(Ne),initPromise:qe}}),_(i,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},r),D(e,i)},tt=function(e){var i=gn();ee(i,function(e,t,i){return m({class:e,style:t},i)},[function(){return te(m(m({"mdc-text-field":!0,"mdc-text-field--disabled":u(),"mdc-text-field--textarea":f(),"mdc-text-field--filled":"filled"===v(),"mdc-text-field--outlined":"outlined"===v(),"smui-text-field--standard":"standard"===v()&&!f(),"mdc-text-field--no-label":p()||null==t.label,"mdc-text-field--with-leading-icon":t.leadingIcon,"mdc-text-field--with-trailing-icon":t.trailingIcon,"mdc-text-field--invalid":I()},De),{},h({},a(),!0)))},function(){return Object.entries(Re).map(function(e){var t=g(e,2),i=t[0],o=t[1];return"".concat(i,": ").concat(o,";")}).concat([c()]).join(" ")},function(){return ve(Ce,["input$","label$","ripple$","outline$","helperLine$"])}]);var o=E(i),n=function(e){var i=q(),o=L(i);z(o,function(){var e;return null!==(e=t.label)&&void 0!==e?e:G}),D(e,i)};de(o,function(e){"string"!=typeof t.label&&e(n)});var s=fe(o,2);ge(s,{key:"SMUI:textfield:icon:leading",value:!0,children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}});var d=fe(s,2);z(d,function(){var e;return null!==(e=t.children)&&void 0!==e?e:G});var b=fe(d,2);ge(b,{key:"SMUI:textfield:icon:leading",value:!1,children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.trailingIcon)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}});var w=fe(b,2);z(w,function(){var e;return null!==(e=t.line)&&void 0!==e?e:G}),F(i,function(e){return U(ke,e)},function(){return P(ke)}),_(i,function(e,t){var i;return null===(i=me)||void 0===i?void 0:i(e,t)},function(){return{ripple:l(),unbounded:!1,addClass:_e,removeClass:He,addStyle:Ye}}),_(i,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},r),D(e,i)};de(Qe,function(e){Ae?e(et):e(tt,!1)});var it=fe(Qe,2),ot=function(e){var i=pe(function(){return he(Ce,"helperLine$")});!function(e,t){j(t,!0);var i,o=K(t,["$$slots","$$events","$$legacy","children"]),n={getElement:function(){return i.getElement()}};F(J(e,X({_smuiClass:"mdc-text-field-helper-line",tag:"div"},function(){return o},{children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}})),function(e){return i=e},function(){return i}),R(n)}(e,X(function(){return P(i)},{children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.helper)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}}))};return de(it,function(e){t.helper&&e(ot)}),D(e,Ke),R(Xe)}var hn=k('<div class="row"><div class="col-12 mt-4 mb-2"><!></div> <div class="col-sm-6 col-12 mb-4"><!></div> <div class="col-sm-6 col-12 mb-4"><!></div> <div class="col-12"><!> <!></div></div>'),bn=k("<!> <!> <!>",1);function wn(e,t){j(t,!0);var i=N(t,"open",7),o=$(""),n=$(!1);function r(){var e=[],t=Array.from($t.keys()),i="";if(t.sort(function(e,t){var i=Wt.get(e),o=Wt.get(t);return void 0!==i&&void 0!==o?i.row.index!==o.row.index?i.row.index-o.row.index:i.choice.index-o.choice.index:0}),P(n)){for(var o="",r=0;r<t.length;r++){var a=Wt.get(t[r]);if(void 0!==a){var c=a.row,l=a.choice;""!==l.title&&(c.id!==o?(""!==o&&e.push("\n"),e.push("**".concat(""!==c.title?c.title:c.debugTitle||"","**\n")),l.isSelectableMultiple?e.push("".concat(l.title,"(x").concat(l.multipleUseVariable,")")):e.push("".concat(l.title)),o=c.id):l.isSelectableMultiple?e.push(", ".concat(l.title,"(x").concat(l.multipleUseVariable,")")):e.push(", ".concat(l.title)))}}i=e.join("")}else{for(var s=0;s<t.length;s++){var u=Wt.get(t[s]);if(void 0!==u){var d=u.choice;""!==d.title&&(d.isSelectableMultiple?e.push("".concat(d.title,"(x").concat(d.multipleUseVariable,")")):e.push("".concat(d.title)))}}i=e.join(", ")}var f=document.createElement("div");return f.innerHTML=i,f.textContent}Se(e,{surface$style:"width: 1920px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=bn(),a=L(i);Ce(a,{class:"px-3 pb-0 toolbar toolbar__dialog",tabindex:0,autofocus:!0,children:function(e,t){var i=Te("Build Form");D(e,i)},$$slots:{default:!0}});var c=fe(a,2);Ae(c,{children:function(e,t){var i=hn(),a=E(i),c=E(a);Be(c,{label:function(e){var t=Te("Separate Choice Titles by Row");D(e,t)},children:function(e,t){Oe(e,{color:"secondary",class:"switch-scale",get checked(){return P(n)},set checked(e){U(n,e,!0)}})},$$slots:{label:!0,default:!0}});var l=fe(a,2),s=E(l),u=pe(r);mn(s,{textarea:!0,get value(){return P(u)},label:"Current Activated Choices Titles",variant:"filled",input$rows:5});var d=fe(l,2),f=E(d),v=pe(yi);mn(f,{textarea:!0,get value(){return P(v)},label:"Current Activated Choices ID's",variant:"filled",input$rows:5});var g=fe(d,2),p=E(g);mn(p,{textarea:!0,label:"Area To Import Activated Choices With Lists Of Id's",variant:"filled",input$rows:5,get value(){return P(o)},set value(e){U(o,e,!0)}});var m=fe(p,2);ke(m,{onclickcapture:function(){return so(P(o))},variant:"raised",children:function(e,t){Me(e,{children:function(e,t){var i=Te("Import Choices/Clean if empty");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}});var l=fe(c,2);Fe(l,{children:function(e,t){ke(e,{action:"close",children:function(e,t){Me(e,{class:"dialog-actions--btn",children:function(e,t){var i=Te("Cancel");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}}),R()}var Tn=0,In=k("<div><!></div>");var yn=0,xn=k("<input/>"),Sn=k('<span class="mdc-select__ripple"></span>'),Cn=k('<div><!> <div><!> <!> <!> <!> <span><span> </span></span> <span><svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false"><polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon><polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon></svg></span> <!></div> <!></div> <!>',1);function An(e,t){j(t,!0);var i=function(){return qe(it,"$selectedTextStore",n)},o=g(Le(),2),n=o[0],r=o[1],a=function(){};function c(e){return e===a}var l,u=N(t,"use",19,function(){return[]}),d=N(t,"class",3,""),f=N(t,"style",3,""),v=N(t,"ripple",3,!0),p=N(t,"disabled",3,!1),b=N(t,"variant",3,"standard"),w=N(t,"noLabel",3,!1),T=N(t,"label",3,void 0),I=N(t,"value",15),y=N(t,"key",3,function(e){return e}),S=N(t,"dirty",15,!1),C=N(t,"invalid",15,a),A=N(t,"updateInvalid",19,function(){return c(C())}),k=N(t,"required",3,!1),M=N(t,"inputId",19,function(){return"SMUI-select-"+yn++}),V=N(t,"hiddenInput",3,!1),W=N(t,"withLeadingIcon",3,a),Y=N(t,"anchor$use",19,function(){return[]}),Z=N(t,"anchor$class",3,""),J=N(t,"selectedTextContainer$use",19,function(){return[]}),oe=N(t,"selectedTextContainer$class",3,""),ne=N(t,"selectedText$use",19,function(){return[]}),ce=N(t,"selectedText$class",3,""),le=N(t,"dropdownIcon$use",19,function(){return[]}),se=N(t,"dropdownIcon$class",3,""),ue=N(t,"menu$class",3,""),ge=N(t,"alwaysFloat",3,!1),Se=K(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","children","leadingIcon","helperText","alwaysFloat"]),Ce=c(C());c(C())&&C(!1);var Ae,Be,Oe,ke=$(void 0),Me=s({}),Fe=s({}),We=s({}),Ee=$(-1),Ue=pe(function(){return void 0!==Se.menu$id?Se.menu$id:M()+"-menu"}),Ne=$(void 0),ze=re("SMUI:addLayoutListener"),Ge=$(!1),_e=s({}),He=$(void 0),Ye=$(void 0),Ze=$(!1),Je=re("SMUI:select:context"),Xe=void 0,Ke=void 0,Qe=$(void 0),et=$(void 0),tt=$(void 0);ae("SMUI:list:role",""),ae("SMUI:list:nav",!1);var it=x("");ae("SMUI:select:selectedText",it);var ot=x(I());B(function(){Re(ot,I())}),ae("SMUI:select:value",ot),B(function(){P(ke)&&P(ke).getValue()!==y()(I())&&P(ke).setValue(y()(I()))});var nt=P(Ee);function rt(e){return e in Me?Me[e]:ht().classList.contains(e)}function at(e){Me[e]||(Me[e]=!0)}function ct(e){e in Me&&!Me[e]||(Me[e]=!1)}function lt(e,t){Fe[e]!=t&&(""===t||null==t?delete Fe[e]:Fe[e]=t)}function st(e){_e[e]||(_e[e]=!0)}function ut(e){e in _e&&!_e[e]||(_e[e]=!1)}function dt(e){return e in We?void 0!==We[e]?We[e]:null:ht().getAttribute(e)}function ft(e,t){We[e]!==t&&(We[e]=t)}function vt(e){e in We&&null==We[e]||(We[e]=void 0)}function gt(){return Oe.getOrderedList().map(function(e){return e.getValue()})}function pt(e){var t;null===(t=P(ke))||void 0===t||t.setUseDefaultValidation(e)}function mt(){var e;null===(e=P(ke))||void 0===e||e.layout()}function ht(){return l}B(function(){if(nt!==P(Ee))if(nt=P(Ee),P(ke))P(ke).setSelectedIndex(P(Ee),!1,!0);else{var e=gt();I()!==e[P(Ee)]&&I(e[P(Ee)])}}),B(function(){P(ke)&&P(ke).getDisabled()!==p()&&P(ke).setDisabled(p())}),B(function(){P(ke)&&S()&&P(ke).isValid()!==!C()&&(A()?C(!P(ke).isValid()):P(ke).setValid(!C()))}),B(function(){P(ke)&&P(ke).getRequired()!==k()&&P(ke).setRequired(k())}),ze&&(Be=ze(mt)),ae("SMUI:select:leading-icon:mount",function(e){Xe=e}),ae("SMUI:select:leading-icon:unmount",function(){Xe=void 0}),ae("SMUI:list:mount",function(e){Oe=e}),ae("SMUI:select:helper-text:id",function(e){U(Ne,e,!0)}),ae("SMUI:select:helper-text:mount",function(e){Ke=e}),ae("SMUI:select:helper-text:unmount",function(){U(Ne,void 0),Ke=void 0}),Q(function(){return U(ke,new je({setSelectedText:function(e){Re(it,e)},isSelectAnchorFocused:function(){return document.activeElement===Ae},getSelectAnchorAttr:dt,setSelectAnchorAttr:ft,removeSelectAnchorAttr:vt,addMenuClass:st,removeMenuClass:ut,openMenu:function(){U(Ge,!0)},closeMenu:function(){U(Ge,!1)},getAnchorElement:function(){return Ae},setMenuAnchorElement:function(e){U(He,e,!0)},setMenuAnchorCorner:function(e){U(Ye,e,!0)},setMenuWrapFocus:function(e){U(Ze,e,!0)},getSelectedIndex:function(){return P(Ee)},setSelectedIndex:function(e){nt=e,U(Ee,e,!0),I(gt()[P(Ee)])},focusMenuItemAtIndex:function(e){Oe.focusItemAtIndex(e)},getMenuItemCount:function(){return Oe.items.length},getMenuItemValues:function(){return gt().map(y())},getMenuItemTextAtIndex:function(e){return Oe.getPrimaryTextAtIndex(e)},isTypeaheadInProgress:function(){return Oe.typeaheadInProgress},typeaheadMatchItem:function(e,t){return Oe.typeaheadMatchItem(e,t)},addClass:at,removeClass:ct,hasClass:rt,setRippleCenter:function(e){return P(et)&&P(et).setRippleCenter(e)},activateBottomLine:function(){return P(et)&&P(et).activate()},deactivateBottomLine:function(){return P(et)&&P(et).deactivate()},notifyChange:function(e){var t;(S(!0),A())&&C(!(null!==(t=P(ke))&&void 0!==t&&t.isValid()));ye(ht(),"SMUISelectChange",{value:I(),index:P(Ee)})},hasOutline:function(){return!!P(tt)},notchOutline:function(e){return P(tt)&&P(tt).notch(e)},closeOutline:function(){return P(tt)&&P(tt).closeNotch()},hasLabel:function(){return!!P(Qe)},floatLabel:function(e){return P(Qe)&&P(Qe).float(e||ge())},getLabelWidth:function(){return P(Qe)?P(Qe).getWidth():0},setLabelRequired:function(e){return P(Qe)&&P(Qe).setRequired(e)}},{get helperText(){return Ke},get leadingIcon(){return Xe}}),!0),U(Ee,gt().indexOf(I()),!0),P(ke).init(),pt(Ce),function(){var e;null===(e=P(ke))||void 0===e||e.destroy()}}),O(function(){Be&&Be()});var bt={getUseDefaultValidation:function(){if(null==P(ke))throw new Error("Instance is undefined.");return P(ke).getUseDefaultValidation()},setUseDefaultValidation:pt,focus:function(){Ae.focus()},layout:mt,getElement:ht},wt=Cn(),Tt=L(wt);ee(Tt,function(e,t,i){return m({class:e,style:t},i)},[function(){return te(m(m({"mdc-select":!0,"mdc-select--required":k(),"mdc-select--disabled":p(),"mdc-select--filled":"filled"===b(),"mdc-select--outlined":"outlined"===b(),"smui-select--standard":"standard"===b(),"mdc-select--with-leading-icon":c(W())?t.leadingIcon:W(),"mdc-select--no-label":w()||null==T(),"mdc-select--invalid":C(),"mdc-select--activated":P(Ge),"mdc-data-table__pagination-rows-per-page-select":"data-table:pagination"===Je},Me),{},h({},d(),!0)))},function(){return Object.entries(Fe).map(function(e){var t=g(e,2),i=t[0],o=t[1];return"".concat(i,": ").concat(o,";")}).concat([f()]).join(" ")},function(){return ve(Se,["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])}]);var It=E(Tt),yt=function(e){var t=xn();ee(t,function(e){return m({type:"hidden",required:k(),disabled:p(),value:I()},e)},[function(){return he(Se,"input$")}],void 0,void 0,!0),D(e,t)};de(It,function(e){V()&&e(yt)});var xt=fe(It,2),St=function(e){var i,o,n;Ae.focus(),P(ke)&&P(ke).handleClick((n=(o=e).currentTarget.getBoundingClientRect(),(function(e){return"touches"in e}(o)?o.touches[0].clientX:o.clientX)-n.left)),null===(i=t.anchor$onclick)||void 0===i||i.call(t,e)},Ct=function(e){var i;P(ke)&&P(ke).handleKeydown(e),null===(i=t.onkeydown)||void 0===i||i.call(t,e)},At=function(e){var i;P(ke)&&P(ke).handleBlur(),ye(ht(),"blur",e),null===(i=t.anchor$onblur)||void 0===i||i.call(t,e)},Bt=function(e){var i;P(ke)&&P(ke).handleFocus(),ye(ht(),"focus",e),null===(i=t.anchor$onfocus)||void 0===i||i.call(t,e)};ee(xt,function(e,t){return m(m(m({class:e,"aria-required":k()?"true":void 0,"aria-disabled":p()?"true":void 0,"aria-controls":P(Ue),"aria-expanded":P(Ge)?"true":"false","aria-describedby":P(Ne),role:"combobox",tabindex:"0"},We),t),{},{onclick:St,onkeydown:Ct,onblur:At,onfocus:Bt})},[function(){return te(h(h({},Z(),!0),"mdc-select__anchor",!0))},function(){return he(Se,"anchor$")}]);var Ot=E(xt),kt=function(e){var t=Sn();D(e,t)};de(Ot,function(e){"filled"===b()&&e(kt)});var Mt=fe(Ot,2),Ft=function(e){var t=pe(function(){return M()+"-smui-label"}),o=pe(function(){return""!==i()||ge()}),n=pe(function(){return he(Se,"label$")});F(we(e,X({get id(){return P(t)},get floatAbove(){return P(o)},get required(){return k()}},function(){return P(n)},{children:function(e,t){var i=q(),o=L(i),n=function(e){},r=function(e){var t=q(),i=L(t),o=function(e){var t=Te();H(function(){return Ie(t,T())}),D(e,t)},n=function(e){var t=q(),i=L(t);z(i,T),D(e,t)};de(i,function(e){"string"==typeof T()?e(o):e(n,!1)},!0),D(e,t)};de(o,function(e){null==T()?e(n):e(r,!1)}),D(e,i)},$$slots:{default:!0}})),function(e){return U(Qe,e,!0)},function(){return P(Qe)})};de(Mt,function(e){"outlined"===b()||w()||null==T()||e(Ft)});var Dt=fe(Mt,2),Rt=function(e){var t=pe(function(){return w()||null==T()}),o=pe(function(){return he(Se,"outline$")});F(be(e,X({get noLabel(){return P(t)}},function(){return P(o)},{children:function(e,t){var o=q(),n=L(o),r=function(e){var t=pe(function(){return M()+"-smui-label"}),o=pe(function(){return""!==i()||ge()}),n=pe(function(){return he(Se,"label$")});F(we(e,X({get id(){return P(t)},get floatAbove(){return P(o)},get required(){return k()}},function(){return P(n)},{children:function(e,t){var i=q(),o=L(i),n=function(e){},r=function(e){var t=q(),i=L(t),o=function(e){var t=Te();H(function(){return Ie(t,T())}),D(e,t)},n=function(e){var t=q(),i=L(t);z(i,T),D(e,t)};de(i,function(e){"string"==typeof T()?e(o):e(n,!1)},!0),D(e,t)};de(o,function(e){null==T()?e(n):e(r,!1)}),D(e,i)},$$slots:{default:!0}})),function(e){return U(Qe,e,!0)},function(){return P(Qe)})};de(n,function(e){w()||null==T()||e(r)}),D(e,o)},$$slots:{default:!0}})),function(e){return U(tt,e,!0)},function(){return P(tt)})};de(Dt,function(e){"outlined"===b()&&e(Rt)});var jt=fe(Dt,2);z(jt,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:G});var Pt=fe(jt,2);ee(Pt,function(e,t){return m({class:e},t)},[function(){return te(h(h({},oe(),!0),"mdc-select__selected-text-container",!0))},function(){return he(Se,"selectedTextContainer$")}]);var $t=E(Pt);ee($t,function(e,t){return m({id:M()+"-smui-selected-text",class:e,role:"button","aria-haspopup":"listbox","aria-labelledby":M()+"-smui-label"},t)},[function(){return te(h(h({},ce(),!0),"mdc-select__selected-text",!0))},function(){return he(Se,"selectedText$")}]);var Vt=E($t);_($t,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},ne),_(Pt,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},J);var qt=fe(Pt,2);ee(qt,function(e,t){return m({class:e},t)},[function(){return te(h(h({},se(),!0),"mdc-select__dropdown-icon",!0))},function(){return he(Se,"dropdownIcon$")}]),_(qt,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},le);var Lt=fe(qt,2),Wt=function(e){var t=pe(function(){return he(Se,"ripple$")});F(xe(e,X(function(){return P(t)})),function(e){return U(et,e,!0)},function(){return P(et)})};de(Lt,function(e){"outlined"!==b()&&v()&&e(Wt)}),F(xt,function(e){return Ae=e},function(){return Ae}),_(xt,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},Y);var Et=fe(xt,2),Ut=pe(function(){return te(m(h(h({},ue(),!0),"mdc-select__menu",!0),_e))}),Nt=pe(function(){return he(Se,"menu$")});Pe(Et,X({get class(){return P(Ut)},get id(){return P(Ue)},fullWidth:!0,anchor:!1,get anchorElement(){return P(He)},get anchorCorner(){return P(Ye)}},function(){return P(Nt)},{onSMUIMenuSelected:function(e){var i;P(ke)&&P(ke).handleMenuItemAction(e.detail.index),null===(i=t.onSMUIMenuSelected)||void 0===i||i.call(t,e)},onSMUIMenuSurfaceClosing:function(e){var i;P(ke)&&P(ke).handleMenuClosing(),null===(i=t.onSMUIMenuSurfaceClosing)||void 0===i||i.call(t,e)},onSMUIMenuSurfaceClosed:function(e){var i;P(ke)&&P(ke).handleMenuClosed(),null===(i=t.onSMUIMenuSurfaceClosed)||void 0===i||i.call(t,e)},onSMUIMenuSurfaceOpened:function(e){var i;P(ke)&&P(ke).handleMenuOpened(),null===(i=t.onSMUIMenuSurfaceOpened)||void 0===i||i.call(t,e)},get open(){return P(Ge)},set open(e){U(Ge,e,!0)},children:function(e,i){var o=pe(function(){return he(Se,"list$")});$e(e,X({role:"listbox",get wrapFocus(){return P(Ze)}},function(){return P(o)},{style:"max-height: 296px",get selectedIndex(){return P(Ee)},set selectedIndex(e){U(Ee,e,!0)},children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}}))},$$slots:{default:!0}})),F(Tt,function(e){return l=e},function(){return l}),_(Tt,function(e,t){var i;return null===(i=me)||void 0===i?void 0:i(e,t)},function(){return{ripple:"filled"===b(),unbounded:!1,addClass:at,removeClass:ct,addStyle:lt}}),_(Tt,function(e,t){var i;return null===(i=Ve)||void 0===i?void 0:i(e,t)},function(){return{addClass:at,removeClass:ct}}),_(Tt,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},u);var zt=fe(Tt,2),Gt=function(e){var i=pe(function(){return he(Se,"helperText$")});!function(e,t){j(t,!0);var i,o=N(t,"use",19,function(){return[]}),n=N(t,"class",3,""),r=N(t,"id",19,function(){return"SMUI-select-helper-text-"+Tn++}),a=N(t,"persistent",3,!1),c=N(t,"validationMsg",3,!1),l=K(t,["$$slots","$$events","$$legacy","use","class","id","persistent","validationMsg","children"]),u=$(void 0),d=s({}),f=s({}),v=$(void 0),g=re("SMUI:select:helper-text:id"),p=re("SMUI:select:helper-text:mount"),b=re("SMUI:select:helper-text:unmount");function w(e){return e in d?d[e]:C().classList.contains(e)}function T(e){d[e]||(d[e]=!0)}function I(e){e in d&&!d[e]||(d[e]=!1)}function y(e){return e in f?void 0!==f[e]?f[e]:null:C().getAttribute(e)}function x(e,t){f[e]!==t&&(f[e]=t)}function S(e){e in f&&null==f[e]||(f[e]=void 0)}function C(){return i}Q(function(){return U(u,new De({addClass:T,removeClass:I,hasClass:w,getAttr:y,setAttr:x,removeAttr:S,setContent:function(e){U(v,e,!0)}}),!0),g&&g(r()),p&&p(P(u)),P(u).init(),function(){var e;b&&P(u)&&b(P(u)),null===(e=P(u))||void 0===e||e.destroy()}});var A={getElement:C},B=In();ee(B,function(e){return m(m({class:e,"aria-hidden":a()?void 0:"true",id:r()},f),l)},[function(){return te(m(m({"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":c(),"mdc-select-helper-text--validation-msg-persistent":a()},d),{},h({},n(),!0)))}]);var O=E(B),k=function(e){var i=q(),o=L(i);z(o,function(){var e;return null!==(e=t.children)&&void 0!==e?e:G}),D(e,i)},M=function(e){var t=Te();H(function(){return Ie(t,P(v))}),D(e,t)};de(O,function(e){null==P(v)?e(k):e(M,!1)}),F(B,function(e){return i=e},function(){return i}),_(B,function(e,t){var i;return null===(i=ie)||void 0===i?void 0:i(e,t)},o),D(e,B),R(A)}(e,X(function(){return P(i)},{children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.helperText)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}}))};de(zt,function(e){t.helperText&&e(Gt)}),H(function(){return Ie(Vt,i())}),D(e,wt);var _t=R(bt);return r(),_t}function Bn(e,t){j(t,!0);var i=g(Le(),2),o=i[0],n=i[1],r=N(t,"use",19,function(){return[]});N(t,"class",3,"");var a,c=N(t,"value",3,""),l=K(t,["$$slots","$$events","$$legacy","use","class","value","children"]),s=re("SMUI:select:selectedText"),u=re("SMUI:select:value");ae("SMUI:list:item:role","option");var d=pe(function(){return null!=c()&&""!==c()&&qe(u,"$selectedValue",o)===c()});function f(){P(d)&&a&&Re(s,a.getPrimaryText())}Q(f),O(f);var v={getElement:function(){return a.getElement()}};F(We(e,X({get use(){return r()},get"data-value"(){return c()},get value(){return c()},get selected(){return P(d)}},function(){return l},{children:function(e,i){var o=q(),n=L(o);z(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:G}),D(e,o)},$$slots:{default:!0}})),function(e){return a=e},function(){return a});var p=R(v);return n(),p}var On=k('<div class="col-12 px-3 mt-0"><!></div>'),kn=k('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12"><!></div> <div class="col-12"><!></div> <!> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div></div></div>'),Mn=k("<b>Interactive CYOA Creator Plus</b>"),Fn=k('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12 text-right"> <br/></div></div></div>'),Dn=k("<!> <!>",1),Rn=k("<!> <!>",1),jn=k("<!> <!> <!>",1);function Pn(e,t){j(t,!0);var i=N(t,"open",7),o=[{text:"2 Per Row",value:"col-6"},{text:"3 Per Row",value:"col-4"},{text:"4 Per Row",value:"col-3"}],n=$("General");function r(){vi&&vi.abort(),pi()}function a(){for(var e=ti.allowDeselect,t=0;t<app.backpack.length;t++){var i=app.backpack[t];i.isResultRow&&(i.isInfoRow=!e)}}Se(e,{surface$style:"width: 600px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=jn(),c=L(i);Ce(c,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:function(e,t){var i=Te("Settings");D(e,i)},$$slots:{default:!0}});var l=fe(c,2);Ae(l,{children:function(e,t){var i=Rn(),c=L(i);Ee(c,{tabs:["General","About"],get active(){return P(n)},set active(e){U(n,e,!0)},tab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;Ue(e,{get tab(){return t()},children:function(e,i){Me(e,{children:function(e,i){var o=Te();H(function(){return Ie(o,t())}),D(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{tab:!0}});var l=fe(c,2),s=function(e){Ne(e,{role:"tabpanel",variant:"unelevated",children:function(e,t){ze(e,{children:function(e,t){var i=kn(),n=E(i),c=E(n);An(E(c),{label:"Choices Per Row",variant:"standard",alwaysFloat:!0,get value(){return app.objectsPerRow},set value(e){app.objectsPerRow=e},helperText:function(e){var t=Te("Maximum number of choices per row for screens between 720px and 1280px.");D(e,t)},children:function(e,t){var i=q(),n=L(i);Ge(n,17,function(){return o},function(e){return e.text},function(e,t){Bn(e,{get value(){return P(t).value},children:function(e,i){var o=Te();H(function(){return Ie(o,P(t).text)}),D(e,o)},$$slots:{default:!0}})}),D(e,i)},$$slots:{helperText:!0,default:!0}});var l=fe(c,2),s=E(l);Be(s,{label:function(e){var t=Te("Enable Auto Save");D(e,t)},children:function(e,t){Oe(e,{get checked(){return app.buildAutoSaveIsOn||!1},set checked(e){!function(e){app.buildAutoSaveIsOn=e}(e)},onSMUISwitchChange:function(){app.buildAutoSaveIsOn&&r()},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var u=fe(l,2),d=function(e){var t=On(),i=E(t);mn(i,{get value(){return app.buildAutoSaveInterval||10},set value(e){!function(e){app.buildAutoSaveInterval=e}(e)},label:"Auto Save Interval",type:"number",suffix:"min",variant:"standard",style:"max-width: 200px",input$class:"text-right",input$min:"1",onchange:function(){app.buildAutoSaveInterval<1&&(app.buildAutoSaveInterval=1),r()}}),D(e,t)};de(u,function(e){app.buildAutoSaveIsOn&&e(d)});var f=fe(u,2),v=E(f);Be(v,{label:function(e){var t=Te("Preload Images in Backpack");D(e,t)},children:function(e,t){Oe(e,{get checked(){return app.preloadImages||!1},set checked(e){!function(e){app.preloadImages=e}(e)},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var g=fe(f,2),p=E(g);Be(p,{label:function(e){var t=Te("Allow Deselecting Choices in Backpack");D(e,t)},children:function(e,t){Oe(e,{onSMUISwitchChange:a,color:"secondary",class:"switch-scale",get checked(){return ti.allowDeselect},set checked(e){ti.allowDeselect=e}})},$$slots:{label:!0,default:!0}});var m=fe(g,2),h=E(m);nn(h,{text:"Enabling this option may cause image downloads to fail or reduce the image resolution.",children:function(e,t){Be(e,{label:function(e){var t=Te("Download Images as Single File");D(e,t)},children:function(e,t){Oe(e,{color:"secondary",class:"switch-scale",get checked(){return ti.isSingleFile},set checked(e){ti.isSingleFile=e}})},$$slots:{label:!0,default:!0}})},$$slots:{default:!0}});var b=fe(m,2),w=E(b);Be(w,{label:function(e){var t=Te("Show Background Music Player");D(e,t)},children:function(e,t){Oe(e,{get checked(){return app.showMusicPlayer||!1},set checked(e){!function(e){app.showMusicPlayer=e}(e)},color:"secondary",class:"switch-scale",onchange:function(){if(app.showMusicPlayer){var e=S(Xt);if(e){var t=0,i=0;0!==Kt.bgmTitleInterval&&(clearInterval(Kt.bgmTitleInterval),Kt.bgmTitleInterval=0),Kt.bgmTitleInterval=window.setInterval(function(){if(void 0!==e.playerInfo.videoData&&""!==Kt.bgmObjectId){var t=Wt.get(Kt.bgmObjectId);if(void 0!==t){var i=t.choice;e.playerInfo.videoData.video_id===i.bgmId&&void 0!==e.playerInfo.videoData.title&&""!==e.playerInfo.videoData.title&&(Kt.bgmTitle=e.playerInfo.videoData.title,Kt.curBgmLength=e.getDuration(),clearInterval(Kt.bgmTitleInterval),Kt.bgmTitleInterval=0)}}},1e3),0!==Kt.bgmPlayInterval&&(clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0),Kt.bgmPlayInterval=window.setInterval(function(){if(void 0!==e.playerInfo.videoData&&!Kt.isSeeking&&1===e.getPlayerState()){var o=Math.floor(e.getCurrentTime());o!==Kt.curBgmTime?t!==o?Kt.curBgmTime=o:(++i>Kt.curBgmLength&&(i=1),Kt.curBgmTime=i):(t=o,i=o+1,Kt.curBgmTime=i)}},1e3)}}else Kt.bgmIsPlaying&&(0!==Kt.bgmTitleInterval&&(clearInterval(Kt.bgmTitleInterval),Kt.bgmTitleInterval=0),0!==Kt.bgmPlayInterval&&(clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0))}})},$$slots:{label:!0,default:!0}});var T=fe(b,2),I=E(T);mn(I,{get value(){return app.styling.backPackWidth||1200},set value(e){!function(e){app.styling.backPackWidth=e}(e)},label:"Backpack Width",type:"number",suffix:"px",variant:"standard",input$min:"0",onchange:function(){void 0!==app.styling.backPackWidth&&app.styling.backPackWidth<0&&(app.styling.backPackWidth=0)}}),D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},u=function(e){var t=q(),i=L(t),o=function(e){Ne(e,{role:"tabpanel",variant:"unelevated",children:function(e,t){var i=Dn(),o=L(i);_e(o,{class:"text-center",children:function(e,t){var i=Mn();D(e,i)},$$slots:{default:!0}});var n=fe(o,2);ze(n,{children:function(e,t){var i=Fn(),o=E(i),n=E(o),r=E(n);H(function(){return Ie(r,"v".concat(yt))}),D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}})};de(i,function(e){"About"===P(n)&&e(o)},!0),D(e,t)};de(l,function(e){"General"===P(n)?e(s):e(u,!1)}),D(e,i)},$$slots:{default:!0}});var s=fe(l,2);Fe(s,{children:function(e,t){ke(e,{action:"close",children:function(e,t){Me(e,{class:"dialog-actions--btn",children:function(e,t){var i=Te("Close");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}}),R()}var $n=k('<div><span class="d-flex text-prewrap align-items-center"><!> <!> <span translate="no"> </span> <!> <!></span></div>');var Vn=k('<div class="col-12"><!></div>'),qn=k('<div class="row pt-4"><div class="col-12"><!></div> <!></div>'),Ln=k('<div class="container-fluid"><div class="row"><div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),Wn=k("<!> <!> <!>",1);function En(e,t){j(t,!0);var i=N(t,"open",7),o=$(s(t.isWord&&t.prevText?t.prevText:""));Se(e,{surface$style:"width: 400px; max-width: calc(100vw - 32px);",onSMUIDialogClosed:function(e){t.isWord?t.closeHandler(e,P(o)):t.closeHandler(e),t.onclose()},get open(){return i()},set open(e){i(e)},children:function(e,i){var n=Wn(),r=L(n);Ce(r,{class:"px-3 pb-0 toolbar toolbar__dialog",children:function(e,i){var o=q(),n=L(o);W(n,function(){return t.title}),D(e,o)},$$slots:{default:!0}});var a=fe(r,2);Ae(a,{children:function(e,i){var n=qn(),r=E(n),a=E(r);W(a,function(){return t.context});var c=fe(r,2),l=function(e){var t=Vn();mn(E(t),{textarea:!0,label:"",variant:"filled",input$rows:5,get value(){return P(o)},set value(e){U(o,e,!0)}}),D(e,t)};de(c,function(e){t.isWord&&e(l)}),D(e,n)},$$slots:{default:!0}});var c=fe(a,2);Fe(c,{children:function(e,t){var i=Ln(),o=E(i),n=E(o),r=E(n);ke(r,{action:"close",children:function(e,t){Me(e,{children:function(e,t){var i=Te("Cancel");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=fe(n,2),c=E(a);ke(c,{action:"accept",children:function(e,t){Me(e,{class:"dialog-actions--btn",children:function(e,t){var i=Te("OK");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}}),D(e,n)},$$slots:{default:!0}}),R()}var Un=k('<i class="mdi mdi-play"></i>'),Nn=k('<i class="mdi mdi-clipboard-outline"></i>'),zn=k('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),Gn=k('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-12" style="height: 48px">Empty</div></div>'),_n=k('<i class="mdi mdi-alpha-a-box-outline"></i>'),Hn=k('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12 pt-1"><div> </div> <div> </div></div></div></div>'),Yn=k('<i class="mdi mdi-play"></i>'),Zn=k('<i class="mdi mdi-trash-can"></i>'),Jn=k('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),Xn=k('<i class="mdi mdi-content-save"></i>'),Kn=k('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12"><!></div></div></div>'),Qn=k("<!> <!>",1),er=k('<i class="mdi mdi-menu-left"></i>'),tr=k('<i class="mdi mdi-menu-right"></i>'),ir=k('<div class="container-fluid pb-2 mb-2" style="border: 1px solid"><!></div> <div class="row gy-2"><div class="col pb-2"><!></div> <div class="col pb-2"><div class="d-row align-items-center justify-end"><!> <span class="list-text px-2"> </span> <!></div></div></div> <div class="row gy-2"><div class="col-12"><!></div></div>',1),or=k("<!> <!> <!>",1),nr=k("<!> <!>",1);function rr(e,t){j(t,!0);var i=N(t,"open",7),o={action:function(){},title:"Warning",context:""},n=$("none"),r=$(1),a=pe(function(){return 9*(P(r)-1)}),c=pe(function(){return Math.min(P(a)+9-1,99)}),s=pe(function(){return Array.from({length:P(c)-P(a)+1},function(e,t){return oi[P(a)+t]})}),u=pe(function(){return Array.from({length:P(c)-P(a)+1},function(e,t){return ni[P(a)+t]})}),d=$(!1);function v(){return v=f(l().m(function e(t){var i;return l().w(function(e){for(;;)switch(e.n){case 0:return i="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(t),e.n=1,wi(i,"buildStore");case 1:so(e.v.app);case 2:return e.a(2)}},e)})),v.apply(this,arguments)}function g(){return g=f(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave"),e.n=1,wi(t,"buildStore");case 1:so(e.v.app);case 2:return e.a(2)}},e)})),g.apply(this,arguments)}function p(){return p=f(l().m(function e(t){var i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return i=P(u)[t].name,e.n=1,wi(i,"buildStore",!0);case 1:o=e.v,so(Array.isArray(o.value)?o.value.join(","):o.value);case 2:return e.a(2)}},e)})),p.apply(this,arguments)}function m(){return m=f(l().m(function e(t){var i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:return i=P(u)[t].name,e.n=1,wi(i,"buildStore",!0);case 1:o=e.v,n=Array.isArray(o.value)?o.value.join(","):o.value,navigator.clipboard.writeText(n).then(function(){ei.labelText="Build code copied to clipboard.",ei.isOpen=!0}).catch(function(e){ei.labelText="Failed to copy build code to clipboard.",ei.isOpen=!0,console.error(e)});case 2:return e.a(2)}},e)})),m.apply(this,arguments)}function h(e){var t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),i=navigator.language,o=new Date,n=new Intl.DateTimeFormat(i,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(o);!function(e,t,i,o,n){hi.apply(this,arguments)}({stored:!0,name:oi[e].name,time:n,app:yi()},t,e,"buildStore",!0)}function b(e){!function(e,t,i,o){bi.apply(this,arguments)}("".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),e,"buildStore",!0)}var w=nr(),T=L(w);Se(T,{surface$style:"width: 700px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},id:"dialog",get open(){return i()},set open(e){i(e)},children:function(e,t){var i=or(),a=L(i);Ce(a,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:function(e,t){var i=Te("Save/Load Build");D(e,i)},$$slots:{default:!0}});var c=fe(a,2);Ae(c,{class:"pt-3",children:function(e,t){var i=ir(),a=L(i),c=E(a),l=function(e){var t=q(),i=L(t);Ge(i,17,function(){return P(u)},Ze,function(e,t,i){var r=q(),a=L(r),c=function(e){var r=zn(),a=E(r),c=E(a);Ye(c,{onclickcapture:function(){o.action=function(){return function(e){return p.apply(this,arguments)}(i)},o.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",U(n,"dlgCommon")},children:function(e,t){var i=Un();D(e,i)},$$slots:{default:!0}});var l=fe(a,2),s=E(l),u=E(s),d=E(u),f=fe(u,2),v=E(f),g=fe(l,2),h=E(g);Ye(h,{onclickcapture:function(){return function(e){return m.apply(this,arguments)}(i)},children:function(e,t){var i=Nn();D(e,i)},$$slots:{default:!0}}),H(function(){Ie(d,P(t).name),Ie(v,P(t).time)}),D(e,r)},l=function(e){var t=Gn();D(e,t)};de(a,function(e){P(t).stored?e(c):e(l,!1)}),D(e,r)}),D(e,t)},f=function(e){var t=Qn(),i=L(t),r=function(e){var t=Hn(),i=E(t),r=E(i);Ye(r,{onclickcapture:function(){o.action=function(){return function(){return g.apply(this,arguments)}()},o.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",U(n,"dlgCommon")},children:function(e,t){var i=_n();D(e,i)},$$slots:{default:!0}});var a=fe(i,2),c=E(a),l=E(c),s=E(l),u=fe(l,2),d=E(u);H(function(){Ie(s,ii.name),Ie(d,ii.time)}),D(e,t)};de(i,function(e){ii.stored&&e(r)});var a=fe(i,2);Ge(a,17,function(){return P(s)},Ze,function(e,t,i){var r=q(),a=L(r),c=function(e){var r=Jn(),a=E(r),c=E(a);Ye(c,{onclickcapture:function(){o.action=function(){return function(e){return v.apply(this,arguments)}(i)},o.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",U(n,"dlgCommon")},children:function(e,t){var i=Yn();D(e,i)},$$slots:{default:!0}});var l=fe(a,2),s=E(l),u=E(s),d=E(u),f=fe(u,2),g=E(f),p=fe(l,2),m=E(p);Ye(m,{onclickcapture:function(){o.action=function(){return b(i)},o.context="Are you sure you want to delete this build?<br>This action cannot be undone.",U(n,"dlgCommon")},children:function(e,t){var i=Zn();D(e,i)},$$slots:{default:!0}}),H(function(){Ie(d,P(t).name),Ie(g,P(t).time)}),D(e,r)},l=function(e){var o=Kn(),n=E(o),r=E(n);Ye(r,{onclickcapture:function(){return h(i)},children:function(e,t){var i=Xn();D(e,i)},$$slots:{default:!0}});var a=fe(n,2),c=E(a);mn(E(c),{onclickcapture:function(){return P(t).name=""},onblur:function(){""===P(t).name&&(P(t).name="Slot ".concat(i+1))},input$onkeydown:function(e){"Enter"===e.key&&h(i)},class:"textbox-mini",variant:"standard",get value(){return P(t).name},set value(e){P(t).name=e}}),D(e,o)};de(a,function(e){P(t).stored?e(c):e(l,!1)}),D(e,r)}),D(e,t)};de(c,function(e){P(d)?e(l):e(f,!1)});var w=fe(a,2),T=E(w),I=E(T);Be(I,{style:"height: 48px",label:function(e){var t=Te("Load from Legacy Version");D(e,t)},children:function(e,t){Oe(e,{onSMUISwitchChange:function(){return U(r,1)},color:"secondary",class:"switch-scale",get checked(){return P(d)},set checked(e){U(d,e,!0)}})},$$slots:{label:!0,default:!0}});var y=fe(T,2),x=E(y),S=E(x);Ye(S,{onclickcapture:function(){return P(r)>1?U(r,P(r)-1):U(r,11)},children:function(e,t){var i=er();D(e,i)},$$slots:{default:!0}});var C=fe(S,2),A=E(C),B=fe(C,2);Ye(B,{onclickcapture:function(){return P(r)<11?U(r,P(r)+1):U(r,1)},children:function(e,t){var i=tr();D(e,i)},$$slots:{default:!0}});var O=fe(w,2),k=E(O),M=E(k);ke(M,{onclickcapture:function(){return U(n,"appBuildForm")},variant:"raised",children:function(e,t){Me(e,{children:function(e,t){var i=Te("Open Build Form");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),H(function(){var e;return Ie(A,"Page ".concat(null!==(e=P(r))&&void 0!==e?e:""))}),D(e,i)},$$slots:{default:!0}});var l=fe(c,2);Fe(l,{children:function(e,t){ke(e,{action:"close",children:function(e,t){Me(e,{class:"dialog-actions--btn",children:function(e,t){var i=Te("Close");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}});var I=fe(T,2),y=function(e){var t=pe(function(){return"dlgCommon"===P(n)});En(e,{get open(){return P(t)},onclose:function(){return U(n,"none")},get title(){return o.title},get context(){return o.context},closeHandler:function(e){"accept"===e.detail.action&&o.action()}})},x=function(e){var t=q(),i=L(t),o=function(e){var t=pe(function(){return"appBuildForm"===P(n)});wn(e,{get open(){return P(t)},onclose:function(){return U(n,"none")}})};de(i,function(e){"appBuildForm"===P(n)&&e(o)},!0),D(e,t)};de(I,function(e){"dlgCommon"===P(n)?e(y):e(x,!1)}),D(e,w),R()}var ar=k('<div class="col req text-prewrap"><!></div>'),cr=k('<div class="col req text-prewrap"><!></div>');function lr(e,t){j(t,!0);var i=pe(function(){var e=Ut.get(t.required.reqId);return void 0!==e&&void 0!==app.globalRequirements?e.requireds:[]}),o=pe(function(){var e=!1;return t.required.showRequired&&(e=!0,t.required.hideRequired2&&(e=zi(t.required.requireds)),t.required.hideRequired&&(e=t.required.requireds.length>0?zi(t.required.requireds)&&!Ni(t.required):!Ni(t.required))),e}),n=q(),r=L(n),a=function(e){var o=q(),n=L(o),r=function(e){var o=q(),n=L(o);Ge(n,17,function(){return P(i)},Ze,function(e,i){var o=q(),n=L(o),r=function(e){var o=ar(),n=E(o);W(n,function(){return Je.sanitize(Vi(Si(P(i))),Jt)}),H(function(){return He(o,t.scoreText)}),D(e,o)};de(n,function(e){P(i).showRequired&&e(r)}),D(e,o)}),D(e,o)},a=function(e){var i=cr(),o=E(i);W(o,function(){return Je.sanitize(Vi(Si(t.required)),Jt)}),H(function(){return He(i,t.scoreText)}),D(e,i)};de(n,function(e){"gid"===t.required.type?e(r):e(a,!1)}),D(e,o)};de(r,function(e){P(o)&&e(a)}),D(e,n),R()}var sr=k('<img class="me-1" alt=""/>'),ur=k('<img class="mx-1" alt=""/>'),dr=k('<img class="mx-1" alt=""/>'),fr=k('<img class="ms-1" alt=""/>'),vr=k("<!> <!><!> <!><!> <!><!>",1),gr=k('<p class="m-0 d-flex text-prewrap align-items-center"><!></p>'),pr=k('<div class="row m-0"><div class="col-12 p-0 m-0 d-flex align-items-center justify-center"><!></div></div>');function mr(e,t){j(t,!0);var i=pe(function(){return qi("privateTextIsOn",t.row,t.choice)}),o=pe(function(){return qi("privateFilterIsOn",t.row,t.choice)}),n=pe(function(){return qt.get(t.score.id)}),r=pe(function(){return zi(t.choice.requireds)}),a=pe(function(){var e={isWithinCount:!1,isSimple:!1};if(!t.score.discountIsOn||!t.score.discountedFrom||0===t.score.discountedFrom.length)return e;for(var i=0;i<t.score.discountedFrom.length;i++){var o=Wt.get(t.score.discountedFrom[i]);if(void 0!==o){var n=o.choice;if(!n.useDiscountCount||void 0===n.discountCount||!n.appliedDisChoices){e.isSimple=!0;break}if((n.isSelectableMultiple&&n.isMultipleUseVariable?n.discountCount*n.multipleUseVariable:n.discountCount)>n.appliedDisChoices.length){e.isWithinCount=!0;break}}}return e}),c=pe(function(){var e=[];if(t.score.discountIsOn&&t.score.discountShow&&t.score.discountAfterText)if(t.score.appliedDiscount)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(P(a).isWithinCount)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(P(a).isSimple)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(void 0!==t.score.tmpDiscount){for(var i=t.score.value,o="",n=!1,r=0;r<t.score.tmpDiscount.length;r++)t.score.tmpDiscount[r].showDiscount&&i>t.score.tmpDiscount[r].discountedValue&&(i=t.score.tmpDiscount[r].discountedValue,o=t.score.tmpDiscount[r].beforeText||"",n=t.score.tmpDiscount[r].replaceText||!1);n||e.push("".concat(t.score.afterText)),e.push("".concat(o))}else e.push("".concat(t.score.afterText));else e.push("".concat(t.score.afterText));return e.join(" ")}),l=pe(function(){var e=[];if(t.score.discountIsOn&&t.score.discountShow&&t.score.discountBeforeText)if(t.score.appliedDiscount)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(P(a).isWithinCount)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(P(a).isSimple)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(void 0!==t.score.tmpDiscount){for(var i=t.score.value,o="",n=!1,r=0;r<t.score.tmpDiscount.length;r++)t.score.tmpDiscount[r].showDiscount&&i>t.score.tmpDiscount[r].discountedValue&&(i=t.score.tmpDiscount[r].discountedValue,o=t.score.tmpDiscount[r].beforeText||"",n=t.score.tmpDiscount[r].replaceText||!1);n||e.push("".concat(t.score.beforeText)),e.push("".concat(o))}else e.push("".concat(t.score.beforeText));else e.push("".concat(t.score.beforeText));return e.join(" ")}),s=pe(function(){var e=t.score.value;if(!t.score.hideValue){var i,o;if(t.score.discountShow)if(t.score.appliedDiscount){if(t.score.replaceText&&t.score.hideDisValue)return"";void 0!==t.score.discountScore&&(e=t.score.discountScore)}else if(P(a).isWithinCount){if(t.score.replaceText&&t.score.hideDisValue)return"";void 0!==t.score.discountScore&&(e=t.score.discountScore)}else if(P(a).isSimple){if(t.score.hideDisValue)return"";void 0!==t.score.discountScore&&(e=t.score.discountScore)}else if(void 0!==t.score.tmpDiscount){for(var r=!1,c=0;c<t.score.tmpDiscount.length;c++)t.score.tmpDiscount[c].showDiscount&&e>t.score.tmpDiscount[c].discountedValue&&(e=t.score.tmpDiscount[c].discountedValue,r=t.score.tmpDiscount[c].hideValue||!1);if(r)return""}if(t.score.isRandom&&!t.score.setValue&&void 0!==t.score.maxValue)return t.score.maxValue<0?"".concat(P(u)," ~ ").concat(P(d)):"".concat(P(d)," ~ ").concat(P(u));if(e=Math.abs(e),e=null!==(i=P(n))&&void 0!==i&&i.allowFloat?e%1==0?e:parseFloat(e.toFixed(void 0!==P(n).decimalPlaces?P(n).decimalPlaces:2)):Math.floor(e),null!==(o=P(n))&&void 0!==o&&o.plussOrMinusAdded){var l=P(n).plussOrMinusInverted?P(f)?"-":"+":P(f)?"+":"-";return"".concat(l).concat(e)}return"".concat(e)}return""}),u=pe(function(){if(void 0!==t.score.maxValue){var e,i,o=t.score.maxValue<0,r=Math.abs(t.score.maxValue);if(r=null!==(e=P(n))&&void 0!==e&&e.allowFloat?r%1==0?r:parseFloat(r.toFixed(void 0!==P(n).decimalPlaces?P(n).decimalPlaces:2)):Math.floor(r),null!==(i=P(n))&&void 0!==i&&i.plussOrMinusAdded){var a=P(n).plussOrMinusInverted?o?"-":"+":o?"+":"-";return"".concat(a).concat(r)}return"".concat(r)}return""}),d=pe(function(){if(void 0!==t.score.minValue){var e,i,o=t.score.minValue<0,r=Math.abs(t.score.minValue);if(r=null!==(e=P(n))&&void 0!==e&&e.allowFloat?r%1==0?r:parseFloat(r.toFixed(void 0!==P(n).decimalPlaces?P(n).decimalPlaces:2)):Math.floor(r),null!==(i=P(n))&&void 0!==i&&i.plussOrMinusAdded){var a=P(n).plussOrMinusInverted?o?"-":"+":o?"+":"-";return"".concat(a).concat(r)}return"".concat(r)}return""}),f=pe(function(){return t.score.discountShow?(void 0!==t.score.discountScore&&(t.score.appliedDiscount||P(a).isWithinCount||P(a).isSimple)?t.score.discountScore:t.score.value)<0:t.score.value<0}),v=pe(function(){var e,a=[];return a.push("font-family: '".concat(P(i).scoreText,"'; font-size: ").concat(P(i).scoreTextSize,"%; text-align: ").concat(P(i).scoreTextAlign,";")),null!==(e=P(n))&&void 0!==e&&e.pointColorsIsOn?P(f)?a.push("color: ".concat(Xo(P(n).positiveColor),";")):a.push("color: ".concat(Xo(P(n).negativeColor),";")):a.push("color: ".concat(Xo(P(i).scoreTextColor),";")),P(r)?t.choice.isActive&&P(o).selScoreTextColorIsOn&&a.push("color: ".concat(Xo(P(o).selFilterSTextColor))):P(o).reqScoreTextColorIsOn&&a.push("color: ".concat(Xo(P(o).reqFilterSTextColor))),a.join(" ")}),g=pe(function(){if(!P(n)||!P(n).iconIsOn)return!1;if(t.score.discountIsOn&&t.score.discountShow)if(t.score.appliedDiscount){if(t.score.replaceText&&t.score.hideDisIcon)return!1}else if(P(a).isWithinCount){if(t.score.replaceText&&t.score.hideDisIcon)return!1}else if(P(a).isSimple){if(t.score.hideDisIcon)return!1}else if(void 0!==t.score.tmpDiscount){for(var e=t.score.value,i=!1,o=0;o<t.score.tmpDiscount.length;o++)t.score.tmpDiscount[o].showDiscount&&e>t.score.tmpDiscount[o].discountedValue&&(e=t.score.tmpDiscount[o].discountedValue,i=t.score.tmpDiscount[o].hideIcon||!1);if(i)return!1}return!0}),p=pe(function(){var e;return(null===(e=P(n))||void 0===e?void 0:e.negativeIconIsOn)&&P(f)}),m=pe(function(){return!!P(n)&&(P(p)?P(n).useSeperatePosition?!!P(n).negativeImageSidePlacementInChoice:!!P(n).negativeImageSidePlacement:P(n).useSeperatePosition?!!P(n).imageSidePlacementInChoice:!!P(n).imageSidePlacement)}),h=pe(function(){return!!P(n)&&(P(p)?P(n).useSeperatePosition?!!P(n).negativeImageOnSideInChoice:!!P(n).negativeImageOnSide:P(n).useSeperatePosition?!!P(n).imageOnSideInChoice:!!P(n).imageOnSide)}),b=pe(function(){var e,t;return(P(p)?null===(e=P(n))||void 0===e?void 0:e.negativeImage:null===(t=P(n))||void 0===t?void 0:t.image)||""}),w=pe(function(){var e,t;return(P(p)?null===(e=P(n))||void 0===e?void 0:e.negativeIconWidth:null===(t=P(n))||void 0===t?void 0:t.iconWidth)||0}),T=pe(function(){var e,t;return(P(p)?null===(e=P(n))||void 0===e?void 0:e.negativeIconHeight:null===(t=P(n))||void 0===t?void 0:t.iconHeight)||0}),I=pe(function(){return!P(m)&&!P(h)}),y=pe(function(){return!P(m)&&P(h)}),x=pe(function(){return P(m)&&!P(h)}),S=pe(function(){return P(m)&&P(h)}),C=pe(function(){return"".concat(P(l)," ").concat(P(s)," ").concat(P(c))});var A=q(),B=L(A),O=function(e){var t=pr(),i=E(t),o=E(i);M(o,function(){return P(C)},function(e){var t=gr(),i=E(t),o=function(e){var t=vr(),i=L(t),o=function(e){var t=sr();H(function(){var e,i;Xe(t,"src",P(b)),He(t,"width: ".concat(null!==(e=P(w))&&void 0!==e?e:"","px; height: ").concat(null!==(i=P(T))&&void 0!==i?i:"","px;"))}),D(e,t)};de(i,function(e){P(I)&&e(o)});var n=fe(i,2);W(n,function(){return Je.sanitize(P(l),Jt)});var r=fe(n),a=function(e){var t=ur();H(function(){var e,i;Xe(t,"src",P(b)),He(t,"width: ".concat(null!==(e=P(w))&&void 0!==e?e:"","px; height: ").concat(null!==(i=P(T))&&void 0!==i?i:"","px;"))}),D(e,t)};de(r,function(e){P(y)&&e(a)});var u=fe(r,2);W(u,function(){return Je.sanitize(P(s),Jt)});var d=fe(u),f=function(e){var t=dr();H(function(){var e,i;Xe(t,"src",P(b)),He(t,"width: ".concat(null!==(e=P(w))&&void 0!==e?e:"","px; height: ").concat(null!==(i=P(T))&&void 0!==i?i:"","px;"))}),D(e,t)};de(d,function(e){P(x)&&e(f)});var v=fe(d,2);W(v,function(){return Je.sanitize(P(c),Jt)});var g=fe(v),p=function(e){var t=fr();H(function(){var e,i;Xe(t,"src",P(b)),He(t,"width: ".concat(null!==(e=P(w))&&void 0!==e?e:"","px; height: ").concat(null!==(i=P(T))&&void 0!==i?i:"","px;"))}),D(e,t)};de(g,function(e){P(S)&&e(p)}),D(e,t)},n=function(e){var t=q(),i=L(t);W(i,function(){return Je.sanitize("".concat(P(l)," ").concat(P(s)," ").concat(P(c)),Jt)}),D(e,t)};de(i,function(e){P(g)?e(o):e(n,!1)}),D(e,t)}),H(function(){return He(i,P(v))}),D(e,t)};de(B,function(e){(function(){if(t.score.showScore){if(void 0!==P(n)&&P(n).isNotShownObjects){if(void 0!==P(n).activatedId&&""!==P(n).activatedId){var e=Ut.get(P(n).activatedId),i=zt.get(P(n).activatedId);return void 0!==e?zi(e.requireds):void 0!==i?i.isTrue:Wi(P(n).activatedId)}return!1}return!0}return!1})()&&zi(t.score.requireds)&&e(O)}),D(e,A),R()}var hr=k('<img alt=""/>'),br=k('<img alt=""/>'),wr=k('<h3 class="m-0"><!></h3>'),Tr=k("<!> <!>",1),Ir=k('<img alt=""/>'),yr=k('<img alt=""/>'),xr=k('<p class="mb-0"><!></p>'),Sr=k('<img alt=""/>'),Cr=k('<img alt=""/>'),Ar=k("<div><!> <!> <!> <!> <!> <!> <!></div>"),Br=k('<img alt=""/>'),Or=k('<img alt=""/>'),kr=k('<h2 class="mb-0"><!></h2>'),Mr=k("<!> <!>",1),Fr=k('<p class="mb-0"><!></p>'),Dr=k('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!></div>',1),Rr=k('<h2 class="mb-0"><!></h2>'),jr=k("<!> <!>",1),Pr=k('<p class="mb-0"><!></p>'),$r=k('<img alt=""/>'),Vr=k('<img alt=""/>'),qr=k('<div class="col p-0 text-center"><!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div>',1),Lr=k('<div class="row m-0 p-0 w-100"><!></div>'),Wr=k('<div class="text-center"><!></div>');function Er(e,t){j(t,!0);var i=N(t,"windowWidth",3,0),o=N(t,"preloadImages",3,!1),n=pe(function(){return void 0!==t.choice&&t.choice.isActive}),r=pe(function(){return qi("privateAddonImageIsOn",t.row,t.choice)}),a=pe(function(){return qi("privateAddonIsOn",t.row,t.choice)}),c=pe(function(){return qi("privateFilterIsOn",t.row,t.choice)}),l=pe(function(){return qi("privateObjectImageIsOn",t.row,t.choice)}),s=pe(function(){return qi("privateObjectIsOn",t.row,t.choice)}),u=pe(function(){return qi("privateTextIsOn",t.row,t.choice)}),d=pe(function(){return zi(t.addon.requireds)}),f=pe(function(){return void 0!==P(r).addonImageBoxWidth?P(r).addonImageBoxWidth:50}),v=pe(function(){var e=P(a).useAddonDesign,i=(e?P(a).addonBorderRadiusIsPixels:P(s).objectBorderRadiusIsPixels)?"px":"%",o=0,r=0,l=0,u=[];if(e){if(P(a).addonBorderImage&&u.push("border-image: url('".concat(P(a).addonBorderImage,"') ").concat(P(a).addonBorderImageSliceTop," ").concat(P(a).addonBorderImageSliceRight," ").concat(P(a).addonBorderImageSliceBottom," ").concat(P(a).addonBorderImageSliceLeft," / ").concat(P(a).addonBorderImageWidth,"px ").concat(P(a).addonBorderImageRepeat,"; border-style: solid; padding: ").concat(P(a).addonBorderImageWidth,"px;")),P(a).useAddonBackgroundImage&&P(a).addonBackgroundImage&&(u.push("background-image: url('".concat(P(a).addonBackgroundImage,"'); ").concat(P(a).isObjectBackgroundRepeat?"background-repeat: repeat;":P(a).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),o=u.length),P(a).addonBgColorIsOn&&(u.push("background-color: ".concat(Xo(P(a).addonBgColor),";")),r=u.length),u.push("margin: ".concat(P(a).addonMargin,"px;")),u.push("border-radius: ".concat(P(a).addonBorderRadiusTopLeft).concat(i," ").concat(P(a).addonBorderRadiusTopRight).concat(i," ").concat(P(a).addonBorderRadiusBottomRight).concat(i," ").concat(P(a).addonBorderRadiusBottomLeft).concat(i,";")),P(a).addonOverflowIsOn&&u.push("overflow: hidden;"),P(a).addonBorderIsOn||P(n)&&P(c).selBorderColorIsOn||!t.isEnabled&&P(c).reqBorderColorIsOn){var f=P(a).addonBorderColor;!t.isEnabled&&P(c).reqBorderColorIsOn?f=P(c).reqFilterBorderColor:P(n)&&P(c).selBorderColorIsOn&&(f=P(c).selFilterBorderColor),u.push("border: ".concat(P(a).addonBorderWidth,"px ").concat(P(a).addonBorderStyle," ").concat(Xo(f),";"))}P(a).addonGradientIsOn&&(t.isEnabled&&P(d)?P(n)?u.push("background-image: linear-gradient(".concat(P(a).addonGradientOnSelect,");")):u.push("background-image: linear-gradient(".concat(P(a).addonGradient,");")):u.push("background-image: linear-gradient(".concat(P(a).addonGradientOnReq,");"))),P(a).addonDropShadowIsOn&&(P(a).addonUseBoxShadowIsOn?u.push("box-shadow: ".concat(P(a).addonDropShadowH,"px ").concat(P(a).addonDropShadowV,"px ").concat(P(a).addonDropShadowBlur,"px ").concat(Xo(P(a).addonDropShadowColor),";")):(l=u.length,u.push("filter: drop-shadow(".concat(P(a).addonDropShadowH,"px ").concat(P(a).addonDropShadowV,"px ").concat(P(a).addonDropShadowBlur,"px ").concat(Xo(P(a).addonDropShadowColor),")")))),0===l&&(u.push("filter:"),l=u.length),t.isEnabled&&P(d)&&(P(n)?(P(c).selFilterBlurIsOn&&u.push(" blur(".concat(P(c).selFilterBlur,"px)")),P(c).selFilterBrightIsOn&&u.push(" brightness(".concat(P(c).selFilterBright,"%)")),P(c).selFilterContIsOn&&u.push(" contrast(".concat(P(c).selFilterCont,"%)")),P(c).selFilterGrayIsOn&&u.push(" grayscale(".concat(P(c).selFilterGray,"%)")),P(c).selFilterHueIsOn&&u.push(" hue-rotate(".concat(P(c).selFilterHue,"deg)")),P(c).selFilterInvertIsOn&&u.push(" invert(".concat(P(c).selFilterInvert,"%)")),P(c).selFilterOpacIsOn&&u.push(" opacity(".concat(P(c).selFilterOpac,"%)")),P(c).selFilterSaturIsOn&&u.push(" saturate(".concat(P(c).selFilterSatur,")")),P(c).selFilterSepiaIsOn&&u.push(" sepia(".concat(P(c).selFilterGray,"%)")),u.length===l?u.splice(l-1,1):u.push(";")):(P(c).unselFilterBlurIsOn&&u.push(" blur(".concat(P(c).unselFilterBlur,"px)")),P(c).unselFilterBrightIsOn&&u.push(" brightness(".concat(P(c).unselFilterBright,"%)")),P(c).unselFilterContIsOn&&u.push(" contrast(".concat(P(c).unselFilterCont,"%)")),P(c).unselFilterGrayIsOn&&u.push(" grayscale(".concat(P(c).unselFilterGray,"%)")),P(c).unselFilterHueIsOn&&u.push(" hue-rotate(".concat(P(c).unselFilterHue,"deg)")),P(c).unselFilterInvertIsOn&&u.push(" invert(".concat(P(c).unselFilterInvert,"%)")),P(c).unselFilterOpacIsOn&&u.push(" opacity(".concat(P(c).unselFilterOpac,"%)")),P(c).unselFilterSaturIsOn&&u.push(" saturate(".concat(P(c).unselFilterSatur,")")),P(c).unselFilterSepiaIsOn&&u.push(" sepia(".concat(P(c).unselFilterGray,"%)"))),u.length===l?u.splice(l-1,1):u.push(";"))}return(app.showAllAddons>0||t.addon.showAddon)&&t.isEnabled&&!P(d)&&(0===l&&(u.push("filter:"),l=u.length),P(c).reqFilterBlurIsOn&&u.push(" blur(".concat(P(c).reqFilterBlur,"px)")),P(c).reqFilterBrightIsOn&&u.push(" brightness(".concat(P(c).reqFilterBright,"%)")),P(c).reqFilterContIsOn&&u.push(" contrast(".concat(P(c).reqFilterCont,"%)")),P(c).reqFilterGrayIsOn&&u.push(" grayscale(".concat(P(c).reqFilterGray,"%)")),P(c).reqFilterHueIsOn&&u.push(" hue-rotate(".concat(P(c).reqFilterHue,"deg)")),P(c).reqFilterInvertIsOn&&u.push(" invert(".concat(P(c).reqFilterInvert,"%)")),P(c).reqFilterOpacIsOn&&u.push(" opacity(".concat(P(c).reqFilterOpac,"%)")),P(c).reqFilterSaturIsOn&&u.push(" saturate(".concat(P(c).reqFilterSatur,")")),P(c).reqFilterSepiaIsOn&&u.push(" sepia(".concat(P(c).reqFilterGray,"%)")),u.length===l?u.splice(l-1,1):u.push(";"),P(c).reqBgColorIsOn&&(P(c).reqOverlayOnImage||(0!==r&&u.splice(r-1,1),0!==o&&u.splice(o-1,1)),u.push("background-color: ".concat(Xo(P(c).reqFilterBgColor),";"))),e&&P(a).addonGradientIsOn&&u.push("background-image: linear-gradient(".concat(P(a).addonGradientOnReq,");"))),u.join(" ")}),g=pe(function(){var e=[];return e.push("white-space: pre-line; font-family: '".concat(P(u).addonTitle,"'; font-size: ").concat(P(u).addonTitleTextSize,"%; text-align: ").concat(P(u).addonTitleAlign,";")),!t.isEnabled&&P(c).reqATitleColorIsOn?e.push("color: ".concat(Xo(P(c).reqFilterATitleColor),";")):P(n)&&P(c).selATitleColorIsOn?e.push("color: ".concat(Xo(P(c).selFilterATitleColor),";")):e.push("color: ".concat(Xo(P(u).addonTitleColor),";")),P(a).useAddonDesign?P(a).titlePaddingIsOn&&e.push("padding: ".concat(P(a).addonTextPadding,"px;")):P(s).titlePaddingIsOn&&e.push("padding: ".concat(P(s).objectTextPadding,"px;")),e.join(" ")}),p=pe(function(){var e=[];return e.push("white-space: pre-wrap; font-family: '".concat(P(u).addonText,"'; text-align: ").concat(P(u).addonTextAlign,"; font-size: ").concat(P(u).addonTextTextSize,"%;")),!t.isEnabled&&P(c).reqATextColorIsOn?e.push("color: ".concat(Xo(P(c).reqFilterATextColor),";")):P(n)&&P(c).selATextColorIsOn?e.push("color: ".concat(Xo(P(c).selFilterATextColor),";")):e.push("color: ".concat(Xo(P(u).addonTextColor),";")),P(a).useAddonDesign?e.push("padding: ".concat(P(a).addonTextPadding,"px;")):e.push("padding: ".concat(P(s).objectTextPadding,"px;")),e.join(" ")}),m=pe(function(){var e=[],i=P(r).useAddonImage,o=(i?P(r).addonImgBorderRadiusIsPixels:P(l).objectImgBorderRadiusIsPixels)?"px":"%";return i?(e.push("width: ".concat(P(r).addonImageWidth,"%; margin-top: ").concat(P(r).addonImageMarginTop,"%; margin-bottom: ").concat(P(r).addonImageMarginBottom,"%;")),P(r).addonImgObjectFillIsOn&&t.choice.addonImgObjectFillHeight&&e.push("object-fit: ".concat(P(r).addonImgObjectFillStyle,"; height: ").concat(t.choice.addonImgObjectFillHeight,"px;")),e.push("border-radius: ".concat(P(r).addonImgBorderRadiusTopLeft).concat(o," ").concat(P(r).addonImgBorderRadiusTopRight).concat(o," ").concat(P(r).addonImgBorderRadiusBottomRight).concat(o," ").concat(P(r).addonImgBorderRadiusBottomLeft).concat(o,";")),P(r).addonImgOverflowIsOn&&e.push("overflow: hidden;"),P(r).addonImgBorderIsOn&&e.push("border: ".concat(P(r).addonImgBorderWidth,"px ").concat(P(r).addonImgBorderStyle," ").concat(Xo(P(r).addonImgBorderColor),";"))):(e.push("width: ".concat(P(l).objectImageWidth,"%; margin-top: ").concat(P(l).objectImageMarginTop,"%; margin-bottom: ").concat(P(l).objectImageMarginBottom,"%;")),P(l).objectImgObjectFillIsOn&&t.row.objectImgObjectFillHeight&&e.push("object-fit: ".concat(P(l).objectImgObjectFillStyle,"; height: ").concat(t.row.objectImgObjectFillHeight,"px;")),e.push("border-radius: ".concat(P(l).objectImgBorderRadiusTopLeft).concat(o," ").concat(P(l).objectImgBorderRadiusTopRight).concat(o," ").concat(P(l).objectImgBorderRadiusBottomRight).concat(o," ").concat(P(l).objectImgBorderRadiusBottomLeft).concat(o,";")),P(l).objectImgOverflowIsOn&&e.push("overflow: hidden;"),P(l).objectImgBorderIsOn&&e.push("border: ".concat(P(l).objectImgBorderWidth,"px ").concat(P(l).objectImgBorderStyle," ").concat(Xo(P(l).objectImgBorderColor),";"))),e.join(" ")}),h=pe(function(){return"font-family: '".concat(P(u).scoreText,"'; font-size: ").concat(P(u).scoreTextSize,"%; text-align: ").concat(P(u).scoreTextAlign,"; color: ").concat(Xo(P(u).scoreTextColor),";")});function b(e){e.preventDefault(),navigator.clipboard.writeText(t.addon.imageSourceTooltip).then(function(){ei.labelText="Tooltip copied to clipboard.",ei.isOpen=!0}).catch(function(){console.log(t.addon.imageSourceTooltip),ei.labelText="Tooltip text logged to developer console.",ei.isOpen=!0})}var w=Wr(),T=E(w),I=function(e){var n=Ar(),r=E(n),a=function(e){var i=q(),n=L(i),r=function(e){var i=hr();i.__contextmenu=b,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.addon.imageSourceTooltip}),H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)},a=function(e){var i=br();H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)};de(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),D(e,i)};de(r,function(e){(1===t.addon.template||i()<=1280)&&t.addon.image&&!t.row.addonImageRemoved&&e(a)});var c=fe(r,2),l=function(e){var i=wr(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.addon.title),Jt)}),H(function(){return He(i,P(g))}),D(e,i)};de(c,function(e){""===t.addon.title||t.row.addonTitleRemoved||e(l)});var s=fe(c,2),u=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.scores},Ze,function(e,i){mr(e,{get score(){return P(i)},get row(){return t.row},get choice(){return t.choice}})}),D(e,i)};de(s,function(e){!t.row.objectScoreRemoved&&t.choice.showScoreInAddon&&t.isFirst&&e(u)});var d=fe(s,2),f=function(e){var i=Tr(),o=L(i),n=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.requireds},Ze,function(e,t){lr(e,{get required(){return P(t)},get scoreText(){return P(h)}})}),D(e,i)};de(o,function(e){t.choice.showReqInAddon&&t.isFirst&&e(n)});var r=fe(o,2);Ge(r,17,function(){return t.addon.requireds},Ze,function(e,t){lr(e,{get required(){return P(t)},get scoreText(){return P(h)}})}),D(e,i)};de(d,function(e){t.row.objectRequirementRemoved||e(f)});var v=fe(d,2),w=function(e){var i=q(),n=L(i),r=function(e){var i=Ir();i.__contextmenu=b,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.addon.imageSourceTooltip}),H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)},a=function(e){var i=yr();H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)};de(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),D(e,i)};de(v,function(e){5===t.addon.template&&i()>1280&&t.addon.image&&!t.row.addonImageRemoved&&e(w)});var T=fe(v,2),I=function(e){var i=xr(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.addon.text),Jt)}),H(function(){return He(i,P(p))}),D(e,i)};de(T,function(e){""===t.addon.text||t.row.addonTextRemoved||e(I)});var y=fe(T,2),x=function(e){var i=q(),n=L(i),r=function(e){var i=Sr();i.__contextmenu=b,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.addon.imageSourceTooltip}),H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)},a=function(e){var i=Cr();H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)};de(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),D(e,i)};de(y,function(e){4===t.addon.template&&i()>1280&&t.addon.image&&!t.row.addonImageRemoved&&e(x)}),D(e,n)},y=function(e){var i=Lr(),n=E(i),r=function(e){var i=Dr(),n=L(i),r=E(n),a=function(e){var i=q(),n=L(i),r=function(e){var i=Br();i.__contextmenu=b,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.addon.imageSourceTooltip}),H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)},a=function(e){var i=Or();H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)};de(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),D(e,i)};de(r,function(e){t.addon.image&&!t.row.addonImageRemoved&&e(a)});var c=fe(n,2),l=E(c),s=function(e){var i=kr(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.addon.title),Jt)}),H(function(){return He(i,P(g))}),D(e,i)};de(l,function(e){""===t.addon.title||t.row.addonTitleRemoved||e(s)});var u=fe(l,2),d=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.scores},Ze,function(e,i){mr(e,{get score(){return P(i)},get row(){return t.row},get choice(){return t.choice}})}),D(e,i)};de(u,function(e){!t.row.objectScoreRemoved&&t.choice.showScoreInAddon&&t.isFirst&&e(d)});var v=fe(u,2),w=function(e){var i=Mr(),o=L(i),n=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.requireds},Ze,function(e,t){lr(e,{get required(){return P(t)},get scoreText(){return P(h)}})}),D(e,i)};de(o,function(e){t.choice.showReqInAddon&&t.isFirst&&e(n)});var r=fe(o,2);Ge(r,17,function(){return t.addon.requireds},Ze,function(e,t){lr(e,{get required(){return P(t)},get scoreText(){return P(h)}})}),D(e,i)};de(v,function(e){t.row.objectRequirementRemoved||e(w)});var T=fe(v,2),I=function(e){var i=Fr(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.addon.text),Jt)}),H(function(){return He(i,P(p))}),D(e,i)};de(T,function(e){""===t.addon.text||t.row.addonTextRemoved||e(I)}),H(function(){var e;He(n,"max-width: ".concat(null!==(e=P(f))&&void 0!==e?e:"","%")),He(c,"max-width: ".concat(100-P(f),"%"))}),D(e,i)},a=function(e){var i=q(),n=L(i),r=function(e){var i=qr(),n=L(i),r=E(n),a=function(e){var i=Rr(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.addon.title),Jt)}),H(function(){return He(i,P(g))}),D(e,i)};de(r,function(e){""===t.addon.title||t.row.addonTitleRemoved||e(a)});var c=fe(r,2),l=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.scores},Ze,function(e,i){mr(e,{get score(){return P(i)},get row(){return t.row},get choice(){return t.choice}})}),D(e,i)};de(c,function(e){!t.row.objectScoreRemoved&&t.choice.showScoreInAddon&&t.isFirst&&e(l)});var s=fe(c,2),u=function(e){var i=jr(),o=L(i),n=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.requireds},Ze,function(e,t){lr(e,{get required(){return P(t)},get scoreText(){return P(h)}})}),D(e,i)};de(o,function(e){t.choice.showReqInAddon&&t.isFirst&&e(n)});var r=fe(o,2);Ge(r,17,function(){return t.addon.requireds},Ze,function(e,t){lr(e,{get required(){return P(t)},get scoreText(){return P(h)}})}),D(e,i)};de(s,function(e){t.row.objectRequirementRemoved||e(u)});var d=fe(s,2),v=function(e){var i=Pr(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.addon.text),Jt)}),H(function(){return He(i,P(p))}),D(e,i)};de(d,function(e){""===t.addon.text||t.row.addonTextRemoved||e(v)});var w=fe(n,2),T=E(w),I=function(e){var i=q(),n=L(i),r=function(e){var i=$r();i.__contextmenu=b,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.addon.imageSourceTooltip}),H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)},a=function(e){var i=Vr();H(function(){Xe(i,"src",t.addon.image),He(i,P(m)),Xe(i,"loading",o()?"eager":"lazy")}),D(e,i)};de(n,function(e){t.addon.imageSourceTooltip?e(r):e(a,!1)}),D(e,i)};de(T,function(e){t.addon.image&&!t.row.addonImageRemoved&&e(I)}),H(function(){var e;He(n,"max-width: ".concat(100-P(f),"%")),He(w,"max-width: ".concat(null!==(e=P(f))&&void 0!==e?e:"","%"))}),D(e,i)};de(n,function(e){3===t.addon.template&&e(r)},!0),D(e,i)};de(n,function(e){2===t.addon.template?e(r):e(a,!1)}),D(e,i)};de(T,function(e){t.addon.template>=4||1===t.addon.template||i()<=1280?e(I):e(y,!1)}),H(function(){return He(w,P(v))}),D(e,w),R()}Ke(["contextmenu"]);var Ur=k('<i class="mdi mdi-minus"></i>'),Nr=k('<i class="mdi mdi-plus"></i>'),zr=k('<div class="px-5 w-100"><!></div>'),Gr=k('<div class="d-row justify-space-around w-100"><!> <div translate="no"> </div> <!></div> <!>',1);function _r(e,t){j(t,!0);var i=$(0),o=pe(function(){if(t.choice.isMultipleUseVariable)return t.choice.multipleUseVariable;if(void 0!==t.choice.multipleScoreId){var e=qt.get(t.choice.multipleScoreId);if(void 0!==e)return e.startingSum}return 0});function n(e){t.selectedOneMore()}function r(e){t.selectedOneLess()}function a(){for(var e=P(i)-P(o),n=0;n<Math.abs(e);n++)e>0?t.selectedOneMore():t.selectedOneLess();document.activeElement&&document.activeElement.blur()}function c(e){t.isEnabled&&(Qt.currentDialog="selectDialog",Qt.choice=t.choice,Qt.func=l)}function l(e){for(var i=e-t.choice.multipleUseVariable,o=0;o<Math.abs(i);o++)i>0?t.selectedOneMore():t.selectedOneLess()}B(function(){t.choice.useSlider&&U(i,P(o),!0)});var s=q(),u=L(s),d=function(e){var l=Gr(),s=L(l),u=E(s),d=function(e){var i=pe(function(){return!t.isEnabled});Ye(e,{class:"counter-icons",get disabled(){return P(i)},onclickcapture:r,children:function(e,i){var o=Ur();H(function(){return He(o,t.multiChoiceButton)}),D(e,o)},$$slots:{default:!0}})};de(u,function(e){t.choice.hideCounter||e(d)});var f=fe(u,2),v=E(f),g=fe(f,2),p=function(e){var i=pe(function(){return!t.isEnabled});Ye(e,{class:"counter-icons",get disabled(){return P(i)},onclickcapture:n,children:function(e,i){var o=Nr();H(function(){return He(o,t.multiChoiceButton)}),D(e,o)},$$slots:{default:!0}})};de(g,function(e){t.choice.hideCounter||e(p)});var m=fe(s,2),h=function(e){var o=zr(),n=E(o),r=pe(function(){return!t.isEnabled});et(n,{get min(){return t.choice.numMultipleTimesMinus},get max(){return t.choice.numMultipleTimesPluss},step:1,class:"mx-2",onpointerup:a,get disabled(){return P(r)},discrete:!0,get value(){return P(i)},set value(e){U(i,e,!0)}}),D(e,o)};de(m,function(e){t.choice.useSlider&&e(h)}),H(function(){He(f,t.multiChoiceText),Ie(v,P(o))}),Qe("click",f,c,!0),D(e,l)};de(u,function(e){t.choice.hideCounterUntilSelect&&0===t.choice.multipleUseVariable||e(d)}),D(e,s),R()}var Hr=k('<div class="col-12"><!></div>'),Yr=k('<img alt=""/>'),Zr=k('<img alt=""/>'),Jr=k('<h3 class="m-0"><!></h3>'),Xr=k('<img alt=""/>'),Kr=k('<img alt=""/>'),Qr=k('<p class="mb-0"><!></p>'),ea=k('<img alt=""/>'),ta=k('<img alt=""/>'),ia=k("<div></div>"),oa=k('<div class="d-column w-100 p-0 align-items-center"><!> <!> <div class="w-100"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!> <!></div>'),na=k('<img alt=""/>'),ra=k('<img alt=""/>'),aa=k('<h2 class="mb-0"><!></h2>'),ca=k('<p class="mb-0"><!></p>'),la=k("<div></div>"),sa=k("<!> <!>",1),ua=k("<div></div>"),da=k('<div class="col-12 text-center"><!> <!></div>'),fa=k('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!>',1),va=k('<h2 class="mb-0"><!></h2>'),ga=k('<p class="mb-0"><!></p>'),pa=k("<div></div>"),ma=k("<!> <!>",1),ha=k('<img alt=""/>'),ba=k('<img alt=""/>'),wa=k("<div></div>"),Ta=k('<div class="col-12 text-center"><!> <!></div>'),Ia=k('<div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div> <!>',1),ya=k("<div><div><div><!></div></div></div>"),xa=k("<!> <!>",1);function Sa(e,t){j(t,!0);var i=function(){return qe(ci,"$winWidth",n)},o=g(Le(),2),n=o[0],r=o[1],a=N(t,"preloadImages",3,!1),c=[],l={choice:null,row:null,context:"",prevText:"",isWord:!0},s=pe(function(){if(t.choice.addons)for(var e=0;e<t.choice.addons.length;e++){var i=t.choice.addons[e];if(app.showAllAddons>0||!i.skipIndex&&(!i.hideAddon||t.choice.isActive)&&(i.showAddon||zi(i.requireds)))return e}return-1}),f=pe(function(){return qi("privateBackgroundIsOn",t.row,t.choice)}),p=pe(function(){return qi("privateFilterIsOn",t.row,t.choice)}),m=pe(function(){return qi("privateMultiChoiceIsOn",t.row,t.choice)}),h=pe(function(){return qi("privateObjectImageIsOn",t.row,t.choice)}),b=pe(function(){return qi("privateObjectIsOn",t.row,t.choice)}),w=pe(function(){return qi("privateTextIsOn",t.row,t.choice)}),T=pe(function(){return void 0!==P(h).objectImageBoxWidth?P(h).objectImageBoxWidth:50}),I=$("none"),y=!1,x=pe(function(){return zi(t.choice.requireds)}),C=pe(function(){return t.choice.isActive?!P(p).selFilterVisibleIsOn:P(x)?!P(p).unselFilterVisibleIsOn:!P(p).reqFilterVisibleIsOn}),A=pe(function(){return t.choice.addonJustify?" justify-".concat(t.choice.addonJustify):""}),B=pe(function(){return t.choice.isActive}),O=pe(function(){return P(b).objectHeight}),k=pe(function(){if(t.row.isResultRow){var e=Wt.get(t.choice.id);if(void 0!==e)return e.row}return t.row}),M=pe(function(){var e=[];return e.push("white-space: pre-line; font-family: '".concat(P(w).objectTitle,"'; font-size: ").concat(P(w).objectTitleTextSize,"%; text-align: ").concat(P(w).objectTitleAlign,";")),!P(x)&&P(p).reqCTitleColorIsOn?e.push("color: ".concat(Xo(P(p).reqFilterCTitleColor),";")):P(B)&&P(p).selCTitleColorIsOn?e.push("color: ".concat(Xo(P(p).selFilterCTitleColor),";")):e.push("color: ".concat(Xo(P(w).objectTitleColor),";")),P(b).titlePaddingIsOn&&e.push("padding: ".concat(P(b).objectTextPadding,"px;")),e.join(" ")}),F=pe(function(){return"font-family: '".concat(P(m).multiChoiceTextFont,"'; color: ").concat(Xo(P(w).scoreTextColor),"; font-size: ").concat(P(m).multiChoiceTextSize,"%; align-content: center;")}),V=pe(function(){return"font-size: ".concat(P(m).multiChoiceCounterSize,"%; color: ").concat(Xo(P(w).scoreTextColor),";")}),z=pe(function(){return!t.choice.hideMultipleCounter||P(x)}),G=pe(function(){var e=[];return e.push("white-space: pre-wrap; font-family: '".concat(P(w).objectText,"'; text-align: ").concat(P(w).objectTextAlign,"; font-size: ").concat(P(w).objectTextTextSize,"%;")),!P(x)&&P(p).reqCTextColorIsOn?e.push("color: ".concat(Xo(P(p).reqFilterCTextColor),";")):P(B)&&P(p).selCTextColorIsOn?e.push("color: ".concat(Xo(P(p).selFilterCTextColor),";")):e.push("color: ".concat(Xo(P(w).objectTextColor),";")),e.push("padding: ".concat(P(b).objectTextPadding,"px;")),e.join(" ")}),J=pe(function(){var e=P(b).objectBorderRadiusIsPixels?"px":"%",i=0,o=0,n=0,r=[];if(P(b).objectBorderImage&&r.push("border-image: url('".concat(P(b).objectBorderImage,"') ").concat(P(b).objectBorderImageSliceTop," ").concat(P(b).objectBorderImageSliceRight," ").concat(P(b).objectBorderImageSliceBottom," ").concat(P(b).objectBorderImageSliceLeft," / ").concat(P(b).objectBorderImageWidth,"px ").concat(P(b).objectBorderImageRepeat,"; border-style: solid; padding: ").concat(P(b).objectBorderImageWidth,"px;")),P(f).objectBackgroundImage&&(r.push("background-image: url('".concat(P(f).objectBackgroundImage,"'); ").concat(P(f).isObjectBackgroundRepeat?"background-repeat: repeat;":P(f).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),i=r.length),P(f).objectBgColorIsOn&&(r.push("background-color: ".concat(Xo(P(f).objectBgColor),";")),o=r.length),r.push("margin: ".concat(P(b).objectMargin,"px;")),r.push("border-radius: ".concat(P(b).objectBorderRadiusTopLeft).concat(e," ").concat(P(b).objectBorderRadiusTopRight).concat(e," ").concat(P(b).objectBorderRadiusBottomRight).concat(e," ").concat(P(b).objectBorderRadiusBottomLeft).concat(e,";")),P(b).objectOverflowIsOn&&r.push("overflow: hidden;"),P(b).objectBorderIsOn||P(B)&&P(p).selBorderColorIsOn||!P(x)&&P(p).reqBorderColorIsOn){var a=P(b).objectBorderColor;!P(x)&&P(p).reqBorderColorIsOn?a=P(p).reqFilterBorderColor:P(B)&&P(p).selBorderColorIsOn&&(a=P(p).selFilterBorderColor),r.push("border: ".concat(P(b).objectBorderWidth,"px ").concat(P(b).objectBorderStyle," ").concat(Xo(a),";"))}return P(b).objectDropShadowIsOn&&(P(b).objectUseBoxShadowIsOn?r.push("box-shadow: ".concat(P(b).objectDropShadowH,"px ").concat(P(b).objectDropShadowV,"px ").concat(P(b).objectDropShadowBlur,"px ").concat(Xo(P(b).objectDropShadowColor),";")):(n=r.length,r.push("filter: drop-shadow(".concat(P(b).objectDropShadowH,"px ").concat(P(b).objectDropShadowV,"px ").concat(P(b).objectDropShadowBlur,"px ").concat(Xo(P(b).objectDropShadowColor),")")))),0===n&&(r.push("filter:"),n=r.length),P(x)?(P(B)?(P(p).selFilterBlurIsOn&&r.push(" blur(".concat(P(p).selFilterBlur,"px)")),P(p).selFilterBrightIsOn&&r.push(" brightness(".concat(P(p).selFilterBright,"%)")),P(p).selFilterContIsOn&&r.push(" contrast(".concat(P(p).selFilterCont,"%)")),P(p).selFilterGrayIsOn&&r.push(" grayscale(".concat(P(p).selFilterGray,"%)")),P(p).selFilterHueIsOn&&r.push(" hue-rotate(".concat(P(p).selFilterHue,"deg)")),P(p).selFilterInvertIsOn&&r.push(" invert(".concat(P(p).selFilterInvert,"%)")),P(p).selFilterOpacIsOn&&r.push(" opacity(".concat(P(p).selFilterOpac,"%)")),P(p).selFilterSaturIsOn&&r.push(" saturate(".concat(P(p).selFilterSatur,")")),P(p).selFilterSepiaIsOn&&r.push(" sepia(".concat(P(p).selFilterGray,"%)")),r.length===n?r.splice(n-1,1):r.push(";"),P(p).selBgColorIsOn&&(0!==o&&r.splice(o-1,1),P(p).selOverlayOnImage||0!==i&&r.splice(i-1,1),r.push("background-color: ".concat(Xo(P(p).selFilterBgColor),";"))),P(b).objectGradientIsOn&&r.push("background-image: linear-gradient(".concat(P(b).objectGradientOnSelect,");"))):(P(p).unselFilterBlurIsOn&&r.push(" blur(".concat(P(p).unselFilterBlur,"px)")),P(p).unselFilterBrightIsOn&&r.push(" brightness(".concat(P(p).unselFilterBright,"%)")),P(p).unselFilterContIsOn&&r.push(" contrast(".concat(P(p).unselFilterCont,"%)")),P(p).unselFilterGrayIsOn&&r.push(" grayscale(".concat(P(p).unselFilterGray,"%)")),P(p).unselFilterHueIsOn&&r.push(" hue-rotate(".concat(P(p).unselFilterHue,"deg)")),P(p).unselFilterInvertIsOn&&r.push(" invert(".concat(P(p).unselFilterInvert,"%)")),P(p).unselFilterOpacIsOn&&r.push(" opacity(".concat(P(p).unselFilterOpac,"%)")),P(p).unselFilterSaturIsOn&&r.push(" saturate(".concat(P(p).unselFilterSatur,")")),P(p).unselFilterSepiaIsOn&&r.push(" sepia(".concat(P(p).unselFilterGray,"%)")),r.length===n?r.splice(n-1,1):r.push(";"),P(b).objectGradientIsOn&&r.push("background-image: linear-gradient(".concat(P(b).objectGradient,");"))),app.isPointerCursor&&!t.choice.isNotSelectable&&(!t.choice.isSelectableMultiple||t.choice.allowSelectByClick&&0===t.choice.multipleUseVariable)&&r.push("cursor: pointer;")):(P(p).reqFilterBlurIsOn&&r.push(" blur(".concat(P(p).reqFilterBlur,"px)")),P(p).reqFilterBrightIsOn&&r.push(" brightness(".concat(P(p).reqFilterBright,"%)")),P(p).reqFilterContIsOn&&r.push(" contrast(".concat(P(p).reqFilterCont,"%)")),P(p).reqFilterGrayIsOn&&r.push(" grayscale(".concat(P(p).reqFilterGray,"%)")),P(p).reqFilterHueIsOn&&r.push(" hue-rotate(".concat(P(p).reqFilterHue,"deg)")),P(p).reqFilterInvertIsOn&&r.push(" invert(".concat(P(p).reqFilterInvert,"%)")),P(p).reqFilterOpacIsOn&&r.push(" opacity(".concat(P(p).reqFilterOpac,"%)")),P(p).reqFilterSaturIsOn&&r.push(" saturate(".concat(P(p).reqFilterSatur,")")),P(p).reqFilterSepiaIsOn&&r.push(" sepia(".concat(P(p).reqFilterGray,"%)")),r.length===n?r.splice(n-1,1):r.push(";"),P(p).reqBgColorIsOn&&(0!==o&&r.splice(o-1,1),P(p).reqOverlayOnImage||0!==i&&r.splice(i-1,1),r.push("background-color: ".concat(Xo(P(p).reqFilterBgColor),";"))),P(b).objectGradientIsOn&&r.push("background-image: linear-gradient(".concat(P(b).objectGradientOnReq,");"))),r.join(" ")}),X=pe(function(){var e=[],i=P(h).objectImgBorderRadiusIsPixels?"px":"%";return e.push("width: ".concat(P(h).objectImageWidth,"%; margin-top: ").concat(P(h).objectImageMarginTop,"%; margin-bottom: ").concat(P(h).objectImageMarginBottom,"%;")),P(h).objectImgObjectFillIsOn&&e.push("object-fit: ".concat(P(h).objectImgObjectFillStyle,"; height: ").concat(t.row.objectImgObjectFillHeight,"px;")),e.push("border-radius: ".concat(P(h).objectImgBorderRadiusTopLeft).concat(i," ").concat(P(h).objectImgBorderRadiusTopRight).concat(i," ").concat(P(h).objectImgBorderRadiusBottomRight).concat(i," ").concat(P(h).objectImgBorderRadiusBottomLeft).concat(i,";")),P(h).objectImgOverflowIsOn&&e.push("overflow: hidden;"),P(h).objectImgBorderIsOn&&e.push("border: ".concat(P(h).objectImgBorderWidth,"px ").concat(P(h).objectImgBorderStyle," ").concat(Xo(P(h).objectImgBorderColor),";")),e.join(" ")}),K=pe(function(){var e=[];return e.push("font-family: '".concat(P(w).scoreText,"'; font-size: ").concat(P(w).scoreTextSize,"%; text-align: ").concat(P(w).scoreTextAlign,";")),e.push("color: ".concat(Xo(P(w).scoreTextColor),";")),P(x)?t.choice.isActive&&P(p).selScoreTextColorIsOn&&e.push("color: ".concat(Xo(P(p).selFilterSTextColor))):P(p).reqScoreTextColorIsOn&&e.push("color: ".concat(Xo(P(p).reqFilterSTextColor))),e.join(" ")}),Q=[];function ee(e,t,i,o){if(!t.isNotSelectable||!e.isNotActiveUnselectable){var n=!1;if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===c.indexOf(e.id)&&t.activateThisChoice.split(",").some(function(t){return t.split("/ON#")[0]===e.id})&&(c.push(e.id),n=!0),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss){var r=t.multipleUseVariable;if(o>0)for(var a=0;a<o;a++)se(t,i),r++,e.isAllowDeselect||(t.numMultipleTimesMinus+=1);else if(o<0)for(var l=0;l>-1*o;l++)ve(t,i),r--,e.isAllowDeselect||(t.numMultipleTimesPluss-=1);if(t.multipleUseVariable!==r){var s=Math.abs(t.numMultipleTimesMinus-t.numMultipleTimesPluss);if(t.numMultipleTimesMinus>t.numMultipleTimePluss){var u=Vt.get(t.id);o>0?(t.numMultipleTimesMinus-=s,void 0!==u?u.multiple+=s:Vt.set(t.id,{multiple:s,isAllowDeselect:e.isAllowDeselect||!1})):o<0&&(void 0!==u?u.multiple-=s:Vt.set(t.id,{multiple:-s,isAllowDeselect:e.isAllowDeselect||!1}))}}}}else t.isActive||ae(t,i),e.isAllowDeselect||(t.forcedActivated=!0),void 0===t.activatedFrom&&(t.activatedFrom=0),n||t.activatedFrom++;t.isActive||(delete t.forcedActivated,Vt.set(t.id,{multiple:o,isAllowDeselect:e.isAllowDeselect||!1}))}}function te(e,t,i,o){if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===c.indexOf(e.id)&&t.activateThisChoice.split(",").some(function(t){return t.split("/ON#")[0]===e.id})&&c.push(e.id),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss)if(t.isActive){if(o>0)for(var n=0;n<o;n++)e.isAllowDeselect||(t.numMultipleTimesMinus-=1),e.isNotDeactivate||ve(t,i);else if(o<0)for(var r=0;r>-1*o;r++)e.isAllowDeselect||(t.numMultipleTimesPluss+=1),e.isNotDeactivate||se(t,i)}else{var a=Vt.get(t.id),l=0;void 0!==a?0===(l=a.multiple-o)?Vt.delete(t.id):Vt.set(t.id,{multiple:l,isAllowDeselect:e.isAllowDeselect||!1}):Vt.delete(t.id)}}else void 0!==t.activatedFrom?(t.activatedFrom--,(t.activatedFrom<=0||-1!==c.indexOf(e.id))&&(t.isActive?(delete t.activatedFrom,delete t.forcedActivated,e.isNotDeactivate||ce(t,i)):Vt.delete(t.id))):(delete t.forcedActivated,!e.isNotDeactivate&&t.isActive&&ce(t,i))}function ie(e){if(void 0!==e.activateThisChoice){for(var t=e.activateThisChoice.split(","),i=new Map,o=0;o<t.length;o++){var n=g(t[o].split("/ON#"),2),r=n[0],a=n[1],c=parseInt(void 0===a?"0":a),l=Et.get(r);if(void 0!==l)for(var s=0;s<l.elements.length;s++)$t.has(l.elements[s])||i.set(l.elements[s],c);else $t.has(r)||i.set(r,c)}for(var u=v(i.keys()),d=Math.min(u.length,e.numActivateRandom||0),f=d,p=u.length-1;p>0;p--){var m=Math.floor(Math.random()*(p+1)),h=[u[m],u[p]];u[p]=h[0],u[m]=h[1]}for(var b=[],w=0;w<d;){var T=u[w],I=Wt.get(T);if(void 0!==I){var y=I.row,x=I.choice;if(ee(e,x,y,i.get(T)||0),!x.isActive){if(b.length<d&&u.length>f){u[w]=u[f++],void 0!==x.activatedFrom&&(x.activatedFrom--,0===x.activatedFrom&&Vt.delete(x.id));continue}break}b.push(T)}w++}e.isSelectableMultiple?(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),e.activatedRandomMul[e.multipleUseVariable-1]=[].concat(b)):e.activatedRandom=[].concat(b)}}function oe(e,t,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,n=Array.from($t.keys()),r=function(){var r=n[a],c=Wt.get(r);if(void 0!==c){for(var l=c.row,s=c.choice,u=new d,f=new Set,g=new Set,p=new Set,m=!1,h=!1,b=e.appliedDisChoices?e.appliedDisChoices.indexOf(s.id):-1,w=0;w<s.scores.length;w++){var T=s.scores[w];if(!T.isNotRecalculatable){var I=qt.get(T.id);if(void 0!==I){if(e.discountOther&&T.isChangeDiscount&&T.isActive&&void 0!==T.tmpDisScore&&(!e.useDiscountCount||e.useDiscountCount&&e.appliedDisChoices)){var y=s.multipleUseVariable,x=!1;if(e.useDiscountCount&&T.discountedFrom&&T.discountedFrom.length>0)if(-1!==b)for(var S=0;S<T.discountedFrom.length;S++){var C=Wt.get(T.discountedFrom[S]);if(void 0!==C){var A=C.choice,B=A.isSelectableMultiple&&A.isMultipleUseVariable&&A.stackableDiscount&&A.discountCount?A.discountCount*A.multipleUseVariable+Number(e.id===A.id):A.discountCount;A.useDiscountCount&&A.appliedDisChoices&&B&&B>A.appliedDisChoices.length&&(A.id!==e.id&&p.add(A),x=!0)}}else x=!0;if(x){delete T.isChangeDiscount,delete T.tmpDisScore;continue}if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){for(var O=y-1;O>=0;O--)s.isActive&&(I.belowZeroNotAllowed&&I.startingSum+T.tmpDisScore<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ve(s,l),s.forcedActivated=!0):ve(s,l):I.startingSum+=T.tmpDisScore);s.isActive&&(u.set(T.id,T.tmpDisScore),delete T.isChangeDiscount,delete T.tmpDisScore)}else if(!s.isSelectableMultiple)if(I.belowZeroNotAllowed&&I.startingSum+T.tmpDisScore<0)if(s.forcedActivated&&(delete s.forcedActivated,s.isAllowDeselect||Vt.set(s.id,{multiple:s.multipleUseVariable})),s.isSelectableMultiple&&s.isMultipleUseVariable)for(var k=0;k<s.multipleUseVariable;k++)s.isActive&&ve(s,l);else s.isActive&&ce(s,l);else I.startingSum+=T.tmpDisScore,u.set(T.id,T.tmpDisScore),delete T.isChangeDiscount,delete T.tmpDisScore;m=e.id!==s.id,T.discountIsOn||delete T.appliedDiscount,h=!0}if(!o.has(T.idx))for(var M=e.scores.length>0,F=e.scores.length||1,D=0;D<F;D++){var R=M?e.scores[D]:null,j=R&&t.get(R.id)||0,P=R?qt.get(R.id):null;if((!M||M&&P)&&s.isActive){var $=zi(T.requireds),V=new d(JSON.parse(JSON.stringify(v($t))));V.set(e.id,{multiple:e.multipleUseVariable}),l.currentChoices+=1,P&&(P.startingSum+=j);var q=zi(T.requireds,V);if(l.currentChoices-=1,P&&(P.startingSum-=j),q!==$){var L=T.discountIsOn&&void 0!==T.discountScore?T.discountScore:T.value;L=I.allowFloat?L:Math.floor(L);var W=!1;if(q){if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus)for(var E=s.multipleUseVariable-1;E>=0;E--)void 0!==T.isActiveMul&&T.isActiveMul[D]&&(I.belowZeroNotAllowed&&I.startingSum+L<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ve(s,l),s.forcedActivated=!0):ve(s,l):(I.startingSum+=L,u.set(T.id,L),T.isActiveMul[E]=!1,W||(W=!0)));else s.isSelectableMultiple||T.isActive&&(I.belowZeroNotAllowed&&I.startingSum+L<0?(s.forcedActivated&&delete s.forcedActivated,ce(s,l)):(I.startingSum+=L,u.set(T.id,L),delete T.isActive,W=!0));if(W&&T.discountIsOn&&T.appliedDiscount&&T.discountedFrom)for(var U=0;U<T.discountedFrom.length;U++){var N=Wt.get(T.discountedFrom[U]);if(void 0!==N){var z=N.choice;if(z.useDiscountCount&&void 0!==z.discountCount&&z.appliedDisChoices&&-1!==z.appliedDisChoices.indexOf(s.id)){delete T.appliedDiscount,g.add(z);break}delete T.appliedDiscount;break}}}else{if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){var G=s.multipleUseVariable;void 0===T.isActiveMul&&(T.isActiveMul=[]);for(var _=G-1;_>=0;_--)T.isActiveMul[_]||(I.belowZeroNotAllowed&&I.startingSum+L<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ve(s,l),s.forcedActivated=!0):ve(s,l):(I.startingSum-=L,u.set(T.id,L),T.isActiveMul[_]=!0,W||(W=!0)))}else s.isSelectableMultiple||T.isActive||(I.belowZeroNotAllowed&&I.startingSum-L<0?(s.forcedActivated&&delete s.forcedActivated,ce(s,l)):(I.startingSum-=L,u.set(T.id,L),T.isActive=!0,W=!0));if(W&&T.discountIsOn&&!T.appliedDiscount&&T.discountedFrom)for(var H=0;H<T.discountedFrom.length;H++){var Y=Wt.get(T.discountedFrom[H]);if(void 0!==Y){var Z=Y.choice;if(!Z.useDiscountCount||void 0===Z.discountCount){T.appliedDiscount=!0;break}var J=Z.isSelectableMultiple&&Z.isMultipleUseVariable&&Z.stackableDiscount?Z.discountCount*Z.multipleUseVariable:Z.discountCount;if(Z.appliedDisChoices||(Z.appliedDisChoices=[]),J>Z.appliedDisChoices.length||-1!==Z.appliedDisChoices.indexOf(s.id)){T.appliedDiscount=!0,f.add(Z);break}}}}m||(m=!0),o.add(T.idx)}}}}}}if(p.size>0)for(var X=Array.from(p),K=0;K<X.length;K++){var ee=X[K];ee.appliedDisChoices||(ee.appliedDisChoices=[]),-1===ee.appliedDisChoices.indexOf(s.id)&&ee.appliedDisChoices.push(s.id),-1!==b&&e.appliedDisChoices.splice(b,1)}h&&e.appliedDisChoices&&-1!==b&&e.appliedDisChoices.splice(b,1),g.size>0&&g.forEach(function(e){if(e.appliedDisChoices&&!e.scores.some(function(e){return e.appliedDiscount})){var t=e.appliedDisChoices.indexOf(s.id);-1!==t&&e.appliedDisChoices.splice(t,1)}}),f.size>0&&f.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id)}),m&&(0===Q.length?Q.push("Scores Updated On: ".concat(s.title)):Q.push(", ".concat(s.title)),oe(s,u,i+1,o))}},a=n.length-1;a>=0;a--)r();if(0===i){if(Q.length>0&&!app.hideScoresUpdated){var c=document.createElement("div");c.innerHTML=Q.join(""),ei.labelText=c.textContent,ei.isOpen=!0}Q.splice(0)}}function ne(e,t,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,n=Array.from($t.keys()),r=function(){var r=n[a],c=Wt.get(r);if(void 0!==c){var l=c.row,s=c.choice,u=new d,f=new Set,g=new Set,p=!1,m=!1;e.useDiscountCount&&!e.appliedDisChoices&&(e.appliedDisChoices=[]);for(var h=0;h<s.scores.length;h++){var b=s.scores[h];if(!b.isNotRecalculatable){var w=qt.get(b.id);if(void 0!==w){if(e.discountOther&&b.isChangeDiscount&&b.isActive&&void 0!==b.tmpDisScore&&s.id!==e.id){var T=s.multipleUseVariable,I=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount&&e.discountCount?e.discountCount*e.multipleUseVariable:e.discountCount;if(!e.useDiscountCount||e.useDiscountCount&&I&&I>e.appliedDisChoices.length){if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){for(var y=T-1;y>=0;y--)s.isActive&&(w.belowZeroNotAllowed&&w.startingSum+b.tmpDisScore<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ve(s,l),s.forcedActivated=!0):ve(s,l):w.startingSum+=b.tmpDisScore);s.isActive&&(u.set(b.id,b.tmpDisScore),delete b.isChangeDiscount,delete b.tmpDisScore)}else s.isSelectableMultiple||(w.belowZeroNotAllowed&&w.startingSum+b.tmpDisScore<0?(s.forcedActivated&&delete s.forcedActivated,ce(s,l)):(w.startingSum+=b.tmpDisScore,u.set(b.id,b.tmpDisScore),delete b.isChangeDiscount,delete b.tmpDisScore));m=!0,s.isActive&&(b.appliedDiscount=!0,p=!0)}}if(!o.has(b.idx))for(var x=e.scores.length>0,S=e.scores.length||1,C=0;C<S;C++){var A=x?e.scores[C]:null,B=A&&t.get(A.id)||0,O=A?qt.get(A.id):null;if((!x||x&&O)&&s.isActive&&!b.isChanged){var k=zi(b.requireds),M=new d(JSON.parse(JSON.stringify(v($t))));M.delete(e.id),l.currentChoices-=1,O&&(O.startingSum+=B);var F=zi(b.requireds,M);if(l.currentChoices+=1,O&&(O.startingSum-=B),F!==k){var D=b.discountIsOn&&void 0!==b.discountScore?b.discountScore:b.value;D=w.allowFloat?D:Math.floor(D);var R=!1;if(F){if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus)for(var j=s.multipleUseVariable-1;j>=0;j--)void 0!==b.isActiveMul&&b.isActiveMul[j]&&(w.belowZeroNotAllowed&&w.startingSum+D<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ve(s,l),s.forcedActivated=!0):ve(s,l):(w.startingSum+=D,u.set(b.id,D),b.isActiveMul[j]=!1,R||(R=!0)));else s.isSelectableMultiple||b.isActive&&(w.belowZeroNotAllowed&&w.startingSum+D<0?(s.forcedActivated&&delete s.forcedActivated,ce(s,l)):(w.startingSum+=D,u.set(b.id,D),delete b.isActive,R=!0));if(R&&b.discountIsOn&&b.appliedDiscount&&b.discountedFrom)for(var P=0;P<b.discountedFrom.length;P++){var $=Wt.get(b.discountedFrom[P]);if(void 0!==$){var V=$.choice;if(V.useDiscountCount&&void 0!==V.discountCount&&V.appliedDisChoices&&-1!==V.appliedDisChoices.indexOf(s.id)){delete b.appliedDiscount,g.add(V);break}delete b.appliedDiscount;break}}}else{if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){var q=s.multipleUseVariable;void 0===b.isActiveMul&&(b.isActiveMul=[]);for(var L=q-1;L>=0;L--)b.isActiveMul[L]||(w.belowZeroNotAllowed&&w.startingSum+D<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ve(s,l),s.forcedActivated=!0):ve(s,l):(w.startingSum-=D,u.set(b.id,D),b.isActiveMul[L]=!0,R||(R=!0)))}else s.isSelectableMultiple||b.isActive||(w.belowZeroNotAllowed&&w.startingSum-D<0?(s.forcedActivated&&delete s.forcedActivated,ce(s,l)):(w.startingSum-=D,u.set(b.id,D),b.isActive=!0,R=!0));if(R&&b.discountIsOn&&!b.appliedDiscount&&b.discountedFrom)for(var W=0;W<b.discountedFrom.length;W++){var E=Wt.get(b.discountedFrom[W]);if(void 0!==E){var U=E.choice;if(!U.useDiscountCount||void 0===U.discountCount){b.appliedDiscount=!0;break}var N=U.isSelectableMultiple&&U.isMultipleUseVariable&&U.stackableDiscount?U.discountCount*U.multipleUseVariable:U.discountCount;if(U.appliedDisChoices||(U.appliedDisChoices=[]),N>U.appliedDisChoices.length||-1!==U.appliedDisChoices.indexOf(s.id)){b.appliedDiscount=!0,f.add(U);break}}}}m||(m=!0),o.add(b.idx)}}}}}}p&&e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id),g.size>0&&g.forEach(function(e){if(e.appliedDisChoices&&!e.scores.some(function(e){return e.appliedDiscount})){var t=e.appliedDisChoices.indexOf(s.id);-1!==t&&e.appliedDisChoices.splice(t,1)}}),f.size>0&&f.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id)}),m&&(0===Q.length?Q.push("Scores Updated On: ".concat(s.title)):Q.push(", ".concat(s.title)),ne(s,u,i+1,o))}},a=0;a<n.length;a++)r();if(0===i){if(Q.length>0&&!app.hideScoresUpdated){var c=document.createElement("div");c.innerHTML=Q.join(""),ei.labelText=c.textContent,ei.isOpen=!0}Q.splice(0)}}function re(){var e=!1;Array.from(Vt.entries()).forEach(function(t){var i=g(t,2),o=i[0],n=i[1],r=Wt.get(o);if(void 0!==r){var a=r.row,c=r.choice;c.isActive||(ae(c,a),c.isActive&&(Vt.delete(o),e=!0,n.isAllowDeselect||(c.forcedActivated=!0)))}}),e&&re()}function ae(e,i,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=i;if(i.isResultRow||i.isGroupRow){var a=Wt.get(e.id);void 0!==a&&(r=a.row)}if(e.isSelectableMultiple){if(e.id===t.choice.id&&e.allowSelectByClick&&0===e.multipleUseVariable){if(o&&o.target){var c=o.target;if(c.classList.contains("counter-icons")||c.classList.contains("mdi-plus")||c.classList.contains("mdi-minus")||c.classList.contains("mdc-slider"))return}se(e,r)}}else!zi(e.requireds)||i.isInfoRow||n&&e.isNotSelectable||e.forcedActivated||(e.isActive?e.selectOnce||ce(e,r):le(e,r))}function ce(e,t){if(oo(e,!1)){var i=function(){for(var i=new d,o=new Set,n=0;n<e.scores.length;n++){var r=e.scores[n];if(zi(r.requireds)&&r.isActive||r.isActive){var a=qt.get(r.id);if(void 0!==a){var c=r.value;if(r.discountIsOn&&void 0!==r.discountScore&&r.appliedDiscount){if(r.discountedFrom&&r.discountedFrom.length>0)for(var l=0;l<r.discountedFrom.length;l++){var s=Wt.get(r.discountedFrom[l]);if(void 0!==s){var u=s.choice;if(u.useDiscountCount&&void 0!==u.discountCount&&u.appliedDisChoices&&u.appliedDisChoices.length>0){o.add(u);break}}}c=r.discountScore}c=a.allowFloat?c:Math.floor(c),a.startingSum+=c;var f=i.get(r.id);void 0!==f?i.set(r.id,-c+f):i.set(r.id,-c),delete r.isActive,delete r.setValue,delete r.appliedDiscount}}}if(o.size>0&&o.forEach(function(t){if(t.appliedDisChoices){var i=t.appliedDisChoices.indexOf(e.id);-1!==i&&t.appliedDisChoices.splice(i,1)}}),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandom){for(var v=0;v<e.activatedRandom.length;v++){var p=Wt.get(e.activatedRandom[v]);if(void 0!==p){var m=p.row,h=p.choice;te(e,h,m,0)}}delete e.activatedRandom}else for(var b=e.activateThisChoice.split(","),w=0;w<b.length;w++){var T=b[w].split("/ON#"),I=T.length>1?parseInt(T[1]):0,y=Wt.get(T[0]);if(void 0!==y){var x=y.row,C=y.choice;te(e,C,x,I)}else{var A=Et.get(T[0]);if(void 0!==A)for(var B=A.elements,O=0;O<B.length;O++){var k=Wt.get(B[O]);if(void 0!==k){var M=k.row,F=k.choice;te(e,F,M,I)}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){var D=new Set;if(void 0!==e.discountRows)for(var R=0;R<e.discountRows.length;R++){var j=Lt.get(e.discountRows[R]);if(void 0!==j)for(var P=0;P<j.objects.length;P++){var $=j.objects[P];eo(e,$),D.add($.id)}}if(void 0!==e.discountChoices)for(var V=0;V<e.discountChoices.length;V++)if(!D.has(e.discountChoices[V])){var q=Wt.get(e.discountChoices[V]);void 0!==q&&eo(e,q.choice)}}else if(void 0!==e.discountGroups)for(var L=0;L<e.discountGroups.length;L++){var W=Et.get(e.discountGroups[L]);if(void 0!==W)for(var E=0;E<W.elements.length;E++){var U=Wt.get(W.elements[E]);void 0!==U&&eo(e,U.choice)}}if(e.isActive=!1,t.currentChoices-=1,$t.delete(e.id),Array.from($t.entries()).forEach(function(t){var i=g(t,2),o=i[0],n=i[1],r=Wt.get(o);if(void 0!==r){var a=r.row,c=r.choice;if(c.id!==e.id&&!zi(c.requireds))if(c.forcedActivated&&(delete c.forcedActivated,c.isAllowDeselect||Vt.set(c.id,{multiple:n.multiple})),0===n.multiple)c.isActive&&ce(c,a);else if(n.multiple>0)for(var l=0;l<n.multiple;l++)c.isActive&&ve(c,a)}}),e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply){for(var N=0,z=0;z<e.pointTypeToMultiply.length;z++){var G=qt.get(e.pointTypeToMultiply[z]);if(void 0!==G){for(var _=Yt.length-1;_>=0;_--){var H=Yt[_];if(H.multiplyPointtypeIsOnCheck&&void 0!==H.startingSumAtMultiply){var Y=H.startingSumAtMultiply[z].value*H.startingSumAtMultiply[z].calcVal;Y=G.allowFloat?Y:Math.floor(Y),G.startingSum-=Y,G.startingSum+=H.startingSumAtMultiply[z].value}if(H.dividePointtypeIsOnCheck&&void 0!==H.startingSumAtDivide){var Z=H.startingSumAtDivide[z].value/H.startingSumAtDivide[z].calcVal;Z=G.allowFloat?Z:Math.floor(Z),G.startingSum-=Z,G.startingSum+=H.startingSumAtDivide[z].value}if(H.id===e.id){N=_;break}}for(var J=N+1;J<Yt.length;J++){var X=Yt[J];X.multiplyPointtypeIsOnCheck&&void 0!==X.startingSumAtMultiply&&(X.startingSumAtMultiply[z].value=G.startingSum,G.startingSum*=X.startingSumAtMultiply[z].calcVal,G.startingSum=G.allowFloat?G.startingSum:Math.floor(G.startingSum)),X.dividePointtypeIsOnCheck&&void 0!==X.startingSumAtDivide&&(X.startingSumAtDivide[z].value=G.startingSum,G.startingSum/=X.startingSumAtDivide[z].calcVal,G.startingSum=G.allowFloat?G.startingSum:Math.floor(G.startingSum))}}}delete e.multiplyPointtypeIsOnCheck,delete e.startingSumAtMultiply,e.dividePointtypeIsOnCheck||Yt.splice(N,1)}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide){for(var K=0,Q=0;Q<e.pointTypeToDivide.length;Q++){var ee=qt.get(e.pointTypeToDivide[Q]);if(void 0!==ee){for(var ie=Yt.length-1;ie>=0;ie--){var ne=Yt[ie];if(ne.multiplyPointtypeIsOnCheck&&void 0!==ne.startingSumAtMultiply){var ae=ne.startingSumAtMultiply[Q].value*ne.startingSumAtMultiply[Q].calcVal;ae=ee.allowFloat?ae:Math.floor(ae),ee.startingSum-=ae,ee.startingSum+=ne.startingSumAtMultiply[Q].value}if(ne.dividePointtypeIsOnCheck&&void 0!==ne.startingSumAtDivide){var le=ne.startingSumAtDivide[Q].value/ne.startingSumAtDivide[Q].calcVal;le=ee.allowFloat?le:Math.floor(le),ee.startingSum-=le,ee.startingSum+=ne.startingSumAtDivide[Q].value}if(ne.id===e.id){K=ie;break}}for(var se=K+1;se<Yt.length;se++){var ue=Yt[se];ue.multiplyPointtypeIsOnCheck&&void 0!==ue.startingSumAtMultiply&&(ue.startingSumAtMultiply[Q].value=ee.startingSum,ee.startingSum*=ue.startingSumAtMultiply[Q].calcVal,ee.startingSum=ee.allowFloat?ee.startingSum:Math.floor(ee.startingSum)),ue.dividePointtypeIsOnCheck&&void 0!==ue.startingSumAtDivide&&(ue.startingSumAtDivide[Q].value=ee.startingSum,ee.startingSum/=ue.startingSumAtDivide[Q].calcVal,ee.startingSum=ee.allowFloat?ee.startingSum:Math.floor(ee.startingSum))}}}delete e.dividePointtypeIsOnCheck,delete e.startingSumAtDivide,Yt.splice(K,1)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(var de=0;de<e.changedVariables.length;de++){var fe=zt.get(e.changedVariables[de]);void 0!==fe&&("1"===e.changeType?fe.isTrue=!1:"2"===e.changeType?fe.isTrue=!0:"3"===e.changeType&&(fe.isTrue=!fe.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var ge=0;ge<e.idOfAllowChoice.length;ge++){var pe=Lt.get(e.idOfAllowChoice[ge]);if(void 0!==pe&&(pe.allowedChoices-=e.numbAddToAllowChoice,pe.allowedChoices>0&&pe.currentChoices>=pe.allowedChoices))for(var me=0;me<pe.objects.length;me++){var he=pe.objects[me];if(he.isActive&&!he.forcedActivated)if(he.isSelectableMultiple)for(var be=he.multipleUseVariable,we=0;we<be;we++)ve(he,pe);else ce(he,pe);if(pe.allowedChoices>=pe.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var Te=Nt.get(e.idOfTheTextfieldWord);void 0!==Te&&(Te.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){var Ie=app.bgImageStack.findIndex(function(t){return t.id===e.id});-1!==Ie&&app.bgImageStack.splice(Ie,1);var ye=app.bgImageStack.length;ye>0?app.styling.backgroundImage=app.bgImageStack[ye-1].data:(app.styling.backgroundImage=app.defaultBgImage||"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){var xe=app.bgColorStack.findIndex(function(t){return t.id===e.id});-1!==xe&&app.bgColorStack.splice(xe,1);var Se=app.bgColorStack.length;Se>0?app.styling.backgroundColor=app.bgColorStack[Se-1].data:(app.styling.backgroundColor=app.defaultBgColor||"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){var Ce=app.barBgColorStack.findIndex(function(t){return t.id===e.id});-1!==Ce&&app.barBgColorStack.splice(Ce,1);var Ae=app.barBgColorStack.length;Ae>0?app.styling.barBackgroundColor=app.barBgColorStack[Ae-1].data:(app.styling.barBackgroundColor=app.defaultBarBgColor||"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){var Be=app.barIconColorStack.findIndex(function(t){return t.id===e.id});-1!==Be&&app.barIconColorStack.splice(Be,1);var Oe=app.barIconColorStack.length;Oe>0?app.styling.barIconColor=app.barIconColorStack[Oe-1].data:(app.styling.barIconColor=app.defaultBarIconColor||"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){var ke=app.barTextColorStack.findIndex(function(t){return t.id===e.id});-1!==ke&&app.barTextColorStack.splice(ke,1);var Me=app.barTextColorStack.length;Me>0?app.styling.barTextColor=app.barTextColorStack[Me-1].data:(app.styling.barTextColor=app.defaultBarIconColor||"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var Fe=e.changeTemplatesList.split(","),De=0;De<Fe.length;De++){var Re=Fe[De],je=Wt.get(Re);if(void 0===je){var Pe=Lt.get(Re);if(void 0===Pe){var $e=Et.get(Re[0]);if(void 0===$e);else{for(var Ve=$e.rowElements,qe=0;qe<Ve.length;qe++){var Le=Lt.get(Ve[qe]);void 0!==Le&&Ho(Le,e.id)}for(var We=$e.elements,Ee=0;Ee<We.length;Ee++){var Ue=Wt.get(We[Ee]);if(void 0!==Ue)Ho(Ue.choice,e.id)}}}else Ho(Pe,e.id)}else{var Ne=je.choice;if(Ho(Ne,e.id),e.changeAddonTemplate)for(var ze=0;ze<Ne.addons.length;ze++){Ho(Ne.addons[ze],e.id)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Ge=e.changeWidthList.split(","),_e=0;_e<Ge.length;_e++){var He=Ge[_e],Ye=Wt.get(He);if(void 0===Ye){var Ze=Lt.get(He);if(void 0===Ze){var Je=Et.get(He[0]);if(void 0===Je);else{for(var Xe=Je.rowElements,Ke=0;Ke<Xe.length;Ke++){var Qe=Lt.get(Xe[Ke]);void 0!==Qe&&Zo(Qe,e.id)}for(var et=Je.elements,tt=0;tt<et.length;tt++){var it=Wt.get(et[tt]);if(void 0!==it)Zo(it.choice,e.id)}}}else Zo(Ze,e.id)}else{Zo(Ye.choice,e.id)}}if(e.setBgmIsOn&&Xt&&e.bgmId&&(Kt.bgmIsPlaying=!1,Hi(e,e.bgmId,0)),e.muteBgm&&Xt){var ot=S(Xt);app.isMute=!1,ot&&"function"==typeof ot.unMute&&ot.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var nt=0;nt<e.hiddenContentsRow.length;nt++){var rt=Lt.get(e.hiddenContentsRow[nt]);if(void 0!==rt)for(var at=0;at<e.hiddenContentsType.length;at++)switch(e.hiddenContentsType[at]){case"1":delete rt.objectTitleRemoved;break;case"2":delete rt.objectImageRemoved;break;case"3":delete rt.objectTextRemoved;break;case"4":delete rt.objectScoreRemoved;break;case"5":delete rt.objectRequirementRemoved;break;case"6":delete rt.addonTitleRemoved;break;case"7":delete rt.addonImageRemoved;break;case"8":delete rt.addonTextRemoved}}delete e.tempSlots,oe(e,i,0),re(),delete e.appliedDisChoices};e.isSelectDelayed&&void 0!==e.selectDelayTime?e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,i()},1e3*app.fadeTransitionTime)):i()),0===c.indexOf(e.id)&&c.splice(0),delete e.selectDelayTimer},e.selectDelayTime)):(-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,i()},1e3*app.fadeTransitionTime)):i()),0===c.indexOf(e.id)&&c.splice(0))}}function le(e,i){var o=!0;if(i.allowedChoices>0&&i.currentChoices>=i.allowedChoices){for(var n=0,r=0;r<i.objects.length;r++){var a=i.objects[r];if(a.isActive){if(!a.forcedActivated&&!a.selectOnce){if(a.isSelectableMultiple)for(var s=a.multipleUseVariable,f=0;f<s;f++)ve(a,i);else ae(a,i);break}n++}}n>=i.allowedChoices&&(o=!1)}if(o){for(var v=0;v<e.scores.length;v++){var p=e.scores[v],m=qt.get(p.id);void 0!==m&&p.isRandom&&!p.setValue&&void 0!==p.maxValue&&void 0!==p.minValue&&(p.value=Math.floor(Math.random()*(p.maxValue-p.minValue+1))+p.minValue,p.value=m.allowFloat?p.value:Math.floor(p.value),p.setValue=!0)}if(oo(e,!0)){var h=function(){var o=new d;if(e.isActive=!0,$t.set(e.id,{multiple:0}),i.currentChoices+=1,e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){var n=new Set;if(void 0!==e.discountRows)for(var r=0;r<e.discountRows.length;r++){var a=Lt.get(e.discountRows[r]);if(void 0!==a)for(var c=0;c<a.objects.length;c++){var l=a.objects[c];to(e,l),n.add(l.id)}}if(void 0!==e.discountChoices)for(var s=0;s<e.discountChoices.length;s++)if(!n.has(e.discountChoices[s])){var f=Wt.get(e.discountChoices[s]);void 0!==f&&to(e,f.choice)}}else if(void 0!==e.discountGroups)for(var v=0;v<e.discountGroups.length;v++){var p=Et.get(e.discountGroups[v]);if(void 0!==p)for(var m=0;m<p.elements.length;m++){var h=Wt.get(p.elements[m]);void 0!==h&&to(e,h.choice)}}for(var b=new Set,w=0;w<e.scores.length;w++){var T=e.scores[w];if(zi(T.requireds)&&!T.isActive){var I=qt.get(T.id);if(void 0!==I){var y=T.value;if(T.appliedDiscount&&void 0!==T.discountScore)y=T.discountScore;else if(T.discountIsOn&&void 0!==T.discountScore&&T.discountedFrom&&T.discountedFrom.length>0){for(var x=!1,C=0;C<T.discountedFrom.length;C++){var A=Wt.get(T.discountedFrom[C]);if(void 0!==A){var B=A.choice;if(!B.useDiscountCount||void 0===B.discountCount){y=T.discountScore,T.appliedDiscount=!0,x=!0;break}var O=B.isSelectableMultiple&&B.isMultipleUseVariable&&B.stackableDiscount?B.discountCount*B.multipleUseVariable:B.discountCount;if(B.appliedDisChoices||(B.appliedDisChoices=[]),O>B.appliedDisChoices.length){b.add(B),y=T.discountScore,T.appliedDiscount=!0,x=!0;break}}}if(!x&&void 0!==T.tmpDiscount)for(var k=0;k<T.tmpDiscount.length;k++)y>T.tmpDiscount[k].discountedValue&&(y=T.tmpDiscount[k].discountedValue)}y=I.allowFloat?y:Math.floor(y),I.startingSum-=y,T.isActive=!0;var M=o.get(T.id);void 0!==M?o.set(T.id,y+M):o.set(T.id,y)}}}if(b.size>0&&b.forEach(function(t){t.appliedDisChoices&&-1===t.appliedDisChoices.indexOf(e.id)&&t.appliedDisChoices.push(e.id)}),e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&uo(e),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom)ie(e);else for(var F=e.activateThisChoice.split(","),D=0;D<F.length;D++){var R=F[D].split("/ON#"),j=R.length>1?parseInt(R[1]):0,P=Wt.get(R[0]);if(void 0!==P){var $=P.row,V=P.choice;ee(e,V,$,j)}else{var q=Et.get(R[0]);if(void 0!==q)for(var L=q.elements,W=0;W<L.length;W++){var E=Wt.get(L[W]);if(void 0!==E){var U=E.row,N=E.choice;ee(e,N,U,j)}}}}if(e.deactivateOtherChoice&&void 0!==e.deactivateThisChoice)for(var z=e.deactivateThisChoice.split(","),G=0;G<z.length;G++){var _=z[G].split("/ON#"),H=_.length>1?parseInt(_[1]):0,Y=Wt.get(_[0]);if(void 0!==Y){var Z=Y.row,J=Y.choice;if(J.isActive)if(J.isSelectableMultiple&&J.isMultipleUseVariable)for(var X=0;X<H;X++)ve(J,Z);else ce(J,Z)}else{var K=Et.get(_[0]);if(void 0!==K)for(var Q=K.elements,te=0;te<Q.length;te++){var oe=Wt.get(Q[te]);if(void 0!==oe){var ae=oe.row,le=oe.choice;if(le.isActive)if(le.isSelectableMultiple&&le.isMultipleUseVariable)for(var se=0;se<H;se++)ve(le,ae);else ce(le,ae)}}}}if(Array.from($t.entries()).forEach(function(t){var i=g(t,2),o=i[0],n=i[1],r=Wt.get(o);if(void 0!==r){var a=r.row,c=r.choice;if(c.id!==e.id&&!zi(c.requireds))if(c.forcedActivated&&(delete c.forcedActivated,c.isAllowDeselect||Vt.set(c.id,{multiple:n.multiple})),0===n.multiple)c.isActive&&ce(c,a);else if(n.multiple>0)for(var l=0;l<n.multiple;l++)c.isActive&&ve(c,a)}}),e.multiplyPointtypeIsOn&&void 0!==e.pointTypeToMultiply&&void 0!==e.multiplyWithThis){var de=0;e.multiplyPointtypeIsOnCheck=!0,"object"!==u(e.startingSumAtMultiply)&&(e.startingSumAtMultiply=[]);for(var fe=0;fe<e.pointTypeToMultiply.length;fe++){var ge=qt.get(e.pointTypeToMultiply[fe]);if(void 0!==ge)if(e.multiplyPointtypeIsId&&"string"==typeof e.multiplyWithThis){var pe=qt.get(e.multiplyWithThis);void 0!==pe?(e.startingSumAtMultiply[fe]={value:ge.startingSum,calcVal:pe.startingSum},ge.startingSum*=pe.startingSum,ge.startingSum=ge.allowFloat?ge.startingSum:Math.floor(ge.startingSum)):de++}else"number"==typeof e.multiplyWithThis&&(e.startingSumAtMultiply[fe]={value:ge.startingSum,calcVal:e.multiplyWithThis},ge.startingSum*=e.multiplyWithThis,ge.startingSum=ge.allowFloat?ge.startingSum:Math.floor(ge.startingSum));else de++}de===e.pointTypeToMultiply.length&&delete e.multiplyPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck&&Yt.push(e)}if(e.dividePointtypeIsOn&&void 0!==e.pointTypeToDivide&&void 0!==e.divideWithThis){var me=0;e.dividePointtypeIsOnCheck=!0,"object"!==u(e.startingSumAtDivide)&&(e.startingSumAtDivide=[]);for(var he=0;he<e.pointTypeToDivide.length;he++){var be=qt.get(e.pointTypeToDivide[he]);if(void 0!==be)if(e.dividePointtypeIsId&&"string"==typeof e.divideWithThis){var we=qt.get(e.divideWithThis);void 0!==we?0===we.startingSum?me++:(e.startingSumAtDivide[he]={value:be.startingSum,calcVal:we.startingSum},be.startingSum/=we.startingSum,be.startingSum=be.allowFloat?be.startingSum:Math.floor(be.startingSum)):me++}else"number"==typeof e.divideWithThis&&(0===e.dividedWithThis?me++:(e.startingSumAtDivide[he]={value:be.startingSum,calcVal:e.divideWithThis},be.startingSum/=e.divideWithThis,be.startingSum=be.allowFloat?be.startingSum:Math.floor(be.startingSum)));else me++}me===e.pointTypeToDivide.length&&delete e.dividePointtypeIsOnCheck,!e.multiplyPointtypeIsOnCheck&&e.dividePointtypeIsOnCheck&&Yt.push(e)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(var Te=0;Te<e.changedVariables.length;Te++){var Ie=zt.get(e.changedVariables[Te]);void 0!==Ie&&("1"===e.changeType?Ie.isTrue=!0:"2"===e.changeType?Ie.isTrue=!1:"3"===e.changeType&&(Ie.isTrue=!Ie.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var ye=0;ye<e.idOfAllowChoice.length;ye++){var xe=Lt.get(e.idOfAllowChoice[ye]);if(void 0!==xe&&(xe.allowedChoices+=e.numbAddToAllowChoice,xe.allowedChoices>0&&xe.currentChoices>=xe.allowedChoices))for(var Se=0;Se<xe.objects.length;Se++){var Ce=xe.objects[Se];if(Ce.isActive&&!Ce.forcedActivated)if(Ce.isSelectableMultiple)for(var Ae=Ce.multipleUseVariable,Be=0;Be<Ae;Be++)ve(Ce,xe);else ce(Ce,xe);if(xe.allowedChoices>=xe.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var Oe=Nt.get(e.idOfTheTextfieldWord);void 0!==Oe&&(Oe.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,Qt.currentDialog="appImageUpload",Qt.data=e,Qt.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var ke=e.changeTemplatesList.split(","),Me=0;Me<ke.length;Me++){var Fe=ke[Me],De=Wt.get(Fe);if(void 0===De){var Re=Lt.get(Fe);if(void 0===Re){var je=Et.get(Fe[0]);if(void 0===je);else{for(var Pe=je.rowElements,$e=0;$e<Pe.length;$e++){var Ve=Lt.get(Pe[$e]);void 0!==Ve&&_o(Ve,e.id,e.changeToThisTemplate)}for(var qe=je.elements,Le=0;Le<qe.length;Le++){var We=Wt.get(qe[Le]);if(void 0!==We)_o(We.choice,e.id,e.changeToThisTemplate)}}}else _o(Re,e.id,e.changeToThisTemplate)}else{var Ee=De.choice;if(_o(Ee,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var Ue=0;Ue<Ee.addons.length;Ue++){_o(Ee.addons[Ue],e.id,e.changeToThisTemplate)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Ne=e.changeWidthList.split(","),ze=0;ze<Ne.length;ze++){var Ge=Ne[ze],_e=Wt.get(Ge);if(void 0===_e){var He=Lt.get(Ge);if(void 0===He){var Ye=Et.get(Ge[0]);if(void 0===Ye);else{for(var Ze=Ye.rowElements,Je=0;Je<Ze.length;Je++){var Xe=Lt.get(Ze[Je]);void 0!==Xe&&Yo(Xe,e.id,e.changeToThisWidth)}for(var Ke=Ye.elements,Qe=0;Qe<Ke.length;Qe++){var et=Wt.get(Ke[Qe]);if(void 0!==et)Yo(et.choice,e.id,e.changeToThisWidth)}}}else Yo(He,e.id,e.changeToThisWidth)}else{Yo(_e.choice,e.id,e.changeToThisWidth)}}if(e.setBgmIsOn&&e.bgmId&&(Kt.bgmIsPlaying=!0,Kt.isBgmInit?Hi(e,e.bgmId,0):(Zi(e),Kt.isBgmInit=!0)),e.muteBgm&&Xt){var tt=S(Xt);app.isMute=!0,tt&&"function"==typeof tt.mute&&tt.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var it=0;it<e.hiddenContentsRow.length;it++){var ot=Lt.get(e.hiddenContentsRow[it]);if(void 0!==ot){ot.textIsRemoved||(ot.textIsRemoved=!0);for(var nt=0;nt<e.hiddenContentsType.length;nt++)switch(e.hiddenContentsType[nt]){case"1":ot.objectTitleRemoved=!0;break;case"2":ot.objectImageRemoved=!0;break;case"3":ot.objectTextRemoved=!0;break;case"4":ot.objectScoreRemoved=!0;break;case"5":ot.objectRequirementRemoved=!0;break;case"6":ot.addonTitleRemoved=!0;break;case"7":ot.addonImageRemoved=!0;break;case"8":ot.addonTextRemoved=!0}}}e.scrollToRow&&ue().then(function(){setTimeout(function(){if(e.scrollToObject){if(e.scrollObjectId){var i=Wt.get(e.scrollObjectId);if(void 0!==i){var o,n=i.choice,r=i.row,a=null===(o=t.mainDiv)||void 0===o||null===(o=o.children[r.index])||void 0===o||null===(o=o.children[0])||void 0===o||null===(o=o.children[1])||void 0===o?void 0:o.children;if(void 0!==a)if(t.isBackpack){var c=document.getElementById("backpackDialog");null==c||c.scrollTo({top:a[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:a[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}else if(e.scrollRowId){var l=Lt.get(e.scrollRowId);if(void 0!==l){var s,u=null===(s=t.mainDiv)||void 0===s?void 0:s.children;if(void 0!==u)if(t.isBackpack){var d=document.getElementById("backpackDialog");null==d||d.scrollTo({top:u[l.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:u[l.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}},10)}),e.cleanACtivatedOnSelect&&no(),ne(e,o,0),re(),!zi(e.requireds)&&e.isActive&&ce(e,i)};if(e.customTextfieldIsOn&&!y)return l.choice=e,l.row=i,l.context=void 0!==e.wordPromptText?e.wordPromptText:"",l.prevText=e.wordChangeSelect||"",l.isWord=!0,void U(I,"dlgCommon");if(e.confirmIsOn&&!y)return l.choice=e,l.row=i,l.context=void 0!==e.wordPromptText?e.wordPromptText:"",l.isWord=!1,void U(I,"dlgCommon");e.isSelectDelayed&&void 0!==e.selectDelayTime?e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,h()},1e3*app.fadeTransitionTime)):h()),0===c.indexOf(e.id)&&c.splice(0),delete e.selectDelayTimer},e.selectDelayTime)):(-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,h()},1e3*app.fadeTransitionTime)):h()),0===c.indexOf(e.id)&&c.splice(0))}}}function se(e,i){var o=zi(e.requireds)&&!i.isInfoRow&&!e.isNotSelectable,n=!0,r=i;if(i.isResultRow){var a=Wt.get(e.id);void 0!==a&&(r=a.row)}if(o&&e.isMultipleUseVariable&&0===e.multipleUseVariable&&r.allowedChoices>0&&r.currentChoices>=r.allowedChoices){for(var l=0,s=0;s<r.objects.length;s++){var u=r.objects[s];if(u.isActive){if(!u.forcedActivated&&!u.selectOnce){if(u.isSelectableMultiple)for(var f=u.multipleUseVariable,v=0;v<f;v++)ve(u,r);else ae(u,r);break}l++}}l>=r.allowedChoices&&(n=!1)}if(n){for(var p=0;p<e.scores.length;p++){var m=e.scores[p],h=qt.get(m.id);void 0!==h&&m.isRandom&&!m.setValue&&void 0!==m.maxValue&&void 0!==m.minValue&&(m.value=Math.floor(Math.random()*(m.maxValue-m.minValue+1))+m.minValue,m.value=h.allowFloat?m.value:Math.floor(m.value),m.setValue=!0)}if(oo(e,!0)){var b=function(){var o=new d,n=e.isActive,a=e.multipleUseVariable>=0,c=Math.abs(e.multipleUseVariable);if(e.multipleUseVariable+=1,0===e.multipleUseVariable?($t.delete(e.id),e.isActive=!1,r.currentChoices-=1):(1===e.multipleUseVariable&&(e.isActive=!0,r.currentChoices+=1),$t.set(e.id,{multiple:e.multipleUseVariable})),a){if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(e.isDisChoices){var l=new Set;if(void 0!==e.discountRows)for(var s=0;s<e.discountRows.length;s++){var u=Lt.get(e.discountRows[s]);if(void 0!==u)for(var f=0;f<u.objects.length;f++){var v=u.objects[f];to(e,v),l.add(v.id)}}if(void 0!==e.discountChoices)for(var p=0;p<e.discountChoices.length;p++)if(!l.has(e.discountChoices[p])){var m=Wt.get(e.discountChoices[p]);void 0!==m&&to(e,m.choice)}}else if(void 0!==e.discountGroups)for(var h=0;h<e.discountGroups.length;h++){var b=Et.get(e.discountGroups[h]);if(void 0!==b)for(var w=0;w<b.elements.length;w++){var T=Wt.get(b.elements[w]);void 0!==T&&to(e,T.choice)}}for(var I=new Set,y=0;y<e.scores.length;y++){var x=e.scores[y];if(void 0===x.isActiveMul&&(x.isActiveMul=[]),zi(x.requireds)&&!x.isActiveMul[c]){var C=qt.get(x.id);if(void 0!==C){var A=x.value;if(x.appliedDiscount&&void 0!==x.discountScore)A=x.discountScore;else if(x.discountIsOn&&void 0!==x.discountScore&&x.discountedFrom&&x.discountedFrom.length>0){for(var B=!1,O=0;O<x.discountedFrom.length;O++){var k=Wt.get(x.discountedFrom[O]);if(void 0!==k){var M=k.choice;if(!M.useDiscountCount||void 0===M.discountCount){A=x.discountScore,x.appliedDiscount=!0,B=!0;break}var F=M.isSelectableMultiple&&M.isMultipleUseVariable&&M.stackableDiscount?M.discountCount*M.multipleUseVariable:M.discountCount;if(M.appliedDisChoices||(M.appliedDisChoices=[]),F>M.appliedDisChoices.length){I.add(M),A=x.discountScore,x.appliedDiscount=!0,B=!0;break}}}if(!B&&void 0!==x.tmpDiscount)for(var D=0;D<x.tmpDiscount.length;D++)A>x.tmpDiscount[D].discountedValue&&(A=x.tmpDiscount[D].discountedValue)}A=C.allowFloat?A:Math.floor(A),x.multiplyByTimes&&(A*=c+1),C.startingSum-=A,x.isActiveMul[c]=!0;var R=o.get(x.id);void 0!==R?o.set(x.id,A+R):o.set(x.id,A)}}}I.size>0&&I.forEach(function(t){t.appliedDisChoices&&-1===t.appliedDisChoices.indexOf(e.id)&&t.appliedDisChoices.push(e.id)})}else for(var j=0;j<e.scores.length;j++){var P=e.scores[j];if(void 0===P.isActiveMulMinus&&(P.isActiveMulMinus=[]),zi(P.requireds)&&P.isActiveMulMinus[c]||P.isActiveMulMinus[c]){var $=qt.get(P.id);if(void 0!==$){var V=P.discountIsOn&&void 0!==P.discountScore?P.discountScore:P.value;V=$.allowFloat?V:Math.floor(V),P.multiplyByTimes&&(V*=Math.abs(c)),$.startingSum-=V;var q=o.get(P.id);void 0!==q?o.set(P.id,V+q):o.set(P.id,V),delete P.isActiveMulMinus[c]}}}if(a&&(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&uo(e),e.activateOtherChoice&&void 0!==e.activateThisChoice))if(e.isActivateRandom)ie(e);else for(var L=e.activateThisChoice.split(","),W=0;W<L.length;W++){var E=L[W].split("/ON#"),U=E.length>1?parseInt(E[1]):0,N=Wt.get(E[0]);if(void 0!==N){var z=N.row,G=N.choice;!G.isSelectableMultiple&&n||ee(e,G,z,U)}else{var _=Et.get(E[0]);if(void 0!==_)for(var H=_.elements,Y=0;Y<H.length;Y++){var Z=Wt.get(H[Y]);if(void 0!==Z){var J=Z.row,X=Z.choice;!X.isSelectableMultiple&&n||ee(e,X,J,U)}}}}if(Array.from($t.entries()).forEach(function(t){var i=g(t,2),o=i[0],n=i[1],r=Wt.get(o);if(void 0!==r){var a=r.row,c=r.choice;if(c.id!==e.id&&!zi(c.requireds))if(c.forcedActivated&&(delete c.forcedActivated,c.isAllowDeselect||Vt.set(c.id,{multiple:n.multiple})),0===n.multiple)c.isActive&&ce(c,a);else if(n.multiple>0)for(var l=0;l<n.multiple;l++)c.isActive&&ve(c,a)}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var K=0;K<e.idOfAllowChoice.length;K++){var Q=Lt.get(e.idOfAllowChoice[K]);if(void 0!==Q&&(Q.allowedChoices+=e.numbAddToAllowChoice,Q.allowedChoices>0&&Q.currentChoices>=Q.allowedChoices))for(var te=0;te<Q.objects.length;te++){var oe=Q.objects[te];if(oe.isActive&&!oe.forcedActivated)if(oe.isSelectableMultiple)for(var ae=oe.multipleUseVariable,le=0;le<ae;le++)ve(oe,Q);else oe.isActive&&ce(oe,Q);if(Q.allowedChoices>=Q.currentChoices)break}}if(!n){if(e.isChangeVariables&&void 0!==e.changedVariables)for(var se=0;se<e.changedVariables.length;se++){var de=zt.get(e.changedVariables[se]);void 0!==de&&("1"===e.changeType?de.isTrue=!0:"2"===e.changeType?de.isTrue=!1:"3"===e.changeType&&(de.isTrue=!de.isTrue))}if(e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var fe=e.changeTemplatesList.split(","),ge=0;ge<fe.length;ge++){var pe=fe[ge],me=Wt.get(pe);if(void 0===me){var he=Lt.get(pe);if(void 0===he){var be=Et.get(pe[0]);if(void 0===be);else{for(var we=be.rowElements,Te=0;Te<we.length;Te++){var Ie=Lt.get(we[Te]);void 0!==Ie&&_o(Ie,e.id,e.changeToThisTemplate)}for(var ye=be.elements,xe=0;xe<ye.length;xe++){var Se=Wt.get(ye[xe]);if(void 0!==Se)_o(Se.choice,e.id,e.changeToThisTemplate)}}}else _o(he,e.id,e.changeToThisTemplate)}else{var Ce=me.choice;if(_o(Ce,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var Ae=0;Ae<Ce.addons.length;Ae++){_o(Ce.addons[Ae],e.id,e.changeToThisTemplate)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Be=e.changeWidthList.split(","),Oe=0;Oe<Be.length;Oe++){var ke=Be[Oe],Me=Wt.get(ke);if(void 0===Me){var Fe=Lt.get(ke);if(void 0===Fe){var De=Et.get(ke[0]);if(void 0===De);else{for(var Re=De.rowElements,je=0;je<Re.length;je++){var Pe=Lt.get(Re[je]);void 0!==Pe&&Yo(Pe,e.id,e.changeToThisWidth)}for(var $e=De.elements,Ve=0;Ve<$e.length;Ve++){var qe=Wt.get($e[Ve]);if(void 0!==qe)Yo(qe.choice,e.id,e.changeToThisWidth)}}}else Yo(Fe,e.id,e.changeToThisWidth)}else{Yo(Me.choice,e.id,e.changeToThisWidth)}}if(e.setBgmIsOn&&e.bgmId&&(Kt.bgmIsPlaying=!0,Kt.isBgmInit?Hi(e,e.bgmId,0):(Zi(e),Kt.isBgmInit=!0)),e.muteBgm&&Xt){var Le=S(Xt);app.isMute=!0,Le&&"function"==typeof Le.mute&&Le.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var We=0;We<e.hiddenContentsRow.length;We++){var Ee=Lt.get(e.hiddenContentsRow[We]);if(void 0!==Ee){Ee.textIsRemoved||(Ee.textIsRemoved=!0);for(var Ue=0;Ue<e.hiddenContentsType.length;Ue++)switch(e.hiddenContentsType[Ue]){case"1":Ee.objectTitleRemoved=!0;break;case"2":Ee.objectImageRemoved=!0;break;case"3":Ee.objectTextRemoved=!0;break;case"4":Ee.objectScoreRemoved=!0;break;case"5":Ee.objectRequirementRemoved=!0;break;case"6":Ee.addonTitleRemoved=!0;break;case"7":Ee.addonImageRemoved=!0;break;case"8":Ee.addonTextRemoved=!0}}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var Ne=e.changeTemplatesList.split(","),ze=0;ze<Ne.length;ze++){var Ge=Ne[ze],_e=Wt.get(Ge);if(void 0!==_e){var He=_e.choice;He.defaultTemplate&&(He.defaultTemplate=He.template),He.template=e.changeToThisTemplate,e.changeAddonTemplate}else{var Ye=Lt.get(Ge);if(void 0!==Ye)Ye.defaultTemplate=Ye.template,Ye.template=e.changeToThisTemplate;else{var Ze=Et.get(Ge[0]);if(void 0!==Ze){for(var Je=Ze.rowElements,Xe=0;Xe<Je.length;Xe++){var Ke=Lt.get(Je[Xe]);void 0!==Ke&&(Ke.defaultTemplate=Ke.template,Ke.template=e.changeToThisTemplate)}for(var Qe=Ze.elements,et=0;et<Qe.length;et++){var tt=Wt.get(Qe[et]);if(void 0!==tt){var it=tt.choice;it.defaultTemplate=it.template,it.template=e.changeToThisTemplate}}}}}}e.scrollToRow&&ue().then(function(){setTimeout(function(){if(e.scrollToObject){if(e.scrollObjectId){var i=Wt.get(e.scrollObjectId);if(void 0!==i){var o,n=i.choice,r=i.row,a=null===(o=t.mainDiv)||void 0===o||null===(o=o.children[r.index])||void 0===o||null===(o=o.children[0])||void 0===o||null===(o=o.children[1])||void 0===o?void 0:o.children;if(void 0!==a)if(t.isBackpack){var c=document.getElementById("backpackDialog");null==c||c.scrollTo({top:a[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:a[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}else if(e.scrollRowId){var l=Lt.get(e.scrollRowId);if(void 0!==l){var s,u=null===(s=t.mainDiv)||void 0===s?void 0:s.children;if(void 0!==u)if(t.isBackpack){var d=document.getElementById("backpackDialog");null==d||d.scrollTo({top:u[l.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:u[l.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}},10)})}ne(e,o,0),re(),!zi(e.requireds)&&e.isActive&&ve(e,i)};if(o)if(e.isMultipleUseVariable)void 0===e.multipleUseVariable&&(e.multipleUseVariable=0),void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>e.multipleUseVariable&&(e.isSelectDelayed&&void 0!==e.selectDelayTime?e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,b()},1e3*app.fadeTransitionTime)):b()),0===c.indexOf(e.id)&&c.splice(0),delete e.selectDelayTimer},e.selectDelayTime)):(-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,b()},1e3*app.fadeTransitionTime)):b()),0===c.indexOf(e.id)&&c.splice(0)));else if(void 0!==e.multipleScoreId){var w=qt.get(e.multipleScoreId);void 0!==w&&(void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>w.startingSum&&(w.startingSum+=1))}}}}function ve(e,t){var i=oo(e,!1),o=t;if(t.isResultRow){var n=Wt.get(e.id);void 0!==n&&(o=n.row)}if(i){var r=function(){var t=new d,i=e.multipleUseVariable>0,n=Math.abs(e.multipleUseVariable-1);if(i){for(var r=0;r<e.scores.length;r++){var a=e.scores[r];if(void 0!==a.isActiveMul&&(zi(a.requireds)&&a.isActiveMul[n]||a.isActiveMul[n])){var c=qt.get(a.id);if(void 0!==c){var l=a.discountIsOn&&void 0!==a.discountScore?a.discountScore:a.value;l=c.allowFloat?l:Math.floor(l),a.multiplyByTimes&&(l*=n+1),c.startingSum+=l;var s=t.get(a.id);void 0!==s?t.set(a.id,-l+s):t.set(a.id,-l),delete a.isActiveMul[n],0===n&&delete a.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandomMul&&void 0!==e.activatedRandomMul[n]){for(var u=0;u<e.activatedRandomMul[n].length;u++){var f=Wt.get(e.activatedRandomMul[n][u]);if(void 0!==f){var v=f.row,p=f.choice;te(e,p,v,0)}}e.activatedRandomMul.splice(n,1)}else for(var m=e.activateThisChoice.split(","),h=0;h<m.length;h++){var b=m[h].split("/ON#"),w=b.length>1?parseInt(b[1]):0,T=Wt.get(b[0]);if(void 0!==T){var I=T.row,y=T.choice;(0===n||y.isSelectableMultiple)&&te(e,y,I,w)}else{var x=Et.get(b[0]);if(void 0!==x)for(var C=x.elements,A=0;A<C.length;A++){var B=Wt.get(C[A]);if(void 0!==B){var O=B.row,k=B.choice;(0===n||k.isSelectableMultiple)&&te(e,k,O,w)}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){var M=new Set;if(void 0!==e.discountRows)for(var F=0;F<e.discountRows.length;F++){var D=Lt.get(e.discountRows[F]);if(void 0!==D)for(var R=0;R<D.objects.length;R++){var j=D.objects[R];eo(e,j),M.add(j.id)}}if(void 0!==e.discountChoices)for(var P=0;P<e.discountChoices.length;P++)if(!M.has(e.discountChoices[P])){var $=Wt.get(e.discountChoices[P]);void 0!==$&&eo(e,$.choice)}}else if(void 0!==e.discountGroups)for(var V=0;V<e.discountGroups.length;V++){var q=Et.get(e.discountGroups[V]);if(void 0!==q)for(var L=0;L<q.elements.length;L++){var W=Wt.get(q.elements[L]);void 0!==W&&eo(e,W.choice)}}}else for(var E=0;E<e.scores.length;E++){var U=e.scores[E];if(void 0===U.isActiveMulMinus&&(U.isActiveMulMinus=[]),zi(U.requireds)&&!U.isActiveMulMinus[n]){var N=qt.get(U.id);if(void 0!==N){var z=U.discountIsOn&&void 0!==U.discountScore?U.discountScore:U.value;z=N.allowFloat?z:Math.floor(z),U.multiplyByTimes&&(z*=n),N.startingSum+=z;var G=t.get(U.id);void 0!==G?t.set(U.id,-z+G):t.set(U.id,-z),U.isActiveMulMinus[n]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,o.currentChoices-=1,$t.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,o.currentChoices+=1),$t.set(e.id,{multiple:e.multipleUseVariable})),Array.from($t.entries()).forEach(function(t){var i=g(t,2),o=i[0],n=i[1],r=Wt.get(o);if(void 0!==r){var a=r.row,c=r.choice;if(c.id!==e.id&&!zi(c.requireds))if(c.forcedActivated&&(delete c.forcedActivated,c.isAllowDeselect||Vt.set(c.id,{multiple:n.multiple})),0===n.multiple)c.forcedActivated&&delete c.forcedActivated,c.isActive&&ce(c,a);else if(n.multiple>0)for(var l=0;l<n.multiple;l++)c.isActive&&ve(c,a)}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var _=0;_<e.idOfAllowChoice.length;_++){var H=Lt.get(e.idOfAllowChoice[_]);if(void 0!==H&&(H.allowedChoices-=e.numbAddToAllowChoice,H.allowedChoices>0&&H.currentChoices>=H.allowedChoices))for(var Y=0;Y<H.objects.length;Y++){var Z=H.objects[Y];if(Z.isActive&&!Z.forcedActivated)if(Z.isSelectableMultiple)for(var J=Z.multipleUseVariable,X=0;X<J;X++)ve(Z,H);else Z.isActive&&ce(Z,H);if(H.allowedChoices>=H.currentChoices)break}}if(0===n){if(e.isChangeVariables&&void 0!==e.changedVariables)for(var K=0;K<e.changedVariables.length;K++){var Q=zt.get(e.changedVariables[K]);void 0!==Q&&("1"===e.changeType?Q.isTrue=!1:"2"===e.changeType?Q.isTrue=!0:"3"===e.changeType&&(Q.isTrue=!Q.isTrue))}if(e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){var ee=app.bgImageStack.findIndex(function(t){return t.id===e.id});-1!==ee&&app.bgImageStack.splice(ee,1);var ie=app.bgImageStack.length;ie>0?app.styling.backgroundImage=app.bgImageStack[ie-1].data:(app.styling.backgroundImage=app.defaultBgImage||"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){var ne=app.bgColorStack.findIndex(function(t){return t.id===e.id});-1!==ne&&app.bgColorStack.splice(ne,1);var ae=app.bgColorStack.length;ae>0?app.styling.backgroundColor=app.bgColorStack[ae-1].data:(app.styling.backgroundColor=app.defaultBgColor||"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){var le=app.barBgColorStack.findIndex(function(t){return t.id===e.id});-1!==le&&app.barBgColorStack.splice(le,1);var se=app.barBgColorStack.length;se>0?app.styling.barBackgroundColor=app.barBgColorStack[se-1].data:(app.styling.barBackgroundColor=app.defaultBarBgColor||"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){var ue=app.barIconColorStack.findIndex(function(t){return t.id===e.id});-1!==ue&&app.barIconColorStack.splice(ue,1);var de=app.barIconColorStack.length;de>0?app.styling.barIconColor=app.barIconColorStack[de-1].data:(app.styling.barIconColor=app.defaultBarIconColor||"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){var fe=app.barTextColorStack.findIndex(function(t){return t.id===e.id});-1!==fe&&app.barTextColorStack.splice(fe,1);var ge=app.barTextColorStack.length;ge>0?app.styling.barTextColor=app.barTextColorStack[ge-1].data:(app.styling.barTextColor=app.defaultBarIconColor||"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var pe=e.changeTemplatesList.split(","),me=0;me<pe.length;me++){var he=pe[me],be=Wt.get(he);if(void 0===be){var we=Lt.get(he);if(void 0===we){var Te=Et.get(he[0]);if(void 0===Te);else{for(var Ie=Te.rowElements,ye=0;ye<Ie.length;ye++){var xe=Lt.get(Ie[ye]);void 0!==xe&&Ho(xe,e.id)}for(var Se=Te.elements,Ce=0;Ce<Se.length;Ce++){var Ae=Wt.get(Se[Ce]);if(void 0!==Ae)Ho(Ae.choice,e.id)}}}else Ho(we,e.id)}else{var Be=be.choice;if(Ho(Be,e.id),e.changeAddonTemplate)for(var Oe=0;Oe<Be.addons.length;Oe++){Ho(Be.addons[Oe],e.id)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var ke=e.changeWidthList.split(","),Me=0;Me<ke.length;Me++){var Fe=ke[Me],De=Wt.get(Fe);if(void 0===De){var Re=Lt.get(Fe);if(void 0===Re){var je=Et.get(Fe[0]);if(void 0===je);else{for(var Pe=je.rowElements,$e=0;$e<Pe.length;$e++){var Ve=Lt.get(Pe[$e]);void 0!==Ve&&Zo(Ve,e.id)}for(var qe=je.elements,Le=0;Le<qe.length;Le++){var We=Wt.get(qe[Le]);if(void 0!==We)Zo(We.choice,e.id)}}}else Zo(Re,e.id)}else{Zo(De.choice,e.id)}}if(e.setBgmIsOn&&Xt&&e.bgmId&&(Kt.bgmIsPlaying=!1,Hi(e,e.bgmId,0)),e.muteBgm&&Xt){var Ee=S(Xt);app.isMute=!1,Ee&&"function"==typeof Ee.unMute&&Ee.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var Ue=0;Ue<e.hiddenContentsRow.length;Ue++){var Ne=Lt.get(e.hiddenContentsRow[Ue]);if(void 0!==Ne)for(var ze=0;ze<e.hiddenContentsType.length;ze++)switch(e.hiddenContentsType[ze]){case"1":Ne.objectTitleRemoved=!1;break;case"2":Ne.objectImageRemoved=!1;break;case"3":Ne.objectTextRemoved=!1;break;case"4":Ne.objectScoreRemoved=!1;break;case"5":Ne.objectRequirementRemoved=!1;break;case"6":Ne.addonTitleRemoved=!1;break;case"7":Ne.addonImageRemoved=!1;break;case"8":Ne.addonTextRemoved=!1}}}oe(e,t,0),re()};if(!t.isInfoRow&&!e.isNotSelectable&&!e.selectOnce)if(e.isMultipleUseVariable)void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),e.multipleUseVariable>e.numMultipleTimesMinus&&(e.isSelectDelayed&&void 0!==e.selectDelayTime?e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,r()},1e3*app.fadeTransitionTime)):r()),0===c.indexOf(e.id)&&c.splice(0),delete e.selectDelayTimer},e.selectDelayTime)):(-1===c.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,r()},1e3*app.fadeTransitionTime)):r()),0===c.indexOf(e.id)&&c.splice(0)));else if(void 0!==e.multipleScoreId){var a=qt.get(e.multipleScoreId);void 0!==a&&(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),a.startingSum>e.numMultipleTimesMinus&&(a.startingSum-=1))}}}function ge(e){e.preventDefault(),navigator.clipboard.writeText(t.choice.imageSourceTooltip).then(function(){ei.labelText="Tooltip copied to clipboard.",ei.isOpen=!0}).catch(function(){console.log(t.choice.imageSourceTooltip),ei.labelText="Tooltip text logged to developer console.",ei.isOpen=!0})}var me={activateObject:ae},he=xa(),be=L(he),we=function(e){var o,n=ya(),r=E(n),c=E(r),l=E(c),u=function(e){var i=oa(),o=E(i),n=function(e){var t=Hr(),i=E(t);W(i,function(){return Je.sanitize(Vi(""!==P(k).title?P(k).title:P(k).debugTitle||""),Jt)}),H(function(){return He(t,P(K))}),D(e,t)};de(o,function(e){t.row.resultShowRowTitle&&e(n)});var r=fe(o,2),c=function(e){var i=q(),o=L(i),n=function(e){var i=Yr();i.__contextmenu=ge,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.choice.imageSourceTooltip}),H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)},r=function(e){var i=Zr();H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)};de(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),D(e,i)};de(r,function(e){(1===t.choice.template||t.windowWidth<=1280||t.row.choicesShareTemplate)&&t.choice.image&&!t.row.objectImageRemoved&&e(c)});var l=fe(r,2),u=E(l),d=function(e){var i=Jr(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.choice.title),Jt)}),H(function(){return He(i,P(M))}),D(e,i)};de(u,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(d)});var f=fe(u,2),v=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(f,function(e){t.choice.isSelectableMultiple&&P(z)&&0===P(m).multiChoiceCounterPosition&&e(v)});var g=fe(f,2),p=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.scores},Ze,function(e,i){mr(e,{get score(){return P(i)},get row(){return t.row},get choice(){return t.choice}})}),D(e,i)};de(g,function(e){t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(p)});var h=fe(g,2),b=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(h,function(e){t.choice.isSelectableMultiple&&P(z)&&1===P(m).multiChoiceCounterPosition&&e(b)});var w=fe(h,2),T=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.requireds},Ze,function(e,t){lr(e,{get required(){return P(t)},get scoreText(){return P(K)}})}),D(e,i)};de(w,function(e){t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(T)});var I=fe(w,2),y=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(I,function(e){t.choice.isSelectableMultiple&&P(z)&&2===P(m).multiChoiceCounterPosition&&e(y)});var S=fe(I,2),C=function(e){var i=q(),o=L(i),n=function(e){var i=Xr();i.__contextmenu=ge,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.choice.imageSourceTooltip}),H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)},r=function(e){var i=Kr();H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)};de(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),D(e,i)};de(S,function(e){5===t.choice.template&&t.windowWidth>1280&&t.choice.image&&!t.row.objectImageRemoved&&e(C)});var B=fe(S,2),O=function(e){var i=Qr(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.choice.text),Jt)}),H(function(){return He(i,P(G))}),D(e,i)};de(B,function(e){""===t.choice.text||t.row.objectTextRemoved||e(O)});var R=fe(B,2),j=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(R,function(e){t.choice.isSelectableMultiple&&P(z)&&3===P(m).multiChoiceCounterPosition&&e(j)});var $=fe(R,2),U=function(e){var i=q(),o=L(i),n=function(e){var i=ea();i.__contextmenu=ge,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.choice.imageSourceTooltip}),H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)},r=function(e){var i=ta();H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)};de(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),D(e,i)};de($,function(e){4===t.choice.template&&t.windowWidth>1280&&t.choice.image&&!t.row.objectImageRemoved&&e(U)});var N=fe(l,2),Z=function(e){var i=ia();Ge(i,21,function(){return t.choice.addons},Ze,function(e,i,o){var n=q(),r=L(n),c=function(e){var n=pe(function(){return P(s)===o});Er(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return P(i)},get isEnabled(){return P(x)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return P(n)}})};de(r,function(e){(app.showAllAddons>0||(!P(i).hideAddon||t.choice.isActive)&&(P(i).showAddon||zi(P(i).requireds)))&&e(c)}),D(e,n)}),H(function(){var e;return Y(i,1,"d-column p-0 col w-100".concat(null!==(e=P(A))&&void 0!==e?e:""))}),D(e,i)};de(N,function(e){t.choice.addons&&t.choice.addons.length>0&&e(Z)});var J=fe(N,2),Q=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(J,function(e){t.choice.isSelectableMultiple&&P(z)&&4===P(m).multiChoiceCounterPosition&&e(Q)}),D(e,i)},d=function(e){var i=q(),o=L(i),n=function(e){var i=fa(),o=L(i),n=E(o),r=function(e){var i=q(),o=L(i),n=function(e){var i=na();i.__contextmenu=ge,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.choice.imageSourceTooltip}),H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)},r=function(e){var i=ra();H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)};de(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),D(e,i)};de(n,function(e){t.choice.image&&!t.row.objectImageRemoved&&e(r)});var c=fe(o,2),l=E(c),u=function(e){var i=aa(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.choice.title),Jt)}),H(function(){return He(i,P(M))}),D(e,i)};de(l,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(u)});var d=fe(l,2),f=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(d,function(e){t.choice.isSelectableMultiple&&P(z)&&0===P(m).multiChoiceCounterPosition&&e(f)});var v=fe(d,2),g=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.scores},Ze,function(e,i){mr(e,{get score(){return P(i)},get row(){return t.row},get choice(){return t.choice}})}),D(e,i)};de(v,function(e){t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(g)});var p=fe(v,2),h=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(p,function(e){t.choice.isSelectableMultiple&&P(z)&&1===P(m).multiChoiceCounterPosition&&e(h)});var b=fe(p,2),w=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.requireds},Ze,function(e,t){lr(e,{get required(){return P(t)},get scoreText(){return P(K)}})}),D(e,i)};de(b,function(e){t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(w)});var I=fe(b,2),y=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(I,function(e){t.choice.isSelectableMultiple&&P(z)&&2===P(m).multiChoiceCounterPosition&&e(y)});var S=fe(I,2),C=function(e){var i=ca(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.choice.text),Jt)}),H(function(){return He(i,P(G))}),D(e,i)};de(S,function(e){""===t.choice.text||t.row.objectTextRemoved||e(C)});var B=fe(S,2),O=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(B,function(e){t.choice.isSelectableMultiple&&P(z)&&3===P(m).multiChoiceCounterPosition&&e(O)});var k=fe(B,2),R=function(e){var i=sa(),o=L(i),n=function(e){var i=la();Ge(i,21,function(){return t.choice.addons},Ze,function(e,i,o){var n=q(),r=L(n),c=function(e){var n=pe(function(){return P(s)===o});Er(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return P(i)},get isEnabled(){return P(x)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return P(n)}})};de(r,function(e){(app.showAllAddons>0||(!P(i).hideAddon||t.choice.isActive)&&(P(i).showAddon||zi(P(i).requireds)))&&e(c)}),D(e,n)}),H(function(){var e;return Y(i,1,"d-column p-0 col w-100".concat(null!==(e=P(A))&&void 0!==e?e:""))}),D(e,i)};de(o,function(e){t.choice.addons&&t.choice.addons.length>0&&e(n)});var r=fe(o,2),c=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(r,function(e){t.choice.isSelectableMultiple&&P(z)&&4===P(m).multiChoiceCounterPosition&&e(c)}),D(e,i)};de(k,function(e){t.choice.useSeperateAddon||e(R)});var j=fe(c,2),$=function(e){var i=da(),o=E(i),n=function(e){var i=ua();Ge(i,21,function(){return t.choice.addons},Ze,function(e,i,o){var n=q(),r=L(n),c=function(e){var n=pe(function(){return P(s)===o});Er(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return P(i)},get isEnabled(){return P(x)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return P(n)}})};de(r,function(e){(app.showAllAddons>0||(!P(i).hideAddon||t.choice.isActive)&&(P(i).showAddon||zi(P(i).requireds)))&&e(c)}),D(e,n)}),H(function(){var e;return Y(i,1,"d-column p-0 col w-100".concat(null!==(e=P(A))&&void 0!==e?e:""))}),D(e,i)};de(o,function(e){t.choice.addons&&t.choice.addons.length>0&&e(n)});var r=fe(o,2),c=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(r,function(e){t.choice.isSelectableMultiple&&P(z)&&4===P(m).multiChoiceCounterPosition&&e(c)}),D(e,i)};de(j,function(e){t.choice.useSeperateAddon&&e($)}),H(function(){var e;He(o,"max-width: ".concat(null!==(e=P(T))&&void 0!==e?e:"","%")),He(c,"max-width: ".concat(100-P(T),"%"))}),D(e,i)},r=function(e){var i=q(),o=L(i),n=function(e){var i=Ia(),o=L(i),n=E(o),r=function(e){var i=va(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.choice.title),Jt)}),H(function(){return He(i,P(M))}),D(e,i)};de(n,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(r)});var c=fe(n,2),l=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(c,function(e){t.choice.isSelectableMultiple&&P(z)&&0===P(m).multiChoiceCounterPosition&&e(l)});var u=fe(c,2),d=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.scores},Ze,function(e,i){mr(e,{get score(){return P(i)},get row(){return t.row},get choice(){return t.choice}})}),D(e,i)};de(u,function(e){t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(d)});var f=fe(u,2),v=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(f,function(e){t.choice.isSelectableMultiple&&P(z)&&1===P(m).multiChoiceCounterPosition&&e(v)});var g=fe(f,2),p=function(e){var i=q(),o=L(i);Ge(o,17,function(){return t.choice.requireds},Ze,function(e,t){lr(e,{get required(){return P(t)},get scoreText(){return P(K)}})}),D(e,i)};de(g,function(e){t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(p)});var h=fe(g,2),b=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(h,function(e){t.choice.isSelectableMultiple&&P(z)&&2===P(m).multiChoiceCounterPosition&&e(b)});var w=fe(h,2),I=function(e){var i=ga(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.choice.text),Jt)}),H(function(){return He(i,P(G))}),D(e,i)};de(w,function(e){""===t.choice.text||t.row.objectTextRemoved||e(I)});var y=fe(w,2),S=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(y,function(e){t.choice.isSelectableMultiple&&P(z)&&3===P(m).multiChoiceCounterPosition&&e(S)});var C=fe(y,2),B=function(e){var i=ma(),o=L(i),n=function(e){var i=pa();Ge(i,21,function(){return t.choice.addons},Ze,function(e,i,o){var n=q(),r=L(n),c=function(e){var n=pe(function(){return P(s)===o});Er(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return P(i)},get isEnabled(){return P(x)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return P(n)}})};de(r,function(e){(app.showAllAddons>0||(!P(i).hideAddon||t.choice.isActive)&&(P(i).showAddon||zi(P(i).requireds)))&&e(c)}),D(e,n)}),H(function(){var e;return Y(i,1,"d-column p-0 col w-100".concat(null!==(e=P(A))&&void 0!==e?e:""))}),D(e,i)};de(o,function(e){t.choice.addons&&t.choice.addons.length>0&&e(n)});var r=fe(o,2),c=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(r,function(e){t.choice.isSelectableMultiple&&P(z)&&4===P(m).multiChoiceCounterPosition&&e(c)}),D(e,i)};de(C,function(e){t.choice.useSeperateAddon||e(B)});var O=fe(o,2),k=E(O),R=function(e){var i=q(),o=L(i),n=function(e){var i=ha();i.__contextmenu=ge,_(i,function(e,t){return null==en?void 0:en(e,t)},function(){return t.choice.imageSourceTooltip}),H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)},r=function(e){var i=ba();H(function(){Xe(i,"src",t.choice.image),He(i,P(X)),Xe(i,"loading",a()?"eager":"lazy")}),D(e,i)};de(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),D(e,i)};de(k,function(e){t.choice.image&&!t.row.objectImageRemoved&&e(R)});var j=fe(O,2),$=function(e){var i=Ta(),o=E(i),n=function(e){var i=wa();Ge(i,21,function(){return t.choice.addons},Ze,function(e,i,o){var n=q(),r=L(n),c=function(e){var n=pe(function(){return P(s)===o});Er(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return P(i)},get isEnabled(){return P(x)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return P(n)}})};de(r,function(e){(app.showAllAddons>0||(!P(i).hideAddon||t.choice.isActive)&&(P(i).showAddon||zi(P(i).requireds)))&&e(c)}),D(e,n)}),H(function(){var e;return Y(i,1,"d-column p-0 col w-100".concat(null!==(e=P(A))&&void 0!==e?e:""))}),D(e,i)};de(o,function(e){t.choice.addons&&t.choice.addons.length>0&&e(n)});var r=fe(o,2),c=function(e){var i=pe(function(){return P(x)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});_r(e,{get isEnabled(){return P(i)},get multiChoiceButton(){return P(V)},get multiChoiceText(){return P(F)},get choice(){return t.choice},selectedOneMore:function(){return se(t.choice,t.row)},selectedOneLess:function(){return ve(t.choice,t.row)}})};de(r,function(e){t.choice.isSelectableMultiple&&P(z)&&4===P(m).multiChoiceCounterPosition&&e(c)}),D(e,i)};de(j,function(e){t.choice.useSeperateAddon&&e($)}),H(function(){var e;He(o,"max-width: ".concat(100-P(T),"%")),He(O,"max-width: ".concat(null!==(e=P(T))&&void 0!==e?e:"","%"))}),D(e,i)};de(o,function(e){3===t.choice.template&&e(n)},!0),D(e,i)};de(o,function(e){2===t.choice.template?e(n):e(r,!1)}),D(e,i)};de(l,function(e){t.choice.template>=4||1===t.choice.template||t.windowWidth<=1280||t.row.choicesShareTemplate?e(u):e(d,!1)}),H(function(e,i){var a,l;Y(n,1,e),o=Y(r,1,"d-flex",null,o,i),Y(c,1,"row row-".concat(null!==(a=t.row.id)&&void 0!==a?a:""," choice-").concat(null!==(l=t.choice.id)&&void 0!==l?l:""," ").concat(P(B)?"choice-selected":"choice-unselected"," ").concat(P(x)?"choice-enabled":"choice-disabled"," ").concat(P(B)&&P(p).selOverlayOnImage||!P(x)&&P(p).reqOverlayOnImage?"bg-overlay ":"","w-100")),He(c,P(J))},[function(){return Z(function(){var e=t.choice.objectWidth||t.row.objectWidth,o=function(e){switch(e){case"col-sm-6":case"col-sm-5":return 2;case"col-md-4":return 3;case"col-md-3":return 4;case"w-20":return 5;case"col-lg-2":return 6;case"w-14":return 7;case"w-12":return 8;case"w-11":return 9;case"w-10":return 10;case"w-9":return 11;case"col-xl-1":return 12;default:return 1}}(e),n="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(i()>1280)return e;if(!(i()>720))return i()>480?1===o?"col-12":"col-6":"col-12";switch(o){case 1:return"col-12";case 2:return"col-6";case 3:return n>2?"col-4":app.objectsPerRow;case 4:return n>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}())},function(){return{fullHeight:P(O)}}]),Qe("click",c,function(e){return ae(t.choice,t.row,e,!0)},!0),D(e,n)};de(be,function(e){P(C)&&e(we)});var Te=fe(be,2),Ie=function(e){var t=pe(function(){return"dlgCommon"===P(I)});En(e,{get open(){return P(t)},onclose:function(){return U(I,"none")},title:"",get context(){return l.context},closeHandler:function(e,t){"accept"===e.detail.action&&l.choice&&l.row?(y=!0,l.isWord&&(l.choice.wordChangeSelect=t),le(l.choice,l.row),y=!1):y=!1},get isWord(){return l.isWord},get prevText(){return l.prevText}})};de(Te,function(e){"dlgCommon"===P(I)&&e(Ie)}),D(e,he);var ye=R(me);return r(),ye}Ke(["contextmenu"]);var Ca=k('<img alt=""/>'),Aa=k('<img alt=""/>'),Ba=k('<h2 class="mb-0"><!></h2>'),Oa=k('<img alt=""/>'),ka=k('<img alt=""/>'),Ma=k('<p class="mb-0"><!></p>'),Fa=k('<img alt=""/>'),Da=k('<img alt=""/>'),Ra=k('<div class="col-12 m-0 p-0"><!> <!> <!> <!> <!></div>'),ja=k('<h2 class="mb-0"><!></h2>'),Pa=k('<p class="mb-0"><!></p>'),$a=k('<img alt=""/>'),Va=k('<img alt=""/>'),qa=k('<div class="col p-0 text-center"><!> <!></div> <div class="col p-0 text-center"><!></div>',1),La=k('<img alt=""/>'),Wa=k('<img alt=""/>'),Ea=k('<h2 class="mb-0"><!></h2>'),Ua=k('<p class="mb-0"><!></p>'),Na=k('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!></div>',1),za=k("<div><!></div>"),Ga=k("<div><!></div>"),_a=k("<div><!> <!></div>");function Ha(e,t){j(t,!0);var i=N(t,"preloadImages",3,!1),o=N(t,"isBackpack",3,!1),n=$(void 0),r=pe(function(){return qi("privateBackgroundIsOn",t.row)}),a=pe(function(){return qi("privateRowImageIsOn",t.row)}),c=pe(function(){return qi("privateRowIsOn",t.row)}),l=pe(function(){return qi("privateTextIsOn",t.row)}),s=$(0),u=pe(function(){return void 0!==P(a).rowImageBoxWidth?P(a).rowImageBoxWidth:50}),d=pe(function(){return zi(t.row.requireds)}),f=pe(function(){return t.row.onlyIfNoChoices&&0!==t.row.currentChoices}),v=pe(function(){return t.row.rowJustify?"justify-".concat(t.row.rowJustify):""}),p=pe(function(){var e=[];if(void 0!==t.row.resultGroupId&&""!==t.row.resultGroupId&&t.row.resultGroupId){var i,o=w($t);try{for(o.s();!(i=o.n()).done;){var n=g(i.value,1)[0],r=Wt.get(n);if(void 0!==r){var a=r.choice,c=r.row;if(!a.isNotResult)if(t.row.resultGroupId===c.resultGroupId)e.push({choice:a,row:c});else if(void 0!==a.groups)for(var l=0;l<a.groups.length;l++)if(a.groups[l]===t.row.resultGroupId){e.push({choice:a,row:c});break}}}}catch(m){o.e(m)}finally{o.f()}}else{var s,u=w($t);try{for(u.s();!(s=u.n()).done;){var d=g(s.value,1)[0],f=Wt.get(d);if(void 0!==f){var v=f.choice,p=f.row;v.isNotResult||e.push({choice:v,row:p})}}}catch(m){u.e(m)}finally{u.f()}}return e.sort(function(e,t){return e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index}),e}),m=pe(function(){var e=[];if(void 0!==t.row.resultGroupId){var i=Et.get(t.row.resultGroupId);if(void 0!==i)for(var o=0;o<i.elements.length;o++){var n=Wt.get(i.elements[o]);void 0!==n&&e.push({choice:n.choice,row:n.row})}}return e.sort(function(e,t){return e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index}),e}),h=pe(function(){if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.backgroundImage)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(var e=0;e<t.row.rowDesignGroups.length;e++){var i=Gt.get(t.row.rowDesignGroups[e]);if(void 0!==i&&i.privateBackgroundIsOn&&i.styling.backgroundImage){var o=i.activatedId,n=Ut.get(o);if(""===o||Wi(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==n&&zi(n.requireds))return i.styling}}return!1}),b=pe(function(){if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.bgColorIsOn&&t.row.styling.backgroundColor)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(var e=0;e<t.row.rowDesignGroups.length;e++){var i=Gt.get(t.row.rowDesignGroups[e]);if(void 0!==i&&i.privateBackgroundIsOn&&i.styling.bgColorIsOn&&i.styling.backgroundColor){var o=i.activatedId,n=Ut.get(o);if(""===o||Wi(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==n&&zi(n.requireds))return i.styling}}return!1}),T=pe(function(){var e=[];return e.push("margin: ".concat(P(c).rowBodyMarginTop,"px ").concat(P(c).rowBodyMarginSides,"% ").concat(P(c).rowBodyMarginBottom,"px ").concat(P(c).rowBodyMarginSides,"%;")),P(h)&&e.push("background-image: url('".concat(P(h).backgroundImage,"'); ").concat(P(h).isBackgroundRepeat?"background-repeat: repeat;":P(h).isBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),P(b)&&e.push("background-color: ".concat(Xo(P(b).backgroundColor),";")),e.join(" ")}),I=pe(function(){var e=P(c).rowBorderRadiusIsPixels?"px":"%",t=[];return P(c).rowBorderImage&&t.push("border-image: url('".concat(P(c).rowBorderImage,"') ").concat(P(c).rowBorderImageSliceTop," ").concat(P(c).rowBorderImageSliceRight," ").concat(P(c).rowBorderImageSliceBottom," ").concat(P(c).rowBorderImageSliceLeft," / ").concat(P(c).rowBorderImageWidth,"px ").concat(P(c).rowBorderImageRepeat,"; border-style: solid; padding: ").concat(P(c).rowBorderImageWidth,"px;")),P(r).rowBackgroundImage&&t.push("background-image: url('".concat(P(r).rowBackgroundImage,"'); ").concat(P(r).isRowBackgroundRepeat?"background-repeat: repeat;":P(r).isRowBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),P(r).rowBgColorIsOn&&t.push("background-color: ".concat(Xo(P(r).rowBgColor),";")),t.push("margin-left: ".concat(P(c).rowMargin,"%; margin-right: ").concat(P(c).rowMargin,"%;")),P(c).rowGradientIsOn&&t.push("background-image: linear-gradient(".concat(P(c).rowGradient,");")),t.push("border-radius: ".concat(P(c).rowBorderRadiusTopLeft).concat(e," ").concat(P(c).rowBorderRadiusTopRight).concat(e," ").concat(P(c).rowBorderRadiusBottomRight).concat(e," ").concat(P(c).rowBorderRadiusBottomLeft).concat(e,";")),P(c).rowOverflowIsOn&&t.push("overflow: hidden;"),P(c).rowBorderIsOn&&t.push("border: ".concat(P(c).rowBorderWidth,"px ").concat(P(c).rowBorderStyle," ").concat(Xo(P(c).rowBorderColor),";")),P(c).rowDropShadowIsOn&&(P(c).rowUseBoxShadowIsOn?t.push("box-shadow: ".concat(P(c).rowDropShadowH,"px ").concat(P(c).rowDropShadowV,"px ").concat(P(c).rowDropShadowBlur,"px ").concat(Xo(P(c).rowDropShadowColor),";")):t.push("filter: drop-shadow(".concat(P(c).rowDropShadowH,"px ").concat(P(c).rowDropShadowV,"px ").concat(P(c).rowDropShadowBlur,"px ").concat(Xo(P(c).rowDropShadowColor),");"))),t.join(" ")}),y=pe(function(){return"white-space: pre-line; font-family: '".concat(P(l).rowTitle,"'; font-size: ").concat(P(l).rowTitleTextSize,"%; text-align: ").concat(P(l).rowTitleAlign,"; color: ").concat(Xo(P(l).rowTitleColor))}),x=pe(function(){return"white-space: pre-wrap; font-family: '".concat(P(l).rowText,"'; font-size: ").concat(P(l).rowTextTextSize,"%; text-align: ").concat(P(l).rowTextAlign,"; color: ").concat(Xo(P(l).rowTextColor),"; padding: ").concat(P(c).rowTextPaddingX,"px ").concat(P(c).rowTextPaddingY,"% ").concat(P(c).rowTextPaddingX,"px ").concat(P(c).rowTextPaddingY,"%;")}),S=pe(function(){var e=P(a).rowImgBorderRadiusIsPixels?"px":"%",t=[];return t.push("width: ".concat(P(a).rowImageWidth,"%; margin-top: ").concat(P(a).rowImageMarginTop,"%; margin-bottom: ").concat(P(a).rowImageMarginBottom,"%;")),t.push("border-radius: ".concat(P(a).rowImgBorderRadiusTopLeft).concat(e," ").concat(P(a).rowImgBorderRadiusTopRight).concat(e," ").concat(P(a).rowImgBorderRadiusBottomRight).concat(e," ").concat(P(a).rowImgBorderRadiusBottomLeft).concat(e,";")),P(a).rowImgOverflowIsOn&&t.push("overflow: hidden;"),P(a).rowImgBorderIsOn&&t.push("border: ".concat(P(a).rowImgBorderWidth,"px ").concat(P(a).rowImgBorderStyle," ").concat(Xo(P(a).rowImgBorderColor),";")),t.join(" ")}),C=pe(function(){return"padding-left: ".concat(P(c).rowButtonYPadding,"px; padding-right: ").concat(P(c).rowButtonYPadding,"px; padding-top: ").concat(P(c).rowButtonXPadding,"px; padding-bottom: ").concat(P(c).rowButtonXPadding,"px;")});function A(){if(t.row.btnPointAddon&&"sumaddon"===t.row.buttonTypeRadio&&void 0!==t.row.pointTypeRandom){var e=t.row.randomMax||0,i=t.row.randomMin||0,o=Math.floor(Math.random()*(e-i)+i),r=qt.get(t.row.pointTypeRandom);void 0!==r&&(r.startingSum+=o)}else if(t.row.buttonRandom){var a=[],c=t.row.objects.filter(function(e){return zi(e.requireds)&&(!e.isNotSelectable||t.row.allowActivateUnselectable)});if(t.row.isWeightedRandom){for(var l=0,s=0;s<c.length;s++){l+=c[s].randomWeight||100}if(void 0!==t.row.buttonRandomNumber)for(var u=0;u<t.row.buttonRandomNumber;u++)for(var d=Math.floor(Math.random()*l),f=0,v=0;v<c.length;v++){var g=c[v];if(d<(f+=g.randomWeight||100)){P(n).activateObject(g,t.row);break}}}else if(void 0!==t.row.buttonRandomNumber)for(var p=0;p<t.row.buttonRandomNumber;p++){var m=0,h=void 0,b=void 0;do{h=c[b=Math.floor(Math.random()*c.length)],m++}while(t.row.onlyUnselectedChoices&&(-1!==a.indexOf(b)||$t.has(h.id))&&m<100);h&&-1===a.indexOf(b)&&(a.push(b),P(n).activateObject(h,t.row))}}else if(void 0!==t.row.buttonId){var w=zt.get(t.row.buttonId);void 0!==w&&($t.has(w.id)?t.row.buttonType&&(w.isTrue=!1,$t.delete(w.id)):(w.isTrue=!0,$t.set(w.id,{multiple:0,isVariable:!0})))}}function O(e){e.preventDefault(),navigator.clipboard.writeText(t.row.imageSourceTooltip).then(function(){ei.labelText="Tooltip copied to clipboard.",ei.isOpen=!0}).catch(function(){console.log(t.row.imageSourceTooltip),ei.labelText="Tooltip text logged to developer console.",ei.isOpen=!0})}B(function(){if(t.row.deselectChoices&&!P(d))for(var e=0;e<t.row.objects.length;e++){var i=t.row.objects[e];i.isActive&&P(n).activateObject(i,t.row)}});var k=_a(),M=E(k),V=function(e){var o=za(),n=E(o),r=function(e){var o=Ra(),n=E(o),r=function(e){var o=q(),n=L(o),r=function(e){var i=pe(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&$t.has(t.row.buttonId)||P(f)});ke(e,{class:"row-button",onclickcapture:A,get disabled(){return P(i)},get style(){return P(C)},variant:"raised",children:function(e,i){Me(e,{children:function(e,i){var o=q(),n=L(o);W(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),D(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){var o=q(),n=L(o),r=function(e){var o=q(),n=L(o),r=function(e){var o=Ca();o.__contextmenu=O,_(o,function(e,t){return null==en?void 0:en(e,t)},function(){return t.row.imageSourceTooltip}),H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)},a=function(e){var o=Aa();H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)};de(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),D(e,o)};de(n,function(e){t.row.image&&e(r)},!0),D(e,o)};de(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),D(e,o)};de(n,function(e){(1===t.row.template||t.windowWidth<=1280)&&e(r)});var a=fe(n,2),c=function(e){var i=Ba(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.row.title),Jt)}),H(function(){return He(i,P(y))}),D(e,i)};de(a,function(e){""!==t.row.title&&e(c)});var l=fe(a,2),s=function(e){var o=q(),n=L(o),r=function(e){var i=pe(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&$t.has(t.row.buttonId)||P(f)});ke(e,{class:"row-button",onclickcapture:A,get disabled(){return P(i)},get style(){return P(C)},variant:"raised",children:function(e,i){Me(e,{children:function(e,i){var o=q(),n=L(o);W(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),D(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){var o=q(),n=L(o),r=function(e){var o=q(),n=L(o),r=function(e){var o=Oa();o.__contextmenu=O,_(o,function(e,t){return null==en?void 0:en(e,t)},function(){return t.row.imageSourceTooltip}),H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)},a=function(e){var o=ka();H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)};de(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),D(e,o)};de(n,function(e){t.row.image&&e(r)},!0),D(e,o)};de(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),D(e,o)};de(l,function(e){5===t.row.template&&t.windowWidth>1280&&e(s)});var u=fe(l,2),d=function(e){var i=Ma(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.row.titleText),Jt)}),H(function(){return He(i,P(x))}),D(e,i)};de(u,function(e){""!==t.row.titleText&&e(d)});var v=fe(u,2),g=function(e){var o=q(),n=L(o),r=function(e){var i=pe(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&$t.has(t.row.buttonId)||P(f)});ke(e,{class:"row-button",onclickcapture:A,get disabled(){return P(i)},get style(){return P(C)},variant:"raised",children:function(e,i){Me(e,{children:function(e,i){var o=q(),n=L(o);W(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),D(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){var o=q(),n=L(o),r=function(e){var o=q(),n=L(o),r=function(e){var o=Fa();o.__contextmenu=O,_(o,function(e,t){return null==en?void 0:en(e,t)},function(){return t.row.imageSourceTooltip}),H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)},a=function(e){var o=Da();H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)};de(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),D(e,o)};de(n,function(e){t.row.image&&e(r)},!0),D(e,o)};de(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),D(e,o)};de(v,function(e){4===t.row.template&&t.windowWidth>1280&&e(g)}),D(e,o)},a=function(e){var o=q(),n=L(o),r=function(e){var o=qa(),n=L(o),r=E(n),a=function(e){var i=ja(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.row.title),Jt)}),H(function(){return He(i,P(y))}),D(e,i)};de(r,function(e){""!==t.row.title&&e(a)});var c=fe(r,2),l=function(e){var i=Pa(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.row.titleText),Jt)}),H(function(){return He(i,P(x))}),D(e,i)};de(c,function(e){""!==t.row.titleText&&e(l)});var s=fe(n,2),d=E(s),v=function(e){var i=pe(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&$t.has(t.row.buttonId)||P(f)});ke(e,{class:"row-button",onclickcapture:A,get disabled(){return P(i)},get style(){return P(C)},variant:"raised",children:function(e,i){Me(e,{children:function(e,i){var o=q(),n=L(o);W(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),D(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},g=function(e){var o=q(),n=L(o),r=function(e){var o=q(),n=L(o),r=function(e){var o=$a();o.__contextmenu=O,_(o,function(e,t){return null==en?void 0:en(e,t)},function(){return t.row.imageSourceTooltip}),H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)},a=function(e){var o=Va();H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)};de(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),D(e,o)};de(n,function(e){t.row.image&&e(r)},!0),D(e,o)};de(d,function(e){t.row.isButtonRow?e(v):e(g,!1)}),H(function(){var e;He(n,"max-width: ".concat(100-P(u),"%")),He(s,"max-width: ".concat(null!==(e=P(u))&&void 0!==e?e:"","%"))}),D(e,o)},a=function(e){var o=q(),n=L(o),r=function(e){var o=Na(),n=L(o),r=E(n),a=function(e){var i=pe(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&$t.has(t.row.buttonId)||P(f)});ke(e,{class:"row-button",onclickcapture:A,get disabled(){return P(i)},get style(){return P(C)},variant:"raised",children:function(e,i){Me(e,{children:function(e,i){var o=q(),n=L(o);W(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),D(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},c=function(e){var o=q(),n=L(o),r=function(e){var o=q(),n=L(o),r=function(e){var o=La();o.__contextmenu=O,_(o,function(e,t){return null==en?void 0:en(e,t)},function(){return t.row.imageSourceTooltip}),H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)},a=function(e){var o=Wa();H(function(){Xe(o,"src",t.row.image),He(o,P(S)),Xe(o,"loading",i()?"eager":"lazy")}),D(e,o)};de(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),D(e,o)};de(n,function(e){t.row.image&&e(r)},!0),D(e,o)};de(r,function(e){t.row.isButtonRow?e(a):e(c,!1)});var l=fe(n,2),s=E(l),d=function(e){var i=Ea(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.row.title),Jt)}),H(function(){return He(i,P(y))}),D(e,i)};de(s,function(e){""!==t.row.title&&e(d)});var v=fe(s,2),g=function(e){var i=Ua(),o=E(i);W(o,function(){return Je.sanitize(Vi(t.row.titleText),Jt)}),H(function(){return He(i,P(x))}),D(e,i)};de(v,function(e){""!==t.row.titleText&&e(g)}),H(function(){var e;He(n,"max-width: ".concat(null!==(e=P(u))&&void 0!==e?e:"","%")),He(l,"max-width: ".concat(100-P(u),"%"))}),D(e,o)};de(n,function(e){3===t.row.template&&e(r)},!0),D(e,o)};de(n,function(e){2===t.row.template?e(r):e(a,!1)}),D(e,o)};de(n,function(e){t.row.template>=4||1===t.row.template||t.windowWidth<=1280?e(r):e(a,!1)}),H(function(){var e,i;Y(o,1,"row gx-0 row-".concat(null!==(e=t.row.id)&&void 0!==e?e:""," row-").concat(null!==(i=t.row.id)&&void 0!==i?i:"","-header")),He(o,""!==t.row.title?P(I):"")}),D(e,o)};de(M,function(e){P(d)&&e(V)});var z=fe(M,2),G=function(e){var r=Ga(),a=E(r),c=function(e){var o=q(),r=L(o);Ge(r,17,function(){return P(p)},Ze,function(e,o,r){F(Sa(e,{get row(){return t.row},get choice(){return P(o).choice},index:r,get windowWidth(){return t.windowWidth},get preloadImages(){return i()}}),function(e){return U(n,e,!0)},function(){return P(n)})}),D(e,o)},l=function(e){var r=q(),a=L(r),c=function(e){var r=q(),a=L(r);Ge(a,17,function(){return P(m)},Ze,function(e,r,a){F(Sa(e,{get row(){return t.row},get choice(){return P(r).choice},index:a,get windowWidth(){return t.windowWidth},get preloadImages(){return i()},get isBackpack(){return o()},get mainDiv(){return t.mainDiv}}),function(e){return U(n,e,!0)},function(){return P(n)})}),D(e,r)},l=function(e){var r=q(),a=L(r);Ge(a,17,function(){return t.row.objects},Ze,function(e,r,a){F(Sa(e,{get row(){return t.row},get choice(){return P(r)},index:a,get windowWidth(){return t.windowWidth},get preloadImages(){return i()},get isBackpack(){return o()},get mainDiv(){return t.mainDiv}}),function(e){return U(n,e,!0)},function(){return P(n)})}),D(e,r)};de(a,function(e){t.row.isGroupRow?e(c):e(l,!1)},!0),D(e,r)};de(a,function(e){t.row.isResultRow?e(c):e(l,!1)}),H(function(){var e;return Y(r,1,"row gx-0 m-0 p-0 ".concat(null!==(e=P(v))&&void 0!==e?e:""))}),D(e,r)};de(z,function(e){P(d)&&e(G)}),H(function(){var e;Y(k,1,"row-".concat(null!==(e=t.row.id)&&void 0!==e?e:"","-bg text-center").concat(P(d)?"":" hidden")),He(k,P(T))}),tt(k,"clientWidth",function(e){return U(s,e)}),D(e,k),R()}Ke(["contextmenu"]);var Ya=k("<!> <!>",1),Za=k('<div class="p-0 col-12"><!></div>'),Ja=k("<div><!></div>"),Xa=k('<div class="container-fluid p-0 h-100"><div class="row gx-0"></div></div>'),Ka=k("<!> <!> <!>",1);function Qa(e,t){j(t,!0);var i=N(t,"open",7),o=$(0),n=$(void 0),r=$(void 0),a=pe(function(){var e=[];return e.push("overflow-wrap: break-word;"),e.push("white-space: normal;"),app.styling.useBackpackDesign?(app.styling.backpackBgImage&&e.push("background-image: url('".concat(app.styling.backpackBgImage,"');")),e.push("background-color: ".concat(Xo(app.styling.backpackBgColor),";")),app.styling.isBackpackBgRepeat?e.push("background-repeat: repeat;"):app.styling.isBackpackBgFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")):(app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(Xo(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")),e.join(" ")}),c=pe(function(){return"dlgBackpack"!==Qt.currentDialog?"close":""}),l=pe(function(){return"dlgBackpack"!==Qt.currentDialog?"close":""}),s=pe(function(){return void 0!==app.styling.backPackWidth?app.styling.backPackWidth:1200});Se(e,{get escapeKeyAction(){return P(c)},get scrimClickAction(){return P(l)},get surface$style(){var e;return"width: ".concat(null!==(e=P(s))&&void 0!==e?e:"","px; max-width: 100vw;")},get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=Ka(),c=L(i);Ce(c,{class:"p-0 m-0 row",tabindex:0,autofocus:!0,children:function(e,t){var i=Za(),o=E(i);ke(o,{onclickcapture:function(){return function(e){return Go.apply(this,arguments)}(P(n))},class:"h-100",children:function(e,t){var i=Ya(),o=L(i);it(o,{class:"mdi mdi-file-image"});var n=fe(o,2);Me(n,{children:function(e,t){var i=Te("Download Image");D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}});var l=fe(c,2);Ae(l,{id:"backpackDialog",class:"p-0",children:function(e,t){var i=Xa(),c=E(i);Ge(c,21,function(){return app.backpack},Ze,function(e,t){var i=Ja();Ha(E(i),{get row(){return P(t)},get windowWidth(){return P(o)},get preloadImages(){return app.preloadImages},isBackpack:!0}),H(function(){return Y(i,1,Z(P(t).width?"col-6":"col-12"))}),D(e,i)}),F(c,function(e){return U(r,e)},function(){return P(r)}),F(i,function(e){return U(n,e)},function(){return P(n)}),H(function(){return He(i,P(a))}),tt(i,"clientWidth",function(e){return U(o,e)}),D(e,i)},$$slots:{default:!0}});var s=fe(l,2);Fe(s,{class:"p-0",style:"min-height: 36px",children:function(e,t){ke(e,{action:"close",children:function(e,t){Me(e,{class:"dialog-actions--btn",children:function(e,t){var i=Te("Close");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}}),R()}var ec=k("<div><!></div>"),tc=function(e,t){e.preventDefault(),t()},ic=k('<span class="picture-inner-text"><!></span>'),oc=k('<span class="picture-inner-text"><!></span>'),nc=k('<div class="picture-inner"><!></div>'),rc=k('<div class="preview-container"><canvas tabindex="0"></canvas> <!></div> <!> <!> <!>',1),ac=k("<div><!></div> <!> <!>",1),cc=k("<div><!></div>"),lc=k('<div id="picture-input" class="picture-input"><!> <input type="file"/></div>');function sc(e,t){j(t,!0);var r,d,v=N(t,"width",19,function(){return Number.MAX_SAFE_INTEGER}),g=N(t,"height",19,function(){return Number.MAX_SAFE_INTEGER}),p=N(t,"margin",3,0),m=N(t,"accept",3,"image/*, image/avif"),b=N(t,"capture",3,null),w=N(t,"size",19,function(){return Number.MAX_SAFE_INTEGER}),T=N(t,"name",3,null),I=N(t,"id",3,null),y=N(t,"buttonClass",3,""),x=N(t,"removeButtonClass",3,""),S=N(t,"aspectButtonClass",3,""),C=N(t,"prefill",11,""),A=N(t,"prefillOptions",19,function(){return{}}),k=N(t,"crop",3,!0),M=N(t,"radius",3,0),V=N(t,"removable",3,!1),z=N(t,"hideChangeButton",3,!1),G=N(t,"autoToggleAspectRatio",3,!1),_=N(t,"toggleAspectRatio",3,!1),Z=N(t,"changeOnClick",3,!0),J=N(t,"plain",3,!1),X=N(t,"zIndex",3,1e4),K=N(t,"alertOnError",3,!0),ee=N(t,"customStrings",19,function(){return{}}),te=$(!1),ie=$(0),oe=$(0),ne=$(!1),re=$(0),ae=$(0),ce=$(1),le=$(0),se=$(""),ve=$(null),ge=$(null),me=$(""),he=$(0),be=$(0),we=$(""),ye=$(!1),xe=$(0),Se=$(0),Ce=$(0),Ae=$(null),Be=$(s([])),Oe={upload:"<p>Your device does not support file uploading.</p>",drag:"Drag an image or <br>click here to select a file",tap:"Tap here to select a photo <br>from your gallery",change:"Change Photo",aspect:"Landscape/Portrait",remove:"Remove Photo",select:"Select a Photo",selected:"<p>Photo successfully selected!</p>",fileSize:"The file size exceeds the limit",fileType:"This file type is not supported."},Fe=$(void 0),De=pe(function(){if(navigator.userAgent.match(/(Android (1\.0|1\.1|1\.5|1\.6|2\.0|2\.1))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.0|2\.5|3\.0))/))return!1;var e=document.createElement("input");return e.type="file",!e.disabled}),Re=pe(function(){return!(!window.FileReader||!window.CanvasRenderingContext2D)}),je=pe(function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!("ontouchstart"in window||navigator.maxTouchPoints)}),Pe=pe(function(){return P(ne)?"dragging-over":""}),$e=pe(function(){return"".concat(Math.min(.04*P(oe),21),"px")});function Ve(){if(ee())for(var e in ee())e in Oe&&"string"==typeof ee()[e]&&(Oe[e]=ee()[e])}function qe(){P(te)&&!Z()||ze(),t.onclick&&t.onclick()}function Le(){Ye()&&P(ve)&&Ne(P(ve))}function We(){P(je)&&U(ne,!1)}function Ee(e){var i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.target,r="drop"===e.type?null===(i=e.dataTransfer)||void 0===i?void 0:i.files:n.files;if(r&&0!==r.length){if(r[0].size<=0||r[0].size>1024*Number(w())*1024)return t.onerror&&t.onerror({type:"fileSize",fileSize:r[0].size,fileType:r[0].type,fileName:r[0].name,message:"".concat(Oe.fileSize," (").concat(w(),"MB)")}),void(K()&&alert("".concat(Oe.fileSize," (").concat(w(),"MB)")));if(r[0].name!==P(me)||r[0].size!==P(he)||P(be)!==r[0].lastModified){if(U(ge,r[0],!0),U(me,r[0].name,!0),U(he,r[0].size,!0),U(be,r[0].lastModified,!0),U(we,r[0].type.split(";")[0],!0),"image/*, image/avif"===m()){if(!P(we).startsWith("image/"))return}else if(-1===P(Be).indexOf(P(we)))return t.onerror&&t.onerror({type:"fileType",fileSize:P(he),fileType:P(we),fileName:P(me),message:Oe.fileType}),void(K()&&alert(Oe.fileType));U(te,!0),U(se,""),P(Re)&&P(ge)?Ue(P(ge)):o?t.onprefill&&t.onprefill():t.onchange&&t.onchange(P(se))}}}function Ue(e,i){!function(e,t){var i=new FileReader;i.onload=function(e){var i=new DataView(e.target.result);if(65496!==i.getUint16(0,!1))return t(-2);for(var o=i.byteLength,n=2;n<o;){var r=i.getUint16(n,!1);if(n+=2,65505===r){if(1165519206!==i.getUint32(n+=2,!1))return t(-1);var a=18761===i.getUint16(n+=6,!1);n+=i.getUint32(n+4,a);var c=i.getUint16(n,a);n+=2;for(var l=0;l<c;l++)if(274===i.getUint16(n+12*l,a))return t(i.getUint16(n+12*l+8,a))}else{if(65280&~r)break;n+=i.getUint16(n,!1)}}return t(-1)},i.readAsArrayBuffer(e.slice(0,65536))}(e,function(i){!function(e){U(ye,!1),8===e?U(ye,-Math.PI/2):6===e?U(ye,Math.PI/2):3===e&&U(ye,-Math.PI)}(i);var o=new FileReader;o.onload=function(e){U(se,e.target.result,!0),U(ve,new Image,!0),P(ve).onload=function(){G()&&(Ze(P(re),P(ae))!==Ze(P(ve).width,P(ve).height)&&Je());Ne(P(ve))},P(ve).src=P(se),t.onchange&&t.onchange(P(se))},o.readAsDataURL(e)})}function Ne(e){U(xe,e.width,!0),U(Se,e.height,!0),U(Ce,e.width/e.height);var t=0,i=0,o=P(oe),n=P(ie),r=P(oe)/P(ie);k()?P(Ce)>=r?(o=n*P(Ce),t=(P(oe)-o)/2):(n=o/P(Ce),i=(P(ie)-n)/2):P(Ce)>=r?(n=o/P(Ce),i=(P(ie)-n)/2):(o=n*P(Ce),t=(P(oe)-o)/2),P(Fe)&&(P(Fe).style.background="none",P(Fe).width=P(oe)*P(ce),P(Fe).height=P(ie)*P(ce),P(Ae)&&(P(Ae).setTransform(1,0,0,1,0,0),P(Ae).clearRect(0,0,P(Fe).width,P(Fe).height),P(ye)&&void 0===e.style.imageOrientation&&(P(Ae).translate(t*P(ce),i*P(ce)),P(Ae).translate(o/2*P(ce),n/2*P(ce)),P(Ae).rotate(P(ye)),t=-o/2,i=-n/2),P(Ae).drawImage(e,t*P(ce),i*P(ce),o*P(ce),n*P(ce))))}function ze(){d.click()}function Ge(){d.value="",d.type="",d.type="file",U(me,""),U(we,""),U(he,0),U(be,0),U(te,!1),U(se,""),U(ge,null),U(ve,null),P(Fe)&&(P(Fe).style.backgroundColor="rgba(200,200,200,.25)",P(Fe).width=P(oe)*P(ce)),t.onremove&&t.onremove()}function _e(){Je(),P(ve)&&Ne(P(ve));var e=Ze(P(re),P(ae));t.onaspectratiochange&&t.onaspectratiochange(e)}function Ye(){var e=P(re)/P(ae),t=r.clientWidth;return!!t&&(!(!_()&&!G()&&t===P(le))&&(U(le,t,!0),U(oe,Math.min(P(le)-2*Number(p()),P(re)),!0),U(ie,P(oe)/e),!0))}function Ze(e,t){return e>t?"landscape":e<t?"portrait":"square"}function Je(){var e;e=P(re),U(re,P(ae),!0),U(ae,e,!0),Ye()}function Ke(e,r){var l=window.File;try{new l([],"")}catch(c){l=function(e){function t(e,i){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(n=o(this,t,[e,r]),"lastModifiedDate",new Date),h(n,"lastModified",+n.lastModifiedDate),h(n,"name",void 0),n.name=i,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e),function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(n(Blob))}if(r=Object.assign({},r),"object"===u(e))return U(te,!0),U(se,""),void(P(Re)?Ue(e):t.onprefill&&t.onprefill());-1===e.indexOf("data:")&&(e+=-1!==e.indexOf("?")?"&_="+(new Date).getTime():"?_="+(new Date).getTime());var s=new Headers;s.append("Accept","image/*, image/avif"),fetch(e,{method:"GET",mode:"cors",headers:s}).then(function(e){return e.blob()}).then(function(t){var i={target:{files:[]}},o=r.fileName||e.split("/").slice(-1)[0],n=r.mediaType||t.type||"image/"+(r.fileType||o.split("?")[0].split(".").slice(-1)[0]);"image/svg"===(n=n.replace("jpg","jpeg").replace("image/svg","image/svg+xml"))&&(n="image/svg+xml"),i.target.files[0]=new l([t],o,{type:n}),Ee(i,!0)}).catch(function(e){t.onerror&&t.onerror({type:"failedPrefill",message:"Failed loading prefill image: "+e}),K()&&alert("Failed loading prefill image: "+e)})}B(function(){C()&&Ke(C(),A())}),Q(f(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ue();case 1:Ve(),C()&&Ke(C(),A()),window.addEventListener("resize",Le),Le(),P(Re)&&P(Fe)&&(U(ce,Math.round(window.devicePixelRatio||1),!0),P(Fe).getContext&&(U(Ae,P(Fe).getContext("2d"),!0),P(Ae)&&P(Ae).scale(P(ce),P(ce)))),"image/*, image/avif"!==m()&&U(Be,m().split(",").map(function(e){return e.trim()}),!0),U(re,v()!=Number.MAX_SAFE_INTEGER?Number(v()):r.clientWidth,!0),U(ae,g()!=Number.MAX_SAFE_INTEGER?Number(g()):P(re),!0),U(oe,P(re),!0),U(ie,P(ae),!0);case 2:return e.a(2)}},e)}))),O(function(){window.removeEventListener("resize",Le)});var et=lc(),tt=E(et),it=function(e){var t=ec(),i=E(t);W(i,function(){return Oe.upload}),D(e,t)},ot=function(e){var t=q(),i=L(t),o=function(e){var t=rc(),i=L(t),o=E(i);o.__click=[tc,qe],F(o,function(e){return U(Fe,e)},function(){return P(Fe)});var n=fe(o,2),r=function(e){var t=nc(),i=E(t),o=function(e){var t=ic(),i=E(t);W(i,function(){return Oe.drag}),D(e,t)},n=function(e){var t=oc(),i=E(t);W(i,function(){return Oe.tap}),D(e,t)};de(i,function(e){P(je)?e(o):e(n,!1)}),H(function(e){var i,o,n,r;return He(t,"top: -".concat(null!==(i=P(ie))&&void 0!==i?i:"","px; margin-bottom: -").concat(null!==(o=P(ie))&&void 0!==o?o:"","px; font-size: ").concat(null!==(n=P($e))&&void 0!==n?n:"","; border-radius: ").concat(null!==(r=M())&&void 0!==r?r:"","%; z-index: ").concat(null!=e?e:"",";"))},[function(){return parseInt(X()+"")+2}]),D(e,t)};de(n,function(e){P(te)||J()||e(r)});var a=fe(i,2),c=function(e){ke(e,{variant:"raised",onclick:ze,get class(){return y()},children:function(e,t){Me(e,{children:function(e,t){var i=Te();H(function(){return Ie(i,Oe.change)}),D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};de(a,function(e){P(te)&&!z()&&e(c)});var l=fe(a,2),s=function(e){ke(e,{variant:"raised",onclick:Ge,get class(){return x()},children:function(e,t){Me(e,{children:function(e,t){var i=Te();H(function(){return Ie(i,Oe.remove)}),D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};de(l,function(e){P(te)&&V()&&e(s)});var u=fe(l,2),d=function(e){ke(e,{variant:"raised",onclick:_e,get class(){return S()},children:function(e,t){Me(e,{children:function(e,t){var i=Te();H(function(){return Ie(i,Oe.aspect)}),D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};de(u,function(e){P(te)&&_()&&v()!==g()&&e(d)}),H(function(e){var t,n,r,a,c;He(i,"max-width: ".concat(null!==(t=P(oe))&&void 0!==t?t:"","px; height: ").concat(null!==(n=P(ie))&&void 0!==n?n:"","px; border-radius: ").concat(null!==(r=M())&&void 0!==r?r:"","%;")),Y(o,1,"picture-preview ".concat(null!==(a=P(Pe))&&void 0!==a?a:"")),He(o,"height: ".concat(null!==(c=P(ie))&&void 0!==c?c:"","px; z-index: ").concat(null!=e?e:"",";"))},[function(){return parseInt(X()+"")+1}]),Qe("drag",o,function(e){e.stopPropagation(),e.preventDefault()}),Qe("dragover",o,function(e){e.stopPropagation(),e.preventDefault()}),Qe("dragstart",o,function(e){e.stopPropagation(),e.preventDefault()}),Qe("dragend",o,function(e){e.stopPropagation(),e.preventDefault()}),Qe("dragenter",o,function(e){e.stopPropagation(),e.preventDefault(),P(je)&&U(ne,!0)}),Qe("dragleave",o,function(e){e.stopPropagation(),e.preventDefault(),We()}),Qe("drop",o,function(e){e.stopPropagation(),e.preventDefault(),function(e){We(),Ee(e)}(e)}),D(e,t)},n=function(e){var t=cc(),i=E(t),o=function(e){ke(e,{variant:"raised",onclick:ze,get class(){return y()},children:function(e,t){Me(e,{children:function(e,t){var i=Te();H(function(){return Ie(i,Oe.select)}),D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},n=function(e){var t=ac(),i=L(t),o=E(i);W(o,function(){return Oe.selected});var n=fe(i,2),r=function(e){ke(e,{variant:"raised",onclick:ze,get class(){return y()},children:function(e,t){Me(e,{children:function(e,t){var i=Te();H(function(){return Ie(i,Oe.change)}),D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};de(n,function(e){z()||e(r)});var a=fe(n,2),c=function(e){ke(e,{variant:"raised",onclick:Ge,get class(){return x()},children:function(e,t){Me(e,{children:function(e,t){var i=Te();H(function(){return Ie(i,Oe.remove)}),D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};de(a,function(e){V()&&e(c)}),D(e,t)};de(i,function(e){P(te)?e(n,!1):e(o)}),D(e,t)};de(i,function(e){P(Re)?e(o):e(n,!1)},!0),D(e,t)};de(tt,function(e){P(De)?e(ot,!1):e(it)});var nt=fe(tt,2);nt.__change=Ee,F(nt,function(e){return d=e},function(){return d}),F(et,function(e){return r=e},function(){return r}),H(function(){Xe(nt,"name",T()),Xe(nt,"id",I()),Xe(nt,"accept",m()),Xe(nt,"capture",b())}),D(e,et),R()}Ke(["click","change"]);var uc=k('<div class="mb-4 text-left"><!></div>'),dc=k('<img alt="Converted" loading="lazy" class="svelte-nl65cd"/> <!> <!>',1),fc=k('<div class="col col-lg-4"><!> <!></div> <div class="col col-lg-8"><!></div>',1),vc=k('<div><img alt="Cropper" loading="lazy" class="cropper-image svelte-nl65cd"/></div>'),gc=k('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div> <div class="mt-2"><!></div> <!>',1),pc=k('<div class="pt-3 col col-12"><img alt="Compress" loading="lazy" class="svelte-nl65cd"/></div>'),mc=k('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div> <!></div>'),hc=k('<div class="col col-lg-4"><div><!></div> <div><b>Before:</b> <b>After:</b> </div> <!></div> <div class="col-lg-8"><!> <!> <!></div>',1),bc=k('<div class="container"><!> <div class="row"><!></div></div>'),wc=k("<!> <!> <!>",1);function Tc(e,t){j(t,!0);var i,o=N(t,"open",7),n=N(t,"imgObject",7),r=N(t,"canHaveURL",3,!0),a=$("Cropper"),c=$(100),l=$(90),s=!1,u=$(1),d=$(1),f=$(void 0),v=$(void 0),g=$(void 0),p=$(!1),m=0,h=pe(function(){if(P(v)){var e=(t=P(v),(i=t.match(/^data:.+;base64,(.+)$/))?i[1]:t).length*(3/4)-2;return Math.round(e/1024)}var t,i;return 0}),b=pe(function(){if(P(g)){var e=P(g).split(",")[1].length*(3/4)-2;return Math.round(e/1024)}return 0});function w(){var e=C(n(),t.imgProp);e&&x(e)}function T(){P(g)&&S(n(),t.imgProp,P(g),!1)}function I(){i&&i.setAspectRatio(P(d)/P(u))}function y(){if(i&&P(f)){var e=i.getCroppedCanvas().toDataURL("image/webp");P(f).src=e,S(n(),t.imgProp,e)}}function x(e){var t=document.createElement("canvas"),i=t.getContext("2d"),o=new Image;o.crossOrigin="anonymous",o.onload=function(){var e=P(c)/100,n=o.width*e,r=o.height*e;t.setAttribute("width",n.toString()),t.setAttribute("height",r.toString()),null==i||i.drawImage(o,0,0,n,r),U(g,t.toDataURL("image/webp",P(l)/100),!0),m++,s&&m>1&&(s=!1,T(),m=0)},o.src=e}function S(e,t,o){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e&&(e[t]=o,U(v,o,!0),i&&i.replace(o),n&&x(o))}function C(e,t){return e&&e[t]?e[t]:""}function A(){if(n().parentId){var e=Wt.get(n().parentId);if(void 0!==e)return void(e.row.defaultAspectWidth=P(d))}if(n().id){var t=Lt.get(n().id);if(void 0!==t)return void(t.defaultAspectWidth=P(d));var i=Wt.get(n().id);if(void 0!==i)return void(i.row.defaultAspectWidth=P(d))}}function O(){if(n().parentId){var e=Wt.get(n().parentId);if(void 0!==e)return void(e.row.defaultAspectHeight=P(u))}if(n().id){var t=Lt.get(n().id);if(void 0!==t)return void(t.defaultAspectHeight=P(u));var i=Wt.get(n().id);if(void 0!==i)return void(i.row.defaultAspectHeight=P(u))}}B(function(){return P(f)?i=new ot(P(f),{viewMode:3,dragMode:"move"}):i&&i.destroy(),function(){i&&i.destroy()}}),Q(function(){!function(){if(n().parentId){var e=Wt.get(n().parentId);return void(void 0!==e&&(void 0!==e.row.defaultAspectHeight&&U(u,e.row.defaultAspectHeight,!0),void 0!==e.row.defaultAspectWidth&&U(d,e.row.defaultAspectWidth,!0)))}if(n().id){var t=Lt.get(n().id);if(void 0!==t)return void 0!==t.defaultAspectHeight&&U(u,t.defaultAspectHeight,!0),void(void 0!==t.defaultAspectWidth&&U(d,t.defaultAspectWidth,!0));var i=Wt.get(n().id);if(void 0!==i)void 0!==i.row.defaultAspectHeight&&U(u,i.row.defaultAspectHeight,!0),void 0!==i.row.defaultAspectWidth&&U(d,i.row.defaultAspectWidth,!0)}}()}),Se(e,{surface$style:"width: 1200px; max-width: calc(100vw - 32px);",style:"text-align: center",get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:function(e,i){var v=wc(),g=L(v);Ce(g,{tabindex:0,autofocus:!0,children:function(e,t){var i=Te("Image");D(e,i)},$$slots:{default:!0}});var m=fe(g,2);Ae(m,{children:function(e,i){var v=bc(),g=E(v),m=function(e){var t=uc(),i=E(t);Be(i,{label:function(e){var t=Te("Uploaded Image or External URL.");D(e,t)},children:function(e,t){Oe(e,{color:"secondary",class:"switch-scale",get checked(){return P(p)},set checked(e){U(p,e,!0)}})},$$slots:{label:!0,default:!0}}),D(e,t)};de(g,function(e){r()&&e(m)});var x=fe(g,2),B=E(x),k=function(e){var i=fc(),o=L(i),r=E(o);mn(r,{get value(){return(null===(e=n())||void 0===e?void 0:e.imageLink)||"";var e},set value(e){!function(e){n().imageLink=e}(e)},label:"External Image URL",variant:"filled"});var a=fe(r,2);ke(a,{onclick:function(){S(n(),t.imgProp,n().imageLink)},variant:"raised",children:function(e,t){Me(e,{children:function(e,t){var i=Te("Convert URL to Image");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=fe(o,2),l=E(c),s=function(e){var i=dc(),o=L(i),r=fe(o,2);ke(r,{onclick:function(){S(n(),t.imgProp,""),delete n().imageLink},variant:"raised",class:"my-3",children:function(e,t){Me(e,{children:function(e,t){var i=Te("Remove Photo");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=fe(r,2);mn(a,{get value(){return(null===(e=n())||void 0===e?void 0:e.imageSourceTooltip)||"";var e},set value(e){!function(e){n().imageSourceTooltip=e}(e)},label:"Tooltip That Shows When Hovering over it",variant:"filled"}),H(function(e){return Xe(o,"src",e)},[function(){return C(n(),t.imgProp)}]),D(e,i)};de(l,function(e){void 0!==C(n(),t.imgProp)&&""!==C(n(),t.imgProp)&&e(s)}),D(e,i)},M=function(e){var i=hc(),r=L(i),v=E(r),g=E(v),p=function(e){var i=pe(function(){return fo(C(n(),t.imgProp))?C(n(),t.imgProp):""});sc(e,{hideChangeButton:!0,removable:!0,crop:!1,get prefill(){return P(i)},onchange:function(e){S(n(),t.imgProp,e)},onclick:function(){return s=app.compressImageAuto},onremove:function(){return S(n(),t.imgProp,"")}})};de(g,function(e){o()&&e(p)});var m,x=fe(v,2),B=fe(E(x)),k=fe(B,2),M=fe(x,2);mn(M,{get value(){return(null===(e=n())||void 0===e?void 0:e.imageSourceTooltip)||"";var e},set value(e){!function(e){n().imageSourceTooltip=e}(e)},label:"Tooltip That Shows When Hovering over it",variant:"filled"});var R=fe(r,2),j=E(R);Ee(j,{tabs:["Cropper","Compress"],get active(){return P(a)},set active(e){U(a,e,!0)},tab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;Ue(e,{get tab(){return t()},children:function(e,i){Me(e,{children:function(e,i){var o=Te();H(function(){return Ie(o,t())}),D(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{tab:!0}});var $=fe(j,2),V=pe(function(){return"Cropper"!==P(a)?"display: none;":""});Ne($,{role:"tabpanel",variant:"unelevated",get style(){return P(V)},children:function(e,i){ze(e,{children:function(e,i){var o=gc(),r=L(o),a=E(r);mn(E(a),{onchange:A,label:"Width Aspect",type:"number",variant:"filled",get value(){return P(d)},set value(e){U(d,e,!0)}});var c=fe(a,2);mn(E(c),{onchange:O,label:"Height Aspect",type:"number",variant:"filled",get value(){return P(u)},set value(e){U(u,e,!0)}});var l=fe(c,2),s=E(l);ke(s,{onclick:I,variant:"raised",style:"height: 100%;",children:function(e,t){Me(e,{children:function(e,t){var i=Te("Change Aspect");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var v=fe(r,2),g=E(v);ke(g,{onclick:y,variant:"raised",children:function(e,t){Me(e,{children:function(e,t){var i=Te("Crop Image");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var p=fe(v,2),m=function(e){var i=vc(),o=E(i);F(o,function(e){return U(f,e)},function(){return P(f)}),H(function(e){return Xe(o,"src",e)},[function(){return C(n(),t.imgProp)}]),D(e,i)};de(p,function(e){fo(C(n(),t.imgProp))&&e(m)}),D(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var q=fe($,2),W=pe(function(){return"Compress"!==P(a)?"display: none;":""});Ne(q,{role:"tabpanel",variant:"unelevated",get style(){return P(W)},children:function(e,i){ze(e,{children:function(e,i){var o=mc(),r=E(o);mn(E(r),{onchange:w,label:"Image Scale",type:"number",variant:"filled",get value(){return P(c)},set value(e){U(c,e,!0)}});var a=fe(r,2);mn(E(a),{onchange:w,label:"Image Quality",type:"number",variant:"filled",get value(){return P(l)},set value(e){U(l,e,!0)}});var s=fe(a,2),u=E(s);ke(u,{onclick:T,variant:"raised",style:"height: 100%;",children:function(e,t){Me(e,{children:function(e,t){var i=Te("Compress Image");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var d=fe(s,2),f=function(e){var i=pc(),o=E(i);H(function(e){return Xe(o,"src",e)},[function(){return C(n(),t.imgProp)}]),D(e,i)};de(d,function(e){fo(C(n(),t.imgProp))&&e(f)}),D(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),H(function(e){var t,i;m=Y(x,1,"p-2",null,m,e),Ie(B,"".concat(null!==(t=P(h))&&void 0!==t?t:""," kB|")),Ie(k,"".concat(null!==(i=P(b))&&void 0!==i?i:""," kB"))},[function(){return{hidden:!C(n(),t.imgProp)}}]),D(e,i)};de(B,function(e){P(p)?e(k):e(M,!1)}),D(e,v)},$$slots:{default:!0}});var x=fe(m,2);Fe(x,{children:function(e,t){ke(e,{action:"close",children:function(e,t){Me(e,{class:"dialog-actions--btn",children:function(e,t){var i=Te("Close");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),D(e,v)},$$slots:{default:!0}}),R()}var Ic=k('<div class="row pt-4"><div class="col-12"><!></div></div>'),yc=k('<div class="container-fluid"><div class="row"><div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),xc=k("<!> <!> <!>",1);function Sc(e,t){j(t,!0);var i=N(t,"changeNum",7),o=N(t,"minVal",3,0),n=N(t,"maxVal",3,0);Se(e,{get open(){return t.open},set open(e){!function(e){!e&&t.onclose()}(e)},surface$style:"width: 400px; max-width: calc(100vw - 32px);",children:function(e,r){var a=xc(),c=L(a);Ce(c,{class:"px-3 pb-0 toolbar toolbar__dialog",children:function(e,t){var i=Te("Counter");D(e,i)},$$slots:{default:!0}});var l=fe(c,2);Ae(l,{children:function(e,t){var r=Ic(),a=E(r);mn(E(a),{label:"Number of Count",variant:"filled",type:"number",onchange:function(){i(Math.min(Math.max(i(),o()),n()))},get input$min(){return o()},get input$max(){return n()},get value(){return i()},set value(e){i(e)}}),D(e,r)},$$slots:{default:!0}});var s=fe(l,2);Fe(s,{children:function(e,r){var a=yc(),c=E(a),l=E(c),s=E(l);ke(s,{children:function(e,t){Me(e,{children:function(e,t){var i=Te("Cancel");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var u=fe(l,2),d=E(u);ke(d,{defaultAction:!0,onclickcapture:function(){return t.submit(Math.min(Math.max(i(),o()),n()))},children:function(e,t){Me(e,{class:"dialog-actions--btn",children:function(e,t){var i=Te("OK");D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),D(e,a)},$$slots:{default:!0}}),D(e,a)},$$slots:{default:!0}}),R()}var Cc=k("<!> <!>",1),Ac=k("<!> <!>",1),Bc=k("<!> <!>",1),Oc=k("<!> <!>",1),kc=k("<!> <!>",1),Mc=k("<!> <!>",1),Fc=k("<!> <!>",1),Dc=k("<!> <!>",1),Rc=k("<!> <!> <!> <!> <!> <!> <!>",1),jc=k("<i></i>"),Pc=k('<i class="mdi mdi-stop"></i>'),$c=k("<i></i>"),Vc=k('<!> <!> <!> <div class="px-1" style="max-width: 104px; width: 100%"><!></div> <div class="ps-1" style="max-width:150px; overflow: hidden;"><span class="scrolling-text"> </span></div> <div class="px-1 col"><!></div> <div class="text-center" style="width: 180px"> </div>',1),qc=k('<i class="mdi mdi-format-list-checks"></i>'),Lc=k('<i class="mdi mdi-format-list-checks"></i>'),Wc=k('<div class="py-0 justify-center"><!></div>'),Ec=k('<i class="mdi mdi-checkbox-marked-circle-outline"></i>'),Uc=k("<!> <!> <!>",1),Nc=k("<div><!></div>"),zc=k('<div class="ab-0"><div class="fadeOverlay"></div> <!> <!> <div class="s-main"><!> <!> <div class="container-fluid p-0"><div class="row gx-0"></div></div></div></div> <!> <!> <!>',1);function Gc(e,t){j(t,!0);var i={action:function(){},title:"Warning",context:""},o=$(!1),n=$(!1),r=$("none"),a=pe(function(){return P(n)?app.showMusicPlayer?"top: 32px;":"top: 0;":"bottom: 0;"}),c=pe(function(){return"opacity: ".concat(app.fadeTransitionIsOn?1:0,"; transition: opacity ").concat(app.fadeTransitionTime,"s ease-out; background-color: ").concat(Xo(app.fadeTransitionColor),"; pointer-events: ").concat(app.fadeTransitionIsOn?"auto":"none","; cursor: ").concat(app.fadeTransitionIsOn?"none":"auto",";")}),l=$(0),s=$(void 0),u=pe(function(){return app.pointTypes.length>0||app.backpack.length>0||app.importedChoicesIsOpen}),d=pe(function(){return"background-color: ".concat(Xo(app.styling.barBackgroundColor),"; margin:").concat(app.styling.barMargin,"px; padding:").concat(app.styling.barPadding,"px; ").concat(P(a))}),f=pe(function(){return"color: ".concat(Xo(app.styling.barTextColor),"; margin: ").concat(app.styling.barTextMargin,"px; padding: ").concat(app.styling.barTextPadding,"px; font-family: '").concat(app.styling.barTextFont,"'; font-size: ").concat(app.styling.barTextSize,"px;")}),v=pe(function(){return"color: ".concat(Xo(app.styling.barIconColor),";")}),g=pe(function(){var e=[];return app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(Xo(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;"),P(u)&&e.push("padding-bottom: 56px;"),app.useVW&&e.push("font-size: 0.835vw;"),e.join(" ")}),p=pe(function(){var e=[];return app.showMusicPlayer&&e.push("padding-top: 32px;"),e.join(" ")}),m=pe(function(){return"".concat(I(Kt.curBgmTime)," | ").concat(I(Kt.curBgmLength))}),h=$(0),b=$(100),w=$(!1);function T(e){var t=e.currentTarget;e.preventDefault(),t.blur(),U(r,"appBuildForm")}function I(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%60),n=String(i).padStart(2,"0"),r=String(o).padStart(2,"0");return t>0?"".concat(t,":").concat(n,":").concat(r):"".concat(n,":").concat(r)}function y(){var e=localStorage.getItem("theme");Zt.value="dark"===e?"light":"dark";var t=document.head.querySelector("#theme-dark"),i=document.head.querySelector("#theme-light");"dark"===Zt.value?(t&&(t.media="screen and (prefers-color-scheme: light)"),i&&(i.media="screen and (prefers-color-scheme: dark)")):(t&&(t.media="screen and (prefers-color-scheme: dark)"),i&&(i.media="screen and (prefers-color-scheme: light)")),localStorage.setItem("theme",Zt.value)}function x(){if(Xt&&0!==Kt.curBgmLength){var e=S(Xt);if(e)if(Kt.bgmIsPlaying)e.pauseVideo(),Kt.bgmIsPlaying=!1,0!==Kt.bgmPlayInterval&&(clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0);else{var t=0,i=0;0!==Kt.bgmPlayInterval&&(clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0),e.playVideo(),Kt.bgmIsPlaying=!0,Kt.bgmPlayInterval=window.setInterval(function(){if(void 0!==e.playerInfo.videoData&&!Kt.isSeeking&&1===e.getPlayerState()){var o=Math.floor(e.getCurrentTime());o!==Kt.curBgmTime?t!==o?Kt.curBgmTime=o:(++i>Kt.curBgmLength&&(i=1),Kt.curBgmTime=i):(t=o,i=o+1,Kt.curBgmTime=i)}},1e3)}}}function C(){if(Xt&&Kt.bgmIsPlaying&&0!==Kt.curBgmLength){var e=S(Xt);e&&(e.stopVideo(),Kt.bgmIsPlaying=!1,Kt.curBgmTime=0,0!==Kt.bgmPlayInterval&&(clearInterval(Kt.bgmPlayInterval),Kt.bgmPlayInterval=0))}}function A(){if(app.isMute=!app.isMute,Xt){var e=S(Xt);e&&(app.isMute?e.mute():e.unMute())}}function k(){Xt&&Kt.bgmIsPlaying&&(Kt.isSeeking=!0)}function N(){var e;if(Xt&&Kt.bgmIsPlaying){var t=S(Xt);t&&(t.seekTo(P(h),!0),Kt.curBgmTime=P(h)),Kt.isSeeking=!1}null===(e=document.activeElement)||void 0===e||e.blur()}function z(){U(w,!0)}function G(){var e;if(app.curVolume=P(b),Xt){var t=S(Xt);t&&t.setVolume(P(b))}U(w,!1),null===(e=document.activeElement)||void 0===e||e.blur()}B(function(){Kt.isSeeking||U(h,Kt.curBgmTime,!0)}),B(function(){P(w)||U(b,app.curVolume,!0)});var _=zc(),J=L(_),X=E(J),K=fe(X,2);nt(K,{style:"top: 0;",variant:"modal",get open(){return P(o)},set open(e){U(o,e,!0)},children:function(e,t){at(e,{class:"navigation-drawer",children:function(e,t){$e(e,{children:function(e,t){var a=Rc(),c=L(a);We(c,{onSMUIAction:function(){return U(o,!1)},class:"my-0",children:function(e,t){var i=Cc(),o=L(i);ct(o,{class:"mdi mdi-chevron-left"});var n=fe(o,2);lt(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Te("Close Menu");D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}});var l=fe(c,2);st(l,{class:"my-3"});var s=fe(l,2);We(s,{onSMUIAction:y,class:"my-0",children:function(e,t){var i=Ac(),o=L(i);ct(o,{class:"mdi mdi-theme-light-dark"});var n=fe(o,2);lt(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Te("Toogle Dark/Light Theme");D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}});var u=fe(s,2);We(u,{onSMUIAction:function(){return U(n,!P(n))},class:"my-0",children:function(e,t){var i=Bc(),o=L(i);ct(o,{class:"mdi mdi-swap-vertical"});var n=fe(o,2);lt(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Te("Top/Bottom Point Bar");D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}});var d=fe(u,2);We(d,{onSMUIAction:function(){i.action=function(){return no()},i.context="Are you sure you want to clear selected choices?<br>This action cannot be undone.",U(r,"dlgCommon"),U(o,!1)},class:"my-0",children:function(e,t){var i=Oc(),o=L(i);ct(o,{class:"mdi mdi-select-off"});var n=fe(o,2);lt(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Te("Clear Selected Choices");D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}});var f=fe(d,2),v=function(e){var t=Fc(),i=L(t);We(i,{onSMUIAction:function(){U(r,"appBuildForm"),U(o,!1)},class:"my-0",children:function(e,t){var i=kc(),o=L(i);ct(o,{class:"mdi mdi-format-list-checks"});var n=fe(o,2);lt(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Te("Open Build Form");D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}});var n=fe(i,2);We(n,{onSMUIAction:function(){U(r,"appSaveLoad"),U(o,!1)},class:"my-0",children:function(e,t){var i=Mc(),o=L(i);ct(o,{class:"mdi mdi-content-save"});var n=fe(o,2);lt(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Te("Save/Load Build");D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}}),D(e,t)};de(f,function(e){app.importedChoicesIsOpen&&e(v)});var g=fe(f,2);We(g,{onSMUIAction:function(){U(r,"appGlobalSettings"),U(o,!1)},class:"my-0",children:function(e,t){var i=Dc(),o=L(i);ct(o,{class:"mdi mdi-cog"});var n=fe(o,2);lt(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Te("Settings");D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}}),D(e,a)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var Q=fe(K,2);rt(Q,{});var ee=fe(Q,2),te=E(ee),ie=function(e){ut(e,{class:"music-player",variant:"fixed",children:function(e,t){dt(e,{class:"music-player--row",children:function(e,t){ft(e,{class:"px-2 justify-left",children:function(e,t){var i=Vc(),o=L(i);Ye(o,{class:"music-player--button",onclickcapture:x,size:"button","aria-label":"Play",children:function(e,t){var i=jc();H(function(){return Y(i,1,Z(Kt.bgmIsPlaying?"mdi mdi-pause":"mdi mdi-play"))}),D(e,i)},$$slots:{default:!0}});var n=fe(o,2);Ye(n,{class:"music-player--button",onclickcapture:C,size:"button","aria-label":"Stop",children:function(e,t){var i=Pc();D(e,i)},$$slots:{default:!0}});var r=fe(n,2);Ye(r,{class:"music-player--button",onclickcapture:A,size:"button","aria-label":"Mute",children:function(e,t){var i=$c();H(function(){return Y(i,1,Z(app.isMute?"mdi mdi-volume-off":"mdi mdi-volume-high"))}),D(e,i)},$$slots:{default:!0}});var a=fe(r,2),c=E(a);et(c,{min:0,max:100,step:1,class:"mx-2",onpointerdown:z,onpointerup:G,get disabled(){return app.isMute},get value(){return P(b)},set value(e){U(b,e,!0)}});var l=fe(a,2),s=E(l),u=E(s),d=fe(l,2),f=E(d),v=pe(function(){return Kt.curBgmLength||1});et(f,{min:0,get max(){return P(v)},step:1,class:"mx-2",onpointerdown:k,onpointerup:N,get value(){return P(h)},set value(e){U(h,e,!0)}});var g=fe(d,2),p=E(g);H(function(){Ie(u,Kt.bgmTitle),Ie(p,P(m))}),D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})};de(te,function(e){app.showMusicPlayer&&e(ie)});var oe=fe(te,2),ne=function(e){ut(e,{class:"pointBar",get style(){return P(d)},variant:"fixed",color:"secondary",children:function(e,t){dt(e,{class:"justify-space-around",children:function(e,t){var i=Uc(),n=L(i);ft(n,{class:"py-0 justify-center",children:function(e,t){var i=q(),n=L(i),r=function(e){nn(e,{text:"L-Click: Open Side Menu<br>R-Click: Open Build Form",children:function(e,t){Ye(e,{class:"pointbar-icons",onclickcapture:function(){return U(o,!0)},oncontextmenu:T,"aria-label":"Open Import Window",get style(){return P(v)},children:function(e,t){var i=qc();D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){Ye(e,{class:"pointbar-icons",onclickcapture:function(){return U(o,!0)},"aria-label":"Open Import Window",get style(){return P(v)},children:function(e,t){var i=Lc();D(e,i)},$$slots:{default:!0}})};de(n,function(e){app.importedChoicesIsOpen?e(r):e(a,!1)}),D(e,i)},$$slots:{default:!0}});var a=fe(n,2);ft(a,{class:"pointbar-center--viewer",children:function(e,t){var i=q(),o=L(i);Ge(o,17,function(){return app.pointTypes},Ze,function(e,t){var i=q(),o=L(i),n=function(e){var i=Wc();!function(e,t){j(t,!0);var i=pe(function(){return"color: ".concat(Xo(app.styling.barTextColor),"; margin: ").concat(app.styling.barTextMargin,"px; padding: ").concat(app.styling.barTextPadding,"px; font-family: '").concat(app.styling.barTextFont,"'; font-size: ").concat(app.styling.barTextSize,"px;")}),o=pe(function(){if(t.point.startingSum>=0){if(void 0!==app.styling.barPointPos)return"color: ".concat(Xo(app.styling.barPointPos),";")}else if(void 0!==app.styling.barPointNeg)return"color: ".concat(Xo(app.styling.barPointNeg),";");return""});function n(e,t){var i=t?e.negativeImage:e.image,o=t?e.negativeIconWidth:e.iconWidth,n=t?e.negativeIconHeight:e.iconHeight;return i?'<img src="'.concat(i,'" class="mx-1" style="width: ').concat(o,"px; height: ").concat(n,'px;" alt="">'):""}var r=$n(),a=E(r),c=E(a),l=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i);W(o,function(){return n(t.point,!0)}),D(e,i)};de(o,function(e){t.point.negativeImageOnSide||t.point.negativeImageSidePlacement||e(r)}),D(e,i)},a=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i);W(o,function(){return n(t.point,!1)}),D(e,i)};de(o,function(e){t.point.imageOnSide||t.point.imageSidePlacement||e(r)}),D(e,i)};de(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),D(e,i)};de(c,function(e){t.point.iconIsOn&&e(l)});var s=fe(c),u=fe(s),d=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i);W(o,function(){return n(t.point,!0)}),D(e,i)};de(o,function(e){t.point.negativeImageOnSide&&!t.point.negativeImageSidePlacement&&e(r)}),D(e,i)},a=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i);W(o,function(){return n(t.point,!1)}),D(e,i)};de(o,function(e){t.point.imageOnSide&&!t.point.imageSidePlacement&&e(r)}),D(e,i)};de(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),D(e,i)};de(u,function(e){t.point.iconIsOn&&e(d)});var f=fe(u,2),v=E(f),g=fe(f,2),p=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i);W(o,function(){return n(t.point,!0)}),D(e,i)};de(o,function(e){!t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),D(e,i)},a=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i);W(o,function(){return n(t.point,!1)}),D(e,i)};de(o,function(e){!t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),D(e,i)};de(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),D(e,i)};de(g,function(e){t.point.iconIsOn&&e(p)});var m=fe(g),h=fe(m),b=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i);W(o,function(){return n(t.point,!0)}),D(e,i)};de(o,function(e){t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),D(e,i)},a=function(e){var i=q(),o=L(i),r=function(e){var i=q(),o=L(i);W(o,function(){return n(t.point,!1)}),D(e,i)};de(o,function(e){t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),D(e,i)};de(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),D(e,i)};de(h,function(e){t.point.iconIsOn&&e(b)}),H(function(e,n){var c,l;He(r,P(i)),He(a,e),Ie(s," ".concat(null!==(c=t.point.beforeText)&&void 0!==c?c:""," ")),He(f,P(o)),Ie(v,n),Ie(m," ".concat(null!==(l=t.point.afterText)&&void 0!==l?l:""," "))},[function(){return t.point.pointPrivateColorIsOn?"color: ".concat(t.point.startingSum>=0?Xo(t.point.privateColor):Xo(t.point.privateNegativeColor)):""},function(){return t.point.startingSum%1==0?t.point.startingSum:parseFloat(t.point.startingSum.toFixed(void 0!==t.point.decimalPlaces?t.point.decimalPlaces:2))}]),D(e,r),R()}(E(i),{get point(){return P(t)}}),H(function(){return He(i,P(f))}),D(e,i)};de(o,function(e){(function(e){if(e.isNotShownPointBar){if(void 0!==e.activatedId&&""!==e.activatedId){var t=Ut.get(e.activatedId),i=zt.get(e.activatedId);return void 0!==t?zi(t.requireds):void 0!==i?i.isTrue:Wi(e.activatedId)}return!1}return!0})(P(t))&&e(n)}),D(e,i)}),D(e,i)},$$slots:{default:!0}});var c=fe(a,2);ft(c,{class:"py-0 justify-center",children:function(e,t){var i=q(),o=L(i),n=function(e){Ye(e,{class:"pointbar-icons",onclickcapture:function(){return U(r,"dlgBackpack")},"aria-label":"Open Backpack Window",get style(){return P(v)},children:function(e,t){var i=Ec();D(e,i)},$$slots:{default:!0}})};de(o,function(e){app.backpack.length>0&&(void 0===app.hideBackpackBtn||0===app.hideBackpackBtn||app.hideBackpackBtn>0&&app.hideBackpackBtn===app.btnBackpackIsOn)&&e(n)}),D(e,i)},$$slots:{default:!0}}),D(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};de(oe,function(e){P(u)&&e(ne)});var re=fe(oe,2),ae=E(re);Ge(ae,21,function(){return app.rows},Ze,function(e,t){var i=Nc();Ha(E(i),{get row(){return P(t)},get windowWidth(){return P(l)},get mainDiv(){return P(s)}}),H(function(){return Y(i,1,Z(P(t).width?"col-6":"col-12"))}),D(e,i)}),F(ae,function(e){return U(s,e)},function(){return P(s)});var ce=fe(J,2),le=function(e){var t=pe(function(){return"appSaveLoad"===P(r)});rr(e,{get open(){return P(t)},onclose:function(){return U(r,"none")}})},se=function(e){var t=q(),o=L(t),n=function(e){var t=pe(function(){return"dlgBackpack"===P(r)});Qa(e,{get open(){return P(t)},onclose:function(){return U(r,"none")}})},a=function(e){var t=q(),o=L(t),n=function(e){var t=pe(function(){return"appGlobalSettings"===P(r)});Pn(e,{get open(){return P(t)},onclose:function(){return U(r,"none")}})},a=function(e){var t=q(),o=L(t),n=function(e){var t=pe(function(){return"appBuildForm"===P(r)});wn(e,{get open(){return P(t)},onclose:function(){return U(r,"none")}})},a=function(e){var t=q(),o=L(t),n=function(e){var t=pe(function(){return"dlgCommon"===P(r)});En(e,{get open(){return P(t)},onclose:function(){return U(r,"none")},get title(){return i.title},get context(){return i.context},closeHandler:function(e){"accept"===e.detail.action&&i.action()}})};de(o,function(e){"dlgCommon"===P(r)&&e(n)},!0),D(e,t)};de(o,function(e){"appBuildForm"===P(r)?e(n):e(a,!1)},!0),D(e,t)};de(o,function(e){"appGlobalSettings"===P(r)?e(n):e(a,!1)},!0),D(e,t)};de(o,function(e){"dlgBackpack"===P(r)?e(n):e(a,!1)},!0),D(e,t)};de(ce,function(e){"appSaveLoad"===P(r)?e(le):e(se,!1)});var ue=fe(ce,2),ve=function(e){var t=pe(function(){return"appImageUpload"===Qt.currentDialog});Tc(e,{get open(){return P(t)},onclose:function(){return Qt.currentDialog="none"},get imgObject(){return Qt.data},get imgProp(){return Qt.imgProp}})},ge=function(e){var t=q(),i=L(t),o=function(e){var t=pe(function(){return"dlgCommon"===Qt.currentDialog});En(e,{get open(){return P(t)},onclose:function(){return Qt.currentDialog="none"},get closeHandler(){return Qt.cFunc},get title(){return Qt.title},get context(){return Qt.context},get isWord(){return Qt.isWord}})},n=function(e){var t=q(),i=L(t),o=function(e){var t=pe(function(){return"selectDialog"===Qt.currentDialog});Sc(e,{get open(){return P(t)},onclose:function(){return Qt.currentDialog="none"},get submit(){return Qt.func},get changeNum(){return Qt.choice.multipleUseVariable},get minVal(){return Qt.choice.numMultipleTimesMinus},get maxVal(){return Qt.choice.numMultipleTimesPluss}})};de(i,function(e){"selectDialog"===Qt.currentDialog&&void 0!==Qt.choice&&void 0!==Qt.func&&e(o)},!0),D(e,t)};de(i,function(e){"dlgCommon"===Qt.currentDialog&&void 0!==Qt.cFunc&&void 0!==Qt.title&&void 0!==Qt.context?e(o):e(n,!1)},!0),D(e,t)};de(ue,function(e){"appImageUpload"===Qt.currentDialog&&void 0!==Qt.data&&void 0!==Qt.imgProp?e(ve):e(ge,!1)}),function(e,t){j(t,!0);var i=$(void 0),o=null;B(function(){var e;P(i)&&""!==Ko.text&&(Ko.isVisible&&Ko.anchor&&Ko.anchor.isConnected?(null===(e=o)||void 0===e||e.destroy(),o=V(Ko.anchor,P(i),{placement:"top",modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{boundary:"viewport"}},{name:"flip",options:{fallbackPlacements:["top","bottom"]}}]}),P(i).classList.add("mdc-tooltip--shown")):o&&(o.destroy(),o=null,P(i).classList.remove("mdc-tooltip--shown")))}),O(function(){var e;null===(e=o)||void 0===e||e.destroy()});var n=tn(),r=E(n),a=E(r);M(a,function(){return Ko.text},function(e){var t=q(),i=L(t);W(i,function(){return Ko.text}),D(e,t)}),F(n,function(e){return U(i,e)},function(){return P(i)}),D(e,n),R()}(fe(ue,2),{}),H(function(){He(J,P(g)),He(X,P(c)),He(ee,P(p))}),tt(J,"clientWidth",function(e){return U(l,e)}),D(e,_),R()}var _c=k('<div id="bgm-player" style="display:none"></div> <!> <!>',1);void 0===window.ResizeObserver&&(window.ResizeObserver=gt);var Hc=function(e){e.preventDefault(),e.returnValue=""};window.addEventListener?window.addEventListener("beforeunload",Hc):window.onbeforeunload=Hc,pt(function(e,i){var o,n,r;j(i,!0);var a,s="<div>Loading</div>";function u(){var e=localStorage.getItem("theme"),t=document.head.querySelector("#theme-dark"),i=document.head.querySelector("#theme-light"),o=function(){if(!window.matchMedia)return!1;try{return"not all"!==window.matchMedia("(prefers-color-scheme: dark)").media}catch(c){return!1}}();"dark"===e?o?(t&&(t.media="screen and (prefers-color-scheme: light)"),i&&(i.media="screen and (prefers-color-scheme: dark)"),Zt.value="dark"):(t&&(t.media="all"),i&&(i.media="not all")):o||(i&&(i.media="all"),t&&(t.media="not all"))}function d(e){return v.apply(this,arguments)}function v(){return(v=f(l().m(function e(i){var o,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:o=Array.from(i),r=l().m(function e(){var t,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=o[a],e.p=1,e.n=2,new Promise(function(e,i){var o=new Image;o.onload=e,o.onerror=i,o.src=t});case 2:e.n=4;break;case 3:e.p=3,i=e.v,console.error(i);case 4:return e.p=4,n&&(n.innerHTML="<div>Images</div><div>".concat(a," / ").concat(o.length,"</div>")),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}),a=0;case 1:if(!(a<o.length)){e.n=3;break}return e.d(t(r()),2);case 2:a++,e.n=1;break;case 3:return e.a(2)}},e)}))).apply(this,arguments)}function g(){return p.apply(this,arguments)}function p(){return(p=f(l().m(function e(){var t,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!ai.value){e.n=4;break}return t="Your browser does not support the .avif format.\n Avif images may not be displayed.",e.p=1,e.n=2,new Promise(function(e,t){var i=new Image;i.onload=e,i.onerror=t,i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="});case 2:e.n=4;break;case 3:e.p=3,i=e.v,console.error(i),ei.labelText=t,ei.isOpen=!0;case 4:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function m(){return m=f(l().m(function e(){var t,i,a,c,u,v,p,m,h,b,w,T,I,y,x;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=document.getElementById("lm"),r=document.getElementById("projectSize"),n=document.getElementById("indicator"),t=r?parseInt(r.innerHTML):0,i=n?n.className:"",n&&(s=n.innerHTML),o&&(o.style.pointerEvents="none",o.style.overflow="hidden"),"function"!=typeof window.fetch){e.n=14;break}return e.p=1,e.n=2,fetch("project.json");case 2:if(!(a=e.v)||!a.body){e.n=10;break}c=a.body.getReader(),u=new TextDecoder,v=0,p="";case 3:return e.n=4,c.read();case 4:if(m=e.v,h=m.done,b=m.value,!h){e.n=5;break}return e.a(3,6);case 5:v+=b.length,p+=u.decode(b,{stream:!0}),n&&(n.innerHTML="ind2"===i&&t>0?"".concat(s,"<div>").concat((v/t*100).toFixed(1)," %</div>"):"ind3"===i&&t>0?"".concat(s,"<div>").concat((v/1e6).toFixed(1),"/").concat((t/1e6).toFixed(1)," MB</div>"):"".concat(s,"<div>").concat((v/1e6).toFixed(1)," MB</div>")),e.n=3;break;case 6:if(o&&(o.style.height="0"),w=JSON.parse(p),T=Po(w),!(I=Ro.safeParse(T)).success){e.n=9;break}if(qo(I.data),!(app.preloadExternalImages&&ri.size>0)){e.n=7;break}return e.n=7,d(ri);case 7:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=8,g();case 8:e.n=10;break;case 9:ei.labelText="Failed to load data.",ei.isOpen=!0,console.error(I.error);case 10:e.n=13;break;case 11:if(e.p=11,x=e.v,console.error(x),o&&(o.style.height="0"),qo(JSON.parse(JSON.stringify(app))),!(app.preloadExternalImages&&ri.size>0)){e.n=12;break}return e.n=12,d(ri);case 12:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=13,g();case 13:e.n=15;break;case 14:(y=new XMLHttpRequest).open("GET","project.json",!0),y.onprogress=function(e){n&&(n.innerHTML="ind2"===i&&t>0?"".concat(s,"<div>").concat((e.loaded/t*100).toFixed(1)," %</div>"):"ind3"===i&&t>0?"".concat(s,"<div>").concat((e.loaded/1e6).toFixed(1),"/").concat((t/1e6).toFixed(1)," MB</div>"):"".concat(s,"<div>").concat((e.loaded/1e6).toFixed(1)," MB</div>"))},y.onload=f(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:if(o&&(o.style.height="0"),200!==y.status){e.n=2;break}if(qo(JSON.parse(y.responseText)),!(app.preloadExternalImages&&app.externalImages.size>0)){e.n=1;break}return e.n=1,d(app.externalImages);case 1:e.n=3;break;case 2:qo(JSON.parse(JSON.stringify(app)));case 3:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=4,g();case 4:return e.a(2)}},e)})),y.send();case 15:return e.a(2)}},e,null,[[1,11]])})),m.apply(this,arguments)}B(function(){ei.isOpen&&(a.close(),a.open(),ei.isOpen=!1)}),Q(function(){window.debugApp=app,u(),function(){Ii.apply(this,arguments)}(),function(){m.apply(this,arguments)}(),O(function(){Xt.update(function(e){return null==e||e.destroy(),null})})});var h=_c(),b=fe(L(h),2);Gc(b,{});var w=fe(b,2);F(vt(w,{get labelText(){return ei.labelText},get timeoutMs(){return ei.timeoutMs},children:function(e,t){Me(e,{class:"text-center"})},$$slots:{default:!0}}),function(e){return a=e},function(){return a}),D(e,h),R()},{target:document.getElementById("app")})}}})}();
